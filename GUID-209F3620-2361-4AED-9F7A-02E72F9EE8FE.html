<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Parent and Child without IPC"/>
<meta name="DC.Relation" scheme="URI" content="GUID-ADB9AD91-37A2-4FE6-B378-C43CD0A7B513.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E2DE2C6F-E071-5E88-96F1-D71DDED84609.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D79380CF-22B5-5865-9366-44118E8ECA2E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C4C85189-BA6F-5F11-ABB3-727D8C1F5984.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-AF07AD54-86F1-5DB7-80FF-633A559DA4BD.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-ADB9AD91-37A2-4FE6-B378-C43CD0A7B513.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-209F3620-2361-4AED-9F7A-02E72F9EE8FE"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Parent and Child without IPC</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-209F3620-2361-4AED-9F7A-02E72F9EE8FE"><a name="GUID-209F3620-2361-4AED-9F7A-02E72F9EE8FE"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2381103 id2381193 id2381201 id2381344 id2381410 id2381418 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html">Generic OS Services Guide</a> &gt; <a href="GUID-E2DE2C6F-E071-5E88-96F1-D71DDED84609.html">Generic Open Libraries</a> &gt; <a href="GUID-D79380CF-22B5-5865-9366-44118E8ECA2E.html">Open Environment Core (P.I.P.S.)</a> &gt; <a href="GUID-C4C85189-BA6F-5F11-ABB3-727D8C1F5984.html">P.I.P.S. Porting Tutorials</a> &gt; <a href="GUID-AF07AD54-86F1-5DB7-80FF-633A559DA4BD.html">Creating Processes and Threads</a> &gt; <a href="GUID-ADB9AD91-37A2-4FE6-B378-C43CD0A7B513.html" title="P.I.P.S. supports some industry standard alternatives for fork() and exec() while creating child processes. The scenarios are discussed in the following sections:">Alternatives to fork() and exec() for creating child processes</a> &gt; </div>
<h1 class="topictitle1">Parent
and Child without IPC</h1>
<div>
<p>In this scenario, the parent process creates the child, but there is no
subsequent communication between the two (except maybe the parent waiting
for termination of the child via use of the <a href="GUID-8F5C89A4-7813-32C7-973E-F7F0F3690BC6.html"><span class="apiname">waitpid()</span></a> function).</p>

<p>Rather than use the <samp class="codeph">fork()</samp>/<samp class="codeph">exec()</samp> combination
to achieve this the <a href="GUID-E7C4DE71-BC5B-34AE-ACB3-C34A0DB1FC16.html"><span class="apiname">posix_spawn()</span></a> API can be used instead.
This API will create a process by a single API call. Additionally, actions
can be performed on inherited file descriptors to change access before the
child's main is called. For more detailed information on the <a href="GUID-E7C4DE71-BC5B-34AE-ACB3-C34A0DB1FC16.html"><span class="apiname">posix_spawn()</span></a> function
consult the relevant Open Group standard pages available at <a href="http://www.opengroup.org" target="_blank">http:\\www.opengroup.org</a>.</p>

<p><strong>Parent process <samp class="codeph">fork()</samp> and <samp class="codeph">exec()</samp> functions</strong></p>

<p>The following code shows how the creation of a child process can be implemented
using the <samp class="codeph">fork()</samp> and <samp class="codeph">exec()</samp> functions. Note
that inclusion of header files has been omitted for clarity. </p>

<pre class="codeblock">int main(int argc, char *argv[])
{
  pid_t Childpid = fork();
     
  if(Childpid == 0)
  {
      //Running in Child process

      //exec() to replace the child process executable
      char execFileName[] = "/root/PortDoc/Example0_c/Posix/child/ChildProg";

      execl(execFileName,NULL);
  }
  else
  {
     //Running in parent process

     //Wait for the child process to terminate
     waitpid(Childpid,NULL,0);
     
     printf("\r\n*** Child process finished ***\r\n");
     
  }
   
  return EXIT_SUCCESS;
}
</pre>

<p><strong>Using the <samp class="codeph">posix_spawn()</samp> function</strong></p>

<p>The following code shows how the above can be modified to use the <samp class="codeph">posix_spawn()</samp> operation.</p>

<pre class="codeblock">int main(int argc, char *argv[])
{
   pid_t Childpid;
   char execFileName[] = "/root/PortDoc/Example0_c/Symbian/child/ChildProg";
   
   int RetVal= posix_spawn(&amp;Childpid,execFileName,NULL,NULL,NULL,NULL);
   
   (void)waitpid(Childpid,NULL,0);
   
   printf("\r\n*** Child process finished ***\r\n");
    
   return EXIT_SUCCESS;
}
</pre>

<p><strong>Child process example</strong></p>

<p>The child code shown is unaffected by the mechanism used to spawn it, that
is, <samp class="codeph">fork()</samp>/<samp class="codeph">exec()</samp> or <a href="GUID-E7C4DE71-BC5B-34AE-ACB3-C34A0DB1FC16.html"><span class="apiname">posix_spawn()</span></a>,
but an example is shown below for completeness.</p>

<pre class="codeblock">int main(void)
{
    printf("\r\n*** Child Running ***\r\n");
    
    return EXIT_SUCCESS;
}
</pre>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-ADB9AD91-37A2-4FE6-B378-C43CD0A7B513.html" title="P.I.P.S. supports some industry standard alternatives for fork() and exec() while creating child processes. The scenarios are discussed in the following sections:">Alternatives to fork() and exec() for creating child processes</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>