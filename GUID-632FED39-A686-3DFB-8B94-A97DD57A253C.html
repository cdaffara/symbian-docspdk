<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="TMsvServerStoreManager"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-632FED39-A686-3DFB-8B94-A97DD57A253C"/>

<title>TMsvServerStoreManager</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-632FED39-A686-3DFB-8B94-A97DD57A253C"><a name="GUID-632FED39-A686-3DFB-8B94-A97DD57A253C"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0;
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">TMsvServerStoreManager Class Reference</h1>
	<table class="signature"><tr><td>class TMsvServerStoreManager : public MMsvStoreManager</td></tr></table><div class="section"><div>
			<p>Provides implementation of the File Access APIs at the server-side. This class has direct access to the Message store, unlike the client version of it. This can be used by the server side classed to access the store and attachment entries.</p>

			<p>
				<a href="GUID-A47FAC98-FAC8-3919-B6F5-535A7D6AC9D8.html#GUID-A47FAC98-FAC8-3919-B6F5-535A7D6AC9D8">MMsvStoreManager</a> , <a href="GUID-632FED39-A686-3DFB-8B94-A97DD57A253C.html#GUID-632FED39-A686-3DFB-8B94-A97DD57A253C">TMsvServerStoreManager</a> implements <a href="GUID-A47FAC98-FAC8-3919-B6F5-535A7D6AC9D8.html#GUID-A47FAC98-FAC8-3919-B6F5-535A7D6AC9D8">MMsvStoreManager</a>  </p>

		</div></div>
<div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">TMsvServerStoreManager<ul class="derivation"><li class="derivation-depth-1 "><a href="GUID-A47FAC98-FAC8-3919-B6F5-535A7D6AC9D8.html">MMsvStoreManager</a></li></ul></li></ul></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-F9E44448-68D7-33C5-AC86-36AC5AE3F120">TMsvServerStoreManager</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-3EC2AD01-2E00-374E-95B0-ECE73A4252B5">AttachmentFilePathL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-4FD8BD1F-C3F6-322D-B2B0-F8E77E1FE41E">BodyTextFilePathL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-7BBFD1DC-7728-38D0-BBE2-595F39DDE597">CreateAttachmentForWriteL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-85A0CA5C-8829-386D-A579-861A1EC4A688">CreatePlainTextFileL</a>(<a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;, <a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-D22BFC1D-E3A3-3916-812F-F54F1351D07F">CreateShareProtectedAttachmentForWriteL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-16D45E41-FD3D-3005-BDD2-67C7F0D9BE18">DeleteAttachment</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-ECEC0AFB-93BD-380C-A9E9-05F3F535889D">DeleteFileStoreL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-DC82AE46-53CB-30FA-AA0E-93A9040A9874">DeletePlainTextFileL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-7611B4C8-86B8-38BC-AAFA-78A9B794B32D">FileExistsL</a>(const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-CDD18822-639C-3997-8DE4-52CDC9B46982">FileStoreExistsL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-CB5CF791-3CBF-3C6E-B8B9-F760F6E016B5">OpenAttachmentForWriteL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-634C95D6-A249-3171-831D-BEF61E830ED5">OpenAttachmentL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-C90C47BF-DAA6-33C3-8711-730D4ED8DE69">OpenBodyTextFileForReadL</a>(<a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;, <a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-3B8A4C44-3B9E-31FE-AB0C-04366A44198E">OpenFileStoreForRead</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-F345C9ED-1337-3947-8479-98364E815356">OpenTempStoreFileL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-ED207023-4E62-3D16-8F9F-F2D5A7AD47CF">RenameAttachment</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-FAF53BD5-858C-3035-AC31-B6802A000A0B">ReplaceAttachmentForWriteL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-930599AE-C8EC-3363-BD2F-4545E4ECD49E">ReplaceFileStoreL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-3C1A5861-88E2-3C66-8D1E-35FEBACBC399">ReplacePlainTextFileL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-3A1852C5-3D68-315D-B66B-D77FB7BCFCB2">SetMsvServerAndFileSession</a>(<a href="GUID-86BD6DD3-C73B-3F93-83BC-8B9050D083B1.html">CMsvServer</a> &amp;, <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-8D10A617-5EDA-3F20-AD98-422195FA6839">CheckFileNameLengthAndTrimL</a>(const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-2CFB62DC-9A76-3136-9A3B-76AAF43E316F">CreateAttachmentL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;, <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-DF99C2F5-DA48-37E3-923A-EAF408410BB1">GenerateFileNameIfExistsL</a>(<a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-50F487D0-D4E7-3348-B0F4-A2D6D351B469">GetFilePath</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-0B9C8884-6BFF-35E2-AA6F-E4057B85AFCF.html">TFileName</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-1503C940-FE96-3F0D-908A-0722266D4BF3">GetOwningServiceAndFilePath</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;, <a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-E3DC2198-C931-3F4D-A801-34059635A72B">GetStoreFileName</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-0B9C8884-6BFF-35E2-AA6F-E4057B85AFCF.html">TFileName</a> &amp;)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Attributes</th></tr></thead><tbody><tr><td align="right" valign="top">
					<a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> *</td><td><a href="#GUID-C6FA8884-F74F-3982-ABAD-569F9075E340">iFs</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-86BD6DD3-C73B-3F93-83BC-8B9050D083B1.html">CMsvServer</a> *</td><td><a href="#GUID-9774872A-3F33-30F9-A084-DA2DCF512430">iMsvServer</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Constructor &amp; Destructor Documentation</h1><div class="nested1" id="GUID-F9E44448-68D7-33C5-AC86-36AC5AE3F120"><a name="GUID-F9E44448-68D7-33C5-AC86-36AC5AE3F120"><!-- --></a>
		<h2 class="topictitle2">TMsvServerStoreManager()</h2>
		<table class="signature"><tr><td>TMsvServerStoreManager</td><td>(</td><td>)</td><td/></tr></table><div class="section"></div>

	</div>
<h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-3EC2AD01-2E00-374E-95B0-ECE73A4252B5"><a name="GUID-3EC2AD01-2E00-374E-95B0-ECE73A4252B5"><!-- --></a>
		<h2 class="topictitle2">AttachmentFilePathL(TMsvId, TDes &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>AttachmentFilePathL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilePath</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Queries the message server for the file path where attachments are stored for the a particular message entry.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The message entry for which the attachment path is required.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilePath</td><td>On return, this will be set to the file path where the attachment should be stored.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-4FD8BD1F-C3F6-322D-B2B0-F8E77E1FE41E"><a name="GUID-4FD8BD1F-C3F6-322D-B2B0-F8E77E1FE41E"><!-- --></a>
		<h2 class="topictitle2">BodyTextFilePathL(TMsvId, TDes &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>BodyTextFilePathL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aBodyTextId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilePath</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Gets the path for the file in message store for which the message Id is passed. </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aBodyTextId</td><td>The Id of the body text for which the path is required.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilePath</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-8D10A617-5EDA-3F20-AD98-422195FA6839"><a name="GUID-8D10A617-5EDA-3F20-AD98-422195FA6839"><!-- --></a>
		<h2 class="topictitle2">CheckFileNameLengthAndTrimL(const TDesC &amp;, TDes &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>CheckFileNameLengthAndTrimL</td><td>(</td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFileName</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[private]</td></tr></table><div class="section"><div>
				<p>Checks if the filename length is greater than KMaxFileName(256)</p>

				<p>If the filename is greater than KMaxFileName then it truncates the filename</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td>file path where the file is being created.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFileName</td><td>name of the file whose length if being checked.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-7BBFD1DC-7728-38D0-BBE2-595F39DDE597"><a name="GUID-7BBFD1DC-7728-38D0-BBE2-595F39DDE597"><!-- --></a>
		<h2 class="topictitle2">CreateAttachmentForWriteL(TMsvId, TDes &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>CreateAttachmentForWriteL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilename,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Allows clients to create a new empty file and allows clients to stream data to it.</p>

				<p>Creates a new attachment file in the message store for the message entry specified by the aEntryId parameter. The attachment filename is set to the filename indicated by the aFilename parameter. The empty attachment file is passed back to the client using an opened file handle to the file in the message store.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrAlreadyexists, if the file with the same name already existed the directory. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry for which an attachment needs to be created in the message store  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilename</td><td>The name of the attachment file to be created  </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The created file handle for the attachment file.The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-2CFB62DC-9A76-3136-9A3B-76AAF43E316F"><a name="GUID-2CFB62DC-9A76-3136-9A3B-76AAF43E316F"><!-- --></a>
		<h2 class="topictitle2">CreateAttachmentL(TMsvId, TDes &amp;, RFile &amp;, RFs &amp;, TBool)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>CreateAttachmentL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilename,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;</td><td>aFs,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td>aSharedAccess = EFalse</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[private]</td></tr></table><div class="section"></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td> </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilename</td><td> </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td> </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp; aFs</td><td> </td></tr><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> aSharedAccess = EFalse</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-85A0CA5C-8829-386D-A579-861A1EC4A688"><a name="GUID-85A0CA5C-8829-386D-A579-861A1EC4A688"><!-- --></a>
		<h2 class="topictitle2">CreatePlainTextFileL(RFile &amp;, TMsvId)</h2>
		<table class="signature"><tr><td>void</td><td>CreatePlainTextFileL</td><td>(</td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aBodyTextId</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Creates the <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0">RFile</a> in the aFilepath is passed. </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td> </td></tr><tr class="bg"><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aBodyTextId</td><td>The Id of the bodytext.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-D22BFC1D-E3A3-3916-812F-F54F1351D07F"><a name="GUID-D22BFC1D-E3A3-3916-812F-F54F1351D07F"><!-- --></a>
		<h2 class="topictitle2">CreateShareProtectedAttachmentForWriteL(TMsvId, TDes &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>CreateShareProtectedAttachmentForWriteL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilename,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Creates an Attachment using a ShareProtected RFs.Used in the case when a message contains a DRM attachment</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrAlreadyexists, if the file with the same name already existed the directory. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry for which an attachment needs to be created in the message store  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilename</td><td>The name of the attachment file to be created  </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The created file handle for the attachment file.The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-16D45E41-FD3D-3005-BDD2-67C7F0D9BE18"><a name="GUID-16D45E41-FD3D-3005-BDD2-67C7F0D9BE18"><!-- --></a>
		<h2 class="topictitle2">DeleteAttachment(TMsvId, const TDesC &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>DeleteAttachment</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Allow clients to delete existing attachment files.</p>

				<p>Deletes an existing attachment file in the message store associated with the message entry specified by the aEntryId parameter. The attachment is identified by the file path specified by the aFilePath parameter.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose attachment needs to be deleted from the message store  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td>The name and path of the attachment file to be deleted  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-ECEC0AFB-93BD-380C-A9E9-05F3F535889D"><a name="GUID-ECEC0AFB-93BD-380C-A9E9-05F3F535889D"><!-- --></a>
		<h2 class="topictitle2">DeleteFileStoreL(TMsvId)</h2>
		<table class="signature"><tr><td>void</td><td>DeleteFileStoreL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId</td><td>)</td><td>[virtual]</td></tr></table><div class="section"><div>
				<p>Deletes the store file associated with the message entry as specified by the aEntryId. Also attempts to delete the temporary store file if one exists.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose store needs to be deleted  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-DC82AE46-53CB-30FA-AA0E-93A9040A9874"><a name="GUID-DC82AE46-53CB-30FA-AA0E-93A9040A9874"><!-- --></a>
		<h2 class="topictitle2">DeletePlainTextFileL(TMsvId)</h2>
		<table class="signature"><tr><td>void</td><td>DeletePlainTextFileL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aBodyTextId</td><td>)</td><td>[virtual]</td></tr></table><div class="section"><div>
				<p>Deletes the <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0">RFile</a> in the aFilepath passed. </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aBodyTextId</td><td>The Id of the bodytext.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-7611B4C8-86B8-38BC-AAFA-78A9B794B32D"><a name="GUID-7611B4C8-86B8-38BC-AAFA-78A9B794B32D"><!-- --></a>
		<h2 class="topictitle2">FileExistsL(const TDesC &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>FileExistsL</td><td>(</td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath</td><td>)</td><td>[virtual]</td></tr></table><div class="section"><div>
				<p>Check if an attachment file with the given path and name already exists.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td>The full path specification of the file.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-CDD18822-639C-3997-8DE4-52CDC9B46982"><a name="GUID-CDD18822-639C-3997-8DE4-52CDC9B46982"><!-- --></a>
		<h2 class="topictitle2">FileStoreExistsL(TMsvId)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>FileStoreExistsL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId</td><td>)</td><td>const [virtual]</td></tr></table><div class="section"><div>
				<p>Queries the message server to check if a store file exists for the message entry specified by the aEntryId parameter.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry for whom the check for existance of store is being done  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-DF99C2F5-DA48-37E3-923A-EAF408410BB1"><a name="GUID-DF99C2F5-DA48-37E3-923A-EAF408410BB1"><!-- --></a>
		<h2 class="topictitle2">GenerateFileNameIfExistsL(TDes &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>GenerateFileNameIfExistsL</td><td>(</td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFileName</td><td>)</td><td>[private]</td></tr></table><div class="section"></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFileName</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-50F487D0-D4E7-3348-B0F4-A2D6D351B469"><a name="GUID-50F487D0-D4E7-3348-B0F4-A2D6D351B469"><!-- --></a>
		<h2 class="topictitle2">GetFilePath(TMsvId, TFileName &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>GetFilePath</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-0B9C8884-6BFF-35E2-AA6F-E4057B85AFCF.html">TFileName</a> &amp;</td><td>aDirectory</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">const [private]</td></tr></table><div class="section"><div>
				<p>Gets the filepath for the storage of binary files associated with the context</p>

				<p>If the directory specified in the context does not exist, it is created.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>index id of the entry whose filepath is requested  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-0B9C8884-6BFF-35E2-AA6F-E4057B85AFCF.html">TFileName</a> &amp; aDirectory</td><td>On return, contains the binary file directory path  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-1503C940-FE96-3F0D-908A-0722266D4BF3"><a name="GUID-1503C940-FE96-3F0D-908A-0722266D4BF3"><!-- --></a>
		<h2 class="topictitle2">GetOwningServiceAndFilePath(TMsvId, TDes &amp;, TMsvId &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>GetOwningServiceAndFilePath</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilePath,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> &amp;</td><td>aOwningService</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">const [private]</td></tr></table><div class="section"></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td> </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilePath</td><td> </td></tr><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> &amp; aOwningService</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-E3DC2198-C931-3F4D-A801-34059635A72B"><a name="GUID-E3DC2198-C931-3F4D-A801-34059635A72B"><!-- --></a>
		<h2 class="topictitle2">GetStoreFileName(TMsvId, TFileName &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>GetStoreFileName</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-0B9C8884-6BFF-35E2-AA6F-E4057B85AFCF.html">TFileName</a> &amp;</td><td>aFileName</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">const [private]</td></tr></table><div class="section"><div>
				<p>Gets the filestore name associated with the context</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>Index id of the entry whose store filename is requested  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-0B9C8884-6BFF-35E2-AA6F-E4057B85AFCF.html">TFileName</a> &amp; aFileName</td><td>On return, contains the store file name for the context  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-CB5CF791-3CBF-3C6E-B8B9-F760F6E016B5"><a name="GUID-CB5CF791-3CBF-3C6E-B8B9-F760F6E016B5"><!-- --></a>
		<h2 class="topictitle2">OpenAttachmentForWriteL(TMsvId, const TDesC &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>OpenAttachmentForWriteL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Allows clients to open an attachment file for writing.</p>

				<p>Opens an existing attachment file in the message associated with the message entry specified by the aEntryId parameter. The attachment is identified by the file path specified by the aFilePath parameter. The attachment file is returned as a read/write file handle to the file in the message store.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose attachment needs to be opened/read from the message store  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td>The name and path of the attachment file to be opened  </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The opened file handle for the attachment file.The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-634C95D6-A249-3171-831D-BEF61E830ED5"><a name="GUID-634C95D6-A249-3171-831D-BEF61E830ED5"><!-- --></a>
		<h2 class="topictitle2">OpenAttachmentL(TMsvId, const TDesC &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>OpenAttachmentL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Allows clients to view attachment files.</p>

				<p>Opens an existing attachment file in the message associated with the message entry specified by the aEntryId parameter. The attachment is identified by the file path specified by the aFilePath parameter. The attachment file is returned as a read-only file handle to the file in the message store.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose attachment needs to be opened/read from the message store  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td>The name and path of the attachment file to be opened  </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The opened file handle for the attachment file.The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-C90C47BF-DAA6-33C3-8711-730D4ED8DE69"><a name="GUID-C90C47BF-DAA6-33C3-8711-730D4ED8DE69"><!-- --></a>
		<h2 class="topictitle2">OpenBodyTextFileForReadL(RFile &amp;, TMsvId, const TDesC &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>OpenBodyTextFileForReadL</td><td>(</td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aBodyTextId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Opens the <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0">RFile</a> for which the aFilepath is passed in read mode. </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td> </td></tr><tr class="bg"><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aBodyTextId</td><td>The Id of the bodytext.  </td></tr><tr><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-3B8A4C44-3B9E-31FE-AB0C-04366A44198E"><a name="GUID-3B8A4C44-3B9E-31FE-AB0C-04366A44198E"><!-- --></a>
		<h2 class="topictitle2">OpenFileStoreForRead(TMsvId, RFile &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>OpenFileStoreForRead</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Allows the message store classes to read the store file for a particular message entry.</p>

				<p>Opens a message store file associated with the message entry specified by the aEntryId parameter. This method returns an open read-only file handle to the message store file.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNotFound if file is not found else any of the system wide errors </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose store needs to be opened/read  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The opened file hanlde to the store . The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-F345C9ED-1337-3947-8479-98364E815356"><a name="GUID-F345C9ED-1337-3947-8479-98364E815356"><!-- --></a>
		<h2 class="topictitle2">OpenTempStoreFileL(TMsvId, RFile &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>OpenTempStoreFileL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Opens a temporary store file associated with the message entry specified by the aEntryId parameter. This method returns an open read-write file handle with an exclusive share to the temporary store file. The temporary store file is defined as &lt;store_filename&gt;.new. Data can be streamed to the temporary store file. It is expected that once the temporary store file has been written to and then closed, a call to ReplaceFileStoreL is required to replace the old store file with this temporary one.</p>

				<p>Along with ReplaceFileStoreL, this method allows the message store classes to write data to the store file for a particular message entry.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose store needs to be opened/read  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The opened file hanlde to the store . The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-ED207023-4E62-3D16-8F9F-F2D5A7AD47CF"><a name="GUID-ED207023-4E62-3D16-8F9F-F2D5A7AD47CF"><!-- --></a>
		<h2 class="topictitle2">RenameAttachment(TMsvId, const TDesC &amp;, const TDesC &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>RenameAttachment</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aOldFilePath,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aNewName</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Renames an existing attachment file.</p>

				<p>Renames an existing attachment file in the message store associated with the message entry specified by the aEntryId parameter. The attachment is identified by the file path specified by the aOldFilePath parameter and renamed to the name supplied in the aNewName paramter.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose attachment needs to be renamed from the message store  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aOldFilePath</td><td>The name and path of the attachment file to be renamed.  </td></tr><tr><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aNewName</td><td>The new name of the attachment file.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-FAF53BD5-858C-3035-AC31-B6802A000A0B"><a name="GUID-FAF53BD5-858C-3035-AC31-B6802A000A0B"><!-- --></a>
		<h2 class="topictitle2">ReplaceAttachmentForWriteL(TMsvId, TDes &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>ReplaceAttachmentForWriteL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilename,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[virtual]</td></tr></table><div class="section"><div>
				<p>Allows clients to replace an existing attachment file and allows clients to stream data to it.</p>

				<p>Replaces an existing attachment file in the message store for the message entry specified by the aEntryId parameter. The attachment filename is set to the filename indicated by the aFilename parameter. If an attachment with the supplied name does not exist, a new file is created. The empty attachment file is passed back to the client using an opened file handle to the file in the message store.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry for which an attachment needs to be created in the message store  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilename</td><td>The name of the attachment file to be created  </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The created file handle for the attachment file.The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-930599AE-C8EC-3363-BD2F-4545E4ECD49E"><a name="GUID-930599AE-C8EC-3363-BD2F-4545E4ECD49E"><!-- --></a>
		<h2 class="topictitle2">ReplaceFileStoreL(TMsvId)</h2>
		<table class="signature"><tr><td>void</td><td>ReplaceFileStoreL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId</td><td>)</td><td>[virtual]</td></tr></table><div class="section"><div>
				<p>Replaces the current store file with the temporary store file, created from OpenTempStoreFileL, for the message entry as specified by the aEntryId parameter. The method replaces the store file with the temporary file (&lt;store_filename.new&gt;) and if successful, will then delete the temporary store file. This method assumes that the temporary file exists, otherwise a KErrNotFound error occurs.</p>

				<p>Along with OpenTempStoreFileL, this method allows the message store classes to write data to the store file for a particular message entry.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose store needs to be replaced/overwritten  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-3C1A5861-88E2-3C66-8D1E-35FEBACBC399"><a name="GUID-3C1A5861-88E2-3C66-8D1E-35FEBACBC399"><!-- --></a>
		<h2 class="topictitle2">ReplacePlainTextFileL(TMsvId)</h2>
		<table class="signature"><tr><td>void</td><td>ReplacePlainTextFileL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aBodyTextId</td><td>)</td><td>[virtual]</td></tr></table><div class="section"><div>
				<p>Replaces a temporary <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0">RFile</a> with a new <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0">RFile</a>. </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aBodyTextId</td><td>The Id of the bodytext.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-3A1852C5-3D68-315D-B66B-D77FB7BCFCB2"><a name="GUID-3A1852C5-3D68-315D-B66B-D77FB7BCFCB2"><!-- --></a>
		<h2 class="topictitle2">SetMsvServerAndFileSession(CMsvServer &amp;, RFs &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>SetMsvServerAndFileSession</td><td>(</td><td><a href="GUID-86BD6DD3-C73B-3F93-83BC-8B9050D083B1.html">CMsvServer</a> &amp;</td><td>aMsvServer,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;</td><td>aFs</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-86BD6DD3-C73B-3F93-83BC-8B9050D083B1.html">CMsvServer</a> &amp; aMsvServer</td><td> </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp; aFs</td><td> </td></tr></table></div>

	</div>
<h1 class="pageHeading topictitle1">Member Data Documentation</h1><div class="nested1" id="GUID-C6FA8884-F74F-3982-ABAD-569F9075E340"><a name="GUID-C6FA8884-F74F-3982-ABAD-569F9075E340"><!-- --></a>
		<h2 class="topictitle2">
					RFs * iFs</h2>
		<table class="signature"><tr><td>
					<a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> *</td><td>iFs</td><td>[private]</td></tr></table><div class="section"></div>

	</div>
<div class="nested1" id="GUID-9774872A-3F33-30F9-A084-DA2DCF512430"><a name="GUID-9774872A-3F33-30F9-A084-DA2DCF512430"><!-- --></a>
		<h2 class="topictitle2">
					CMsvServer * iMsvServer</h2>
		<table class="signature"><tr><td>
					<a href="GUID-86BD6DD3-C73B-3F93-83BC-8B9050D083B1.html">CMsvServer</a> *</td><td>iMsvServer</td><td>[private]</td></tr></table><div class="section"></div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>