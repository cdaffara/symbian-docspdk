<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Querying URIs from the URI List"/>
<meta name="DC.Relation" scheme="URI" content="GUID-956E7DD6-C7FA-5F0A-9C86-D7FE58373A25.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C0D38954-2FC5-4E8B-BC11-229464DCF16C.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-939C0EE6-0931-4898-842B-9D0C9D61DD2F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C0E7CBC4-C525-4CA8-8D21-E7E2ABE396CE.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-956E7DD6-C7FA-5F0A-9C86-D7FE58373A25.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Querying URIs from the URI List</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387372 id2387627 id2387636 id2387644 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C0D38954-2FC5-4E8B-BC11-229464DCF16C.html">High Level Internet Protocols Guide</a> &gt; <a href="GUID-939C0EE6-0931-4898-842B-9D0C9D61DD2F.html">Application Layer Plugins and Utils</a> &gt; <a href="GUID-C0E7CBC4-C525-4CA8-8D21-E7E2ABE396CE.html">URI Permission Services</a> &gt; <a href="GUID-956E7DD6-C7FA-5F0A-9C86-D7FE58373A25.html">WhiteList/BlackList URI Services</a> &gt; </div>
<h1 class="topictitle1">Querying URIs from the URI List</h1>
<div><p>The <a href="GUID-6F5E2A42-5047-3AB2-9929-D893B88F2BD2.html"><span class="apiname">RInetUriList</span></a> class provides the following APIs for retrieving the information of URIs present in the list: </p>
 <ul><li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-6F99901E-B8A4-5E42-B874-066171E88A69"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-6F99901E-B8A4-5E42-B874-066171E88A69"><!-- --></a><p>API for retrieving the number of URIs present in the list, based on a given service type and list type: </p>
 <p> <samp class="codeph">TInt Count ( InetUriList::TServiceType aServiceType,
             InetUriList::TListType aListType )</samp>  </p>
 <p>If the URI count of both the lists is required, then set <samp class="codeph">aListType</samp> parameter to <samp class="codeph">EBlackList</samp> and <samp class="codeph">EWhiteList</samp>. </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-F4E514BF-BF07-5A4C-8A0D-9121536FB178"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-F4E514BF-BF07-5A4C-8A0D-9121536FB178"><!-- --></a><p>API for retrieving the list type of a given URI: </p>
 <p> <samp class="codeph">TInt GetListType ( const TDesC8&amp; aUri,
             InetUriList::TServiceType aServiceType, InetUriList::TListType&amp; aListType
             )</samp>  </p>
 <p>The list type will be returned through <samp class="codeph">aListType</samp> as an out parameter. If the URI is not found, then return type will be <samp class="codeph">KErrUriNotFound</samp>. </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-50D349EE-CA38-54D8-96AB-FA2AAF4AA6F6"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-50D349EE-CA38-54D8-96AB-FA2AAF4AA6F6"><!-- --></a><p>API for querying URIs in the list: </p>
 <p> <samp class="codeph">void QueryUriL ( const TQueryArgs&amp; aArgs,
             MQueryResultsCallback* aQueryCallback, MUriCustomiser* aUriCustomiser =NULL
             )</samp>  </p>
 <p>Based on the the <samp class="codeph">TQueryArgs</samp> parameter, this API supports different query operations. <samp class="codeph">TQueryArgs</samp> is template class which provides four constructors. The argument types for <samp class="codeph">TQueryArgs</samp> can be a combination of URI, service type, list type, and match type. The service type is mandatory for the query operation. Based on the <samp class="codeph">TQueryArgs</samp> parameter combination, the following types of queries can be performed: </p>
 <ul><li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-EDB3E659-648E-52C5-AB8C-D572675163F1"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-EDB3E659-648E-52C5-AB8C-D572675163F1"><!-- --></a><p>Find existence of a URI of a given service type. </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-76B6918F-6085-5DF1-946C-A6899EA61E4C"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-76B6918F-6085-5DF1-946C-A6899EA61E4C"><!-- --></a><p>Find all URIs matching the path of a specified URI and service type. </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-733C2073-4619-544E-8E40-66E62D96A9C1"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-733C2073-4619-544E-8E40-66E62D96A9C1"><!-- --></a><p>Find all URIs matching the domain name of a specified URI and service type. </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-5582DFC2-0C78-5D61-B13A-099F1F185AC7"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-5582DFC2-0C78-5D61-B13A-099F1F185AC7"><!-- --></a><p>Find all the URIs matching the prefix path of a specified URI and service type. </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-6B6427C9-2099-566C-87E6-D6E9C856B5A6"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-6B6427C9-2099-566C-87E6-D6E9C856B5A6"><!-- --></a><p>Find all the URIs matching the suffix path of a specified URI and service type. </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-3F62B201-A0AB-599F-BB8E-A287401E2495"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-3F62B201-A0AB-599F-BB8E-A287401E2495"><!-- --></a><p>Find all the URIs of a specified service type and list type. </p>
 </li>
 </ul>
 </li>
 </ul>
 <p>The <a href="GUID-82F7F1DC-127F-3111-A7F0-9F32744A1CA3.html"><span class="apiname">aQueryCallback</span></a> parameter of the <a href="GUID-F57CA961-6151-3FBB-9FAB-4D8F507248E7.html"><span class="apiname">QueryUriL</span></a> API provides a callback interface that needs to be implemented by the calling client. The calling client class should derive from the <a href="GUID-5D5672DF-DDB0-336B-9A96-DE7D55B937FE.html"><span class="apiname">MQueryResultsCallback</span></a> class and provide implementation for the <a href="GUID-5D5672DF-DDB0-336B-9A96-DE7D55B937FE.html#GUID-5D5672DF-DDB0-336B-9A96-DE7D55B937FE__GUID-399C8754-C6F0-3ED0-A0E9-12EA1B91068A"><span class="apiname">MQueryResultsCallback::OnQueryResultsL()</span></a> function. The optional <a href="GUID-AC04057D-75D3-3214-86BD-F20AD98AD6A0.html"><span class="apiname">aUriCustomiser</span></a> parameter of the <a href="GUID-F57CA961-6151-3FBB-9FAB-4D8F507248E7.html"><span class="apiname">QueryUriL</span></a> API provides a callback interface for URI customisation by scheme/protocol normalization. The calling client should be derived from the <a href="GUID-B29E0EB7-BB4C-3E54-A844-182EBC4B159D.html"><span class="apiname">MUriCustomiser</span></a> class and provide implementation for the <a href="GUID-B29E0EB7-BB4C-3E54-A844-182EBC4B159D.html#GUID-B29E0EB7-BB4C-3E54-A844-182EBC4B159D__GUID-5ECB0068-0EFD-3FB6-B229-C911C912ADA5"><span class="apiname">MUriCustomiser::OnUriCustomisationL()</span></a> function. Given below are some code samples for performing different queries. </p>
 <pre class="codeblock" id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-4BAAEEC7-50F9-5561-8322-23956F596A29"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-4BAAEEC7-50F9-5561-8322-23956F596A29"><!-- --></a>//Create a Uri
_LIT8(KUri, “http://www.symbian.com/symbianos/email/index.html”);

//Create a session with the server.
    RInetUriList uriListObj;
    uriListObj.OpenL();
    CleanupClosePushL(uriListObj);

//Construct TQueryArgs object with Uri, service type
//and match type. 
    TQueryArgs uriArgs(KUri, EBrowser, EDomain);

//Query the Uri and close the session. 
    uriListObj. QueryUriL(uriArgs, this);
    CleanupStack::PopAndDestroy(&amp;uriListObj);
</pre>
 <p>In the above code sample, all the browsing URIs matching with the domain name <em>www.symbian.com</em> is searched from both BlackList and WhiteList, as list type is not specified. The second parameter is a pointer to the client class that implements the <a href="GUID-5987B8E8-0036-375A-842A-3D424E655593.html"><span class="apiname">OnQueryResultsL()</span></a> call back function. For each matching URI that is found, the <a href="GUID-F57CA961-6151-3FBB-9FAB-4D8F507248E7.html"><span class="apiname">QueryUriL</span></a> function calls the <a href="GUID-F79918C2-87E2-34CC-915C-E4D322F747F5.html"><span class="apiname">OnQueryResultsL</span></a> callback function until it returns <samp class="codeph">EFalse</samp>, or until all matching URIs are passed to it. </p>
 <p>The match type is a value of enumeration <a href="GUID-BCEF56E7-FB35-385E-8F22-82F13249E524.html"><span class="apiname">TURIMatch</span></a>. The searching criteria can be changed by changing the match type. </p>
 <ul><li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-E7924DE0-462B-5222-B395-7C31DE9348CA"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-E7924DE0-462B-5222-B395-7C31DE9348CA"><!-- --></a><p>If the match type is <samp class="codeph">EExact</samp> in the above code sample, only one URI would be returned. </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-94D88299-BAF1-52D9-A5E3-1C6DB13D7A2E"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-94D88299-BAF1-52D9-A5E3-1C6DB13D7A2E"><!-- --></a><p>If the match type is <samp class="codeph">ExactPath</samp>, all the URIs that have the same scheme, domain name, and path would be returned. These URIs might be different only in fragments. </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-646AFE86-0B4B-5684-A12F-7857F5D94825"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-646AFE86-0B4B-5684-A12F-7857F5D94825"><!-- --></a><p>If the match type is <samp class="codeph">EPartialPrefixPath</samp>, all the URIs matching the prefix path and scheme will be returned. </p>
 <p>For example, if the incoming URI is http://www.symbian.com/symbianos/, then the following URIs would match if match type is <samp class="codeph">EPartialPrefixPath</samp>: </p>
 <ul><li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-ED7958FE-3A49-5416-92D3-4C322961D8E7"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-ED7958FE-3A49-5416-92D3-4C322961D8E7"><!-- --></a><p>http://www.symbian.com/symbianos/email/index.html </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-7EA3DA47-FAD8-5662-91D8-4451152F12CA"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-7EA3DA47-FAD8-5662-91D8-4451152F12CA"><!-- --></a><p>http://www.symbian.com/symbianos/solutions/solutions.html </p>
 </li>
 </ul>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-19E488B2-2213-5D16-AF0E-9EBA3927D5FC"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-19E488B2-2213-5D16-AF0E-9EBA3927D5FC"><!-- --></a><p>If the match type is <samp class="codeph">EPartialSuffixPath</samp>, then all the URIs matching suffix path and scheme will be returned. </p>
 <p>For example, if the incoming URI is http://www.symbian.com/index.html, then the following URIs would match if match type is <samp class="codeph">EPartialSuffixPath</samp>: </p>
 <ul><li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-B4E59EAA-E080-5CC0-B5DA-51F536ABF814"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-B4E59EAA-E080-5CC0-B5DA-51F536ABF814"><!-- --></a><p>http://www.symbian.com/symbianos/email/index.html </p>
 </li>
 <li id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-38EC342F-BEA0-5E71-8C2F-BDFFA46B8315"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-38EC342F-BEA0-5E71-8C2F-BDFFA46B8315"><!-- --></a><p>http://www.symbian.com/symbianos/index.html </p>
 </li>
 </ul>
 </li>
 </ul>
 <pre class="codeblock" id="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-6F662156-4B35-5147-8650-8E8A374DBA0D"><a name="GUID-402B5633-1E3A-5F24-8C4F-DA5F04D2557C__GUID-6F662156-4B35-5147-8650-8E8A374DBA0D"><!-- --></a>//Create a session with the server.
    RInetUriList uriListObj;
    uriListObj.OpenL();
    CleanupClosePushL(uriListObj);

//Construct TQueryArgs object with service type and 
//match type.
    TQueryArgs uriArgs(EBrowser);

//Query the Uri and close the session. 
    uriListObj. QueryUriL(uriArgs, this, this);
    CleanupStack::PopAndDestroy(&amp;uriListObj);
</pre>
 <p>The above code sample retrieves all browser URIs of both BlackList and WhiteList types. To retrieve all the URIs for all service types, the caller has to loop for all service types. The third argument of <a href="GUID-F57CA961-6151-3FBB-9FAB-4D8F507248E7.html"><span class="apiname">QueryUriL</span></a> indicates that the caller has implemented the <a href="GUID-422B212E-FE6B-369F-8A6C-ADF8D3D9A1E2.html"><span class="apiname">OnUriCustomisationL()</span></a> callback function, and so the URI will be passed to this callback function for normalization before being passed for a query. </p>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-956E7DD6-C7FA-5F0A-9C86-D7FE58373A25.html">WhiteList/BlackList URI Services</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>