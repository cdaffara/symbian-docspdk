<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Asymmetric ciphers -- HowTo"/>
<meta name="DC.Relation" scheme="URI" content="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5B112A34-1CBA-5B28-A941-27847FC1D30A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Asymmetric ciphers -- HowTo</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2858558 id2859177 id2859238 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html">OS Security Guide</a> &gt; <a href="GUID-5B112A34-1CBA-5B28-A941-27847FC1D30A.html">Cryptography overview</a> &gt; <a href="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html" title="This section provides detailed information on encrypting and decrypting data using Symmetric and Asymmetric algorithms supported by Symbian platform.">Encrypting and Decrypting Data</a> &gt; </div>
<h1 class="topictitle1"> Asymmetric
ciphers -- HowTo</h1>
<div>
<div class="section" id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-CBD15CF0-5E62-5446-847E-9E7E0EB1A25E"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-CBD15CF0-5E62-5446-847E-9E7E0EB1A25E"><!-- --></a><h2 class="sectiontitle"> How do I use
the asymmetric cryptographic framework? </h2> <p>The asymmetric cryptographic
framework consists of the following logically separate concepts: </p>
 <a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-DC7D223E-57B3-5F96-8487-99F9A5A6CB68"><!-- --></a><ol id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-DC7D223E-57B3-5F96-8487-99F9A5A6CB68">
<li id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-DD6E517D-6ABE-5BED-A12C-7F4807B493E1"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-DD6E517D-6ABE-5BED-A12C-7F4807B493E1"><!-- --></a><p>Key storage classes
(For instance, <a href="GUID-5EF9067A-713F-3934-A29E-62F1414D9EF4.html"><span class="apiname">CRSAPublicKey</span></a>, <a href="GUID-2A19BF6D-D333-349B-9F2F-76E2F28A7044.html"><span class="apiname">CDSAPrivateKey</span></a>) </p>
 </li>

<li id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-29151A18-EDC2-546C-A44F-3C746B016EDC"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-29151A18-EDC2-546C-A44F-3C746B016EDC"><!-- --></a><p>Cipher transformation
classes (<a href="GUID-F845CB30-7ABE-3EB6-B1B9-C72581897D0C.html"><span class="apiname">CRSAPKCS1v15Encryptor</span></a>, <a href="GUID-13B5CDC3-CB8A-34C7-ADD2-FAE6D6915412.html"><span class="apiname">CDSASigner</span></a>) </p>
 </li>

<li id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-8E9E241C-5464-5AB7-BD51-59C75218C3EF"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-8E9E241C-5464-5AB7-BD51-59C75218C3EF"><!-- --></a><p>Signature representative
classes (<a href="GUID-27876B1C-C1A7-39C2-9266-0D42A86300B4.html"><span class="apiname">CRSASignature</span></a>, <a href="GUID-83C9D319-CC1B-355D-85EF-D58C42ABCCCA.html"><span class="apiname">CDSASignature</span></a>) </p>
 </li>

</ol>
 <p>The first and third are simply containers for their respective concepts.
Each implementation of item two is responsible for performing one of the four
primitive operations on some data using a key specified at construction. If
the operation is signing or verification, then the transformation outputs
a signature representative class. On the other hand, in the case of encryption
or decryption, input and output consist of binary descriptor data. </p>
 <p>Before
showing some example code, an important note about object ownership. In general,
unless otherwise stated, the following three rules apply. </p>
 <a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-FFBF1C61-CEB0-573E-9003-86BC4F37319B"><!-- --></a><ol id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-FFBF1C61-CEB0-573E-9003-86BC4F37319B">
<li id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-60A066D8-C525-510D-8502-D6FF245D2B78"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-60A066D8-C525-510D-8502-D6FF245D2B78"><!-- --></a><p>All key storage and
signature representative constructors <strong>take ownership</strong> of objects given
to them (typically <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> s). </p>
 </li>

<li id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-E13072F8-7B6A-547F-80A8-AFC1D198C3E8"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-E13072F8-7B6A-547F-80A8-AFC1D198C3E8"><!-- --></a><p>All cipher transformation
classes <strong>only use</strong> objects given to them (typically key storage classes,
signature representatives, and descriptors). </p>
 </li>

<li id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-B4611B8A-F4D5-5209-A9B7-7B9CC237D64E"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-B4611B8A-F4D5-5209-A9B7-7B9CC237D64E"><!-- --></a><p>Any functions that return
pointers to objects (typically the Signer classes) <strong>transfer ownership</strong> of
the returned object to the caller. </p>
 </li>

</ol>
 <p id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-EE3679E5-FE32-5C72-9EDB-B202A1C4E7FB"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-EE3679E5-FE32-5C72-9EDB-B202A1C4E7FB"><!-- --></a><strong>Sample
code for encryption/decryption</strong> </p>
 <p>The following code illustrates
how to encrypt data using an RSA PKCS#1 v1.5 encryptor. It assumes you already
have access to the <a href="GUID-5EF9067A-713F-3934-A29E-62F1414D9EF4.html"><span class="apiname">CRSAPublicKey</span></a> you wish to encrypt to. </p>
 <pre class="codeblock" id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-A2B3F20C-3437-5F04-BC97-A1A53AF2940D"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-A2B3F20C-3437-5F04-BC97-A1A53AF2940D"><!-- --></a>
CRSAPKCS1v15Encryptor* encryptor = CRSAPKCS1v15Encryptor::NewLC(rsaPublicKey);
//As per rules described above, encryptor does not own rsaPublicKey
HBufC8* encryptedMessage = HBufC8::NewLC(encryptor-&gt;MaxOutputLength());
encryptor-&gt;EncryptL(messageToEncrypt, *encryptedMessage);
CleanupStack::Pop(encryptedMessage);
CleanupStack::PopAndDestroy(encryptor); 
</pre>
 <p>To subsequently decrypt, again presuming access to a <a href="GUID-53CFA8FB-1C29-3C4F-B72E-15E13B26E00F.html"><span class="apiname">CRSAPrivateKey</span></a>. </p>
 <pre class="codeblock" id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-E822E9A2-B457-5A4E-BF7C-0A19BD0D078A"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-E822E9A2-B457-5A4E-BF7C-0A19BD0D078A"><!-- --></a>
CRSAPKCS1v15Decryptor* decryptor = CRSAPKCS1v15Decryptor::NewLC(rsaPrivateKey);
//As per rules described above, decryptor does not own rsaPrivateKey
HBufC8* decryptedMessage = HBufC8::NewLC(decryptor-&gt;MaxOutputLength());
encryptor-&gt;EncryptL(*decryptedMessage, *encryptedMessage);
CleanupStack::Pop(decryptedMessage);
CleanupStack::PopAndDestroy(decryptor); 
</pre>
 <p id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-F6919BBF-8CAD-5CA6-8DA0-5836F6DE63B1"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-F6919BBF-8CAD-5CA6-8DA0-5836F6DE63B1"><!-- --></a><strong>Sample code
for signing/verifying</strong> </p>
 <p>All implemented signature systems (both
signing and verifying) do not perform any manipulation of the input message
prior to performing their internal signing mechanism. For instance, both <a href="GUID-2EA351B3-155D-3B44-80FC-6F6827A52AEA.html"><span class="apiname">CRSAPKCS1v15Signer</span></a> and <a href="GUID-13B5CDC3-CB8A-34C7-ADD2-FAE6D6915412.html"><span class="apiname">CDSASigner</span></a> do
not hash the data to be signed prior to signing it. Some people refer to this
as a "raw sign primitive". The decision to operate this way was taken because
large numbers of higher level standards dictate different ways for the data
to be hashed prior to signing (and similarly for verification) and accomadating
all of them significantly confused the api. Instead it is suggested a class
that handles specification specific (for example, RSA signatures for TLS or
X.509), pre-signing transformation is created. Upon calling a <samp class="codeph">Final()</samp> -like
call on such a class, it shall return a descriptor that can be "raw signed"
by the implemented signing primitives. </p>
 <p>The following code illustrates
how to DSA sign an unhashed descriptor, <samp class="codeph">messageToBeSigned</samp> given
a <a href="GUID-2A19BF6D-D333-349B-9F2F-76E2F28A7044.html"><span class="apiname">CDSAPrivateKey</span></a>. In this case, the pre-signing transformation
required by the DSA is simply a SHA-1 hash. As a result, <samp class="codeph">CSHA1</samp> is
used as the specification specific, pre-signing transformation class. </p>
 <pre class="codeblock" id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-28326A2B-C312-506A-9AC2-C77936EF4A58"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-28326A2B-C312-506A-9AC2-C77936EF4A58"><!-- --></a>
CDSASigner* signer = CDSASigner::NewLC(dsaPrivateKey);
//As per rules described above, signer does not own dsaPrivateKey
CSHA1* sha1 = CSHA1::NewLC();
CDSASignature* signature = signer-&gt;SignL(sha1-&gt;Final(messageToBeSigned));
//Caller owns signature as per rules described above.
CleanupStack::PopAndDestroy(2, signer); //sha1, signer
CleanupStack::PushL(signature);
</pre>
 <p>To subsequently verify given a <a href="GUID-BBB5FEE0-368B-32D8-A30F-CFF4FACBE29A.html"><span class="apiname">CDSAPublicKey</span></a> and
a <a href="GUID-83C9D319-CC1B-355D-85EF-D58C42ABCCCA.html"><span class="apiname">CDSASignature</span></a>: </p>
 <pre class="codeblock" id="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-59919AAE-C2B0-5207-8FE2-03A9D7F287AD"><a name="GUID-4C9C236D-71A7-5A5D-8C1C-F574DA604AF6__GUID-59919AAE-C2B0-5207-8FE2-03A9D7F287AD"><!-- --></a>
CDSAVerifier* verifier = CDSAVerifier::NewLC(dsaPublicKey);
//As per rules described above, verifier does not own dsaPublicKey
CSHA1* sha1 = CSHA1::NewLC();
TBool result = verifier-&gt;VerifyL(sha1-&gt;Final(messageToBeVerified), *signature);
CleanupStack::PopAndDestroy(2, verifier); //sha1, verifier
</pre>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html" title="This section provides detailed information on encrypting and decrypting data using Symmetric and Asymmetric algorithms supported by Symbian platform.">Encrypting and Decrypting Data</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>