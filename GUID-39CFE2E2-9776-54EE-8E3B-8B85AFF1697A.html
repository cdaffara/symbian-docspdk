<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Window Server Plug-in Framework in the Non-ScreenPlay Variant"/>
<meta name="abstract" content="This topic provides an introduction to the Window Server plug-in framework in the non-ScreenPlay variant. This framework was introduced in a project to improve the Window Server."/>
<meta name="description" content="This topic provides an introduction to the Window Server plug-in framework in the non-ScreenPlay variant. This framework was introduced in a project to improve the Window Server."/>
<meta name="DC.Relation" scheme="URI" content="GUID-02432DD8-0C18-59B9-AB1E-E88D000620CA.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-02432DD8-0C18-59B9-AB1E-E88D000620CA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-139F9E66-830D-5B94-8674-2F90152EBC4A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-434F690E-738A-51DF-80CC-8A6CC067DA6C.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E7F6DD98-9080-50E9-B071-56247EBBF570.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Window Server Plug-in Framework in the Non-ScreenPlay Variant</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2384499 id2384574 id2384967 id2385029 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" title="The Windowing collection contains two components—the Window Server, which manages the use of the screen by applications, and the Window Server Plugins component.">Windowing Collection</a> &gt; <a href="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" title="The Window Server component manages the use of the screen by applications and handles key and pointer events.">Window Server Component</a> &gt; <a href="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html" title="This section describes the generic Window Server plug-in framework and is mainly aimed at system integrators, UI platform providers and device and hardware manufacturers.">Window Server Plug-in Framework</a> &gt; <a href="GUID-02432DD8-0C18-59B9-AB1E-E88D000620CA.html" title="This section provides information about the generic Window Server plug-in framework in the non-ScreenPlay variant.">The Non-ScreenPlay Plug-in Framework</a> &gt; </div>
<h1 class="topictitle1">Window Server Plug-in Framework in the Non-ScreenPlay Variant</h1>
<div><p>This topic provides an introduction to the Window Server plug-in framework in the non-ScreenPlay variant. This framework was introduced in a project to improve the Window Server. </p>
<p> <strong>Variant</strong>: <a href="GUID-F64E6551-670E-5E12-8103-DE504D3EC94F.html" title="ScreenPlay provides improved support for graphics hardware acceleration and some other new features. However, it is possible to use the Symbian platform without enabling ScreenPlay. This is called the non-ScreenPlay variant (sometimes referred to as the non-NGA variant). This topic provides an introduction to the graphics architecture when ScreenPlay is not enabled.">Non-ScreenPlay</a>. <strong>Target audience</strong>: Device creators. </p>
 <div class="section"><h2 class="sectiontitle">Purpose</h2> <p>The Window Server (WSERV) performance improvements introduce several new APIs and Service Provider Interfaces (SPIs). An SPI differs from an API in that an API describes functionality that a developer expects to use, whereas an SPI defines an interface that a developer is expected to implement. </p>
 <p>The SPI part consists primarily of abstract interfaces for plug-ins, faders and render stages. Developers are expected to provide concrete implementations of these interfaces. The API part consists of new object provider interfaces that can be used by plug-ins (including the existing Content Rendering Plug-ins (CRP)). </p>
 <p>This document provides an overview for the new WSERV performance improvements. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Library details</h2> <p>There is one library affected by the WSERV performance improvements changes. </p>
 
<div class="tablenoborder"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-9CB1253D-AABA-5B2E-9E2D-78E95F84DBC2"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-9CB1253D-AABA-5B2E-9E2D-78E95F84DBC2" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d668191e61">Library Name</th>
 <th class="cellrowborder" valign="top" id="d668191e64">Short Description</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d668191e61 "><p> <span class="filepath">wsgraphicdrawer.lib </span>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e64 "><p>Server-side base-classes for graphic drawer plug-ins </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </div>
 <div class="section"><h2 class="sectiontitle">Architectural relationship</h2> <p><strong>New additions </strong> </p>
 <p>In the past, Window Server (WSERV) has supported a number of plug-in interfaces, for example: </p>
 <ul><li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-CD8F335E-B5CE-5E01-ADE4-B74ECA118A58"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-CD8F335E-B5CE-5E01-ADE4-B74ECA118A58"><!-- --></a><p>Anim dlls </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-1668ACD9-AA34-535E-877C-9EDB3F81730F"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-1668ACD9-AA34-535E-877C-9EDB3F81730F"><!-- --></a><p>Content rendering plug-ins </p>
 </li>
 </ul>
 <p>In general, these plug-ins enable UI platform providers to have code running in the WSERV process for specific purposes, without having to modify WSERV. This mechanism can be used to extend or customize WSERV functionality. However, in the past, new plug-in types were added in a fairly ad hoc way, with each new implementer going about things in a different way. </p>
 <p>In order to improve performance, there have been changes made to this previous method. These changes are a generic plug-in framework, two new types of plug-in and some new extension interfaces. </p>
 <p><strong>A generic plug-in framework </strong> </p>
 <p>The generic plug-in framework provides a standard mechanism for adding new types of plug-ins, based on the support provided by the Symbian ECOM component. This amounts to a fairly thin wrapper around ECOM, with WSERV specific features such as the ability to specify which plug-ins to load at boot time, using the <samp class="codeph">WSINI.INI</samp> file. The intention is that when new types of plug-in are introduced in future they should use this generic plug-in framework rather than an ad hoc mechanism, leading to reduced implementation time. </p>
 <p><strong>Two new types of plug-in </strong> </p>
 <p>The WSERV performance improvements make use of the new framework to add two new types of plug-in: </p>
 <ul><li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-D2FF6AA8-5BDB-5033-8482-CAC6D50C13C5"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-D2FF6AA8-5BDB-5033-8482-CAC6D50C13C5"><!-- --></a><p>Fader plug-ins, which enable customizable fading </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-5B8F8A9F-D956-5AD2-819F-493BD55767E1"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-5B8F8A9F-D956-5AD2-819F-493BD55767E1"><!-- --></a><p>Render stage plug-ins, which enable modification of the tail end of the rendering pipeline, at the point where WSERV outputs draw operations for a screen target. </p>
 </li>
 </ul>
 <p><strong>New extension interfaces </strong> </p>
 <p>The WSERV performance improvements also provide a number of new extension interfaces giving plug-ins a more detailed picture than previously of WSERV’s internal workings. This applies not only to plug-ins using the new framework, but also to the existing CRP plug-ins. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">APIs and SPIs</h2> <p>To understand the new SPIs, it is necessary to show how they would fit into a configuration in which concrete implementations have been supplied by plug-ins. The following diagram shows the default configuration, in which the concrete classes are supplied by the WSERV reference plug-ins: </p>
 <div class="fignone" id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-567069E8-347C-59B3-A340-20F99BA43721"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-567069E8-347C-59B3-A340-20F99BA43721"><!-- --></a><span class="figcap">Figure 1. 
             Default configuration of WSERV plug-ins  
          </span> <img src="GUID-7F200AB2-602E-5351-8FA1-1B818F6DE355_d0e249658_href.png"/></div>
 <p>The diagram has three layers, going down: </p>
 <a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-76FDE51A-794E-52AC-B718-5AF61F692825"><!-- --></a><ol id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-76FDE51A-794E-52AC-B718-5AF61F692825"><li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-7B3FCB2E-54D7-5739-BDE4-7B6BFA5722D2"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-7B3FCB2E-54D7-5739-BDE4-7B6BFA5722D2"><!-- --></a><p>The top layer is the <a href="GUID-A47A4139-70FD-3F76-B51E-0452A0F6A76F.html"><span class="apiname">MWsObjectProvider</span></a> interface, which is an existing class in WSERV. This provides a framework for extensible interfaces. </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-C124D68E-B08F-52E9-B5C8-AA179C0DE1AA"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-C124D68E-B08F-52E9-B5C8-AA179C0DE1AA"><!-- --></a><p>In the middle layer, there are four new interfaces introduced by the WSERV performance improvements: <a href="GUID-28DEFD88-3AB5-3F94-9A26-27B240294950.html"><span class="apiname">CWsPlugin</span></a>, <a href="GUID-1CF41CFD-27C8-39D7-A615-18CE765436DE.html"><span class="apiname">MWsFader</span></a>, <a href="GUID-DE3DA8CA-437D-33B8-A747-941810A48897.html"><span class="apiname">MWsRenderStageFactory</span></a> and <a href="GUID-B89CEF40-0139-3E6F-803D-F74E2BCB029A.html"><span class="apiname">CWsRenderStage</span></a>. </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-D926A8DC-779D-56F2-BFF5-2060DDBEA93E"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-D926A8DC-779D-56F2-BFF5-2060DDBEA93E"><!-- --></a><p>In the bottom layer, there are the concrete implementations of the new interfaces. </p>
 </li>
 </ol>
 <p>The classes in the above diagram are as follows: </p>
 <ul><li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-214F1492-8998-59CE-96C5-5AA82F96B4C8"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-214F1492-8998-59CE-96C5-5AA82F96B4C8"><!-- --></a><p> <a href="GUID-28DEFD88-3AB5-3F94-9A26-27B240294950.html"><span class="apiname">CWsPlugin</span></a> is the base class from which the top level objects presented by plug-ins should derive. </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-0717B186-7404-5F21-A9A4-428DDBB1CB8F"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-0717B186-7404-5F21-A9A4-428DDBB1CB8F"><!-- --></a><p> <a href="GUID-1CF41CFD-27C8-39D7-A615-18CE765436DE.html"><span class="apiname">MWsFader</span></a> is the interface that the plug-in object in a fader plug-in should present. Thus the concrete implementation of a fader should derive from <a href="GUID-28DEFD88-3AB5-3F94-9A26-27B240294950.html"><span class="apiname">CWsPlugin</span></a> and <a href="GUID-1CF41CFD-27C8-39D7-A615-18CE765436DE.html"><span class="apiname">MWsFader</span></a>. </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-7BD0FDC1-1862-55A0-8B16-F649E6C569E9"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-7BD0FDC1-1862-55A0-8B16-F649E6C569E9"><!-- --></a><p> <a href="GUID-DE3DA8CA-437D-33B8-A747-941810A48897.html"><span class="apiname">MWsRenderStageFactory</span></a> is the interface that the plug-in object in a render stage plug-in should present. Thus concrete implementations of render stage factories should derive from <a href="GUID-28DEFD88-3AB5-3F94-9A26-27B240294950.html"><span class="apiname">CWsPlugin</span></a> and <a href="GUID-DE3DA8CA-437D-33B8-A747-941810A48897.html"><span class="apiname">MWsRenderStageFactory</span></a>. </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-B3B3A50F-E6EF-5B65-AC6D-542363E00891"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-B3B3A50F-E6EF-5B65-AC6D-542363E00891"><!-- --></a><p> <a href="GUID-B89CEF40-0139-3E6F-803D-F74E2BCB029A.html"><span class="apiname">CWsRenderStage</span></a> is the abstract base class for render stages. Concrete implementations should derive from this. (Note that <a href="GUID-B89CEF40-0139-3E6F-803D-F74E2BCB029A.html"><span class="apiname">CWsRenderStage</span></a> is *not* a subclass of <a href="GUID-28DEFD88-3AB5-3F94-9A26-27B240294950.html"><span class="apiname">CWsPlugin</span></a>. The plug-in provides only a render stage factory. Render stages must then be obtained from the factory.) </p>
 </li>
 </ul>
 <p>Why do render stages have factories, but faders do not? The idea here is that faders are not expected to have any internal state, and therefore a single fader instance can be shared across multiple screens. Therefore there is no need for a factory. On the other hand, render stages could have internal state (such as stored draw commands or offscreen bitmaps), and therefore each screen needs its own instance. Therefore we need a factory to create the instances as required. </p>
 <p>Note that in addition, we may want multiple render stages (of different types) per screen, if they are chained. Therefore we will typically have multiple render stage factories. For example, in the default configuration, there are two render stage factory plug-ins, producing flicker buffer and standard render stages respectively. </p>
 <p><strong>New object provider extensions </strong> </p>
 <p>In addition to the above, the WSERV performance improvements provide some minor extensions to existing object provider interfaces, together with the following new object provider extension interfaces: </p>
 <ul><li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-391069BC-422E-50ED-A4C2-F6E649FFCFB1"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-391069BC-422E-50ED-A4C2-F6E649FFCFB1"><!-- --></a><p> <a href="GUID-5A22BB23-DF2D-3E1C-9476-A485C878283D.html"><span class="apiname">MWsWindow</span></a> – an interface through which windows can be examined </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-8D4E169B-3C7B-528B-AEA4-5FB9618BD2F1"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-8D4E169B-3C7B-528B-AEA4-5FB9618BD2F1"><!-- --></a><p> <a href="GUID-51B49D4D-A421-3AE9-A7D6-F4B89CEE0704.html"><span class="apiname">MWsScreenRedraw</span></a> – an extension of the existing <a href="GUID-6021D388-FFC5-3D4E-B0D0-4C579D500DD0.html"><span class="apiname">MWsScreen</span></a> interface for handling the animation aspects of the redraw sequence </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-06A315C4-F503-5F2E-A250-90B36D2C1CA8"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-06A315C4-F503-5F2E-A250-90B36D2C1CA8"><!-- --></a><p> <a href="GUID-4D4CEEB6-940A-3016-9BD9-70EE69BA2BD1.html"><span class="apiname">MWsScreenRedrawObserver</span></a> – an interface for receiving notifications of screen updates </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-70D71FA4-1C95-5BAC-B783-FADC817557F1"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-70D71FA4-1C95-5BAC-B783-FADC817557F1"><!-- --></a><p> <a href="GUID-112D3118-4983-3BC5-B4E8-0FB219E03295.html"><span class="apiname">MWsMemoryRelease</span></a> – an interface which enables plug-ins to cooperate with WSERV by releasing memory when requested (for example caches) </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-EE5FE016-09EC-5149-B1CE-51F6A81D5689"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-EE5FE016-09EC-5149-B1CE-51F6A81D5689"><!-- --></a><p> <a href="GUID-7A56E7FD-9BC3-33E7-8DC8-EB9F39773DF3.html"><span class="apiname">MWsGcClipRect</span></a> – an extension interface that can be requested from an <a href="GUID-658CCB93-7143-3D51-BD34-B43AFA578958.html"><span class="apiname">MWsGc</span></a>, providing some functionality to do with clipping rectangles which was omitted from the original <a href="GUID-658CCB93-7143-3D51-BD34-B43AFA578958.html"><span class="apiname">MWsGc</span></a> implementation </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-E1E43A73-F574-57F5-B7AF-6EBCECF9AF45"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-E1E43A73-F574-57F5-B7AF-6EBCECF9AF45"><!-- --></a><p> <a href="GUID-17AD82CF-BCC6-3AF9-A791-68F3FFEC5D70.html"><span class="apiname">MWsPluginManager</span></a> – enables plug-ins to request services from other plug-ins </p>
 </li>
 <li id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-CDBD37E5-EF22-5206-8A6E-0E067CA20689"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-CDBD37E5-EF22-5206-8A6E-0E067CA20689"><!-- --></a><p> <a href="GUID-C15F47F9-7C13-302B-AD81-FBB288102AAA.html"><span class="apiname">MWsIniFile</span></a> – enables plug-ins to read the <samp class="codeph">WSINI.INI</samp> file </p>
 </li>
 </ul>
 <p>Each of these new interfaces inherits from the existing <a href="GUID-A47A4139-70FD-3F76-B51E-0452A0F6A76F.html"><span class="apiname">MWsObjectProvider</span></a> interface, and they are made available through the object provider mechanism. In other words, each interface has an associated “type id”, and the interface is obtained by calling <a href="GUID-A47A4139-70FD-3F76-B51E-0452A0F6A76F.html#GUID-A47A4139-70FD-3F76-B51E-0452A0F6A76F__GUID-DC742E6F-6F18-3B1E-A3B7-B4A1A7E258DE"><span class="apiname">MWsObjectProvider::ResolveObjectInterface(&lt;type id&gt;)</span></a> on an appropriate object provider. In the case where a plug-in wants to request the interface, the object provider will be WSERV’s <a href="GUID-ADBFCAEF-8DC6-3B81-B5ED-E2F36645D431.html"><span class="apiname">MWsGraphicDrawerEnvironment</span></a>, which is passed to plug-ins during construction. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Fader plug-ins</h2> <p>Fader plug-ins enable WSERV to delegate the implementation of window fading. This means that when <samp class="codeph">RWindowTreeNode::SetFaded()</samp> or <samp class="codeph">RWindowBase::FadeBehind()</samp> is called on the client side, WSERV calls the fader plug-in to do the fading. Note that fader plug-ins are <strong>not</strong> involved in <a href="GUID-0AEE5955-C530-35F1-A904-69183331B294.html"><span class="apiname">CWindowGc</span></a> fading. Calls to <a href="GUID-0AEE5955-C530-35F1-A904-69183331B294.html#GUID-0AEE5955-C530-35F1-A904-69183331B294__GUID-64B8B22D-3702-32F9-9B42-3A5B2A95AABE"><span class="apiname">CWindowGc::SetFaded()</span></a> do not result in calls to fader plug-ins – WSERV passes them straight through to the rendering backend as GDI calls. </p>
 <p>In principle, fader plug-ins enable the implementation of custom fading algorithms. However, one potential limitation at the moment is that the existing client-side APIs dictate the form that parameters to control fading must take - therefore <a href="GUID-643DDA78-C7A7-386D-AB3F-8710141DDDA9.html#GUID-643DDA78-C7A7-386D-AB3F-8710141DDDA9__GUID-A093EB4F-EA64-368D-B4BE-F5A4568F63B4"><span class="apiname">RWsSession::SetDefaultFadingParameters(TUint8
          aBlackMap,TUint8 aWhiteMap)</span></a> has to be used. In addition, <a href="GUID-9FFD28C7-8747-3438-84BF-44AF26ACEC7D.html#GUID-9FFD28C7-8747-3438-84BF-44AF26ACEC7D__GUID-317255C3-6CB3-3608-8104-53706BDBAFA0"><span class="apiname">RWindowTreeNode::SetFaded()</span></a> has a variant in which these parameters can be passed in. The API that fader plug-ins present to WSERV has been designed so that fading parameters can be passed as opaque binary data. However, as it stands this data will always take the form of two <a href="GUID-F894527F-13A6-3E6D-BA7B-187812CDF20E.html"><span class="apiname">TUint8</span></a> s. </p>
 <p> <strong>Note</strong>: In ScreenPlay, fading effects can be created using render stages. See <a href="GUID-E7F6DD98-9080-50E9-B071-56247EBBF570.html" title="The Window Server Plugins component consists of the ScreenPlay render stage plug-ins.">Window Server Plugins Component</a> for more information. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Render stage plug-ins</h2> <p>Render stage plug-ins are designed to allow the customizations of the final stages of the rendering pipeline. The idea is that, to WSERV, a render stage looks pretty much like the graphics context that it is expecting to use to draw to a screen. WSERV carries on with its usual tasks, tracking dirty rectangles and so on, and issuing draw operations when it believes that it needs to repaint some region of the screen. However, instead of these draw operations being used immediately to repaint the screen, they are passed to a render stage. The simplest render stage implementation would indeed use the draw operations to repaint the screen. However, the render stage may do other things with the draw operations, such as capturing some of them for later use in a transition effect or redirecting them to another target and so on. </p>
 <p>The render stage API is such that every time WSERV wants to do a redraw, it must call <a href="GUID-B89CEF40-0139-3E6F-803D-F74E2BCB029A.html#GUID-B89CEF40-0139-3E6F-803D-F74E2BCB029A__GUID-75503F6F-91DA-3392-8CD5-34FFF9095D30"><span class="apiname">CWsRenderStage::Begin()</span></a> in order to get hold of the graphics context with which to do the drawing. When it is finished, it must call <a href="GUID-B89CEF40-0139-3E6F-803D-F74E2BCB029A.html#GUID-B89CEF40-0139-3E6F-803D-F74E2BCB029A__GUID-0EBA06BF-D17F-3485-85B6-F4B855A48B62"><span class="apiname">CWsRenderStage::End()</span></a>, and release its pointer to the graphics context. This means in particular that render stages understand that draw operations come in blocks corresponding to a single redraw. </p>
 <p>Render stages can be chained, so that the output of the first render stage (in the form of draw operations), passes not to the screen but to a second render stage. In the default implementation supplied with WSERV, two render stages are used to achieve flicker-free drawing. The first render stage takes the draw operations that are passed in, and draws them to an offscreen bitmap. When <a href="GUID-B89CEF40-0139-3E6F-803D-F74E2BCB029A.html#GUID-B89CEF40-0139-3E6F-803D-F74E2BCB029A__GUID-0EBA06BF-D17F-3485-85B6-F4B855A48B62"><span class="apiname">CWsRenderStage::End()</span></a> is called, it then blits the updated region to the second render stage. The second render stage draws to the screen. This setup therefore eliminates flicker within individual redraws. </p>
 <p>For information about render stages in ScreenPlay, see <a href="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html" title="This section provides information about the render stage framework in ScreenPlay. This framework enables device creators to change the lower layers of the rendering pipeline without changing the Window Server code.">ScreenPlay Render Stages</a>. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Key classes</h2> <p>All classes belong to <samp class="codeph">wsgraphicdrawer.lib</samp>. </p>
 
<div class="tablenoborder"><a name="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-57A9F34C-D432-51E9-BC55-06E69A29380E"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A__GUID-57A9F34C-D432-51E9-BC55-06E69A29380E" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d668191e534">Class name</th>
 <th class="cellrowborder" valign="top" id="d668191e537">Description</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d668191e534 "><p> <a href="GUID-28DEFD88-3AB5-3F94-9A26-27B240294950.html"><span class="apiname">CWsPlugin</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e537 "><p>This is the base class that all top-level plug-in objects must derive from. Note that it is an abstract class – in particular it does not provide an implementation of <a href="GUID-311158DA-BA24-3CF2-8361-EE36F07EED4B.html"><span class="apiname">ResolveObjectInterface()
                  </span></a> (inherited from <a href="GUID-A47A4139-70FD-3F76-B51E-0452A0F6A76F.html"><span class="apiname">MWsObjectProvider</span></a>) – subclasses are expected to do so for themselves. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d668191e534 "><p> <a href="GUID-1CF41CFD-27C8-39D7-A615-18CE765436DE.html"><span class="apiname">MWsFader</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e537 "><p>This is the interface that fader plug-ins are required to implement. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d668191e534 "><p> <a href="GUID-DE3DA8CA-437D-33B8-A747-941810A48897.html"><span class="apiname">MWsRenderStageFactory</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e537 "><p>This is the interface that render stage factory plug-ins are required to implement. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d668191e534 "><p> <a href="GUID-5A22BB23-DF2D-3E1C-9476-A485C878283D.html"><span class="apiname">MWsWindow</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e537 "><p>This interface represents a window, and provides plug-ins with information about some attributes of windows. Currently, the only way to get hold of an <a href="GUID-5A22BB23-DF2D-3E1C-9476-A485C878283D.html"><span class="apiname">MWsWindow</span></a> is from the new <a href="GUID-46C44F9F-7E2F-3633-B9EC-624058A84F0E.html"><span class="apiname">TWsCREvent</span></a>  <samp class="codeph">EWindowClosing</samp> event. The intended use is for transition engines to discover information about a window that is closing. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d668191e534 "><p> <a href="GUID-17AD82CF-BCC6-3AF9-A791-68F3FFEC5D70.html"><span class="apiname">MWsPluginManager</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e537 "><p>An interface enabling plug-ins to get pointers to other plug-ins, enabling them to use the services of other plug-ins. An example use would be that a platform provider could write a plug-in providing a new interface <a href="GUID-CE6A3654-AB67-3FBC-B3D5-69C556F773E8.html"><span class="apiname">MWsBitmapCache</span></a>. They could modify the <samp class="codeph">WSINI.INI</samp> file to ensure that this plug-in was loaded. Then other plug-ins could request the <a href="GUID-17AD82CF-BCC6-3AF9-A791-68F3FFEC5D70.html"><span class="apiname">MWsPluginManager</span></a> interface from the <a href="GUID-ADBFCAEF-8DC6-3B81-B5ED-E2F36645D431.html"><span class="apiname">MWsGraphicDrawerEnvironment</span></a>, and then request the <a href="GUID-CE6A3654-AB67-3FBC-B3D5-69C556F773E8.html"><span class="apiname">MWsBitmapCache</span></a> interface from <a href="GUID-17AD82CF-BCC6-3AF9-A791-68F3FFEC5D70.html"><span class="apiname">MWsPluginManager</span></a>. Thus the purpose of this interface is to enable the use case where one writes plug-ins providing services for the benefit of other plug-ins. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d668191e534 "><p> <a href="GUID-112D3118-4983-3BC5-B4E8-0FB219E03295.html"><span class="apiname">MWsMemoryRelease</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e537 "><p>This is an SPI that enables plug-in objects to assist WSERV in memory management, by freeing memory when requested to do so. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d668191e534 "><p> <a href="GUID-C15F47F9-7C13-302B-AD81-FBB288102AAA.html"><span class="apiname">MWsIniFile</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e537 "><p>An interface enabling plug-ins to read the <samp class="codeph">WSINI.INI</samp> file. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d668191e534 "><p>New functions in <a href="GUID-05641B8E-F59A-3353-A196-642ED3CF608D.html"><span class="apiname">MWsAnimationScheduler</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e537 "><p>WSERV has an animation scheduler which was previously used to schedule CRP animations, and is now also used to schedule deferred redraws. The default scheduler can be replaced by a plug-in, via the call <a href="GUID-ADBFCAEF-8DC6-3B81-B5ED-E2F36645D431.html#GUID-ADBFCAEF-8DC6-3B81-B5ED-E2F36645D431__GUID-E0B768A5-3CD0-3429-9DA7-0C3F1ABEFE61"><span class="apiname">MWsGraphicDrawerEnvironment::SetCustomAnimationScheduler(MWsAnimationScheduler*)</span></a>. The class <a href="GUID-05641B8E-F59A-3353-A196-642ED3CF608D.html"><span class="apiname">MWsAnimationScheduler</span></a> already contained functions relevant to CRP animation, but the WSERV performance improvements add new functions relevant to deferred redraw. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d668191e534 "><p>New functions in <a href="GUID-ADBFCAEF-8DC6-3B81-B5ED-E2F36645D431.html"><span class="apiname">MWsGraphicDrawerEnvironment</span></a> </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e537 "><p> <a href="GUID-ADBFCAEF-8DC6-3B81-B5ED-E2F36645D431.html"><span class="apiname">MWsGraphicDrawerEnvironment</span></a> is an existing class. It is an interface provided to all plug-ins, which makes available some generic services. The new functions are primarily for registration/unregistration of event handlers and memory releasers. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d668191e534 "><p>New functions in <a href="GUID-46C44F9F-7E2F-3633-B9EC-624058A84F0E.html"><span class="apiname">TWsCREvent</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d668191e537 "><p> <a href="GUID-46C44F9F-7E2F-3633-B9EC-624058A84F0E.html"><span class="apiname">TWsCREvent</span></a> is an existing class. It provides event reporting of some WSERV internals to Content Rendering Plug-ins (and now other plug-ins too). It is typically used by transition effects plug-ins, to provide them with additional information about what is happening inside WSERV. The new functionality is a new event to notify that a window is closing. </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-02432DD8-0C18-59B9-AB1E-E88D000620CA.html" title="This section provides information about the generic Window Server plug-in framework in the non-ScreenPlay variant.">The Non-ScreenPlay Plug-in Framework</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-139F9E66-830D-5B94-8674-2F90152EBC4A.html" title="This topic provides information about fader plug-ins in the non-ScreenPlay variant.">Fader Plug-ins</a></div>
<div><a href="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73.html" title="This topic provides information about render stage plug-ins in the non-ScreenPlay variant.">Render Stage Plug-ins</a></div>
<div><a href="GUID-434F690E-738A-51DF-80CC-8A6CC067DA6C.html" title="This topic provides information about the use of miscellaneous plug-ins in the non-ScreenPlay variant."> Miscellaneous Plug-in
                Interfaces</a></div>
<div><a href="GUID-E7F6DD98-9080-50E9-B071-56247EBBF570.html" title="The Window Server Plugins component consists of the ScreenPlay render stage plug-ins.">Window Server Plugins Component</a></div>
<div><a href="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html" title="This section provides information about the render stage framework in ScreenPlay. This framework enables device creators to change the lower layers of the rendering pipeline without changing the Window Server code.">Render Stages</a></div>
<div><a href="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794.html" title="Content Rendering Plug-ins (CRPs) are Window Server plug-ins that can perform custom drawing in response to client requests. The client simply calls CWindowGc::DrawWsGraphic(TWsGraphicId, TRect)."> Content Rendering Plug-ins (CRPs)</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>