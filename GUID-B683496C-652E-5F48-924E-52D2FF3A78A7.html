<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Direct File Store"/>
<meta name="abstract" content="The main characteristic of a direct file store is that streams can be created and objects externalized to them but, once the streams have been committed and closed, they cannot subsequently be changed."/>
<meta name="description" content="The main characteristic of a direct file store is that streams can be created and objects externalized to them but, once the streams have been committed and closed, they cannot subsequently be changed."/>
<meta name="DC.Relation" scheme="URI" content="GUID-C9D8D913-C65F-5A69-A606-30F59BFB38E2.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F8824165-4B33-50D1-9706-BD2438B5A2EE.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3FAB9077-3EC3-5539-B391-D11456362513.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C9D8D913-C65F-5A69-A606-30F59BFB38E2.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D7211372-9411-5A18-88F0-615F4983A2E0.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Direct File Store</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7"><a name="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2859821 id2860178 id2533897 id2533912 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html" title="Provides services to enable and support persistence.">Persistent Data Services Guide</a> &gt; <a href="GUID-F8824165-4B33-50D1-9706-BD2438B5A2EE.html" title="The persistent storage collection.">Persistent Storage</a> &gt; <a href="GUID-3FAB9077-3EC3-5539-B391-D11456362513.html" title="Store provides structured data storage.">Store</a> &gt; <a href="GUID-C9D8D913-C65F-5A69-A606-30F59BFB38E2.html" title="Provides permanent, direct and dictionary file stores as well as file stream stores.">File Stores</a> &gt; </div>
<h1 class="topictitle1">Direct
File Store</h1>
<div><p>The main characteristic of a direct file store is that streams
can be created and objects externalized to them but, once the streams have
been committed and closed, they cannot subsequently be changed.</p>

<p>Once the streams have been committed and closed, they cannot be replaced,
deleted, extended or changed in any way. A direct file store is useful for
the type of application which treats the in-memory copy of its data as its
prime copy, such as a word processor which implements the classic load/save
paradigm. In this paradigm:</p>

<ul>
<li id="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-DE651688-71D8-5E52-BA3A-D3ED93B58F55"><a name="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-DE651688-71D8-5E52-BA3A-D3ED93B58F55"><!-- --></a><p>application data is
first created, in an internal, non-persistent, form — i.e., in RAM</p>
 </li>

<li id="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-F6012000-CE82-5940-9CEB-386664FF0EA5"><a name="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-F6012000-CE82-5940-9CEB-386664FF0EA5"><!-- --></a><p>when the file is first
saved, the data is externalised to the file store. When saving its data, an
application writes the whole object network forming the data to a new direct
file store, replacing any existing file of the same name. The last stream
written is always the root stream.</p>
 </li>

<li id="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-9896F0DD-1D96-5EC7-959F-D3C7EB226BD6"><a name="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-9896F0DD-1D96-5EC7-959F-D3C7EB226BD6"><!-- --></a><p>the application can
exit</p>
 </li>

<li id="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-27B6B647-FA91-52BF-855C-2F6CE31AB0E6"><a name="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-27B6B647-FA91-52BF-855C-2F6CE31AB0E6"><!-- --></a><p>when the application
is started again, it can open the file store and read in the persistent data.
It need not load the whole object network into memory; the loading of objects
can be deferred by using Swizzles. </p>
 </li>

<li id="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-1BF73B14-8CB1-57B3-A687-7C76B5100C9E"><a name="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-1BF73B14-8CB1-57B3-A687-7C76B5100C9E"><!-- --></a><p>the data is edited in
its internal, non-persistent form</p>
 </li>

<li id="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-8FFA6658-0753-5601-979A-2833AD415691"><a name="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-8FFA6658-0753-5601-979A-2833AD415691"><!-- --></a><p>when data is saved again,
the old file is erased (or renamed for safety!) and completely rewritten</p>
 </li>

</ul>

<p>With a direct file store, a stream may not be appended once it has been
written and closed. Writing to different streams may not be interleaved. The
root stream must be the last stream to be written. The direct file store is
very efficient as the allocation of new streams, and finding existing streams,
are trivially mapped onto the most efficient operations of the underlying
file system.</p>

<p>For this type of application, the most efficient file format is obtained
when all the data is written in sequence to the file. Any references within
the file are to data which was written earlier. When reading the file back,
it is read in several sections starting with a section that is at the <em>end</em> of
the file.</p>

<p>A typical relationship between a direct file store and its contained streams
is shown below. In this stream network streams <em>I</em> and <em>J</em> must
be written before stream <em>A</em>; stream <em>K</em> must be written before
stream <em>C</em>; streams <em>A</em>,<em>B</em> and <em>C</em> must be written before
the root stream.</p>

<div class="fignone" id="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-D45A96E3-5900-5817-8B32-8AA74E3DE584"><a name="GUID-B683496C-652E-5F48-924E-52D2FF3A78A7__GUID-D45A96E3-5900-5817-8B32-8AA74E3DE584"><!-- --></a><span class="figcap">Figure 1. Streams linked in a store</span>

<img src="GUID-DE5FC074-75C1-5833-83B2-D25396F52732_d0e619191_href.png"/>
</div>

<p>Direct file stores are encapsulated by the <samp class="codeph">CDirectFileStore</samp> class. </p>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C9D8D913-C65F-5A69-A606-30F59BFB38E2.html" title="Provides permanent, direct and dictionary file stores as well as file stream stores.">File Stores</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-D7211372-9411-5A18-88F0-615F4983A2E0.html" title="Provides swizzles, store streams, stream dictionaries, and store maps.">Store Streams</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>