<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Process, Thread, Stack and Memory Attributes"/>
<meta name="abstract" content="Reference for users of the debug monitor tool to the attributes of Kernel objects and memory structure."/>
<meta name="description" content="Reference for users of the debug monitor tool to the attributes of Kernel objects and memory structure."/>
<meta name="DC.Relation" scheme="URI" content="GUID-26714A57-B6B4-5E81-B512-FB520718482B.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F78B7BF9-5FDD-4EF8-A921-71CCBB830A99.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-26714A57-B6B4-5E81-B512-FB520718482B.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-49379616-C235-598D-AE43-668998AD072B"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Process, Thread, Stack and Memory Attributes</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-49379616-C235-598D-AE43-668998AD072B"><a name="GUID-49379616-C235-598D-AE43-668998AD072B"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2387995 id2388403 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-F78B7BF9-5FDD-4EF8-A921-71CCBB830A99.html" title="The device driver framework and how to implement a device driver.">Device Driver Guide</a> &gt; <a href="GUID-26714A57-B6B4-5E81-B512-FB520718482B.html" title="Describes how to get basic information about the system state when problems occur on hardware to help you debug your software.">Debug Monitor Tool</a> &gt; </div>
<h1 class="topictitle1">Process,
Thread, Stack and Memory Attributes</h1>
<div><p>Reference for users of the debug monitor tool to the attributes
of Kernel objects and memory structure. </p>

<ul>
<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-98737E3D-1A08-53ED-89C5-C0398E02C509"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-98737E3D-1A08-53ED-89C5-C0398E02C509"><!-- --></a><p> <a href="GUID-49379616-C235-598D-AE43-668998AD072B.html#GUID-49379616-C235-598D-AE43-668998AD072B__GUID-4D7F6A1F-3120-5547-B027-344C08A01D83">Process and thread priorities</a>  </p>
 </li>

<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-F08BDD05-90C3-544E-8C41-788A556F799F"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-F08BDD05-90C3-544E-8C41-788A556F799F"><!-- --></a><p> <a href="GUID-49379616-C235-598D-AE43-668998AD072B.html#GUID-49379616-C235-598D-AE43-668998AD072B__GUID-DDC45F0A-6B62-5EE6-9E42-D21F07BCF4B4">Thread state summary</a>  </p>
 </li>

<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-5C39B7CB-D8B1-5DD4-BD62-76595A3B2EB4"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-5C39B7CB-D8B1-5DD4-BD62-76595A3B2EB4"><!-- --></a><p> <a href="GUID-49379616-C235-598D-AE43-668998AD072B.html#GUID-49379616-C235-598D-AE43-668998AD072B__GUID-C6296C07-220E-5EB8-9E12-F7D63AB4B181">Thread and process exit information summary</a>  </p>
 </li>

<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-4F26D9D7-D335-5332-899D-E4DA6D8F4819"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-4F26D9D7-D335-5332-899D-E4DA6D8F4819"><!-- --></a><p> <a href="GUID-49379616-C235-598D-AE43-668998AD072B.html#GUID-49379616-C235-598D-AE43-668998AD072B__GUID-68CF9014-4922-56B9-9E53-AC5697F60E8E"> Critical threads and processes</a>  </p>
 </li>

<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-528E13A3-7E35-5153-87D6-C25CD3E90B6E"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-528E13A3-7E35-5153-87D6-C25CD3E90B6E"><!-- --></a><p> <a href="GUID-49379616-C235-598D-AE43-668998AD072B.html#GUID-49379616-C235-598D-AE43-668998AD072B__GUID-6530D514-A6CC-5AE9-AA97-C223B2189A09">Kernel calls and thread context</a>  </p>
 </li>

<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-4D0AC539-A105-5D26-896C-E32A2863213B"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-4D0AC539-A105-5D26-896C-E32A2863213B"><!-- --></a><p> <a href="GUID-49379616-C235-598D-AE43-668998AD072B.html#GUID-49379616-C235-598D-AE43-668998AD072B__GUID-5A573FEB-A274-5C0F-A6B6-87D5BAD8A21C">Stacks</a>  </p>
 </li>

<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-3A45E908-3D72-5871-9DEB-454F75A084BE"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-3A45E908-3D72-5871-9DEB-454F75A084BE"><!-- --></a><p> <a href="GUID-49379616-C235-598D-AE43-668998AD072B.html#GUID-49379616-C235-598D-AE43-668998AD072B__GUID-E3F102A4-D187-5BC9-BE97-9F8447A5DB45">Virtual memory and run addresses</a>  </p>
 </li>

</ul>

<div class="section" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-4D7F6A1F-3120-5547-B027-344C08A01D83"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-4D7F6A1F-3120-5547-B027-344C08A01D83"><!-- --></a><h2 class="sectiontitle">Process and
thread priorities</h2> <p>Internally the scheduler always deals with nanokernel
threads, <samp class="codeph">NThread</samp> objects, and their associated priority between
0 (lowest) and 63 (highest). In general, a thread with a higher priority that
is ready to run will always run in preference to threads with a lower priority.
The only exception is where a higher priority thread waits on a nanokernel
fast mutex held by a lower priority thread. In this case, the higher priority
thread will yield to the lower priority thread holding the mutex. </p>
 <p>A
Symbian platform thread, a <samp class="codeph">DThread</samp> object, has an embedded <samp class="codeph">NThread</samp>,
which enables it to be scheduled by the nanokernel. </p>
 <p>There are two
ways of setting a priority for Symbian platform thread: </p>
 <ul>
<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-8568544D-49F4-5D52-8E38-28A09058FB04"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-8568544D-49F4-5D52-8E38-28A09058FB04"><!-- --></a><p>using the two-level
priority scheme </p>
 </li>

<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-F3D2BAF8-9C95-59C3-A50E-150A7BDA4EE7"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-F3D2BAF8-9C95-59C3-A50E-150A7BDA4EE7"><!-- --></a><p>using an absolute priority. </p>
 </li>

</ul>
 <p><strong>The
two level priority scheme</strong> </p>
 <p>In this scheme, a Symbian platform thread
priority is relative to the priority of its owning process. By default, Symbian
platform threads inherit the priority of their owning process when they are
created. This priority can be raised or lowered relative to the process priority
- this just sets the thread’s priority to the process priority plus or minus
a specified priority weighting. If the priority of the process is changed,
the priority of its threads will change relative to other threads in the system
but will remain the same relative to each other. </p>
 <p>The default priority
of a process is <samp class="codeph">EPriorityForgeround</samp>, which is an absolute
priority of 350. Threads by default are created with relative priority <samp class="codeph">EPriorityNormal</samp> which
sets them to the same priority as the owning process. The window server lowers
the priority of background UI processes to <samp class="codeph">EPriorityBackground</samp> (250). </p>
 <p>The
NULL thread, also known as the idle thread, runs at priority 0, and means
that it will only run when there are no other threads ready to run. </p>
 <p>Symbian
platform thread priorities map onto <samp class="codeph">NThread</samp> priorities in
the range 1 to 31 as shown in the table below. </p>
 
<div class="tablenoborder"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-E61C3B76-B47D-5B9B-A469-A369D5AB4AFC"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-E61C3B76-B47D-5B9B-A469-A369D5AB4AFC" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p> <strong>Thread priority</strong>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Idle </p>
 </td>

<td class="cellrowborder" valign="top"><p>Much Less </p>
 </td>

<td class="cellrowborder" valign="top"><p>Less </p>
 </td>

<td class="cellrowborder" valign="top"><p>Normal </p>
 </td>

<td class="cellrowborder" valign="top"><p>More </p>
 </td>

<td class="cellrowborder" valign="top"><p>Much More </p>
 </td>

<td class="cellrowborder" valign="top"><p>Real Time </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <strong>Process priority</strong>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> </p>
 </td>

<td class="cellrowborder" valign="top"><p> </p>
 </td>

<td class="cellrowborder" valign="top"><p> </p>
 </td>

<td class="cellrowborder" valign="top"><p> </p>
 </td>

<td class="cellrowborder" valign="top"><p> </p>
 </td>

<td class="cellrowborder" valign="top"><p> </p>
 </td>

<td class="cellrowborder" valign="top"><p> </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>Low </p>
 </td>

<td class="cellrowborder" valign="top"><p>1</p>
 </td>

<td class="cellrowborder" valign="top"><p>1</p>
 </td>

<td class="cellrowborder" valign="top"><p>2</p>
 </td>

<td class="cellrowborder" valign="top"><p>3</p>
 </td>

<td class="cellrowborder" valign="top"><p>4</p>
 </td>

<td class="cellrowborder" valign="top"><p>5</p>
 </td>

<td class="cellrowborder" valign="top"><p>22 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>Background </p>
 </td>

<td class="cellrowborder" valign="top"><p>3</p>
 </td>

<td class="cellrowborder" valign="top"><p>5</p>
 </td>

<td class="cellrowborder" valign="top"><p>6</p>
 </td>

<td class="cellrowborder" valign="top"><p>7</p>
 </td>

<td class="cellrowborder" valign="top"><p>8</p>
 </td>

<td class="cellrowborder" valign="top"><p>9</p>
 </td>

<td class="cellrowborder" valign="top"><p>22 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>Foreground </p>
 </td>

<td class="cellrowborder" valign="top"><p>3</p>
 </td>

<td class="cellrowborder" valign="top"><p>10 </p>
 </td>

<td class="cellrowborder" valign="top"><p>11 </p>
 </td>

<td class="cellrowborder" valign="top"><p>12 </p>
 </td>

<td class="cellrowborder" valign="top"><p>13 </p>
 </td>

<td class="cellrowborder" valign="top"><p>14 </p>
 </td>

<td class="cellrowborder" valign="top"><p>22 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>High </p>
 </td>

<td class="cellrowborder" valign="top"><p>3</p>
 </td>

<td class="cellrowborder" valign="top"><p>17 </p>
 </td>

<td class="cellrowborder" valign="top"><p>18 </p>
 </td>

<td class="cellrowborder" valign="top"><p>19 </p>
 </td>

<td class="cellrowborder" valign="top"><p>20 </p>
 </td>

<td class="cellrowborder" valign="top"><p>22 </p>
 </td>

<td class="cellrowborder" valign="top"><p>23 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>SystemServer1 </p>
 </td>

<td class="cellrowborder" valign="top"><p>9</p>
 </td>

<td class="cellrowborder" valign="top"><p>15 </p>
 </td>

<td class="cellrowborder" valign="top"><p>16 </p>
 </td>

<td class="cellrowborder" valign="top"><p>21 </p>
 </td>

<td class="cellrowborder" valign="top"><p>23 </p>
 </td>

<td class="cellrowborder" valign="top"><p>25 </p>
 </td>

<td class="cellrowborder" valign="top"><p>28 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>SystemServer2 </p>
 </td>

<td class="cellrowborder" valign="top"><p>9</p>
 </td>

<td class="cellrowborder" valign="top"><p>15 </p>
 </td>

<td class="cellrowborder" valign="top"><p>16 </p>
 </td>

<td class="cellrowborder" valign="top"><p>21 </p>
 </td>

<td class="cellrowborder" valign="top"><p>23 </p>
 </td>

<td class="cellrowborder" valign="top"><p>25 </p>
 </td>

<td class="cellrowborder" valign="top"><p>28 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>SystemServer3 </p>
 </td>

<td class="cellrowborder" valign="top"><p>9</p>
 </td>

<td class="cellrowborder" valign="top"><p>15 </p>
 </td>

<td class="cellrowborder" valign="top"><p>16 </p>
 </td>

<td class="cellrowborder" valign="top"><p>21 </p>
 </td>

<td class="cellrowborder" valign="top"><p>23 </p>
 </td>

<td class="cellrowborder" valign="top"><p>25 </p>
 </td>

<td class="cellrowborder" valign="top"><p>28 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>RealTimeServer </p>
 </td>

<td class="cellrowborder" valign="top"><p>18 </p>
 </td>

<td class="cellrowborder" valign="top"><p>26 </p>
 </td>

<td class="cellrowborder" valign="top"><p>27 </p>
 </td>

<td class="cellrowborder" valign="top"><p>28 </p>
 </td>

<td class="cellrowborder" valign="top"><p>29 </p>
 </td>

<td class="cellrowborder" valign="top"><p>30 </p>
 </td>

<td class="cellrowborder" valign="top"><p>31 </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>where: </p>
 <ul>
<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-4315CEE2-2717-5E8F-A8F7-885C621A95B6"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-4315CEE2-2717-5E8F-A8F7-885C621A95B6"><!-- --></a><p>the process priority
values are defined by the internal Symbian platform enum <samp class="codeph">TProcPriority</samp>,
defined in <span class="filepath">...\e32\include\kernel\kern_priv.h</span>. The symbols
in the table correspond to the symbols in the enum. </p>
 </li>

<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-89D0D7FA-4B17-5753-898A-26C1B20EE59B"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-89D0D7FA-4B17-5753-898A-26C1B20EE59B"><!-- --></a><p>the thread priority
values are defined by the internal Symbian platform enum <samp class="codeph">TThrdPriority</samp>,
defined in <span class="filepath">...\e32\include\kernel\kern_priv.h</span>. The symbols
in the table correspond to the symbols in the enum. </p>
 </li>

</ul>
 <p><strong>Absolute
priority scheme</strong> </p>
 <p>It is possible to set an absolute priority that
is not relative to the process priority; it is not affected by changes in
the process priority. </p>
 </div>

<div class="section" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-DDC45F0A-6B62-5EE6-9E42-D21F07BCF4B4"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-DDC45F0A-6B62-5EE6-9E42-D21F07BCF4B4"><!-- --></a><h2 class="sectiontitle">Thread state
summary</h2> <p>This is a brief summary about nanokernel thread states
and Symbian platform thread states. </p>
 <p><strong>Nanokernel
thread states</strong> </p>
 <p>The state of a nanokernel thread is referred to
as the NState (or N-state). This is to disambiguate it from any other state,
such as the state of a Symbian platform thread (referred to as the MState
or M-state). </p>
 <p>The states of a nanokernel thread are defined by the
values of the <a href="GUID-379D9320-AC3C-3206-8A5D-EE6E5983EBDC.html#GUID-379D9320-AC3C-3206-8A5D-EE6E5983EBDC__GUID-2184305D-18EF-3322-9276-20F8A4253455"><span class="apiname">NThreadBase::NThreadState</span></a> enumeration. </p>
 <p><strong>Symbian platform thread states</strong> </p>
 <p>The state of a Symbian platform
thread is referred to as the MState (or M_state). This is in addition to the
nanokernel N-state, and tracks threads waiting on Symbian platform synchronization
objects. The <samp class="codeph">DThread</samp> class representing a Symbian platform
thread is internal to Symbian, but the following table defines its possible
states. The values in the left-hand column are the enumerators of the internal
enumeration <samp class="codeph">DThread::TThreadState</samp>. </p>
 
<div class="tablenoborder"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-C6ACF17D-2E18-5FCB-9383-BAE57D8F420F"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-C6ACF17D-2E18-5FCB-9383-BAE57D8F420F" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">ECreated</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>The initial state of all Symbian platform threads. It is a transient
state; the thread starts in this state when the <samp class="codeph">DThread</samp> object
is created, and stays in that state until it is ready to be resumed, typically
when DLL linkage and memory allocation is complete. At this point, the state
will change to <samp class="codeph">EReady</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">EDead</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>This is the final state of a Symbian platform thread. A thread enters
this state when it reaches the end of its exit handler, just before the nanokernel
terminates it. In effect, the thread has exited but has not yet been deleted. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">EReady</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>This indicates that the thread is not waiting on, or attached to
any Symbian platform kernel wait object. It does not necessarily imply that
the thread is actually ready to run - this is indicated by the N-state. For
example, a thread that is explicitly suspended or waiting on a nanokernel
wait object (generally a fast semaphore) still has a READY M-state provided
that it is not attached to any Symbian platform wait object. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">EWaitSemaphore</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>This indicates that the thread is currently blocked waiting for
a Symbian platform semaphore, and is enqueued on the semaphore’s wait queue.
The thread’s <samp class="codeph">DThread::iWaitObj</samp> field points to the semaphore. </p>
 <p>For
example, this is the case if the thread calls <a href="GUID-C197C9A7-EA05-3F24-9854-542E984C612D.html#GUID-C197C9A7-EA05-3F24-9854-542E984C612D__GUID-50223158-D05D-33FE-A3DD-FFA9E2F464FF"><span class="apiname">User::WaitForRequest()</span></a> or <a href="GUID-AED27A76-3645-3A04-B80D-10473D9C5A27.html#GUID-AED27A76-3645-3A04-B80D-10473D9C5A27__GUID-68F18434-4758-33BA-9959-1F92A50651A2"><span class="apiname">RSemaphore::Wait()</span></a>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">EWaitSemaphoreSuspended</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>This indicates that the thread has been explicitly suspended after
blocking on a Symbian platform semaphore, and is enqueued on the semaphore’s
suspended queue. The thread’s <samp class="codeph">DThread::iWaitObj</samp> field points
to the semaphore. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">EWaitMutex</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>This indicates that the thread is currently blocked waiting for
a Symbian platform mutex, and is enqueued on the mutex wait queue. The thread’s <samp class="codeph">DThread::iWaitObj</samp> field
points to the mutex. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">EWaitMutexSuspended</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>This indicates that the thread has been explicitly suspended after
blocking on a Symbian platform mutex, and is enqueued on the mutex suspended
queue. The thread’s <samp class="codeph">DThread::iWaitObj</samp> field points to the
mutex. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">EHoldMutexPending</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>This indicates that the thread has been woken up from the EWaitMutex
state but has not yet claimed the mutex. The thread is enqueued on the mutex
pending queue and the thread’s <samp class="codeph">DThread::iWaitObj</samp> field points
to the mutex. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">EWaitCondVar</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>This indicates that the thread is waiting on a condition variable. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">EWaitCondVarSuspended</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>This indicates that the thread is suspended while waiting on a condition
variable. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>

<div class="section" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-C6296C07-220E-5EB8-9E12-F7D63AB4B181"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-C6296C07-220E-5EB8-9E12-F7D63AB4B181"><!-- --></a><h2 class="sectiontitle">Thread and
process exit information summary</h2> <p>User threads and processes have
“exit information”. When a thread or process terminates the reason for the
termination is found in the exit information. For example, a panic will store
the panic category and reason in the exit information. Exit information has
three parts: the exit type, exit reason and exit category. </p>
 <p>Exit type
is defined by the <a href="GUID-0296BFC6-7F7C-3259-AF21-7E9B5C304B24.html"><span class="apiname">TExitType</span></a> enum. </p>
 <p>When a thread
or process is created, its exit type is set to 3. An exit type of 3 indicates
that the thread is still active, though not necessarily running. If the thread
terminates for any reason, then the exit type is changed to reflect the cause
of the exit. </p>
 <p>Once the thread or process has exited, the exit reason
and exit type fields will contain useful information. The contents depends
on the type of exit. </p>
 <p>Note that if the main thread in a process exits,
then the process will exit with the same exit information as the thread. </p>
 <p><strong>Exit category: Terminate</strong> </p>
 <p>if <a href="GUID-B0E661BC-4058-3256-B9C3-5A4FD52F6DE5.html#GUID-B0E661BC-4058-3256-B9C3-5A4FD52F6DE5__GUID-CE11A762-AF52-3122-86C8-C2F362AEF764"><span class="apiname">RThread::Terminate()</span></a> or <a href="GUID-9DD1EA2B-DC59-315C-8E9C-CE6D9461B695.html#GUID-9DD1EA2B-DC59-315C-8E9C-CE6D9461B695__GUID-3DD41FD4-F389-340F-8E18-8FDEBC953251"><span class="apiname">RProcess::Terminate()</span></a> is
called, then the exit category is <samp class="codeph">Terminate</samp>, and the exit
reason is the value of the <samp class="codeph">aReason</samp> argument passed to these
functions. </p>
 <p><strong>Exit
category: Kill</strong> </p>
 <p>If <a href="GUID-B0E661BC-4058-3256-B9C3-5A4FD52F6DE5.html#GUID-B0E661BC-4058-3256-B9C3-5A4FD52F6DE5__GUID-1F717486-784A-32B9-A048-EE4F2450F8C8"><span class="apiname">RThread::Kill()</span></a> or <a href="GUID-9DD1EA2B-DC59-315C-8E9C-CE6D9461B695.html#GUID-9DD1EA2B-DC59-315C-8E9C-CE6D9461B695__GUID-8E87D3AE-E3F0-34DD-98C6-71B0D0D55FB8"><span class="apiname">RProcess::Kill()</span></a> is
called, then the exit category is <samp class="codeph">Kill</samp>, and the exit reason
is the value of the <samp class="codeph">aReason</samp> argument passed to these functions. </p>
 <p><strong>Exit category: panic</strong> </p>
 <p>If a thread panics, then the exit category
is <samp class="codeph">panic</samp>, and the exit reason is the panic number. For example
a USER-19 panic would give the following exit information: </p>
 <pre class="codeblock" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-ACC94269-E06E-5C7F-ACAF-74764FE21A0F"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-ACC94269-E06E-5C7F-ACAF-74764FE21A0F"><!-- --></a>exit type = 2
exit category = “USER”
exit reason = 19
</pre>
 </div>

<div class="section" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-68CF9014-4922-56B9-9E53-AC5697F60E8E"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-68CF9014-4922-56B9-9E53-AC5697F60E8E"><!-- --></a><h2 class="sectiontitle"> Critical threads
and processes</h2> <p>Marking a thread or process as “system critical”
means that it is an integral and essential part of the system, for example,
the file server. In effect the thread or process is being declared necessary
for correct functioning of the device. If a system critical thread exits or
panics then the device will reboot; during development it will enter the debug
monitor. A thread can be set as process critical, which means that if it panics
the process will be panicked. </p>
 </div>

<div class="section" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-6530D514-A6CC-5AE9-AA97-C223B2189A09"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-6530D514-A6CC-5AE9-AA97-C223B2189A09"><!-- --></a><h2 class="sectiontitle"> Kernel calls
and thread context</h2> <p>When a user thread makes a call into any kernel
code, the kernel code continues to run in the context of the user thread.
This applies to device driver code. </p>
 <p>The stack is swapped to a kernel-side
stack and the permissions of the thread are increased to kernel privilege,
but otherwise the user thread is still running. Each thread has a small kernel
stack used to handle kernel calls – it would be dangerous to continue using
the normal thread stack in case it overflows. Some calls are handled in this
state, others – typically device drivers – will post a message to a kernel
side thread to carry out the request. </p>
 </div>

<div class="section" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-5A573FEB-A274-5C0F-A6B6-87D5BAD8A21C"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-5A573FEB-A274-5C0F-A6B6-87D5BAD8A21C"><!-- --></a><h2 class="sectiontitle">Stacks</h2> <p>When
a process is created, a chunk is allocated to hold the process executable's <samp class="codeph">.data</samp> section
(initialised data) and <samp class="codeph">.bss</samp> section (zero filled data). Sufficient
space (default 2Mb) is also reserved as user-side stack space for threads
that run in that process. </p>
 <p>By default, each thread is allocated 8k
of user-side stack space. A guard of 8k is also allocated. </p>
 <p>The stack
area follows the <samp class="codeph">.data</samp> and <samp class="codeph">.bss</samp> sections,
and each thread's user side stack follows. On ARM processors the stack is
descending, so that as items are added to the stack, the stack pointer is
decremented. This means that if the stack overflows, the stack pointer points
into the guard area and causes a processor exception, with the result that
the kernel panics the thread. </p>
 <div class="fignone" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-C87444AA-A8DC-5A5C-B2E6-B15FA69B6CE1"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-C87444AA-A8DC-5A5C-B2E6-B15FA69B6CE1"><!-- --></a>
<img src="GUID-DD0DA06D-4180-54F1-8807-A7BF31D6A1F1_d0e301355_href.png"/>
</div>
 <p>Return addresses are stored by pushing them on to the stack so at
any point you can trace through the stack looking at the saved return addresses
to see the chain of function calls up to the present function. </p>
 <p>The
size of the user-side stack space has an indirect effect on the number of
threads that a process can have. There are other factors involved, but this
is an important one. The limit is a consequence of the fact that a process
can have a maximum of 16 chunks. This means that if threads within a process
can share a heap (allocated from a single chunk), then it is possible to have
a maximum of 128 threads per process [2Mb/(8K + 8K)]. More threads may be
possible if you allow only 4K of stack per thread. </p>
 <p>Apart from the
kernel stack attached to each thread, the kernel also maintains stacks that
are used during processing of interrupts, exceptions and certain CPU states.
Interrupts and exceptions can occur at any time, with the system in any state,
and it would be dangerous to allow them to use the current stack which may
not even be valid or may overflow and panic the kernel. The kernel stacks
are guaranteed to be large enough for all interrupt and exception processing. </p>
 </div>

<div class="section" id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-E3F102A4-D187-5BC9-BE97-9F8447A5DB45"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-E3F102A4-D187-5BC9-BE97-9F8447A5DB45"><!-- --></a><h2 class="sectiontitle">Virtual memory
and run addresses</h2> <p>Symbian platform devices have an MMU which is
used to map the addresses seen by running code to real addresses of memory
and I/O. The MMU in effect creates a virtual memory map, allowing scattered
blocks of RAM to appear contiguous, or for a section of memory to appear at
different addresses in different processes, or not at all. </p>
 <p>Symbian
platform uses the MMU to provide memory protection between processes, to allow
sharing of memory, efficient allocation of RAM and to make all processes “see”
the same memory layout. Three different memory models are supported by Symbian
platform on ARM CPUs: </p>
 <ul>
<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-456A3D12-E1E0-5289-B5EB-2E3A47F07684"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-456A3D12-E1E0-5289-B5EB-2E3A47F07684"><!-- --></a><p>moving model: this is
the model familiar from EKA1 where processes are moved to a run-address in
low memory when executing and moved back to a home-address in high memory
when not running. </p>
 </li>

<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-3A5BCC68-7BAC-58B8-9727-54A880A7CED3"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-3A5BCC68-7BAC-58B8-9727-54A880A7CED3"><!-- --></a><p>direct model: this is
used when the CPU does not have an MMU, or is emulating a system without an
MMU. Not normally used, but occasionally useful for development boards </p>
 </li>

<li id="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-7CB07322-B33E-5723-975C-6D2442B924F9"><a name="GUID-49379616-C235-598D-AE43-668998AD072B__GUID-7CB07322-B33E-5723-975C-6D2442B924F9"><!-- --></a><p>multiple model: only
supported in ARM architecture V6 and above, each process has its own set of
MMU tables. A context switch changes the current MMU table to the new thread’s
table, instead of moving memory about in a single table as with moving model. </p>
 </li>

</ul>
 <p><strong>Fixed
processes</strong> </p>
 <p>For ARM architectures with a virtually-tagged cache,
fixed processes avoid the need to flush the cache on context switches by keeping
all the code and data at a fixed address. This implies that there can only
ever be one instance of each fixed process because the data chunk address
cannot be changed. </p>
 <p>Important servers such as the file server and window
server are fixed. </p>
 <p>There is no limit to the number of fixed processes
that can be supported. The kernel will attempt to use ARM domains for fixed
process protection, but there are a limited number of domains so when they
are exhausted normal MMU techniques will be used. Domains are slightly faster
in a context switch but this is negligible compared to the real purpose of
the fixed process in avoiding the cache flush. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-26714A57-B6B4-5E81-B512-FB520718482B.html" title="Describes how to get basic information about the system state when problems occur on hardware to help you debug your software.">Debug Monitor Tool</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>