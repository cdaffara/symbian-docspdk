<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="File services in Symbian platform"/>
<meta name="abstract" content="This topic describes the common concepts of file systems and files used by Symbian platform."/>
<meta name="description" content="This topic describes the common concepts of file systems and files used by Symbian platform."/>
<meta name="DC.Relation" scheme="URI" content="GUID-BB9760B4-4F3F-5326-81FB-B644C82F0E65.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-BB9760B4-4F3F-5326-81FB-B644C82F0E65.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-310A8A9C-98E7-59EE-9376-8E572580190F"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>File services in Symbian platform</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2399034 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-BB9760B4-4F3F-5326-81FB-B644C82F0E65.html" title="Symbian platform manages the basic permanent storage of data through file systems. Drives and file systems are common resources used by many programs, and access to them is managed by the File Server. The File Server is flexible, and can use many different file system formats and physical storage media. Applications and services access files, directories, and drives through the File Server client side API.">File Server</a> &gt; </div>
<h1 class="topictitle1">File services in Symbian platform</h1>
<div><p>This topic describes the common concepts of file systems
and files used by Symbian platform.</p>

<p>Like other software systems, Symbian platform can store data so
that it is kept when a handset is powered down. </p>

<p>On PCs, a file is kept on magnetic disk or optical media such as
CD or DVD. On older generations of personal organisers, a file was
often kept in RAM, needing a permanent power supply, and a backup
battery to guarantee this. On the most recent telephone handsets,
files are normally stored in flash memory, either NOR flash or NAND
flash, and also on removable devices such as MultiMediaCard (MMC),
Secure Digital card (SD card), Memory Stick or Compact flash (CF). </p>

<p>There are more sophisticated services for persisting data such
as streams, stores, central repository etc. that applications can
use, but they all rely, either directly or indirectly, on the commonly
understood idea of the file. </p>

<p>The ROM on a typical handset is located in non-volatile flash memory,
allowing it to be upgraded by the handset manufacturer after initial
production. The location for user data is almost always flash memory
(NAND or NOR), on the grounds of cost, although rotating media devices
capable of holding large amounts of data are likely in future handsets. </p>

<ul>
<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-798E9ED1-24DF-5990-9D1E-CD043B94B722"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-798E9ED1-24DF-5990-9D1E-CD043B94B722"><!-- --></a><p> <a href="GUID-310A8A9C-98E7-59EE-9376-8E572580190F.html#GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-DD8C4BFB-9816-5EA5-A9F2-5146C64BBC9C">Basic concepts</a>  </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-BBB6D4C2-4AE6-55CD-BC65-416BCF705F31"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-BBB6D4C2-4AE6-55CD-BC65-416BCF705F31"><!-- --></a><p> <a href="GUID-310A8A9C-98E7-59EE-9376-8E572580190F.html#GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-62387DD0-D8E4-5426-8432-B14696291AF8">Accessing file services</a>  </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-B6AEF9DA-60D3-5728-9C46-59EE5C98346C"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-B6AEF9DA-60D3-5728-9C46-59EE5C98346C"><!-- --></a><p> <a href="GUID-310A8A9C-98E7-59EE-9376-8E572580190F.html#GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-9FF4525A-EBFD-5E9F-BD86-C6B75E5C35EF">Security issues</a>  </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-ACF583E3-3FAA-52FE-9A07-8172A4BBBCC9"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-ACF583E3-3FAA-52FE-9A07-8172A4BBBCC9"><!-- --></a><p> <a href="GUID-310A8A9C-98E7-59EE-9376-8E572580190F.html#GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-849F5D6E-7911-55F8-839A-019D1BF16726">File systems and mounting a drive</a>  </p>
 </li>

</ul>

<div class="section" id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-DD8C4BFB-9816-5EA5-A9F2-5146C64BBC9C"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-DD8C4BFB-9816-5EA5-A9F2-5146C64BBC9C"><!-- --></a><h2 class="sectiontitle">Basic
concepts</h2> <p>Symbian platform uses a number of file concepts
that are common to most operating systems, for example, drives and
directories. </p>
 <p><strong>Drives</strong> </p>
 <p>Symbian platform uses the concept of the <em>drive</em>. This idea is similar to that in other operating systems,
i.e. it corresponds to a logical device. A media device such as a
MultiMediaCard can be logically split into partitions, and each partition
is treated as a separate drive. Symbian platform adopts a DOS-like
convention where each drive is identified by a single letter. This
means that there can be up to 26 drives on a handset, identified by
the letters <span class="filepath">A:</span> through to <span class="filepath">Z:</span>. In practice, there are far fewer than this, and the number depends
on the individual manufacturer's handset </p>
 <p>Internally, Symbian
platform uses the idea of a drive number instead of a letter, and
some legacy API items take a drive number as input, or return a drive
number as output. However, there are functions that can translate
drive numbers to and from drive letters: <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html#GUID-E263C747-946F-35AA-9F1D-41833BD350FC__GUID-A0F50C51-A4F0-33C1-BBD4-757DEC4B7F2E"><span class="apiname">RFs::DriveToChar()</span></a> and <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html#GUID-E263C747-946F-35AA-9F1D-41833BD350FC__GUID-D545B868-0549-37A9-AACE-288E7C9CE8C3"><span class="apiname">RFs::CharToDrive()</span></a>. </p>
 <p>The main ROM
on a handset is always identified as the <span class="filepath">Z:</span> drive.
Other drives may be in use: sixteen of the drives <span class="filepath">C:</span> to <span class="filepath">R:</span> are usually reserved as local drives,
i.e. for media devices located within the handset. A common convention
is to adopt <span class="filepath">C:</span> as the main user data drive. and
to designate <span class="filepath">D:</span> or <span class="filepath">E:</span> as
drives for removable media. <em>Be aware</em>, however, that this is
a convention that some handset manufacturers may not follow, so you
are always advised to check the full SDK that applies to a specific
handset for guidance. Indeed, as a matter of principle, you should
always use the <a href="GUID-629AB2C9-BEDD-5166-8B09-F8DFF7527C03.html" title="This topic describes the properties and its uses of system drive">system drive</a> for user data. </p>
 <p><strong>Volume</strong> </p>
 <p>The concept of the volume applies to removable
media. As users insert and remove individual devices, so different
volumes are said to be mounted and demounted. For media types that
can be split into partitions, each partition corresponds to a separate
volume. </p>
 <p><strong>File names and directory structures</strong> </p>
 <p>Files have names,
and Symbian platform uses a hierarchical directory structure in which
to organize them; this is similar to schemes adopted by other operating
systems. For example: </p>
 <pre class="codeblock" id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-C4330879-E93B-5939-A810-8D4A1E5B14DB"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-C4330879-E93B-5939-A810-8D4A1E5B14DB"><!-- --></a>C:\AAA\BBB\CCC\DDD.EXT</pre>
 <p>There are four main parts to the structure: </p>
 <ul>
<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-39D18587-8793-511F-B3CC-8CFA6D129F80"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-39D18587-8793-511F-B3CC-8CFA6D129F80"><!-- --></a><p>the <em>drive</em>; this is always at the top of the hierarchy, and is represented
by a drive letter and a colon. </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-8F5F5EB0-721F-5C5B-90B6-08E2CB92BA98"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-8F5F5EB0-721F-5C5B-90B6-08E2CB92BA98"><!-- --></a><p>the <em>path</em>; this is a list of names, each name representing a level in the
hierarchy. Each directory name is separated by a back slash character,
and the last directory name is always terminated by a back slash character. </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-BD848A50-9BEA-5E08-ACDB-92EDB9C5CA86"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-BD848A50-9BEA-5E08-ACDB-92EDB9C5CA86"><!-- --></a><p>the <em>filename</em>; this is everything after the final backslash, and before the dot
if there is a file extension. Symbian platform supports long file
filenames. </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-07E1D5CB-9D9B-5141-AD7B-76F839AA2FC0"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-07E1D5CB-9D9B-5141-AD7B-76F839AA2FC0"><!-- --></a><p>the <em>extension</em>, everything after the final dot. There is no restriction on the
length of the extension; limits on length apply to the whole structure,
not to any single part of it. </p>
 </li>

</ul>
 <p>You will find that the whole structure is sometimes referred
to as the full file name or the full path name. The maximum length
of a full file name is limited to 256 characters. Symbian platform
does not use the extension to identify the software or application
that can access the data. Instead, files have UIDs embedded within
them, and the mapping of files to applications is done through these
UIDs. For more information, see <strong>Symbian^3 Tools Guide &gt; Building</strong>.</p>
 <p>The case of full path names is always preserved, but operations
on names are case insensitive. This means that two files that have
the same name but differ only in case are considered to refer to the
same file. </p>
 <p>Full file names are normally manipulated programmatically.
Extracting drive names, filenames, file extensions, and changing the
names of a directory structure are typical activities. Symbian platform
provides you with the <a href="GUID-E79A3B03-F8CB-37DB-A2A8-1C6C4E4D739A.html"><span class="apiname">TParse</span></a>, <a href="GUID-A6268E58-68EC-3041-93FD-5368CD230947.html"><span class="apiname">TParsePtr</span></a>, and <a href="GUID-C65BCDAB-0476-3EAC-9BFC-37243AE43FE9.html"><span class="apiname">TParsePtrC</span></a> classes to help you do this manipulation. </p>
 <p>See <a href="GUID-ECF9E432-EA93-5284-B0E6-A1211289CBD8.html" title="This section describes the concepts related to parsing path and their filenames.">parsing
paths and filenames</a> . </p>
 </div>

<div class="section" id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-62387DD0-D8E4-5426-8432-B14696291AF8"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-62387DD0-D8E4-5426-8432-B14696291AF8"><!-- --></a><h2 class="sectiontitle">Accessing
file services</h2> <p>On Symbian platform, file services are a
common resource. Like other common or shared resources on Symbian
platform, file services are handled by a server - the file server.
Applications and other software that require access to files, directories
and drives are clients of the file server, and send file-related requests
using the <a href="GUID-198DCED1-F429-5C95-A51D-53AE416687E8.html">file
server client-side API</a>. </p>
 <p>The file server is multithreaded,
which allows each logical drive to be accessed concurrently. More
than one request can be issued for the same drive, but these requests
are handled sequentially. For example, a request to read or write
data to a MultiMediaCard can be handled at the same time as a request
to read or write data to the main user drive. </p>
 <p>The file server
has a main thread that initially handles all requests. Short requests,
such as those that require access to the ROM drive, and those that
do not require access to any media, run in the file server. </p>
 <p>The services provided by the file server can be divided into two
types: </p>
 <ul>
<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-12F7606D-835D-5948-B0F0-EBACC5F6E569"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-12F7606D-835D-5948-B0F0-EBACC5F6E569"><!-- --></a><p>those that give
you access to individual files, directories and drives using the <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html"><span class="apiname">RFile</span></a>, <a href="GUID-12AE154F-7741-38C0-ADFE-9784FCF5E516.html"><span class="apiname">RDir</span></a> and <a href="GUID-9D7E765B-6872-3EB9-9D5B-1503FA466EC1.html"><span class="apiname">RFormat</span></a> classes. </p>
 <p>See also <a href="GUID-30B2AF3F-E120-5D47-AAA2-529555625B55.html" title="This topic describes how to use file server sessions, files and directories effectively.">How to use sessions,
files, and directories</a>. </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-9E40CF33-C35E-52CE-80B9-8A019F34F305"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-9E40CF33-C35E-52CE-80B9-8A019F34F305"><!-- --></a><p>those that allow
you to do higher level longer running operations such as moving, copying
and deleting files, using the <a href="GUID-82CEC14F-1479-3922-846A-9FCDB6465EF7.html"><span class="apiname">CFileMan</span></a> class, scanning
directory trees using the <a href="GUID-C657AF2D-1183-3CD2-ACAF-3B0B00FC91BB.html"><span class="apiname">CDirScan</span></a> class, and tracking
the progress of these operations using the <a href="GUID-E608485F-B3E3-3310-A80E-169D8B9D2234.html"><span class="apiname">MFileManObserver</span></a> class. </p>
 <p>See also <a href="GUID-ACF6C0A2-87ED-55B3-B22A-9B331D9940AC.html" title="This section describes the concepts related to file management and searching.">File management and
searching</a>.  </p>
 </li>

</ul>
 <p>Like most other servers, the client API allows you to make
file requests synchronously or asynchronously. </p>
 <p>See also <a href="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html">client-server</a>. </p>
 </div>

<div class="section" id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-9FF4525A-EBFD-5E9F-BD86-C6B75E5C35EF"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-9FF4525A-EBFD-5E9F-BD86-C6B75E5C35EF"><!-- --></a><h2 class="sectiontitle">Security
issues</h2> <p>Security considerations restrict the parts of a
handset's directory structure that an application is allowed to access.
The concept is referred to as <em>data caging</em>. </p>
 <p>There are
a number of principles involved: </p>
 <ul>
<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-21674EE5-40A3-5F71-9973-C089FD838585"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-21674EE5-40A3-5F71-9973-C089FD838585"><!-- --></a><p>The fundamental
principle is the separation of executable code from data. Executable
code can only reside in the <span class="filepath">/sys/bin/</span> directory.
Executables cannot be loaded from any location other than <span class="filepath">/sys/bin/</span>. Unless an application has the appropriate system
capabilities, the <span class="filepath">/sys/</span> directory is not visible
to that application. System capabilities are a discrete set of 'permissions'
that give access to various sensitive system services, and which can
only be granted to applications, if justified, through the <a href="https://www.symbiansigned.com/app/page" target="_blank">Symbian
Signed</a> scheme. </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-4A1854CE-25CB-5630-A27C-73931D937567"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-4A1854CE-25CB-5630-A27C-73931D937567"><!-- --></a><p>Applications
have their own private directory, under which they are free to create
further directory structures and files, and to write to those files.
This is the directory structure <span class="filepath">/private/&lt;app_SID&gt;/</span>. <em>&lt;app_SID&gt;</em> is known as a secure identifier and, in general,
is used when verifying an executable's rights of access to system
resources. Here, it is used to form the path name for the executable's
private directory. The secure identifier is a UID which is allocated
to a developer through the <a href="https://www.symbiansigned.com/app/page" target="_blank">Symbian
Signed</a> scheme, and is guaranteed to be unique within the handset
on which the application is installed. The UID is coded into the <span class="filepath">mmp</span> file(s) that define the application's source files,
link requirements, and general characteristics. </p>
 <p>Other applications
have no right of access to an application's private directory. </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-2814D086-A660-5294-9952-E6D66243B652"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-2814D086-A660-5294-9952-E6D66243B652"><!-- --></a><p>There is a directory <span class="filepath">/resource/</span> to which all applications have read access,
but no write access. The purpose of this directory is to conatin common
read-only files. </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-FC6EE81A-59FA-5AC5-8EC4-3034597F8829"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-FC6EE81A-59FA-5AC5-8EC4-3034597F8829"><!-- --></a><p>All other directories
are accessible for both reading and writing. This allows the use of
standard file system hierarchies that may be available on removable
media. </p>
 </li>

<li id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-95121831-873B-5E79-B07C-410858FC9779"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-95121831-873B-5E79-B07C-410858FC9779"><!-- --></a><p>The above principles
apply regardless of the drive. </p>
 </li>

</ul>
 <p>It is possible to pass an open file to another process, or
between a client and server, so that the target can access the file
without knowing the full path name. The only information that is passed
to the target is the filename and extension. </p>
 </div>

<div class="section" id="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-849F5D6E-7911-55F8-839A-019D1BF16726"><a name="GUID-310A8A9C-98E7-59EE-9376-8E572580190F__GUID-849F5D6E-7911-55F8-839A-019D1BF16726"><!-- --></a><h2 class="sectiontitle">File
systems and mounting a drive</h2> <p>The varying characteristics
of media types can mean that different media types require different
formats. A common format is VFAT, and typically, this is used for
removable media to maintain compatibility with other systems. This
also means that long file names are supported. </p>
 <p>In Symbian
platform, format schemes are implemented by what are called file systems;
they are constructed as plugins to the file server. This means that
the file server itself is independent of the format scheme, and also
means that a phone manufacturer is free to add new file systems to
a handset. The ROM is an exception - it has its own file system built
into the main file server code. </p>
 <p>A file system must be associated
with a drive before the drive can be used. This is known as mounting
the drive, and is typically done at system boot time. </p>
 <p>In practice,
an application does not need to concern itself with the format scheme. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-BB9760B4-4F3F-5326-81FB-B644C82F0E65.html" title="Symbian platform manages the basic permanent storage of data through file systems. Drives and file systems are common resources used by many programs, and access to them is managed by the File Server. The File Server is flexible, and can use many different file system formats and physical storage media. Applications and services access files, directories, and drives through the File Server client side API.">File Server</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>