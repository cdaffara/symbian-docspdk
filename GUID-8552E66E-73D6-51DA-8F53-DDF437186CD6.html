<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Validation"/>
<meta name="abstract" content="Describes the DMA test code to validate the port of DMA framework."/>
<meta name="description" content="Describes the DMA test code to validate the port of DMA framework."/>
<meta name="DC.Relation" scheme="URI" content="GUID-3F47E907-975A-5739-9B03-042CB90D675D.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A91C6359-E547-51AD-AA8C-45BCAFBA98AC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DF2F0439-AE1A-599C-91B9-6EF2177C3C7E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3F47E907-975A-5739-9B03-042CB90D675D.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Validation</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6"><a name="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2399872 id2399981 id2400012 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-A91C6359-E547-51AD-AA8C-45BCAFBA98AC.html" title="EKA2 is the principal Hardware and Kernel Services module. It manages the CPU and memory resources of a phone, and provides an architecture for device drivers to manage other hardware resources.">Kernel Architecture (EKA2)</a> &gt; <a href="GUID-DF2F0439-AE1A-599C-91B9-6EF2177C3C7E.html" title="The DMA Framework is a kernel extension that manages DMA (Direct Memory Access) hardware.">DMA Framework</a> &gt; <a href="GUID-3F47E907-975A-5739-9B03-042CB90D675D.html" title="Describes the steps to implement a port of the DMA Framework.">Port Implementation Tutorial</a> &gt; </div>
<h1 class="topictitle1">Validation</h1>
<div><p>Describes the DMA test code to validate the port of DMA framework.</p>

<p>The same set of source code is used to build two different DMA test harnesses: </p>

<a name="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6__GUID-57C2BE90-6771-5C69-804F-CC08AEB43E88"><!-- --></a><ol id="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6__GUID-57C2BE90-6771-5C69-804F-CC08AEB43E88">
<li id="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6__GUID-778D3856-4605-5156-826F-9B4FCEC296CE"><a name="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6__GUID-778D3856-4605-5156-826F-9B4FCEC296CE"><!-- --></a><p>It builds: <span class="filepath">T_DMASIM.EXE</span>, <span class="filepath">D_DMASIM.LDD</span>,
and <span class="filepath">DMASIM.DLL</span>. This is a software-simulated implementation
of DMA. This harness is used mainly for debugging and validating the PIL (platform-independent
layer) as it simulates every kind of DMA controller. The DMA simulator and
associated PSL (platform-specific layer) is in <span class="filepath">...\e32test\dma\dmasim.cpp</span>. </p>
 </li>

<li id="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6__GUID-69027EF2-66D9-56C3-B63C-269D729382D5"><a name="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6__GUID-69027EF2-66D9-56C3-B63C-269D729382D5"><!-- --></a><p>It builds: <span class="filepath">T_DMA.EXE</span>, <span class="filepath">D_DMA.LDD</span>.
The source code for building these executables is in <span class="filepath">...\e32test\dma\t_dma.cpp</span> and <span class="filepath">...\e32test\dma\d_dma.cpp</span> respectively </p>
 </li>

</ol>

<p> <span class="filepath">T_DMA.EXE</span> is a user-side harness, and is an automatic
test included in the E32TEST suite. It assumes that the underlying DMA controller
supports memory to memory transfers. This executable delegates most of the
work to D_DMA.LDD (built from base\e32test\dma\d_dma.cpp), a logical device
driver that acts as a client for the DMA Framework. D_DMA.LDD links statically
against DMA.DLL, the DMA Framework kernel extension and as such must be built
from the variant. </p>

<p> <span class="filepath">T_DMA.EXE</span> delegates most of the work to <span class="filepath">D_DMA.LDD</span>,
which is a logical device driver that acts as a client for the DMA Framework. <span class="filepath">D_DMA.LDD</span> links
statically against <span class="filepath">DMA.DLL</span>, the DMA Framework kernel
extension, and as such must be built from the variant. In practice, this means
that <span class="filepath">D_DMA.LDD</span> must be specified in the test <span class="filepath">bld.inf</span> for
the variant being ported. See <span class="filepath">...\template_variant\test\bld.inf</span> for
an example. </p>

<p> <span class="filepath">D_DMA.LDD</span> calls the <samp class="codeph">DmaTestInfo()</samp> function
in the PSL to discover the capacities of the PSL: number of channels, maximum
transfer size, etc. This is the template implementation: </p>

<pre class="codeblock" id="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6__GUID-AB52EDB6-B76A-5362-B8F6-64DBF7E39460"><a name="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6__GUID-AB52EDB6-B76A-5362-B8F6-64DBF7E39460"><!-- --></a>TDmaTestInfo TestInfo =
    {
    0,
    0,
    0,
    0,
    NULL,
    0,
    NULL,
    0,
    NULL
    };

</pre>

<pre class="codeblock" id="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6__GUID-8A365AA3-9D88-5A62-9DE8-F5D7DFDEBAC4"><a name="GUID-8552E66E-73D6-51DA-8F53-DDF437186CD6__GUID-8A365AA3-9D88-5A62-9DE8-F5D7DFDEBAC4"><!-- --></a>EXPORT_C const TDmaTestInfo&amp; DmaTestInfo()
//
//
//
    {
    return TestInfo;
    }

</pre>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-3F47E907-975A-5739-9B03-042CB90D675D.html" title="Describes the steps to implement a port of the DMA Framework.">Port Implementation Tutorial</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>