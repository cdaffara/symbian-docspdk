<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Creating a Linked Typeface"/>
<meta name="abstract" content="The API that allows the linked typeface to be specified is for use by device creators. It is primarily designed for the creation of device system fonts. The platform security capability ECapabilityWriteDeviceData is required to register linked typefaces. ECapabilityReadDeviceData is required to fetch linked typeface information from the Font and Bitmap Server."/>
<meta name="description" content="The API that allows the linked typeface to be specified is for use by device creators. It is primarily designed for the creation of device system fonts. The platform security capability ECapabilityWriteDeviceData is required to register linked typefaces. ECapabilityReadDeviceData is required to fetch linked typeface information from the Font and Bitmap Server."/>
<meta name="DC.Relation" scheme="URI" content="GUID-B798C19D-4030-564A-A208-D84738259D72.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1DCA2F4D-ABE6-52A0-AC4E-5AAC1AB5909D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-762A665F-43D0-53ED-B698-0CBD3AC46391.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B798C19D-4030-564A-A208-D84738259D72.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5042997F-4B8C-538D-B1E0-DD82F5283BB6.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-90644B52-69D7-595C-95E3-D6F7A30C060D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-416A3756-B5D5-5BCD-830E-2371C5F6B502.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-71DADA82-3ABC-52D2-8360-33FAEB2E5DE9.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Creating a Linked Typeface</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2535736 id2535744 id2535786 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-1DCA2F4D-ABE6-52A0-AC4E-5AAC1AB5909D.html">Text and Localization Guide</a> &gt; <a href="GUID-762A665F-43D0-53ED-B698-0CBD3AC46391.html" title="The Font and Text Services Collection contains the Font Store and related plug-ins and the Text Rendering component. Application developers can select fonts from the Font Store. Device creators can create and add fonts.">Font and Text Services Collection</a> &gt; <a href="GUID-B798C19D-4030-564A-A208-D84738259D72.html" title="The Font Store is encapsulated by the Font and Bitmap Server. It represents all of the fonts stored as files in the file system. Font files may be of the native Symbian bitmap format or they may require rasterising into bitmaps. Font rasterisers are ECOM plug-ins to the Font Store.">Font Store Component</a> &gt; </div>
<h1 class="topictitle1">Creating
a Linked Typeface</h1>
<div><p>The API that allows the linked typeface to be specified is for
use by device creators. It is primarily designed for the creation of device
system fonts. The platform security capability <samp class="codeph">ECapabilityWriteDeviceData</samp> is
required to register linked typefaces. <samp class="codeph">ECapabilityReadDeviceData</samp> is
required to fetch linked typeface information from the Font and Bitmap Server.</p>

<p> <strong>Target audience</strong>: Device creators. </p>

<p>This topic builds on the material in the <a href="GUID-5042997F-4B8C-538D-B1E0-DD82F5283BB6.html" title="The linked font feature allows the creation of linked typefaces using characters from two or more existing typefaces. Once created, linked typefaces are available to all users. Application developers do not need to know whether a font is a linked font or a real font.">Linked
Fonts Guide</a>. </p>

<p>Once a linked typeface has been created any client may get a linked font
back in response to a request for the nearest font. When the Font Store searches
for the best match to the requested font specification, linked fonts are considered
alongside normal bitmap and open fonts. If a linked font represents the best
match, it is returned. As far as the client is concerned, the fact that it
is a linked font is invisible. </p>

<div class="section" id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-7B4322AA-A3DD-4849-AEF5-EF2C0EC5728D"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-7B4322AA-A3DD-4849-AEF5-EF2C0EC5728D"><!-- --></a><h2 class="sectiontitle">Example code</h2> <p>The following code example shows how
to create, specify and then register a linked typeface. </p>
 <pre class="codeblock" id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-052800CC-89C1-5279-85F1-354A4E72A93F"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-052800CC-89C1-5279-85F1-354A4E72A93F"><!-- --></a>// Create a typeface specification
CLinkedTypefaceSpecification *typefaceSpec;
    
// This is the name of the new linked typeface.
_LIT(KLinkedTypeface, "LinkedTypefaceTT") ;  
            
typefaceSpec = CLinkedTypefaceSpecification::NewLC( KLinkedTypeface );
    
// Create at least one linked typeface group.
// Each typeface in the linked font must be assigned to a group.
// The group specifies font characteristics.
const TUint KGroup1Id = 1 ; // group ID
CLinkedTypefaceGroup* group1 = CLinkedTypefaceGroup::NewLC( KGroup1Id ); 
     
// Italic angle is specified as a percentage. 
group1-&gt;SetItalicAngle( 30 ); 
group1-&gt;SetBaselineShift( ENoBaselineShift ); 
    
// Add the group to the typeface specification
typefaceSpec-&gt;AddLinkedTypefaceGroupL( *group1 );
CleanupStack::Pop(); // group1.
    
// Add additional groups...
const TUint KGroup2Id = 2; 
    
...
    
// Add first typeface by creating an element specification. 
// This must be the name of a font in the font store.
_LIT( KLinkedTypeface1, "LinkedFont1TT" );  
    
CLinkedTypefaceElementSpec *elementSpec1;
elementSpec1 = CLinkedTypefaceElementSpec::NewLC( KLinkedTypeface1, KGroup1Id );
    
// One typeface (not necessarily the first) must be set as the canonical typeface.
elementSpec1-&gt;SetCanonical( ETrue );
    
// Add the element to the typeface.
typefaceSpec-&gt;AddTypefaceAtBackL( *elementSpec1 );
CleanupStack::Pop() ;  // elementSpec1.
    
// Create and add additional element specifications.
    
...
    
elementSpecX = CLinkedTypefaceElementSpec::NewLC( KLinkedTypefaceX, KGroupNId );
    
...
    
typefaceSpec-&gt;AddTypefaceAtBackL( *elementSpecX );
    
...
    
// Register the linked typeface with the Typeface store.
// iDev is a previously created CFbsDevice.
CFbsTypefaceStore* typefaceStore = CFbsTypefaceStore::NewL( iDev ); 
CleanupStack::PushL( typefaceStore );
    
typefaceSpec-&gt;RegisterLinkedTypefaceL( *typefaceStore  );
CleanupStack::PopAndDestroy( 2, store );</pre>
 <p>The following code
example shows one way of getting the nearest font to a specified font specification. </p>
 <pre class="codeblock" id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-798C4BE0-13E3-52E3-BA11-BAD7BBDD019B"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-798C4BE0-13E3-52E3-BA11-BAD7BBDD019B"><!-- --></a>TFontSpec fontSpec;
fontSpec.iTypeface.iName = KRequiredTypeface;
fontSpec.iHeight = 20;
fontSpec.iFontStyle.SetBitmapType(EAntiAliasedGlyphBitmap);
    
// CFbsTypefaceStore
CFont* myFont;
tfstore-&gt;GetNearestFontToMaxHeightInPixelsL(myFont, fontSpec);
    
// CFbsBitGc
gc-&gt;UseFont(myFont);
...</pre>
 </div>

<div class="section" id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-65E23E47-3E83-4628-8194-68B1F9121DD2"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-65E23E47-3E83-4628-8194-68B1F9121DD2"><!-- --></a><h2 class="sectiontitle">Multiple linked typefaces</h2> <p>You can create any number
of linked typefaces (subject to device resource limitations) as long as they
all have different names. You can: </p>
 <ul>
<li id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-FF336655-EB61-592E-B53F-9A57F633003C"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-FF336655-EB61-592E-B53F-9A57F633003C"><!-- --></a><p>use the same typeface
as a component typeface in multiple linked typefaces </p>
 </li>

<li id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-AD9D223D-DFEC-508E-924D-E094DCCC8B5A"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-AD9D223D-DFEC-508E-924D-E094DCCC8B5A"><!-- --></a><p>create the same linked
font multiple times in multiple clients </p>
 </li>

<li id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-063627A4-6977-53AB-B5D0-6D719D5A693F"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-063627A4-6977-53AB-B5D0-6D719D5A693F"><!-- --></a><p>create multiple linked
fonts, with different specifications, from the same linked typeface </p>
 </li>

<li id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-992337FA-8694-5543-BBE2-3B71E9A99634"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-992337FA-8694-5543-BBE2-3B71E9A99634"><!-- --></a><p>create multiple linked
fonts from different linked typefaces </p>
 </li>

<li id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-6D846BAB-6E9F-58FB-BBF7-5D34FED41E9E"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-6D846BAB-6E9F-58FB-BBF7-5D34FED41E9E"><!-- --></a><p>create linked typefaces
that can contain nested linked typefaces, if supported by the font rasterizer. </p>
 </li>

</ul>
 <p>The following constraints apply: </p>
 <ul>
<li id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-F1907D39-0E96-5CEA-81C8-BCCD98FC90D6"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-F1907D39-0E96-5CEA-81C8-BCCD98FC90D6"><!-- --></a><p>The typefaces composing
a linked typeface must be open typefaces. Bitmaps fonts are not supported. </p>
 </li>

<li id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-56FE1B5E-9B4C-50CA-887B-53ED72136AFC"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-56FE1B5E-9B4C-50CA-887B-53ED72136AFC"><!-- --></a><p>The linked typeface
name must be unique. </p>
 </li>

<li id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-67F9FAA2-3110-545A-95F4-FDDF2B8453EA"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-67F9FAA2-3110-545A-95F4-FDDF2B8453EA"><!-- --></a><p>The typefaces in a linked
typeface must be present when the linked typeface is registered. </p>
 </li>

<li id="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-13AF8625-19E8-5E05-A325-F856FDA16FE9"><a name="GUID-5B4D38A7-DCDC-51D8-A349-050CF0FD1586__GUID-13AF8625-19E8-5E05-A325-F856FDA16FE9"><!-- --></a><p>Linked typefaces cannot
be deleted. </p>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-B798C19D-4030-564A-A208-D84738259D72.html" title="The Font Store is encapsulated by the Font and Bitmap Server. It represents all of the fonts stored as files in the file system. Font files may be of the native Symbian bitmap format or they may require rasterising into bitmaps. Font rasterisers are ECOM plug-ins to the Font Store.">Font Store Component</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-5042997F-4B8C-538D-B1E0-DD82F5283BB6.html" title="The linked font feature allows the creation of linked typefaces using characters from two or more existing typefaces. Once created, linked typefaces are available to all users. Application developers do not need to know whether a font is a linked font or a real font.">Linked Fonts
Guide</a></div>
<div><a href="GUID-90644B52-69D7-595C-95E3-D6F7A30C060D.html" title="A font is a set of characters of matching size (height) and appearance. In order to be displayed each character must ultimately be drawn as a series of pixels (a bitmap). Symbian can store fonts in bitmap or vector form. A vector font (for example, an OpenType font) must be converted to bitmaps (or rasterized) before it can be drawn. Symbian caches and shares bitmaps for performance and memory efficiency.">Font and
Text Services Collection                 Overview </a></div>
<div><a href="GUID-416A3756-B5D5-5BCD-830E-2371C5F6B502.html" title="The Font Store contains all of the fonts and typefaces on a phone. It is encapsulated by the Font and Bitmap server which provides a client-side class that applications use to find which fonts are available and to find fonts to match their requirements.">Font Store
Component                 Overview </a></div>
<div><a href="GUID-71DADA82-3ABC-52D2-8360-33FAEB2E5DE9.html" title="The Font and Bitmap Server (FBServ) provides a memory efficient way of using bitmaps and fonts. It stores a single instance of each bitmap in either a shared heap or in eXecute In Place (XIP) ROM and provides clients with read and (when appropriate) write access."> Font and
Bitmap Server                 Component Overview </a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>