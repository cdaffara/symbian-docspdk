<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Creating Cryptographic Context"/>
<meta name="DC.Relation" scheme="URI" content="GUID-41E0D200-4A79-5D2B-BA4F-7AE55B5C3FBF.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-690FD404-5F40-5A0B-BE71-A4A310DF1C0E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-41E0D200-4A79-5D2B-BA4F-7AE55B5C3FBF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-06370120-7738-5694-9A8C-3B5B1E3A4352.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-79846EA2-33CD-5D01-8E96-6092C15BD839.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-922F292E-9420-593B-B226-2764C5F29DF9.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6E1AC4C9-7CA3-503A-AFC0-BAF29CCA8290.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F9A24A47-7A0B-5F6E-8B0A-B7A7BCC4EAFC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B9BD2E0A-F214-5344-91A6-E4E99F0D74C8.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F9A24A47-7A0B-5F6E-8B0A-B7A7BCC4EAFC.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-425A208C-5D2D-55FD-8623-9E00006E2781"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Creating Cryptographic Context</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-425A208C-5D2D-55FD-8623-9E00006E2781"><a name="GUID-425A208C-5D2D-55FD-8623-9E00006E2781"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2397554 id2398072 id2398087 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html">Multimedia Protocols Guide</a> &gt; <a href="GUID-690FD404-5F40-5A0B-BE71-A4A310DF1C0E.html" title="The Secure Real-Time Transport Protocol (SRTP) is defined as a profile of RTP. SRTP provides confidentiality, message authentication, and replay protection to the RTP traffic. It also protects the traffic of Real-time Transport Control Protocol (RTCP).">Secure Real-Time Transport Protocol</a> &gt; <a href="GUID-41E0D200-4A79-5D2B-BA4F-7AE55B5C3FBF.html">Tutorials:Index</a> &gt; </div>
<h1 class="topictitle1">Creating
Cryptographic Context</h1>
<div>
<p>SRTP library generates SRTP packets from the RTP or RTCP stream and forwards
the packets to the receiver. SRTP transforms incoming SRTP packets to RTP/RTCP
packets and passes them up the stack. The cryptographic state information
associated with each SRTP stream is termed the cryptographic context. The
state information is maintained by both the sender and receiver of SRTP streams. </p>

<p>A cryptographic context includes a session key used in encryption and message
authentication. A cryptographic context also includes a securely exchanged
random bit string used to derive session keys called the master key. In addition
to the session and master key the cryptographic context includes other working
session parameters. </p>


<div class="section"><h2 class="sectiontitle">Required background</h2> <p>Prior to cryptographic context
creation: </p>
 <ul>
<li id="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-2958EA10-E760-59DE-AC4B-BE8B99CCA660"><a name="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-2958EA10-E760-59DE-AC4B-BE8B99CCA660"><!-- --></a><p>The master key,master
salt and parameters (ie. TSrtpCryptoParams) required to create the cryptographic
context must be created and initalised. </p>
 </li>

</ul>
 </div>

<div class="section"><h2 class="sectiontitle">Procedure</h2><p>The following steps describe the steps
involved in creating a cryptographic context: </p>
<ul>
<li id="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-C6379A93-A005-51B2-8CDA-49A7110C2717"><a name="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-C6379A93-A005-51B2-8CDA-49A7110C2717"><!-- --></a><p>Create a cryptographic
context by invoking the API <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname">NewL()</span></a> or <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname">NewLC()</span></a> of the class <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname">CSRTPCryptoContext</span></a>. </p>
 <a name="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-13319A29-DE4C-50D3-A0F4-02C0E71986ED"><!-- --></a><ol id="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-13319A29-DE4C-50D3-A0F4-02C0E71986ED">
<li id="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-195D2061-6DF7-58CC-BEB8-F321134B0325"><a name="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-195D2061-6DF7-58CC-BEB8-F321134B0325"><!-- --></a><div class="p"><pre class="codeblock" id="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-13CEC739-A557-520B-8AD6-6523BCFCF1B7"><a name="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-13CEC739-A557-520B-8AD6-6523BCFCF1B7"><!-- --></a>
                     IMPORT_C static CSRTPCryptoContext* NewL( const CSRTPMasterKey* aKey,
                                            const CSRTPMasterSalt* aSalt, 
                                            const TSrtpCryptoParams&amp; aCryptoParams);</pre>
 </div>
 <p>aKey
is the input parameter that contains the master key. </p>
 <p>aSalt is the
input parameter that contains the master salt key. </p>
 <p>aCryptoParams is
the input parameter that contains the Crypto Context parameters. </p>
 <p>The
API leaves with KErrNone if successfully executed, else returns a valid system-wide
error code. </p>
 </li>

<li id="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-2F0536E7-0074-52FC-BB9E-0A9A3F03B395"><a name="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-2F0536E7-0074-52FC-BB9E-0A9A3F03B395"><!-- --></a><div class="p"><pre class="codeblock" id="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-3F31AFE2-9E0C-5D62-8217-861D7CE59964"><a name="GUID-425A208C-5D2D-55FD-8623-9E00006E2781__GUID-3F31AFE2-9E0C-5D62-8217-861D7CE59964"><!-- --></a>
                     IMPORT_C static CSRTPCryptoContext* NewLC( const CSRTPMasterKey* aKey,
                                            const CSRTPMasterSalt* aSalt, 
                                            const TSrtpCryptoParams&amp; aCryptoParams );</pre>
 </div>
 <p>aKey
is the input parameter that contains the master key. </p>
 <p>aSalt is the
input parameter that contains the master salt key. </p>
 <p>aCryptoParams is
the input parameter that contains the Crypto Context parameters. </p>
 <p>The
API leaves with KErrNone if successfully executed, else returns a valid system-wide
error code. </p>
 </li>

</ol>
 </li>

</ul>
<p><strong>Creating Master Key</strong></p>
<p> The master key can be created using
the following API's:</p>
<ul>
<li><pre class="codeblock">IMPORT_C static CSRTPMasterKey* NewL( const TDesC8&amp; aKey,const TDesC8&amp; aMKI,TUint aN_E = KSRTPDefSessionEncryptionKeyLength,Uint aN_A = KSRTPDefSessionAuthenticationKeyLength );</pre>
</li>

<li><pre class="codeblock">IMPORT_C static CSRTPMasterKey* NewLC( const TDesC8&amp; aKey,const TDesC8&amp; aMKI,TUint aN_E = KSRTPDefSessionEncryptionKeyLength,TUint aN_A = KSRTPDefSessionAuthenticationKeyLength);</pre>
</li>

<li><pre class="codeblock">IMPORT_C static CSRTPMasterSalt* NewLC( const TDesC8&amp; aKey, TUint aN_S = KSRTPDefSessionSaltingKeyLength );</pre>
</li>

</ul>
<p><strong>Creating Master Salt Key</strong></p>
<p>The master salt key can be created
using the following API's:</p>
<ul>
<li><pre class="codeblock">IMPORT_C static CSRTPMasterSalt* NewL( const TDesC8&amp; aKey,TUint aN_S = KSRTPDefSessionSaltingKeyLength )</pre>
</li>

</ul>
 </div>


<div class="section"><h2 class="sectiontitle">Results</h2> <p>On successful execution of the API, a cryptographic
context is created. </p>
 <p>The cryptographic context can be used by a SRTP
session or Stream. In other words, the cryptographic context is owned by the
session or stream. </p>
 <p>The master keys and the master salt are always
owned by the cryptographic context. </p>
 </div>


<div class="section"> <p>For more information on cryptographic context management also
refer: </p>
 <p> <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname">MasterKey()</span></a>  </p>
 <p> <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname">SetMasterKey()</span></a>  </p>
 <p> <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname"> MasterSalt()</span></a>  </p>
 <p> <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname">SetMasterSalt()</span></a>  </p>
 <p> <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname">SetRCCm3Sync()</span></a>  </p>
 <p> <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname">CryptoParams()</span></a>  </p>
 <p> <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname"> AddCryptoChangeObserver()</span></a>  </p>
 <p> <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname">RemoveCryptoChangeObserver()</span></a>  </p>
 <p> <a href="GUID-E9F66C90-C0BF-3713-8BA0-810A362A1774.html"><span class="apiname">UpdateCryptoParams()</span></a>  </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-41E0D200-4A79-5D2B-BA4F-7AE55B5C3FBF.html">Tutorials:Index</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-06370120-7738-5694-9A8C-3B5B1E3A4352.html">Creating
an SRTP                 Session</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7.html">Creating
an SRTP                 Stream</a></div>
<div><a href="GUID-79846EA2-33CD-5D01-8E96-6092C15BD839.html">Encrypting
                RTCP Packet Data</a></div>
<div><a href="GUID-922F292E-9420-593B-B226-2764C5F29DF9.html">Encrypting
RTP                 Packet Data</a></div>
<div><a href="GUID-6E1AC4C9-7CA3-503A-AFC0-BAF29CCA8290.html">Decrypting
RTP                 Packet Data</a></div>
<div><a href="GUID-F9A24A47-7A0B-5F6E-8B0A-B7A7BCC4EAFC.html">Decrypting
                RTCP Packet Data</a></div>
<div><a href="GUID-B9BD2E0A-F214-5344-91A6-E4E99F0D74C8.html">Updating
Master                 Key</a></div>
<div><a href="GUID-F9A24A47-7A0B-5F6E-8B0A-B7A7BCC4EAFC.html">Managing
                Master Key</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>