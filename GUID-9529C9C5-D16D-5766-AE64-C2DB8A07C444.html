<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Opening a Session That Uses the GPS/A-GPS PSY"/>
<meta name="abstract" content="This shows how to open a session using the GPS/A-GPS PSY."/>
<meta name="description" content="This shows how to open a session using the GPS/A-GPS PSY."/>
<meta name="DC.Relation" scheme="URI" content="GUID-E045124D-D0A3-538A-89D6-74349BF4B627.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-ADE2ED06-A4F8-5216-A6EF-294D6B4766F7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E045124D-D0A3-538A-89D6-74349BF4B627.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7CE5CF4C-7661-5FE1-87CA-CC4EB1CECE34.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Opening a Session That Uses the GPS/A-GPS PSY</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444"><a name="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403469 id2403680 id2403694 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html" title="The Data Source Modules collection contains components that enable the LBS subsystem to obtain position data.">Data Source Modules</a> &gt; <a href="GUID-ADE2ED06-A4F8-5216-A6EF-294D6B4766F7.html" title="The GPS/A-GPS PSY connects the Location Server to the A-GPS Location Manager.">GPS/A-GPS Positioning Module (PSY)</a> &gt; <a href="GUID-E045124D-D0A3-538A-89D6-74349BF4B627.html" title="This tutorial describes how to configure and use the GPS/A-GPS Positioning Module (GPS/A-GPS PSY).">GPS/A-GPS Positioning Module Tutorial</a> &gt; </div>
<h1 class="topictitle1">Opening a Session That Uses the GPS/A-GPS PSY</h1>
<div><p>This shows how to open a session using the GPS/A-GPS PSY. </p>
<div class="section"><p>The GPS/A-GPS PSY is used by the Location Server <samp class="codeph">eposserver.exe</samp> to connect to positioning hardware using the A-GPS Location Manager and an A-GPS Integration Module. </p>
 <p>To use the GPS/A-GPS PSY a <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a> client opens an <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html"><span class="apiname">RPositioner</span></a> subsession using one of the following methods: </p>
 <ul><li id="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-BB3C6009-A331-5B67-B85F-5D1FB58D6656"><a name="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-BB3C6009-A331-5B67-B85F-5D1FB58D6656"><!-- --></a><p>Explicitly using a PSY implementation UID </p>
 </li>
 <li id="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-4054B1F6-EB90-5EA7-8E61-D0DE2879EB9D"><a name="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-4054B1F6-EB90-5EA7-8E61-D0DE2879EB9D"><!-- --></a><p>Implicitly (the Location Server uses the Default PSY) </p>
 </li>
 </ul>
 <p>These methods are described in more detail below. </p>
 </div>
 <a name="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-CAF7809C-00B4-53F3-8D59-245A52D67B1B"><!-- --></a><ol id="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-CAF7809C-00B4-53F3-8D59-245A52D67B1B"><li class="stepexpand" id="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-696BD1DE-7839-5373-B83D-DD0E247B3AB7"><a name="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-696BD1DE-7839-5373-B83D-DD0E247B3AB7"><!-- --></a><span/><br/> To use the A-GPS PSY, open a session using its implementation UID, which is <samp class="codeph">0x10285abc</samp>.   Open a session and subsession using the Location Acquisition API as shown below:   <pre class="codeblock" id="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-ED888F57-9542-5B60-9C68-4C80CC4EC701"><a name="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-ED888F57-9542-5B60-9C68-4C80CC4EC701"><!-- --></a>#include &lt;lbs.h&gt;
#include &lt;lbserrors.h&gt;


const TInt KAGPSPSYImpl = 0x10285abc;

...

RPositionServer server;
RPositioner positioner;

/Create a session with the location server
User::LeaveIfError(server.Connect());
CleanupClosePushL(server);

// Create a subsession with the Location Server using the A-GPS PSY
User::LeaveIfError(positioner.Open(server, TUid::Uid(KAGPSPSYImpl)));
CleanupClosePushL(positioner);

// Use Location Acquisition API as normal - see API documentation for more details

...

// Close the session

CleanupStack::PopAndDestroy(&amp;positioner);
CleanupStack::PopAndDestroy(&amp;server);
</pre>
  </li>
<li class="stepexpand" id="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-0DDF74B3-479F-5FDB-BBCA-5D3D13F9F053"><a name="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-0DDF74B3-479F-5FDB-BBCA-5D3D13F9F053"><!-- --></a><span>To use the GPS PSY, open a session using its implementation UID, which is <samp class="codeph">0x102869C7</samp>. </span>  <pre class="codeblock" id="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-E7D44C51-7105-5864-9BEE-77B483DC98C3"><a name="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-E7D44C51-7105-5864-9BEE-77B483DC98C3"><!-- --></a>
#include &lt;lbs.h&gt;
#include &lt;lbserrors.h&gt;

const TInt KGPSPSYImpl = 0x102869C7;

...

RPositionServer server;
RPositioner positioner;

/Create a session with the location server
User::LeaveIfError(server.Connect());
CleanupClosePushL(server);

// Create a subsession with the Location Server using the GPS PSY
User::LeaveIfError(positioner.Open(server, TUid::Uid(KGPSPSYImpl)));
CleanupClosePushL(positioner);

// Use Location Acquisition API as normal - see API documentation for more details

...

// Close the session

CleanupStack::PopAndDestroy(&amp;positioner);
CleanupStack::PopAndDestroy(&amp;server);
</pre>
  </li>
<li class="stepexpand" id="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-5DCB4A95-8675-5262-8A01-C8D7E815C5CF"><a name="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-5DCB4A95-8675-5262-8A01-C8D7E815C5CF"><!-- --></a><span>To use the Default PSY, open a session without specifying a PSY UID. </span>  <pre class="codeblock" id="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-C4B99601-CCD3-5D01-A448-ED2C90ECA568"><a name="GUID-9529C9C5-D16D-5766-AE64-C2DB8A07C444__GUID-C4B99601-CCD3-5D01-A448-ED2C90ECA568"><!-- --></a>
...

//Create a session with the location server
User::LeaveIfError(server.Connect());
CleanupClosePushL(server);

// Location Server uses the default PSY, which can use the GPS/A-GPS PSY
User::LeaveIfError(positioner.Open(server);
CleanupClosePushL(positioner);

// Use Location Acquisition API as normal...

...
</pre>
   The Default PSY has a list of all available PSYs. If the GPS PSY and A-GPS PSY are installed, one of them can be used by the Default PSY. The choice of which PSY is used is based on the priority and availability of the PSYs.   See <a href="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html">Positioning Plug-in Information API</a> for more information about PSY settings.   See <a href="GUID-7CE5CF4C-7661-5FE1-87CA-CC4EB1CECE34.html" title="The Default Positioning Module is a proxy PSY used by the Location Server (eposserver.exe) to select a PSY when a Location Acquisition API client opens a session without specifying a PSY ID.">Default PSY</a> for information about how a PSY is selected.  </li>
</ol>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-E045124D-D0A3-538A-89D6-74349BF4B627.html" title="This tutorial describes how to configure and use the GPS/A-GPS Positioning Module (GPS/A-GPS PSY).">GPS/A-GPS Positioning Module Tutorial</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-7CE5CF4C-7661-5FE1-87CA-CC4EB1CECE34.html" title="The Default Positioning Module is a proxy PSY used by the Location Server (eposserver.exe) to select a PSY when a Location Acquisition API client opens a session without specifying a PSY ID.">Default
                PSY</a></div>
<div><a href="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html">Positioning Plug-in Information API</a></div>
<div><a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>