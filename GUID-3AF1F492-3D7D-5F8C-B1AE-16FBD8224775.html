<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Resource Files"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F61D1710-2D52-5B9B-A25F-6DFA606DAC0F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D02B5AF1-B1C3-560D-9654-971A5CC1A904.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C8BD333E-8384-534B-822B-F61B2F7C8B9F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F61D1710-2D52-5B9B-A25F-6DFA606DAC0F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-EA107811-240C-5F95-922B-7C042FA00A87.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Resource Files</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2381103 id2383459 id2383734 id2383771 id2383785 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html">Generic OS Services Guide</a> &gt; <a href="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF.html">Low Level Libraries and Frameworks</a> &gt; <a href="GUID-D02B5AF1-B1C3-560D-9654-971A5CC1A904.html">Application Utilities</a> &gt; <a href="GUID-C8BD333E-8384-534B-822B-F61B2F7C8B9F.html">Basic Application Framework Library</a> &gt; <a href="GUID-F61D1710-2D52-5B9B-A25F-6DFA606DAC0F.html">Basic Application Framework Library Concepts</a> &gt; </div>
<h1 class="topictitle1">Resource
Files </h1>
<div>
<p>Resource files contain data separated from executable code. The purpose
of using resource files are to define user interface components and store
localisable data. </p>

<p>The application framework defined by the Uikon Core expects features of
the application UI, such as menus, to be supplied in a resource file. The
framework reads these resources itself. Other user interface components, such
as dialogs, can also be easily created from resources, without the application
needing to use this API itself. </p>

<p>The API has two key concepts - resource file reader and resource component
reader. </p>

<div class="section"><h2 class="sectiontitle">Resource file reader</h2> <p>Resource files contain data
in numbered resources. The resource file reader allows such files to be opened
and closed, and individual resources within them, as identified by symbolic
identifiers, to be read into binary descriptors. Data items are then extracted
from these descriptors using the resource component reader. </p>
 <p>The resource
file can be read using <a href="GUID-AA6DEF11-6F23-3523-A9F7-F15DF918E1BA.html"><span class="apiname">RResourceFile</span></a>. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Resource component reader</h2> <p>A resource is defined
as a struct. Struct members can be simple, such as integers and strings, or
complex, such as other structs, or arrays of structs. The resource component
reader is used to read these struct members from a binary descriptor holding
the resource into C++ variables. The application must ensure that it places
the struct members into variables of appropriate types. </p>
 <p>The resource
component header information can be accessed using <a href="GUID-B375D32E-1F91-30FA-8605-A2E163111F9A.html"><span class="apiname">TResourceReader</span></a>. </p>
 </div>

<div class="section" id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-EA9C30E1-AB21-5042-9417-CFDE320C519D"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-EA9C30E1-AB21-5042-9417-CFDE320C519D"><!-- --></a><h2 class="sectiontitle">Basic resource
file use</h2> <p>The basic concepts involved with using resource files
are as follows: </p>
 <ul>
<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-67FFC98D-2829-5146-B4B6-5DEB3A4966BA"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-67FFC98D-2829-5146-B4B6-5DEB3A4966BA"><!-- --></a><p>In a resource file,
define structs or use appropriate pre-defined structs and then define resources
that use those structs. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-C57BD780-2B6F-547F-B008-FAD1F51B565F"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-C57BD780-2B6F-547F-B008-FAD1F51B565F"><!-- --></a><p>Run the resource compiler
to produce both a generated header file and a resource file. The generated
header file defines the symbols which a program uses to refer to the resources. </p>
 </li>

</ul>
 <p>A program which requires a resource file then performs the following: </p>
 <ul>
<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-6E6F8010-F264-5F28-A540-D122530C98ED"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-6E6F8010-F264-5F28-A540-D122530C98ED"><!-- --></a><p>Includes the generated
header file in the appropriate source file to get symbolic access to the IDs
of the resources contained within the file. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-8E1FFF9C-6D4A-5926-AE9E-703E2B224F23"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-8E1FFF9C-6D4A-5926-AE9E-703E2B224F23"><!-- --></a><p>Opens a <samp class="codeph">RResourceFile</samp> object,
specifying the generated resource file name. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-AB22B5E3-1C8E-5994-B4E4-28CCD62297BD"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-AB22B5E3-1C8E-5994-B4E4-28CCD62297BD"><!-- --></a><p>Reads any resource that
is required. The resource is identified by a symbolic ID which has been <samp class="codeph">#define</samp> d
as a number; the content of the resource is read into a binary descriptor,
derived from <samp class="codeph">TDesC8</samp>. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-E743799B-77A2-51F6-AC73-1D8A9325FD5E"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-E743799B-77A2-51F6-AC73-1D8A9325FD5E"><!-- --></a><p>Converts the binary
descriptor into whatever target format is appropriate for the data in the
resource file. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-83832E00-F8A1-5F42-80A7-AA29C11D1CFD"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-83832E00-F8A1-5F42-80A7-AA29C11D1CFD"><!-- --></a><p>Discards the descriptor,
if appropriate, when the binary descriptor has been fully converted into its
target format. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-8E5F9573-7180-5E44-ABAD-53D4F9608E33"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-8E5F9573-7180-5E44-ABAD-53D4F9608E33"><!-- --></a><p>Closes the <samp class="codeph">RResourceFile</samp> when
all operations on the resource file are complete. </p>
 </li>

</ul>
 <p>The resource text can be changed and the resources recompiled without
altering or recompiling the C++ program. For example, to alter the language
used by text strings. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Resource File Interface</h2><p>Resource files contain data
in numbered resources. A resource file has the following format:</p>
<div class="fignone" id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-9CFB3B14-9C09-42E2-A87E-ED07BD2E7E36"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-9CFB3B14-9C09-42E2-A87E-ED07BD2E7E36"><!-- --></a>
<img src="GUID-FB479891-8788-5548-B875-A5C637EC2DE6_d0e223349_href.png"/>
</div>
<p>A resource file is generated from text input using the resource compiler.
The index can be used to efficiently find a resource given its numeric ID.
There can be 1 to 4095 resources in a resource file. Each resource contains
binary data whose length is determined by subtracting the start position of
the resource from the start of the next resource (or from the start of the
index, for the last resource in the file). </p>
<p> Functions for handling
resources in a resource file are encapsulated in the <samp class="codeph">RResourceFile</samp> class.
This class provides functions for: </p>
<div class="p"><ul>
<li><p>opening and closing the file</p>
</li>

<li><p>reading resources</p>
</li>

<li><p>support for using multiple resource files</p>
</li>

</ul>
</div>
<p>Generally, the process for reading a resource is to read it into
a buffer of sufficient length, analyse it and place its data into C++ classes.
Then, if appropriate, release the buffer.   </p>
<p>The <samp class="codeph">TResourceReader</samp> class
must be used to simplify the process of resource data analysis.  </p>
 </div>

<div class="section" id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-3E43B598-5857-5660-B9F0-432FD9AC56AA"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-3E43B598-5857-5660-B9F0-432FD9AC56AA"><!-- --></a><h2 class="sectiontitle">File types
in resource file usage</h2> <p>The file types involved in resource file
usage are defined in the following diagram: </p>
 <div class="fignone" id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-4C93BFC7-89BD-5E88-BA68-D6273F13BB8D"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-4C93BFC7-89BD-5E88-BA68-D6273F13BB8D"><!-- --></a><span class="figcap">Figure 1.               File types            </span>

<img src="GUID-4A5A50EB-261E-5739-904E-1D14D1A6BAD9_d0e223395_href.png"/>
</div>
 <p>These files work together as follows: </p>
 <ul>
<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-CA9BB1F1-0535-5F18-9CD2-AC2C02DACE8D"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-CA9BB1F1-0535-5F18-9CD2-AC2C02DACE8D"><!-- --></a><p>the C++ compiler and
linker, together, take <span class="filepath">.cpp</span> source files and produce <span class="filepath">.exe</span> output
(or <span class="filepath">.dll</span>, or <span class="filepath">.app</span>, or another such
extension). </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-D1E44783-4179-5E25-9C2A-715E167E8177"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-D1E44783-4179-5E25-9C2A-715E167E8177"><!-- --></a><p>the resource compiler
takes a <span class="filepath">.rss</span> source file containing <samp class="codeph">RESOURCE</samp> statements
and converts it into a <span class="filepath">.rsc</span> resource file which contains
the resources the executable program will use. It also produces a <span class="filepath">.rsg</span> generated
header file, which contains the symbolic IDs of these resources. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-5E468821-D48B-5633-9801-F3ACFA96024C"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-5E468821-D48B-5633-9801-F3ACFA96024C"><!-- --></a><p>the <span class="filepath">.rsg</span> file
is <samp class="codeph">#include</samp> d by the <span class="filepath">.cpp</span> file, so that
the C++ compiler has access to the symbolic IDs of the resources that will
be used. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-99F5E649-D5E6-59F0-A6F0-C51A52756FA7"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-99F5E649-D5E6-59F0-A6F0-C51A52756FA7"><!-- --></a><p>C++ class definitions
are specified in a <span class="filepath">.h</span> file; a typical application will
include several system header files and usually one or more of its own. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-84ED8144-AEBD-51CD-A9CE-240D143A773A"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-84ED8144-AEBD-51CD-A9CE-240D143A773A"><!-- --></a><p>resource structs are
specified in a <span class="filepath">.rh</span> file. A typical application will use
system-provided resource headers, which define standard controls etc. Only
if the application requires its own structs, will it include its own <span class="filepath">.rh</span> file. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-BDDFAD1C-48FD-52F0-85A0-553CB2BAC5AA"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-BDDFAD1C-48FD-52F0-85A0-553CB2BAC5AA"><!-- --></a><p>flag values are <samp class="codeph">#define</samp> d
in a file which must be available to both the C++ compiler and the resource
compiler: the <span class="filepath">.hrh</span> extension is used for this and <span class="filepath">.hrh</span> files
are typically <samp class="codeph">#include</samp> d into the <span class="filepath">.h</span> file
that defines the classes (for C++) and the <span class="filepath">.rh</span> file that
defines the structs (for the resource compiler). </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-41C5ABE7-C081-5259-9814-0436844C85AD"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-41C5ABE7-C081-5259-9814-0436844C85AD"><!-- --></a><h2 class="sectiontitle">Type safety
issues</h2> <p>Software systems implemented in C++ are designed to be type-safe.
Proper use of header files, make utilities, type declarations, classes and
templates makes it difficult to pass data of the wrong type to functions,
to assign data of the wrong type to variables, or to construct a program whose
modules are inconsistent with one another. Thus a major source of programming
errors is detected while the program is being built, before running it. </p>
 <p>A
program which uses resources must have a resource file which matches that
program's requirements. However, the resource file and the executable program
are only loosely bound together. A variety of errors are possible while dealing
with resources, which cannot be detected during the build process. Programmers
should be aware of these and take appropriate measures to avoid them. </p>
 <p>Additional
sources of error include: </p>
 <ul>
<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-C08B03AF-E50C-577A-90F7-1462B223E9D0"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-C08B03AF-E50C-577A-90F7-1462B223E9D0"><!-- --></a><p>Having a program and
resource file which do not correspond. </p>
 <p>This can arise because the
resource file formats were updated, or the program was updated, but the resource
file was not updated. When the program is run, the resources it loads are
in the wrong format. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-81AB0840-8122-5C34-9DE9-A10DCB02E39D"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-81AB0840-8122-5C34-9DE9-A10DCB02E39D"><!-- --></a><p>The structures in the
resource file may be of a different format from that expected by the C++ program. </p>
 <p>If
the C++ program expects a <samp class="codeph">LONG</samp> while a <samp class="codeph">WORD</samp> is
present in the resource file, then the C++ program will read two extra bytes
from the data item in the resource file. Any subsequent data read from that
resource will be an error. </p>
 <p>This kind of error can only be avoided
by C++ programs knowing which structs they are dealing with, knowing the data
layouts of those structs in a resource file and writing code which works in
that context. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-E61214E6-9FC8-5A6E-8EEC-452FF135A89C"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-E61214E6-9FC8-5A6E-8EEC-452FF135A89C"><!-- --></a><p>Having resources of
unexpected type. </p>
 <p>The most likely reason for this to arise is because
there is no type safety in the resource compiler. Thus, it is possible for
a programmer to wrongly guess what kind of struct a particular resource must
use. Appropriate comments in the <span class="filepath">.rh</span> files and the documentation
of the resource file, will help to reduce this kind of error. </p>
 </li>

</ul>
 <p>The resource compiler does provide some elementary safety features: </p>
 <ul>
<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-736C2471-93C2-5AD6-8E73-CBA30DF5C6C0"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-736C2471-93C2-5AD6-8E73-CBA30DF5C6C0"><!-- --></a><p>All resources are represented
by a symbolic ID. This ensures that the resource IDs used by the C++ program
and those expected by the compiler match, if the recommended build procedures
are followed. </p>
 </li>

<li id="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-8DE5ABAE-2504-5DC9-BDCC-70C8ABF806AA"><a name="GUID-3AF1F492-3D7D-5F8C-B1AE-16FBD8224775__GUID-8DE5ABAE-2504-5DC9-BDCC-70C8ABF806AA"><!-- --></a><p>Flag values, maximum
length constants and some other values, may be defined in a <span class="filepath">.hrh</span> file.
This ensures that C++ programs uses correct resource. </p>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-F61D1710-2D52-5B9B-A25F-6DFA606DAC0F.html">Basic Application Framework Library Concepts</a></div>
</div>
<div class="relinfo"><strong>Related information</strong><br/>
<div><a href="GUID-EA107811-240C-5F95-922B-7C042FA00A87.html">Reading a
string resource</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>