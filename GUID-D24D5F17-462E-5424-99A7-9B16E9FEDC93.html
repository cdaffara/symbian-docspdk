<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Rconnection: connection monitoring and management example"/>
<meta name="abstract" content="This example demonstrates the use of the RConnection API to do connection monitoring and management."/>
<meta name="description" content="This example demonstrates the use of the RConnection API to do connection monitoring and management."/>
<meta name="DC.Relation" scheme="URI" content="GUID-61E0CD76-A2E3-5066-84A8-146EECA8ADCD.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2139B04C-6ED6-599B-A018-D92451B8353E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-61E0CD76-A2E3-5066-84A8-146EECA8ADCD.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Rconnection: connection monitoring and management example</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2682451 id2518388 id2518454 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html" title="The Communications Framework is the base for all communications, network and telephony services that Symbian platform provides. The Communications Framework manages the communications threads and the flow of information between those threads. The Framework also manages and stores the communications related settings.">Communications Framework Guide</a> &gt; <a href="GUID-2139B04C-6ED6-599B-A018-D92451B8353E.html">Data Communications Server</a> &gt; <a href="GUID-61E0CD76-A2E3-5066-84A8-146EECA8ADCD.html">Socket Server</a> &gt; </div>
<h1 class="topictitle1">Rconnection: connection monitoring and management example</h1>
<div><p>This example demonstrates the use of the <samp class="codeph">RConnection</samp> API to do connection monitoring and management. </p>

<div class="section" id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-E0BC58A2-4011-4836-91F6-A7FD2EEAC983"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-E0BC58A2-4011-4836-91F6-A7FD2EEAC983"><!-- --></a><h2 class="sectiontitle">Purpose</h2> <p>The example demonstrates the following
features of the <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><span class="apiname">RConnection</span></a> API: </p>
 <ul>
<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-01B8C3CB-4C74-51B5-A9B1-6CE1D5DD0360"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-01B8C3CB-4C74-51B5-A9B1-6CE1D5DD0360"><!-- --></a><p>Opening and
closing a connection using <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-CE8F3FE7-14F2-3FB6-B04C-8596B5F80DFC"><span class="apiname">RConnection::Open(RSocketServ&amp;
aSocketServer, TUint                 aConnectionType = KConnectionTypeDefault)</span></a> and <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-20D71C1C-27EE-3305-8326-4CC1DFFB0E2F"><span class="apiname">RConnection::Close()</span></a>. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-A5CDAFC8-771C-56A1-86BF-E4731EB7D325"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-A5CDAFC8-771C-56A1-86BF-E4731EB7D325"><!-- --></a><p>Starting a connection
that uses the default CommDb connection preferences, and another connection
that overrides them, using (respectively) <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-CB62E838-A380-309C-8B08-1F804EDB4387"><span class="apiname">RConnection::Start()</span></a> and <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-16E04EA9-E7AD-31EE-A1CB-F40F726ED489"><span class="apiname">RConnection::Start(TConnPref&amp; aPref)</span></a>. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-DF26CF2F-E012-5752-88B8-2E2FBE4DC0BC"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-DF26CF2F-E012-5752-88B8-2E2FBE4DC0BC"><!-- --></a><p>Getting the
number of connections, and retrieving information about one of them,
using <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-45801E1B-A7F0-3E3D-BAC2-98FA542BD082"><span class="apiname">RConnection::EnumerateConnections(TUint&amp;      
          aCount)</span></a> and <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-DEAFE4AC-B1B7-38DF-A0C2-9BA0201F11FD"><span class="apiname">RConnection::GetConnectionInfo(TUint
aIndex,                 TDes8&amp; aConnectionInfo)</span></a>. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-43861187-FF27-56BD-8B09-F5FC3456FB0D"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-43861187-FF27-56BD-8B09-F5FC3456FB0D"><!-- --></a><p>Attaching a
connection to an existing interface, using <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-1C5036E6-62E8-308F-AE72-CB886B2C9C0A"><span class="apiname">RConnection::Attach(const
TDesC8&amp; aConnectionInfo,                 TConnAttachType aAttachType)</span></a>. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-3C89B0C2-3378-5D8B-A519-F5689ACA65EC"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-3C89B0C2-3378-5D8B-A519-F5689ACA65EC"><!-- --></a><p>Registering
for notifications when: </p>
 <ul>
<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-61A4C660-FA35-51DC-A4F1-715CC630052D"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-61A4C660-FA35-51DC-A4F1-715CC630052D"><!-- --></a><p>a certain amount
of data has been sent, using <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-800269E0-8B6D-3C47-86BF-76862AA8CDC3"><span class="apiname">RConnection::DataSentNotificationRequest(TUint
aThreshold,                      TPckg&lt;TUint&gt;&amp; aUplinkVolume,
TRequestStatus&amp; aStatus)</span></a>. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-40B69177-D7DB-5920-98DF-A681E5EB21E8"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-40B69177-D7DB-5920-98DF-A681E5EB21E8"><!-- --></a><p>a certain amout
of data has been received, using <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-4DDC3337-FFE9-32E0-A98E-3823F8E833BF"><span class="apiname">RConnection::DataReceivedNotificationRequest(TUint
aThreshold,                      TPckg&lt;TUint&gt;&amp; aDownlinkVolume,
TRequestStatus&amp;                      aStatus)</span></a>. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-48F1D550-A56C-5F52-A870-C74C63BB8FFE"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-48F1D550-A56C-5F52-A870-C74C63BB8FFE"><!-- --></a><p>interfaces go
up and down, using <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-22059E3E-37D7-3C48-940B-A93698E27E5D"><span class="apiname">RConnection::AllInterfaceNotification(TDes8&amp;
aNotification,                      TRequestStatus&amp; aStatus)</span></a>. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-15E99A35-D6C3-5F28-98C5-72B80B594EBB"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-15E99A35-D6C3-5F28-98C5-72B80B594EBB"><!-- --></a><p>the connection
changes state, using <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-84FF9C60-60B9-3D9D-9D82-3CE063FC9D72"><span class="apiname">RConnection::ProgressNotification(TNifProgressBuf&amp;
aProgress,                      TRequestStatus&amp; aStatus, TUint
aSelectedProgress =                      KConnProgressDefault)</span></a>. </p>
 </li>

</ul>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-57C9068C-1380-5397-A090-1D9FC1587FED"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-57C9068C-1380-5397-A090-1D9FC1587FED"><!-- --></a><p>Obtaining the
amount of data transferred, using <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-6C695DC3-978A-3F48-87AE-08E64F45831D"><span class="apiname">RConnection::DataTransferredRequest()</span></a>. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-FAA3F969-67AF-5716-92F9-B5BDBC038906"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-FAA3F969-67AF-5716-92F9-B5BDBC038906"><!-- --></a><p>Obtaining the
connection's current state, using <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-2A798FA2-371F-3BB8-8531-374D9C72AA90"><span class="apiname">RConnection::Progress(TNifProgress&amp;
aProgress)</span></a>. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-14CBAB9C-F93D-5A0D-A63E-B18D2209D38A"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-14CBAB9C-F93D-5A0D-A63E-B18D2209D38A"><!-- --></a><p>Stopping the
connection, using <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD__GUID-52878713-A4E8-327E-901B-449EF3D39E0A"><span class="apiname">RConnection::Stop()</span></a>. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-0525FECB-37A0-5373-93DD-92BCB1317078"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-0525FECB-37A0-5373-93DD-92BCB1317078"><!-- --></a><p>Closing the
session with the socket server using <a href="GUID-EF29C1D7-B1E5-370F-AE37-66231A6BE449.html#GUID-EF29C1D7-B1E5-370F-AE37-66231A6BE449__GUID-B6D74895-B413-3759-966A-4A1D855267E1"><span class="apiname">RSocketServ::Close()</span></a>. </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-823CFB5C-C788-4B90-83A2-41DDA2626519"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-823CFB5C-C788-4B90-83A2-41DDA2626519"><!-- --></a><h2 class="sectiontitle">Download</h2><p>Click on the following link to
download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-3d0ac087-79ee-467f-b6ed-d71eafa40d9c.zip" target="_blank">Rconnection.zip</a></p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-3d0ac087-79ee-467f-b6ed-d71eafa40d9c.html">browse</a> to view the example code. </p>
 </div>

<div class="section" id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-C975476C-C2B7-4D9D-AF13-CB2AE995D5E3"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-C975476C-C2B7-4D9D-AF13-CB2AE995D5E3"><!-- --></a><h2 class="sectiontitle">Class Summary</h2><p>The example demonstrates the
following classes: </p>
<p><a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><span class="apiname">RConnection</span></a></p>
<p><a href="GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><span class="apiname">RSocket</span></a></p>
<p><a href="GUID-EF29C1D7-B1E5-370F-AE37-66231A6BE449.html"><span class="apiname">RSocketServ</span></a></p>
<p><a href="GUID-739117F6-9559-3274-8E00-B2B653C0A8B6.html"><span class="apiname">TCommDbConnPref</span></a></p>
<p><a href="GUID-E104DE5D-FF3F-3E07-ACC3-E24A96DF3629.html"><span class="apiname">TConnectionInfoBuf</span></a></p>
</div>

<div class="section" id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-1AC878AD-5D60-4DE9-A47F-43C76816D43F"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-1AC878AD-5D60-4DE9-A47F-43C76816D43F"><!-- --></a><h2 class="sectiontitle">Design and implementation</h2> <p>The project implements
a single class called <samp class="codeph">CRConnection</samp>, that has three
principal functions: </p>
 <p><strong>CRConnection::DemoApiWithoutDbOverrideL() </strong> </p>
 <p>This shows how to use <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><span class="apiname">RConnection</span></a> to: </p>
 <ul>
<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-01D4595A-2723-53C8-9499-7215FFA219C3"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-01D4595A-2723-53C8-9499-7215FFA219C3"><!-- --></a><p>start a connection
and associate it with an underlying interface, using default CommDb
connection preferences, </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-6377E5AB-71D3-50F1-B084-E8891BB73BB9"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-6377E5AB-71D3-50F1-B084-E8891BB73BB9"><!-- --></a><p>get notification
when the underlying interface goes up or down, </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-37FF8270-7FD1-5B27-9E9A-BC6D49E02B4D"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-37FF8270-7FD1-5B27-9E9A-BC6D49E02B4D"><!-- --></a><p>get notification
about the state of a connection as it becomes fully established, </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-E396A06F-5156-5924-9B68-649575A1CA62"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-E396A06F-5156-5924-9B68-649575A1CA62"><!-- --></a><p>transfer data
over a socket, </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-584D9C8C-A317-51D0-8AD2-397337F1A332"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-584D9C8C-A317-51D0-8AD2-397337F1A332"><!-- --></a><p>get the amount
of data transferred, </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-23588938-CEE7-5AD9-8C9D-9FA253AE11D2"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-23588938-CEE7-5AD9-8C9D-9FA253AE11D2"><!-- --></a><p>close the connection. </p>
 </li>

</ul>
 <p>It also shows how to set up a socket to carry out data transfer. </p>
 <p><strong>CRConnection::DemoApiWithDbOverrideL() </strong> </p>
 <p>This is
the same as <samp class="codeph">DemoApiWithoutDbOverrideL()</samp> except that
it: </p>
 <ul>
<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-C61443A2-8576-59F3-A586-30DDF1D2AD56"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-C61443A2-8576-59F3-A586-30DDF1D2AD56"><!-- --></a><p>starts a connection
using non-default CommDb connection preferences, </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-9777305D-11BC-5BD4-AFE0-2ED3D010BE93"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-9777305D-11BC-5BD4-AFE0-2ED3D010BE93"><!-- --></a><p>requests notification
when a threshold amount of data has been transferred (instead of getting
the amount of data transferred). </p>
 </li>

</ul>
 <p><strong>CRConnection::AttachToExistingInterfaceL() </strong> </p>
 <p>This shows how to use <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><span class="apiname">RConnection</span></a> to: </p>
 <ul>
<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-CB835CF4-BD2A-55E5-BEF7-248A0750B466"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-CB835CF4-BD2A-55E5-BEF7-248A0750B466"><!-- --></a><p>open 2 connections
and start one of them (the other is not yet associated with an underlying
interface), </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-DE013E1E-E3C3-513C-B0B6-5B16E6000C5C"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-DE013E1E-E3C3-513C-B0B6-5B16E6000C5C"><!-- --></a><p>get connection
information for the 1st connection and use this to attach the 2nd
connection to the existing interface, </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-BCA6E282-7C55-5416-884F-F88172672D8B"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-BCA6E282-7C55-5416-884F-F88172672D8B"><!-- --></a><p>get the state
of the attached connection, </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-8A107877-F6BD-5580-ADB5-230F86B36CD4"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-8A107877-F6BD-5580-ADB5-230F86B36CD4"><!-- --></a><p>close the connections. </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-2292DC4F-A2DF-4EFA-8EBC-DE278D375037"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-2292DC4F-A2DF-4EFA-8EBC-DE278D375037"><!-- --></a><h2 class="sectiontitle">Building and configuring</h2> <p>You can build
the example from the IDE or the command line. </p>
 <p>If you use an
IDE, import the <span class="filepath">bld.inf</span> file into your IDE, and
use the build command of the IDE. </p>
 <p>If you use the command line,
open a command prompt, and set the current directory to the source
code directory of the example. You can then build the example using
the SBSv1 build tools with the following commands: </p>
 <p><kbd class="userinput">bldmake bldfiles</kbd> </p>
 <p><kbd class="userinput">abld build</kbd> </p>
 <p><strong>Emulator: </strong> </p>
 <p>Before running
the example, the emulator must be set up to use ethernet, as follows: </p>
 <ul>
<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-1C477C42-8F6B-57F1-A8CE-F1CBAA22F265"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-1C477C42-8F6B-57F1-A8CE-F1CBAA22F265"><!-- --></a><p>Install <a href="GUID-CDD1E761-6B28-5F69-BBEF-756DF45E59A2.html" title="WinPcap is used by Symbian platform's Ethernet Physical Device Driver (PDD) to send and receive ethernet frames.">WinPCap 4.0.2</a> </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-C79C333A-AF6E-5587-8BA0-B19C470C2D09"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-C79C333A-AF6E-5587-8BA0-B19C470C2D09"><!-- --></a><p>Configure the
emulator using <a href="GUID-7B114A67-356A-5FCE-B57B-761F5477A2B2.html" title="The configchange.pl script generates the emulator's ethernet configuration files.">configchange.pl</a> for instance: </p>
 <p><kbd class="userinput">configchange.pl
--config ethernetWithCommDB --kernel EKA2 --target winscw --variant
udeb</kbd> </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-FBAD862F-DFA3-5E7E-8F69-3C4B3CF9E56B"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-FBAD862F-DFA3-5E7E-8F69-3C4B3CF9E56B"><!-- --></a><p>Open <span class="filepath">ethernetced.xml</span> in <span class="filepath">epoc32\winscw\c\</span> and change the last 3 values in the <samp class="codeph">LANBearer operation</samp> section for "EKA2 Emulator Ethernet" in the <samp class="codeph">LANBearerTable</samp> to: </p>
 <pre class="codeblock" id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-1C6B07F1-521D-5E3A-A4EE-A96FA369D5CA"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-1C6B07F1-521D-5E3A-A4EE-A96FA369D5CA"><!-- --></a>LastSocketActivityTimeout = 10
LastSessionClosedTimeout = 10
LastSocketClosedTimeout = 10</pre>
 <p>i.e. change the three
values from -1 to 10. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-82ECDF33-3782-5399-B192-F8DA06B7CE6D"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-82ECDF33-3782-5399-B192-F8DA06B7CE6D"><!-- --></a><p>Save the file
and then run <samp class="codeph">ced c:\ethernetced.xml</samp> from the eshell
command prompt in the emulator. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-5C6DC453-E01B-5F54-9FE1-3AB384357E7D"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-5C6DC453-E01B-5F54-9FE1-3AB384357E7D"><!-- --></a><p>Download a UDP
Echoserver. An Echoserver is easily available on the internet. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-F5A2E8B3-D8ED-5A3B-AD16-1EC7928B6EEB"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-F5A2E8B3-D8ED-5A3B-AD16-1EC7928B6EEB"><!-- --></a><p>Start the UDP
Echoserver and edit the <samp class="codeph">rconnection.cpp</samp> file in the
example code so that the values for <samp class="codeph">KDestAddr</samp> and <samp class="codeph">KSockPort</samp> match the values being used by the UDP Echoserver. </p>
 </li>

<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-CE2E778F-3AB3-5E93-B004-7152AA931072"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-CE2E778F-3AB3-5E93-B004-7152AA931072"><!-- --></a><p>Build the application
using the commands described above and then run it. </p>
 </li>

</ul>
 <p><strong>Hardware: </strong> </p>
 <ul>
<li id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-5A2860DF-FF03-585D-87CB-28611B80A0A8"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-5A2860DF-FF03-585D-87CB-28611B80A0A8"><!-- --></a><p>To run the example
on an H4 board, connect the H4 to the PC/network by serial cable.
Copy <span class="filepath">ethernetced.xml</span> to a memory card and execute: </p>
 <p><kbd class="userinput">ced e:\ethernetced.xml</kbd> </p>
 <p>before
running the example. </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-A5BDDE5F-DA10-4594-A446-C079079D8050"><a name="GUID-D24D5F17-462E-5424-99A7-9B16E9FEDC93__GUID-A5BDDE5F-DA10-4594-A446-C079079D8050"><!-- --></a><h2 class="sectiontitle">Running the example</h2> <p>For the emulator, the
example builds an executable called <span class="filepath">rconnection.exe</span> in the <span class="filepath">epoc32\release\winscw\&lt;udeb or urel&gt;\</span> folder. </p>
 <p> <span class="filepath">rconnection.exe</span> is a console-based
application. The example takes input from the user and prints to the
console information about the various stages of the example. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-61E0CD76-A2E3-5066-84A8-146EECA8ADCD.html">Socket Server</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>