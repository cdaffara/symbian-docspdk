<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Upgrading OS Components"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A4C26317-9F76-587E-A4B6-D94892ACF11B.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0AF47934-0A16-51A2-9254-992D7C6B322B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8E160B29-18C4-574B-9259-9A8E958CDA91.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-ED2D5BEA-AD2A-51CE-8CBC-8B5E33DD6356.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A4C26317-9F76-587E-A4B6-D94892ACF11B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-43B4B4E7-413E-5D18-811C-4B9E38CDEB69.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CD5907AE-B439-5F76-AE19-9C9491832CB4.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Upgrading OS Components</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2563624 id2563579 id2563387 id2563304 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-0AF47934-0A16-51A2-9254-992D7C6B322B.html">Application Installation Guide</a> &gt; <a href="GUID-8E160B29-18C4-574B-9259-9A8E958CDA91.html">Secure Software Install Tools</a> &gt; <a href="GUID-ED2D5BEA-AD2A-51CE-8CBC-8B5E33DD6356.html">Secure Software Install SIS Tools</a> &gt; <a href="GUID-A4C26317-9F76-587E-A4B6-D94892ACF11B.html">Secure Software Install SIS Tools Tutorials</a> &gt; </div>
<h1 class="topictitle1">Upgrading
OS Components</h1>
<div><div><p>A device creator can replace data files and binaries in ROM by
means of eclipsing. A typical example for this requirement is to fix a software
issue. </p>
<p>To eclipse the files in the ROM, the device creators must add
a Stub SIS file to the ROM and install a package that supports eclipsing.
See <a href="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0.html#GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-238CFC90-366C-5BB0-AD2C-2D0F88A8A0A1">Creating
and adding a stub SIS file to ROM</a> and <a href="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0.html#GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-D2E7EE55-A154-58E3-A431-3350C4F7989E">Creating
SIS files for eclipsing</a> for details. </p>
<p>Creating
System Upgrade Packages enables the device creators to overcome the restriction
of using a stub sis file in the ROM drive. For details, see <a href="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0.html#GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-FD019E0B-DC32-5F29-8867-656DB2795FF4">Creating System Upgrade Package</a>. </p>
</div>

<div class="section" id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-238CFC90-366C-5BB0-AD2C-2D0F88A8A0A1"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-238CFC90-366C-5BB0-AD2C-2D0F88A8A0A1"><!-- --></a><h2 class="sectiontitle">Creating and
adding a stub SIS file to ROM</h2> <a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-881FF7BC-F4C3-5579-AA91-EA9EBC29530C"><!-- --></a><ol id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-881FF7BC-F4C3-5579-AA91-EA9EBC29530C">
<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-2CB598EA-2534-58B7-8496-DA51236EF9C7"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-2CB598EA-2534-58B7-8496-DA51236EF9C7"><!-- --></a><p>Create a PKG file. </p>
 <p>Ensure
the PKG file used to generate the Stub SIS file does not include source file
entries and are specified as empty strings. </p>
 <p>For example: </p>
 <pre class="codeblock" id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-708D3DD4-D745-58D1-9BD3-5594D369A023"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-708D3DD4-D745-58D1-9BD3-5594D369A023"><!-- --></a>; Example STUB File
&amp;EN
%{"Nokia Corporation"}
:"Nokia Corporation"
#{"Hello World"},(0x18000091),1,0,0
"" - "z:\sys\bin\HelloWorld.exe"
"" - "z:\resource\apps\HelloWorld.rsc"
"" - "z:\resource\apps\HelloWorld.mbm"
"" - "z:\private\10003a3f\import\apps\HelloWorld_reg.rsc"</pre>
 <p> <strong>Note</strong>:
For details about using wildcards, see <a href="GUID-A6CF0AD2-BDE4-548C-A165-581FCD019D7C.html">Wildcard
Usage with Stub SIS files</a>. </p>
 </li>

<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-078AAB0B-4D3F-580D-9FE0-FD9FAB41532B"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-078AAB0B-4D3F-580D-9FE0-FD9FAB41532B"><!-- --></a><p>Run the <a href="GUID-4BDC9F63-83A1-53A5-91A0-B092AA821755.html">MakeSIS</a> tool
at the command-prompt and specify the <samp class="codeph">-s</samp> option to create
the stub SIS file: </p>
 <p><kbd class="userinput">makesis â€“s &lt;PKG_filename&gt;</kbd> </p>
 <p> <strong>Note</strong>:
The package UID must be selcted from the protected range allocated to the
device creator by Symbian Signed. </p>
 </li>

<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-FD66AE79-DD5B-5EED-B70E-B39E8DA0ED79"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-FD66AE79-DD5B-5EED-B70E-B39E8DA0ED79"><!-- --></a><p>Place the generated
stub SIS file in the following location <span class="filepath">Z:\system\install\</span>. </p>
 </li>

</ol>
 </div>

<div class="section" id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-D2E7EE55-A154-58E3-A431-3350C4F7989E"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-D2E7EE55-A154-58E3-A431-3350C4F7989E"><!-- --></a><h2 class="sectiontitle">Creating SIS
files for eclipsing</h2> <a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-3696EF1D-5E4C-5C6D-B02B-04E89A967099"><!-- --></a><ol id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-3696EF1D-5E4C-5C6D-B02B-04E89A967099">
<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-153F35CC-9021-5300-8E4D-D5FD3CFD92B5"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-153F35CC-9021-5300-8E4D-D5FD3CFD92B5"><!-- --></a><p>Create an eclipsing
package. The eclipsing package can be of type <samp class="codeph">SA</samp> (full upgrade), <samp class="codeph">PU</samp> (partial
upgrade) or <samp class="codeph">SP</samp> (patch upgrade). For details, see <a href="GUID-7FD72D9F-D65E-5248-A296-F2196F1DF5CF.html">Upgrade
Types</a>. </p>
 <p>The files in the eclipsing package must have same filename
and path as the files in ROM that are eclipsed. However, the drive must be
different. For example: </p>
 <pre class="codeblock" id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-783ACC24-81B8-5687-948B-65DFB8594BB4"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-783ACC24-81B8-5687-948B-65DFB8594BB4"><!-- --></a>;Eclipsing package
&amp;EN
%{"Nokia Corporation"}
:"Nokia Corporation"
#{"Hello World"},(0x18000091),1,1,0, TYPE=PU
"HelloWorld.exe"-"$:\sys\bin\HelloWorld.exe"
"HelloWorld.rsc"-"$:\resource\apps\HelloWorld.rsc"
"HelloWorld.mbm" - "$:\resource\apps\HelloWorld.mbm"
"HelloWorld_reg.rsc" - "$:\private\10003a3f\import\apps\HelloWorld_reg.rsc"</pre>
 <p>The
upgrading package must have same package UID as the stub SIS file, as this
is always from the protected range. </p>
 <p>It is preferable to specify the
target drive letter as <samp class="codeph">$:</samp> to denote the system drive. This
is because if the Symbian device user chooses to install the package to a
removable drive, which can subsequently be removed, the files on <span class="filepath">Z</span> drive
can be used again. </p>
 <p> <strong>Note</strong>: The installer does not allow two
different files to eclipse a file at the same time. For example, after eclipsing
a ROM file by installing a newer version of the file to <span class="filepath">C</span> drive,
the installer does not allow you to eclipse the ROM file again by installing
another version of the file to <span class="filepath">D</span> drive. The installation
fails. </p>
 <p> </p>
 </li>

<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-BC5FEC91-7735-5597-89B1-E34BB7065573"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-BC5FEC91-7735-5597-89B1-E34BB7065573"><!-- --></a><p>Run the <a href="GUID-4BDC9F63-83A1-53A5-91A0-B092AA821755.html">MakeSIS</a> and <a href="GUID-B20EE8A3-D7B2-5872-AF43-001A88C1A46E.html">SignSIS</a> tools to create
and sign the eclipsing SIS file. Alternatively, you can use the <a href="GUID-AA555CC1-5CFF-5609-9191-8970F32BA255.html">CreateSIS</a> tool. </p>
 </li>

</ol>
 </div>

<div class="section" id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-FD019E0B-DC32-5F29-8867-656DB2795FF4"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-FD019E0B-DC32-5F29-8867-656DB2795FF4"><!-- --></a><h2 class="sectiontitle">Creating
system upgrade package</h2> <p>To use system upgrade packages, device creators
must: </p>
 <a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-F67E11F8-ADF0-5316-BFBC-FFCED6C6E4DF"><!-- --></a><ol id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-F67E11F8-ADF0-5316-BFBC-FFCED6C6E4DF">
<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-5E77C193-767D-50D8-8BA0-E4FDD509EFEF"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-5E77C193-767D-50D8-8BA0-E4FDD509EFEF"><!-- --></a><p>Create a PKG file and
include the ROMUpgrade (<samp class="codeph">RU</samp>) flag in the package header. For
details about the RU Flag supporting different upgrade types, see <a href="GUID-CD5907AE-B439-5F76-AE19-9C9491832CB4.html">System
Upgrades</a>. </p>
 </li>

<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-EA1797BD-BA66-5D4F-8CD5-EE2E6B8E856F"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-EA1797BD-BA66-5D4F-8CD5-EE2E6B8E856F"><!-- --></a><p>Run the <a href="GUID-4BDC9F63-83A1-53A5-91A0-B092AA821755.html">MakeSIS</a> and <a href="GUID-B20EE8A3-D7B2-5872-AF43-001A88C1A46E.html">SignSIS</a> tools to create
and sign the SIS file with a <samp class="codeph">SU</samp> certificate. Alternatively,
you can use the <a href="GUID-AA555CC1-5CFF-5609-9191-8970F32BA255.html">CreateSIS</a> tool. </p>
 </li>

</ol>
 </div>

<div class="section" id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-124E78DC-2C94-4901-A90B-20DDC2F3AD66"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-124E78DC-2C94-4901-A90B-20DDC2F3AD66"><!-- --></a><h2 class="sectiontitle">Important Considerations</h2><p>Consider
the following tips to avoid common problems that can occur when eclipsing
ROM files. </p>
 <ul>
<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-F3834539-10D0-518E-B004-EC512A4D73E7"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-F3834539-10D0-518E-B004-EC512A4D73E7"><!-- --></a><p>If you are eclipsing
an application <span class="filepath">EXE</span>, make sure that both the application
and the eclipsing SIS file have put the application registration file (<span class="filepath">*_reg.rsc</span>)
in <span class="filepath">\private\10003a3f\import\apps\</span> rather than <span class="filepath">\private\10003a3f\apps\</span>.
Else, the application framework picks up the application from <span class="filepath">z</span> drive. </p>
 </li>

<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-EE1F1535-D347-5DF8-8C36-935A48F3CFD2"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-EE1F1535-D347-5DF8-8C36-935A48F3CFD2"><!-- --></a><p>The <span class="filepath">DLLs</span> and <span class="filepath">EXEs</span> have
version numbers. You can set the version (which consists of a major and a
minor number) in the <span class="filepath">MMP</span> file using the <samp class="codeph">VERSION</samp> keyword.
The default version number is <samp class="codeph">10.0</samp>. </p>
 <p>When eclipsing
a DLL available in ROM, the upgrading version number must be higher than the
one in ROM, otherwise, any EXEs in ROM (<span class="filepath">Z</span> drive) that
link to this DLL can use the version on <span class="filepath">Z</span> drive. However,
the new version must have the same major version number. </p>
 </li>

<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-3D03C487-6303-5C49-B780-2489ADB637A1"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-3D03C487-6303-5C49-B780-2489ADB637A1"><!-- --></a><p>The application that
needs to be upgradable must not hard code any path to <span class="filepath">Z</span> drive,
otherwise files are picked up from <span class="filepath">z</span> drive. </p>
 </li>

<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-8F3CACA0-5D68-505C-918F-8C0DADAB5577"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-8F3CACA0-5D68-505C-918F-8C0DADAB5577"><!-- --></a><p>If you are upgrading
ECOM plugins on <span class="filepath">Z</span> drive, you must increment the interface
implementation version number. </p>
 </li>

<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-79CA5A58-A167-58E5-9C0B-21EAD8335FAB"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-79CA5A58-A167-58E5-9C0B-21EAD8335FAB"><!-- --></a><p>Verify that the vendor
names in the Stub SIS file match with the vendor names of the eclipsing SIS
file. </p>
 </li>

<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-6530AAF8-AF5A-5D50-97D4-74117760816B"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-6530AAF8-AF5A-5D50-97D4-74117760816B"><!-- --></a><p>In an XIP (execute in
place) ROM, the linking of executables to <span class="filepath">DLL</span> s is done
at ROM build time. Therefore, to eclipse a <span class="filepath">DLL</span> in an
XIP ROM, the <span class="filepath">EXE</span> that uses it also needs to be eclipsed. </p>
 </li>

<li id="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-5213264C-0414-541F-B2B9-2DEC4AB85F91"><a name="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0__GUID-5213264C-0414-541F-B2B9-2DEC4AB85F91"><!-- --></a><p>To eclipse language
specific files, it is recommended to eclipse every language variant that is
in the ROM. For example, if the application resource file has <span class="filepath">.RSC</span> and <span class="filepath">.R02</span> in
ROM, the eclipsing SIS file must also include <span class="filepath">.RSC</span> and <span class="filepath">.R02</span>. </p>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-A4C26317-9F76-587E-A4B6-D94892ACF11B.html">Secure Software Install SIS Tools Tutorials</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-43B4B4E7-413E-5D18-811C-4B9E38CDEB69.html">PKG File
Format</a></div>
<div><a href="GUID-CD5907AE-B439-5F76-AE19-9C9491832CB4.html">System Upgrade Packages</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>