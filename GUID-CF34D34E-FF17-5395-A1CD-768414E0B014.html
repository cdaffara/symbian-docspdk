<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Database Management"/>
<meta name="DC.Relation" scheme="URI" content="GUID-12D1EE2F-AF1E-4C53-ADC8-D8BC205BD063.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0522B178-0FD5-4416-B7FE-390749F7A13D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3AF6CE70-DDBE-53F3-ABB6-7E78A300F14B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-12D1EE2F-AF1E-4C53-ADC8-D8BC205BD063.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-CF34D34E-FF17-5395-A1CD-768414E0B014"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Database Management</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-CF34D34E-FF17-5395-A1CD-768414E0B014"><a name="GUID-CF34D34E-FF17-5395-A1CD-768414E0B014"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2518949 id2518958 id2518972 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-0522B178-0FD5-4416-B7FE-390749F7A13D.html">Contacts Guide</a> &gt; <a href="GUID-3AF6CE70-DDBE-53F3-ABB6-7E78A300F14B.html">Contacts Model</a> &gt; <a href="GUID-12D1EE2F-AF1E-4C53-ADC8-D8BC205BD063.html">Concepts</a> &gt; </div>
<h1 class="topictitle1">Database Management</h1>
<div><p>The Contact Database is a database of Contact Items. The main API to the Contact Database is provided by the <a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html"><span class="apiname">CContactDatabase</span></a> class. The <a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html"><span class="apiname">CContactDatabase</span></a> class allows clients to create (<a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E__GUID-FB3A2CFA-21A0-3EE1-8267-30AB94720166"><span class="apiname">CContactDatabase::CreateL()</span></a>) a new Contact Database, or open (<a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E__GUID-5C43E2F0-BFC2-378A-8A1F-3641FF9DB764"><span class="apiname">CContactDatabase::OpenL()</span></a>) an existing one. </p>
 <p>Once opened, the database can be searched and sorted, and items within it can be edited or read, new items can be added and existing ones can be deleted (<a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E__GUID-5DE9AB9D-CD86-3EB1-9A91-68A1235BF162"><span class="apiname">CContactDatabase::doDeleteContactL()</span></a>). To edit an item, it must first be opened. Changes to the item can then be committed to storage using <a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E__GUID-35AD302C-659C-3705-961A-3730F2975B25"><span class="apiname">CContactDatabase::CommitContactL()</span></a>. Only open items can be committed. </p>
 <p>Client applications that need to be updated dynamically, as the database is altered by other clients, should derive from class <a href="GUID-4928B1DE-9800-3887-B456-2DDFE810AFD9.html"><span class="apiname">MContactDbObserver</span></a>. The observer's <a href="GUID-4928B1DE-9800-3887-B456-2DDFE810AFD9.html#GUID-4928B1DE-9800-3887-B456-2DDFE810AFD9__GUID-DECA9730-0504-3D4F-85D4-AFAC70B46580"><span class="apiname">MContactDbObserver::HandleDatabaseEventL()</span></a> function will be called in response to each change to the database. </p>
 <p>When contacts are modified the database can become fragmented, limiting the amount of space available. This leads to less efficient storage. To determine whether defragmentation is required for the database use <a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E__GUID-44EBA5DD-F790-30C2-AB22-AC6E3F2A1D3D"><span class="apiname">CContactDatabase::CompressRequired()</span></a>.This function provides an easy way of testing whether the database is being used efficiently. <a href="GUID-781E8158-805B-3784-8FED-D7A191822FC3.html"><span class="apiname">ETrue</span></a> is returned if a compression of the database is recommended. To compress the database to its minimum size use <a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E__GUID-ECF0D06A-E1E5-3285-994B-34D59BB588D8"><span class="apiname">CContactDatabase::CompactL()</span></a>. </p>
 <p> <a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E__GUID-BA8E31EE-0AE4-36E2-9AE4-88ADF63C85FE"><span class="apiname">CContactDatabase::IsDamaged()</span></a> tests to see whether the database is corrupted and needs to be recovered. If the database is corrupted it can be recovered through a rollback. <a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E__GUID-D14DFE6F-90E9-33DD-A108-10A23A8D5B53"><span class="apiname">CContactDatabase::RecoverL()</span></a> first closes all tables in the database and then reopens them after the database is repaired. <a href="GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E.html#GUID-6A6C7B3B-1E44-3731-956D-590A1122FF6E__GUID-5443434C-ADCD-348D-84EC-BBB40EF689EE"><span class="apiname">CContactDatabase::DatabaseRollback()</span></a> will force a rollback of the database. </p>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-12D1EE2F-AF1E-4C53-ADC8-D8BC205BD063.html">Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>