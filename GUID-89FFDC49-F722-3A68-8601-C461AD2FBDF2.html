<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="MCTKeyStoreManager"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2"/>

<title>MCTKeyStoreManager</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2"><a name="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2578593 id2487220 id2488660 id2488664 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">MCTKeyStoreManager Class Reference</h1>
	<table class="signature"><tr><td>class MCTKeyStoreManager : public MCTKeyStore</td></tr></table><div class="section"><div>
			<p>Defines the interface for a key store manager token.</p>

			<p>This documentation describes the security policy that must be enforced by implementations of the interface.</p>

		</div></div>
<div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">MCTKeyStoreManager<ul class="derivation"><li class="derivation-depth-1 "><a href="GUID-2B3202F8-469D-3253-90E8-B553506AD47A.html">MCTKeyStore</a><ul class="derivation"><li class="derivation-depth-2 "><a href="GUID-686A1AB3-EF35-3D85-8062-6E99CEDD27A1.html">MCTTokenInterface</a></li></ul></li></ul></li></ul></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">void</td><td><a href="#GUID-F751E09B-3713-3F4C-BEBF-FC5F5F5F53E9">CancelCreateKey</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-BB2EE31E-778C-39DB-9128-F566D48FE730">CancelDeleteKey</a>()</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-7FF8D2F3-8507-312B-B441-C4BE116F7135">CancelExportEncryptedKey</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-855B487C-F091-34D5-AC67-9F38519757A3">CancelExportKey</a>()</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-FE571839-B9AF-3135-A67A-A1083A08D377">CancelImportEncryptedKey</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-3939B323-A945-320B-AE0F-8BCEA0D1B984">CancelImportKey</a>()</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-97555182-246F-3818-9349-26670C67E207">CancelRelock</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-2116A7A2-4B74-3AD0-AC92-1072ECC9FC9E">CancelSetManagementPolicy</a>()</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-6941A173-7E74-3A8E-AC9A-42F996B3F552">CancelSetPassphraseTimeout</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-A1D0ACBE-66D9-3CEE-A44C-B1034C348029">CancelSetUsePolicy</a>()</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-3678FA58-7D44-395A-BF02-02A5C3A113BA">CreateKey</a>(<a href="GUID-7AE17C42-BAD8-3BE9-88A9-D0B066D171F2.html">CCTKeyInfo</a> *&amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-4F8A5179-02D1-3405-B94F-D18E4E6A51A8">DeleteKey</a>(<a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a>, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-F72A04DD-788D-3C45-887F-7EE9E88E5752">ExportEncryptedKey</a>(<a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a>, const <a href="GUID-370A303E-B848-3C18-A81B-C240B0F23C36.html">CPBEncryptParms</a> &amp;, <a href="GUID-2A528453-0279-3E47-838C-F8A8D29B88F1.html">HBufC8</a> *&amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-5D7C1E0E-67B1-39D6-B5B8-2FAC281C5548">ExportKey</a>(<a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a>, <a href="GUID-2A528453-0279-3E47-838C-F8A8D29B88F1.html">HBufC8</a> *&amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-1E6EEEC1-0176-3BA8-BB94-173377309749">ImportEncryptedKey</a>(const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;, <a href="GUID-7AE17C42-BAD8-3BE9-88A9-D0B066D171F2.html">CCTKeyInfo</a> *&amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-2EA27794-DC92-3EBD-ABEE-B839D9C047F3">ImportKey</a>(const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;, <a href="GUID-7AE17C42-BAD8-3BE9-88A9-D0B066D171F2.html">CCTKeyInfo</a> *&amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-5F9D4223-ADDD-3958-B150-DA0957DF7C8E">Relock</a>(<a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-52025A26-61BE-3C72-A7D6-BEB9406071E4">SetManagementPolicy</a>(<a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a>, const <a href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html">TSecurityPolicy</a> &amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-958EA0A8-A8EE-3051-97DB-44162145D026">SetPassphraseTimeout</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-2E42BEB1-9788-36EC-AF14-E5012EC9A253">SetUsePolicy</a>(<a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a>, const <a href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html">TSecurityPolicy</a> &amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-686A1AB3-EF35-3D85-8062-6E99CEDD27A1.html">MCTTokenInterface::DoRelease()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-686A1AB3-EF35-3D85-8062-6E99CEDD27A1.html">MCTTokenInterface::Release()</a></td></tr><tr><td> </td><td><a href="GUID-686A1AB3-EF35-3D85-8062-6E99CEDD27A1.html">MCTTokenInterface::Token()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-686A1AB3-EF35-3D85-8062-6E99CEDD27A1.html">MCTTokenInterface::~MCTTokenInterface()</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-F751E09B-3713-3F4C-BEBF-FC5F5F5F53E9"><a name="GUID-F751E09B-3713-3F4C-BEBF-FC5F5F5F53E9"><!-- --></a>
		<h2 class="topictitle2">CancelCreateKey()</h2>
		<table class="signature"><tr><td>void</td><td>CancelCreateKey</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Cancels an ongoing <a href="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2.html#GUID-3678FA58-7D44-395A-BF02-02A5C3A113BA">CreateKey()</a> operation. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-BB2EE31E-778C-39DB-9128-F566D48FE730"><a name="GUID-BB2EE31E-778C-39DB-9128-F566D48FE730"><!-- --></a>
		<h2 class="topictitle2">CancelDeleteKey()</h2>
		<table class="signature"><tr><td>void</td><td>CancelDeleteKey</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Cancels an ongoing <a href="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2.html#GUID-4F8A5179-02D1-3405-B94F-D18E4E6A51A8">DeleteKey()</a> operation. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-7FF8D2F3-8507-312B-B441-C4BE116F7135"><a name="GUID-7FF8D2F3-8507-312B-B441-C4BE116F7135"><!-- --></a>
		<h2 class="topictitle2">CancelExportEncryptedKey()</h2>
		<table class="signature"><tr><td>void</td><td>CancelExportEncryptedKey</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Cancels an ongoing <a href="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2.html#GUID-F72A04DD-788D-3C45-887F-7EE9E88E5752">ExportEncryptedKey()</a> operation. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-855B487C-F091-34D5-AC67-9F38519757A3"><a name="GUID-855B487C-F091-34D5-AC67-9F38519757A3"><!-- --></a>
		<h2 class="topictitle2">CancelExportKey()</h2>
		<table class="signature"><tr><td>void</td><td>CancelExportKey</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Cancels an ongoing <a href="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2.html#GUID-5D7C1E0E-67B1-39D6-B5B8-2FAC281C5548">ExportKey()</a> operation. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-FE571839-B9AF-3135-A67A-A1083A08D377"><a name="GUID-FE571839-B9AF-3135-A67A-A1083A08D377"><!-- --></a>
		<h2 class="topictitle2">CancelImportEncryptedKey()</h2>
		<table class="signature"><tr><td>void</td><td>CancelImportEncryptedKey</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Cancels an ongoing <a href="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2.html#GUID-1E6EEEC1-0176-3BA8-BB94-173377309749">ImportEncryptedKey()</a> operation. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-3939B323-A945-320B-AE0F-8BCEA0D1B984"><a name="GUID-3939B323-A945-320B-AE0F-8BCEA0D1B984"><!-- --></a>
		<h2 class="topictitle2">CancelImportKey()</h2>
		<table class="signature"><tr><td>void</td><td>CancelImportKey</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Cancels an ongoing <a href="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2.html#GUID-2EA27794-DC92-3EBD-ABEE-B839D9C047F3">ImportKey()</a> operation. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-97555182-246F-3818-9349-26670C67E207"><a name="GUID-97555182-246F-3818-9349-26670C67E207"><!-- --></a>
		<h2 class="topictitle2">CancelRelock()</h2>
		<table class="signature"><tr><td>void</td><td>CancelRelock</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Cancels an ongoing <a href="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2.html#GUID-5F9D4223-ADDD-3958-B150-DA0957DF7C8E">Relock()</a> operation. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-2116A7A2-4B74-3AD0-AC92-1072ECC9FC9E"><a name="GUID-2116A7A2-4B74-3AD0-AC92-1072ECC9FC9E"><!-- --></a>
		<h2 class="topictitle2">CancelSetManagementPolicy()</h2>
		<table class="signature"><tr><td>void</td><td>CancelSetManagementPolicy</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Cancels an ongoing <a href="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2.html#GUID-52025A26-61BE-3C72-A7D6-BEB9406071E4">SetManagementPolicy()</a> operation. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-6941A173-7E74-3A8E-AC9A-42F996B3F552"><a name="GUID-6941A173-7E74-3A8E-AC9A-42F996B3F552"><!-- --></a>
		<h2 class="topictitle2">CancelSetPassphraseTimeout()</h2>
		<table class="signature"><tr><td>void</td><td>CancelSetPassphraseTimeout</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Cancels an ongoing <a href="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2.html#GUID-958EA0A8-A8EE-3051-97DB-44162145D026">SetPassphraseTimeout()</a> operation. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-A1D0ACBE-66D9-3CEE-A44C-B1034C348029"><a name="GUID-A1D0ACBE-66D9-3CEE-A44C-B1034C348029"><!-- --></a>
		<h2 class="topictitle2">CancelSetUsePolicy()</h2>
		<table class="signature"><tr><td>void</td><td>CancelSetUsePolicy</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Cancels an ongoing <a href="GUID-89FFDC49-F722-3A68-8601-C461AD2FBDF2.html#GUID-2E42BEB1-9788-36EC-AF14-E5012EC9A253">SetUsePolicy()</a> operation. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-3678FA58-7D44-395A-BF02-02A5C3A113BA"><a name="GUID-3678FA58-7D44-395A-BF02-02A5C3A113BA"><!-- --></a>
		<h2 class="topictitle2">CreateKey(CCTKeyInfo *&amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>CreateKey</td><td>(</td><td><a href="GUID-7AE17C42-BAD8-3BE9-88A9-D0B066D171F2.html">CCTKeyInfo</a> *&amp;</td><td>aReturnedKey,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Key creation Generates a new key pair and store it in the keystore.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>WriteUserData Requires the caller to have WriteUserData capability </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrPermissionDenied If the caller does not have WriteUserData capability </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrAlreadyExists If a key with the specified label already exists in the keystore. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeySize If the requested key size is not supported. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeyAccess If an invalid combination of key access flags were specified. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeyValidity If a validity period was specified, but the end date was in the past. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-7AE17C42-BAD8-3BE9-88A9-D0B066D171F2.html">CCTKeyInfo</a> *&amp; aReturnedKey</td><td>This is filled by the caller with required attributes, leaving the TKeyIdentifier iID and object handle iHandle uninitialised - these values are set if the key is created successfully  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td>This will be completed with the final status code </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-4F8A5179-02D1-3405-B94F-D18E4E6A51A8"><a name="GUID-4F8A5179-02D1-3405-B94F-D18E4E6A51A8"><!-- --></a>
		<h2 class="topictitle2">DeleteKey(TCTTokenObjectHandle, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>DeleteKey</td><td>(</td><td><a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a></td><td>aHandle,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Deletes a key.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>Dependent Requires the caller to have any capabilities specified in the key management security policy. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrPermissionDenied If the caller does not conform to the key management security policy. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNotFound If the key the handle referes to does not exist. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrAccessDenied If the calling process is not allowed to delete the key. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrInUse If another client is currently using the key. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a> aHandle</td><td>The handle of the key to delete </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-F72A04DD-788D-3C45-887F-7EE9E88E5752"><a name="GUID-F72A04DD-788D-3C45-887F-7EE9E88E5752"><!-- --></a>
		<h2 class="topictitle2">ExportEncryptedKey(TCTTokenObjectHandle, const CPBEncryptParms &amp;, HBufC8 *&amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>ExportEncryptedKey</td><td>(</td><td><a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a></td><td>aHandle,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-370A303E-B848-3C18-A81B-C240B0F23C36.html">CPBEncryptParms</a> &amp;</td><td>aEncryptParams,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-2A528453-0279-3E47-838C-F8A8D29B88F1.html">HBufC8</a> *&amp;</td><td>aKey,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Exports an encrypted key pair.</p>

				<p>The key is exported as DER-encoded PKCS#5/PKCS#8 data.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>Dependent Requires the caller to have any capabilities specified in the key management security policy. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrPermissionDenied If the caller does not conform to the key management security policy. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNotFound If the key the handle referes to does not exist. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeyAccess If the exportable flag is not set for the key. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeyAlgorithm If this type of key cannot be exported. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a> aHandle</td><td>The handle of the key to export  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-370A303E-B848-3C18-A81B-C240B0F23C36.html">CPBEncryptParms</a> &amp; aEncryptParams</td><td> </td></tr><tr><td class="parameter"><a href="GUID-2A528453-0279-3E47-838C-F8A8D29B88F1.html">HBufC8</a> *&amp; aKey</td><td>A reference to a HBufC8 pointer. The pointer will be set to a newly allocated buffer containing the key data.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-5D7C1E0E-67B1-39D6-B5B8-2FAC281C5548"><a name="GUID-5D7C1E0E-67B1-39D6-B5B8-2FAC281C5548"><!-- --></a>
		<h2 class="topictitle2">ExportKey(TCTTokenObjectHandle, HBufC8 *&amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>ExportKey</td><td>(</td><td><a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a></td><td>aHandle,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-2A528453-0279-3E47-838C-F8A8D29B88F1.html">HBufC8</a> *&amp;</td><td>aKey,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Export keys Exports a key pair in the clear.</p>

				<p>The key is exported as DER-encoded PKCS#8 data.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>Dependent Requires the caller to have any capabilities specified in the key management security policy. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrPermissionDenied If the caller does not conform to the key management security policy. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNotFound If the key the handle referes to does not exist. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeyAccess If the sensitive flag is set for the key, or the exportable flag is not set. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeyAlgorithm If this type of key cannot be exported. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a> aHandle</td><td>The handle of the key to export  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-2A528453-0279-3E47-838C-F8A8D29B88F1.html">HBufC8</a> *&amp; aKey</td><td>A reference to a HBufC8 pointer. The pointer will be set to a newly allocated buffer containing the key data. It is the caller's responsibility to delete this buffer. </td></tr><tr><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-1E6EEEC1-0176-3BA8-BB94-173377309749"><a name="GUID-1E6EEEC1-0176-3BA8-BB94-173377309749"><!-- --></a>
		<h2 class="topictitle2">ImportEncryptedKey(const TDesC8 &amp;, CCTKeyInfo *&amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>ImportEncryptedKey</td><td>(</td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td>aKey,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-7AE17C42-BAD8-3BE9-88A9-D0B066D171F2.html">CCTKeyInfo</a> *&amp;</td><td>aReturnedKey,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Imports an encrypted key pair into the keystore.</p>

				<p>The import data is DER-encoded PKCS#5/PKCS#8 format.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>WriteUserData Requires the caller to have WriteUserData capability </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrPermissionDenied If the caller does not have WriteUserData capability </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrAlreadyExists If a key with the specified label already exists in the keystore. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeySize If the requested key size is not supported. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeyAccess If an invalid combination of key access flags were specified. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeyValidity If a validity period was specified, but the end date was in the past. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrArgument If there is an error parsing the key data. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp; aKey</td><td>This is a descriptor representation of the PKCS#8 key data  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-7AE17C42-BAD8-3BE9-88A9-D0B066D171F2.html">CCTKeyInfo</a> *&amp; aReturnedKey</td><td>This is filled by the caller with required attributes, leaving the TKeyIdentifier iID and object handle iHandle uninitialised - these values are set if the key is created successfully </td></tr><tr><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-2EA27794-DC92-3EBD-ABEE-B839D9C047F3"><a name="GUID-2EA27794-DC92-3EBD-ABEE-B839D9C047F3"><!-- --></a>
		<h2 class="topictitle2">ImportKey(const TDesC8 &amp;, CCTKeyInfo *&amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>ImportKey</td><td>(</td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td>aKey,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-7AE17C42-BAD8-3BE9-88A9-D0B066D171F2.html">CCTKeyInfo</a> *&amp;</td><td>aReturnedKey,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Import keys Imports a cleartext key pair into the keystore.</p>

				<p>The import data is DER-encoded PKCS#8 format.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>WriteUserData Requires the caller to have WriteUserData capability </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrPermissionDenied If the caller does not have WriteUserData capability </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrAlreadyExists If a key with the specified label already exists in the keystore. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeySize If the requested key size is not supported. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeyAccess If an invalid combination of key access flags were specified. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrKeyValidity If a validity period was specified, but the end date was in the past. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrArgument If there is an error parsing the key data. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp; aKey</td><td>This is a descriptor representation of the PKCS#8 key data.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-7AE17C42-BAD8-3BE9-88A9-D0B066D171F2.html">CCTKeyInfo</a> *&amp; aReturnedKey</td><td>This is filled by the caller with required attributes, leaving the TKeyIdentifier iID and object handle iHandle uninitialised - these values are set if the key is created successfully. </td></tr><tr><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-5F9D4223-ADDD-3958-B150-DA0957DF7C8E"><a name="GUID-5F9D4223-ADDD-3958-B150-DA0957DF7C8E"><!-- --></a>
		<h2 class="topictitle2">Relock(TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>Relock</td><td>(</td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Re-locks the entire store (i.e., forget the pasphrase)</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td>This will be completed with the final status code  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-52025A26-61BE-3C72-A7D6-BEB9406071E4"><a name="GUID-52025A26-61BE-3C72-A7D6-BEB9406071E4"><!-- --></a>
		<h2 class="topictitle2">SetManagementPolicy(TCTTokenObjectHandle, const TSecurityPolicy &amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>SetManagementPolicy</td><td>(</td><td><a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a></td><td>aHandle,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html">TSecurityPolicy</a> &amp;</td><td>aPolicy,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Sets the security policy for key management.</p>

				<p>Specifies which processes are allowed to perform management operations on the key.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>Dependent Requires the caller to have any capabilities specified in the current and new key management security policies. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrPermissionDenied If the caller does not conform to the current and new key management security policies. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNotFound If the key the handle referes to does not exist. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a> aHandle</td><td>The handle of the key  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html">TSecurityPolicy</a> &amp; aPolicy</td><td>The new security policy. </td></tr><tr><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-958EA0A8-A8EE-3051-97DB-44162145D026"><a name="GUID-958EA0A8-A8EE-3051-97DB-44162145D026"><!-- --></a>
		<h2 class="topictitle2">SetPassphraseTimeout(TInt, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>SetPassphraseTimeout</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>aTimeout,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Sets the passphrase timeout for all keys owned by this process.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>Dependent Requires the caller to have any capabilities specified in the key management security policy. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrPermissionDenied If the caller does not conform to the key management security policy. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrArgument If the timeout specified is invalid. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a> aTimeout</td><td>The timeout in seconds. 0 means that the passphrase is always asked for, and -1 means that it is never expired  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td>This will be completed with the final status code </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-2E42BEB1-9788-36EC-AF14-E5012EC9A253"><a name="GUID-2E42BEB1-9788-36EC-AF14-E5012EC9A253"><!-- --></a>
		<h2 class="topictitle2">SetUsePolicy(TCTTokenObjectHandle, const TSecurityPolicy &amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>SetUsePolicy</td><td>(</td><td><a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a></td><td>aHandle,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html">TSecurityPolicy</a> &amp;</td><td>aPolicy,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Sets the security policy for key use.</p>

				<p>Specifies which processes are allowed to use the key for cryptographic operations.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>capability</strong>
							</dt>

							<dd>Dependent Requires the caller to have any capabilities specified in the key management security policy. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrPermissionDenied If the caller does not conform to the key management security policy. </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNotFound If the key the handle referes to does not exist. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-F50AF007-8E37-3DA4-82E3-BA7D29102326.html">TCTTokenObjectHandle</a> aHandle</td><td>The handle of the key  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-81A285F6-3F87-3E77-9426-61BB16BC7109.html">TSecurityPolicy</a> &amp; aPolicy</td><td>The new security policy. </td></tr><tr><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td> </td></tr></table></div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>