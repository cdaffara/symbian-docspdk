<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="The run-time control hierarchy"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1BB546C1-2795-55D9-97B6-AC3F6AB79389.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-94005A46-B4C6-4A30-A8E8-1B9C2D583D50.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E079315A-E5B6-4D33-B7E3-88697A3F11A4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6C16417B-5B37-5310-B59A-750D971AA6D4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1BB546C1-2795-55D9-97B6-AC3F6AB79389.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>The run-time control hierarchy</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7"><a name="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2561792 id2839629 id2839549 id2839510 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-94005A46-B4C6-4A30-A8E8-1B9C2D583D50.html">Classic UI Guide</a> &gt; <a href="GUID-E079315A-E5B6-4D33-B7E3-88697A3F11A4.html">Control and animation framework</a> &gt; <a href="GUID-6C16417B-5B37-5310-B59A-750D971AA6D4.html">The UI Control Framework (CONE)</a> &gt; <a href="GUID-1BB546C1-2795-55D9-97B6-AC3F6AB79389.html">Controls</a> &gt; </div>
<h1 class="topictitle1">The run-time control hierarchy</h1>
<div><p>At run-time all controls in an application are related to each other in a tree hierarchy. The top-level window-owning controls are owned by the AppUi. This is similar to the hierarchy of windows that exists in the Window Server which has a group window for each application at the root. It is important to understand the relationships between window-owning and non-window owning controls. The diagram below attempts to illustrate these. </p>
 <div class="fignone" id="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-C54A1D04-CA7D-5E3D-8FA0-327D511D5D45"><a name="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-C54A1D04-CA7D-5E3D-8FA0-327D511D5D45"><!-- --></a><span class="figcap">Figure 1. 
          The run-time control hierarchy 
        </span> <img src="GUID-4303DBDB-3F67-54E6-AB24-5E1871053ED9_d0e75903_href.png"/></div>
 <p>A non-window-owning control is confined to the extent of its parent if the parent is window-owning, and must be confined to the extent of its parent if the parent is non-window-owning. </p>
 <p>A window-owning component is confined to the nearest window-owning control above it in the hierarchy. </p>
 <p>Screen drawing may be initiated by either the application (because it's running and it has changed its display) or by the Window Server (because something else has updated the screen and the application is visible). </p>
 <ul><li id="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-1EDC9967-25E6-5CA4-9754-1304FFE8A4F0"><a name="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-1EDC9967-25E6-5CA4-9754-1304FFE8A4F0"><!-- --></a><p>Application-initiated redrawing follows the control framework run-time hierarchy: controls are drawn by their parents regardless of whether they are window-owning or not. </p>
 </li>
 <li id="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-ED6464FC-485A-5E62-BBE6-D297A975BF71"><a name="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-ED6464FC-485A-5E62-BBE6-D297A975BF71"><!-- --></a><p>Window-Server-initiated redrawing, on the other hand, follows the Window Server hierarchy: parents do not draw their window-owning children. </p>
 </li>
 </ul>
 <p>A control's container or parent control may not be changed after it has been set. </p>
 <p>The run time hierarchy of controls has been enhanced for version 9.1 of the Symbian OS. The distinction between the 'parent-child' relationship from the Window Server and the 'container-component' relationship from the control framework may be simplified with the addition of a parent pointer to CCoeControl. </p>
 <p>In UIQ v3 the parent pointer is enabled. In S60 and MOAP the parent pointer currently is not enabled. </p>
 <p>The addition of the parent pointer allows the framework to navigate the control hierarchy upwards as well as downwards. When enabled, the parent pointer is set automatically (see <a href="GUID-B84FA223-3DFD-58C5-8CEF-C5AA73AA6290.html#GUID-B84FA223-3DFD-58C5-8CEF-C5AA73AA6290__GUID-3F0E8223-2218-5C95-AFBC-D66AD1DB12A7">how to write a control</a>). </p>
 <p>The run-time hierarchy is particularly significant when laying out and when refreshing the screen. Here are a few examples of how the framework uses the run-time hierarchy. </p>
 <ul><li id="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-9AA456A8-EB70-562F-8303-EF825BBA48E9"><a name="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-9AA456A8-EB70-562F-8303-EF825BBA48E9"><!-- --></a><p>When a control is drawn it must have the correct Look and Feel: its colours, fonts, font style, size and shape must be correct. Controls use their parent's graphics contexts and text drawers. </p>
 </li>
 <li id="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-38B4FE1B-BEE7-53DE-A8C6-192D7BF9B1AA"><a name="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-38B4FE1B-BEE7-53DE-A8C6-192D7BF9B1AA"><!-- --></a><p>If a control (lodger or a parent) changes size, the controls around or within it might have to move or resize. From 9.1 the framework provides a layout manager interface (<a href="GUID-A622B8C7-60F4-38E8-B102-14883BCBA249.html"><span class="apiname">MCoeLayoutManager</span></a>). Controls use the run-time hierarchy to find the appropriate layout manager. </p>
 </li>
 <li id="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-9EE92BB4-AC03-55FF-96BE-402B19EEC8FA"><a name="GUID-E244744F-4837-5B46-8E37-4666A28BF0B7__GUID-9EE92BB4-AC03-55FF-96BE-402B19EEC8FA"><!-- --></a><p>From 9.1 parent controls take responsibility for drawing behind their children. This allows flexibility with backgrounds, transparent controls and controls which appear non-rectangular. To enable this process to work with window-owning controls (necessary because the Window Server will not allow parent windows to draw behind child windows) a new interface, <a href="GUID-88936D48-B801-3D9C-8A9D-3498807937CE.html"><span class="apiname">MCoeControlBackground</span></a>, has been introduced. When a window owning control draws itself it first looks for an <a href="GUID-88936D48-B801-3D9C-8A9D-3498807937CE.html"><span class="apiname">MCoeControlBackground</span></a> in its chain of parents and calls <samp class="codeph">MCoeControlBackground::Draw()</samp> before drawing itself. </p>
 </li>
 </ul>
 <p> </p>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-1BB546C1-2795-55D9-97B6-AC3F6AB79389.html">Controls</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>