<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Network Privacy API Tutorial"/>
<meta name="abstract" content="This document describes how to use the Network Privacy API."/>
<meta name="description" content="This document describes how to use the Network Privacy API."/>
<meta name="DC.Relation" scheme="URI" content="GUID-B27F6C1D-6815-5DF5-B3F8-449260030B3D.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-01C03839-C88B-5FC3-9E0E-686415888B63.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B27F6C1D-6815-5DF5-B3F8-449260030B3D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B3000A78-3BE5-5E0A-A718-87BC9BA03726.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-746866CE-809A-5598-BA60-2947763E5EE9.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Network Privacy API Tutorial</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403195 id2403210 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-01C03839-C88B-5FC3-9E0E-686415888B63.html" title="The Network Adaptation collection contains Protocol Module ECOM plug-ins that can be used by the Network Gateway to support location and privacy requests.">Network Adaptation</a> &gt; <a href="GUID-B27F6C1D-6815-5DF5-B3F8-449260030B3D.html" title="The Privacy Protocol Module (PPM) is an optional LBS component that allows the LBS subsystem to process privacy requests from the device domestic OS. The privacy request may have been received from the network or from an installed application.">Privacy Protocol Module</a> &gt; </div>
<h1 class="topictitle1">Network
Privacy API Tutorial</h1>
<div><p>This document describes how to use the Network Privacy API. </p>

<div class="p"><p>The reader must be familiar with the Privacy Protocol Module and
the Network Privacy API. </p>
 </div>

<div class="section"><p>When LBS is configured to load the Privacy Protocol Module, it
handles only privacy requests and does not calculate position fixes. It is
the responsibility of licensee domestic OS components to obtain the device's
position. The <a href="GUID-B3000A78-3BE5-5E0A-A718-87BC9BA03726.html" title="The Network Privacy API is an interface through which the LBS subsystem can receive and respond to privacy requests when it is built to include the Privacy Protocol Module.">Network
Privacy API</a> provides the means to send privacy requests into the LBS
subsystem. </p>
 <p>To use the Network Privacy API a licensee must create a
client component that runs in the licensee domestic OS. This component receives
privacy and location requests from the network and forwards them to the LBS
subsystem via the Network Privacy API. </p>
 <p>The Network Privacy API is
only available with the Privacy Protocol Module. The first privacy request
sent via the Network Privacy API causes the LBS subsystem components to be
started. </p>
 <p>Many of the implementation details of creating a Network
Privacy API client are device creator specific (such as how to connect to
a network).</p>
 </div>

<a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-3EF2F3E8-48AF-534D-BE16-B6D78A349007"><!-- --></a><ol id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-3EF2F3E8-48AF-534D-BE16-B6D78A349007"><li class="stepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-267A5A69-D06F-5236-A905-595F81689FCB"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-267A5A69-D06F-5236-A905-595F81689FCB"><!-- --></a><span/><br/>
 Listen for privacy and location requests received from the network. 
</li>
<li class="stepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-99086B43-517E-5044-9732-A0E66836B9EA"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-99086B43-517E-5044-9732-A0E66836B9EA"><!-- --></a><span/><br/>
 Use the Network Privacy API to forward privacy requests to the LBS subsystem. 
</li>
<li class="stepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-F95C9B65-7CF7-50F7-ACEF-F337EAD9F5DF"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-F95C9B65-7CF7-50F7-ACEF-F337EAD9F5DF"><!-- --></a><span/><br/>
 Receive responses to privacy requests from the LBS subsystem via the
Network Privacy API and return them to the network. 
</li>
<li class="stepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-53AD01C6-87BE-58D0-9875-5D45FAC6FF76"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-53AD01C6-87BE-58D0-9875-5D45FAC6FF76"><!-- --></a><span/><br/>
 If a privacy request is accepted, forward the subsequent location request
to a component in the licensee domestic OS so that a position fix can be obtained. 
</li>
<li class="stepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-50B398C7-DC81-5BDA-B631-DE32E497A597"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-50B398C7-DC81-5BDA-B631-DE32E497A597"><!-- --></a><span>To use the Network
Privacy API create a Network Privacy API Client. </span>

<a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-ACC2FFC4-815E-506B-A141-6F8A73D897EC"><!-- --></a><ol type="a" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-ACC2FFC4-815E-506B-A141-6F8A73D897EC">
<li class="substepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-0300AD43-69EE-5193-B260-31A9C31658E1"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-0300AD43-69EE-5193-B260-31A9C31658E1"><!-- --></a><span/><br/>
 Define a Network Privacy API <a href="GUID-9A3406EF-3FEF-3F6F-9CB1-DFC1D09782B6.html"><span class="apiname">MPosVerificationObserver</span></a> subclass 
 The code example below shows a simple implementation of an <a href="GUID-9A3406EF-3FEF-3F6F-9CB1-DFC1D09782B6.html"><span class="apiname">MPosVerificationObserver</span></a> subclass
that uses the Network Privacy API. Such a class could be the basis of an observer
class in a licensee client application. 
 <pre class="codeblock" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-1DFD707A-9701-533A-B85F-318F458660BD"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-1DFD707A-9701-533A-B85F-318F458660BD"><!-- --></a>#ifndef CMYNETWORKLISTENER_H_
#define CMYNETWORKLISTENER_H_

#include &lt;EPos_MPosVerificationObserver.h&gt;
#include &lt;EPos_CPosNetworkPrivacy.h&gt;
#include &lt;EPos_CPosGSMPrivacyRequestInfo.h&gt;

class CMyNetworkObserver : public MPosVerificationObserver
{

public:
    static CMyNetworkObserver* NewL();

public:
    CMyNetworkObserver();
    virtual ~CMyNetworkObserver();

public:
    void GSMVerifyPrivacyRequestL(const TDesC* aLCSClient, const TDesC* aRequestor,
                               CPosNetworkPrivacy::TRequestDecision aTimeoutAction);
    void CancelPrivacyRequestL(TInt aRequestId, CPosNetworkPrivacy::TCancelReason aCancelReason);
    void GSMNotifyLocationRequestL(TDesC* aLCSClient, TDesC* aRequestor);
    void GSMTimeoutPrivacyRequestL(const TDesC* aLCSClient, const TDesC* aRequestor, 
                                 TInt aRequestId, CPosNetworkPrivacy::TRequestDecision aTimeoutAction);

    
public:
    // Method from MPosVerificationObserver
    void HandleVerifyComplete(TInt aRequestId, TInt aCompletionCode);
    
private:
    CPosNetworkPrivacy* iPrivacy;
    TInt iRequestId; // This demo client just stores a single request ID
    void ConstructL();

};


#endif /*CMYNETWORKLISTENER_H_*/
</pre>
 
</li>

<li class="substepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-9418AB61-9C1B-5398-9CFA-E57BBE5AB204"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-9418AB61-9C1B-5398-9CFA-E57BBE5AB204"><!-- --></a><span/><br/>
 Create an instance of CPosNetworkPrivacy in the client constructor 
 The code below shows the creation of a <a href="GUID-F5E959D8-3457-3385-9978-96FDD917D767.html"><span class="apiname">CPosNetworkPrivacy</span></a> object
in the second phase constructor of the observer. Note that in the Standalone
Privacy Mode configuration the LBS subsystem is transient, and creating an
instance of this class does not cause the LBS subsystem to be started. 
 <pre class="codeblock" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-E786D160-E0C7-5071-8443-A24BF4C59828"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-E786D160-E0C7-5071-8443-A24BF4C59828"><!-- --></a>
CMyNetworkObserver* CMyNetworkObserver::NewL()
{
    CMyNetworkObserver* listener = new (ELeave) CMyNetworkObserver();
    CleanupStack::PushL(listener);
    listener-&gt;ConstructL();
    CleanupStack::Pop(listener);
    return listener;
}

void CMyNetworkObserver::ConstructL()
{
    iPrivacy = CPosNetworkPrivacy::NewL();
}
</pre>
 
</li>

</ol>

</li>
<li class="stepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-E8E50631-18C4-5891-8323-D450D65A2C0C"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-E8E50631-18C4-5891-8323-D450D65A2C0C"><!-- --></a><span>Write code to send
a privacy verification request. </span>
 The licensee client receives a privacy verification request from the
network. The privacy request requires user verification. The following describes
the steps the licensee client application performs for a privacy verification
request: 

<a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-097A1946-E3C7-55F8-B9CC-9CCFEFCA86BD"><!-- --></a><ol type="a" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-097A1946-E3C7-55F8-B9CC-9CCFEFCA86BD">
<li class="substepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-9545A3E4-5B95-53B4-8DDD-7A06943DD02A"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-9545A3E4-5B95-53B4-8DDD-7A06943DD02A"><!-- --></a><span/><br/>
 The client creates an instance of <a href="GUID-32DA9EFC-D11D-3A56-A70E-045F7F0E849A.html"><span class="apiname">CPosGSMPrivacyRequestInfo</span></a> or <a href="GUID-1C0102CD-2F1C-3E8C-9357-06CFED618936.html"><span class="apiname">CPosSUPLPrivacyRequestInfo</span></a>.
The class of object that the client creates depends on whether the privacy
request was received from the network via GSM or via SUPL. 
</li>

<li class="substepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-BB1AB089-99F5-5897-8AED-4AB30216B7C6"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-BB1AB089-99F5-5897-8AED-4AB30216B7C6"><!-- --></a><span/><br/>
 The client calls <a href="GUID-F5E959D8-3457-3385-9978-96FDD917D767.html#GUID-F5E959D8-3457-3385-9978-96FDD917D767__GUID-E90DFB64-8087-3039-805D-F556F9E60B57"><span class="apiname">CPosNetworkPrivacy::VerifyPrivacyRequest()</span></a>.
This method is asynchronous and non-blocking. The client can process multiple
privacy requests by calling <samp class="codeph">VerifyPrivacyRequest()</samp> multiple
times. Each request is identified by a unique request ID. The LBS subsystem
is started if it is not running when a request is made. 
</li>

<li class="substepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-22B92688-D233-5EE6-97B8-E4BF330147E7"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-22B92688-D233-5EE6-97B8-E4BF330147E7"><!-- --></a><span/><br/>
 When the privacy request is completed, the method <a href="GUID-9A3406EF-3FEF-3F6F-9CB1-DFC1D09782B6.html#GUID-9A3406EF-3FEF-3F6F-9CB1-DFC1D09782B6__GUID-D1BDF319-CCFD-33CB-8779-CF56849BAA5B"><span class="apiname">MPosVerificationObserver::HandleVerifyComplete()</span></a> is
called on the client observer. The client sends the privacy response to the
network. 
</li>

</ol>

 The following code example demonstrates how to use the Network Privacy
API to verify a privacy request received over a GSM network. 
 <pre class="codeblock" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-745D5AF8-8B3A-5DBC-BC51-23434FF9EE5B"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-745D5AF8-8B3A-5DBC-BC51-23434FF9EE5B"><!-- --></a>
// Send a privacy request to LBS
void CMyNetworkObserver::GSMVerifyPrivacyRequestL(const TDesC* aLCSClient, const TDesC* aRequestor,
                                                  CPosNetworkPrivacy::TRequestDecision aTimeoutAction)
    {

    // Create a new CPosGSMPrivacyRequestInfo object
    CPosGSMPrivacyRequestInfo* info = CPosGSMPrivacyRequestInfo::NewLC();
    
    // In this example, aLCSClientName is a proper name and aRequestor is a phone number
    info-&gt;SetLCSClientL(*aLCSClient, CPosGSMPrivacyRequestInfo::EIdTypeLogicalName);
    info-&gt;SetRequestorL(*aRequestor, CPosGSMPrivacyRequestInfo::EIdTypeMSISDN);
    
    // In this example set the request type to single shot
    info-&gt;SetRequestType(CPosNetworkPrivacyRequestInfo::ERequestSingleShot);
    
    // Client has an iRequestId member variable (a production client may need an array to track multiple requests)
    //iRequestId is set when VerifyLocationRequestL is called
    iPrivacy-&gt;VerifyLocationRequestL(*info, iRequestId, *this, aTimeoutAction);
    
    CleanupStack::PopAndDestroy(info);
    
    }
          </pre>
 
</li>
<li class="stepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-F5BADBBF-0B90-5388-BF34-95D8EC936F52"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-F5BADBBF-0B90-5388-BF34-95D8EC936F52"><!-- --></a><span>Write code to send
a privacy notification request. </span>
 The licensee client receives a privacy request from the network. The
privacy request does not require verification. The following describes the
steps the licensee client application performs for a privacy notification
request: 

<a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-1ECCD9AA-EFE0-5B68-A9D1-DF25FE675EB4"><!-- --></a><ol type="a" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-1ECCD9AA-EFE0-5B68-A9D1-DF25FE675EB4">
<li class="substepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-02C81461-9F94-56EA-8B26-C4514004E603"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-02C81461-9F94-56EA-8B26-C4514004E603"><!-- --></a><span/><br/>
 The client creates an instance of <a href="GUID-32DA9EFC-D11D-3A56-A70E-045F7F0E849A.html"><span class="apiname">CPosGSMPrivacyRequestInfo</span></a> or <a href="GUID-1C0102CD-2F1C-3E8C-9357-06CFED618936.html"><span class="apiname">CPosSUPLPrivacyRequestInfo</span></a>.
The class of object that the client creates depends on whether the privacy
request was received from the network via GSM or via SUPL. 
</li>

<li class="substepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-80934AC7-05ED-5BCB-A1B2-1B50E1E954F2"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-80934AC7-05ED-5BCB-A1B2-1B50E1E954F2"><!-- --></a><span/><br/>
 The client calls <a href="GUID-F5E959D8-3457-3385-9978-96FDD917D767.html#GUID-F5E959D8-3457-3385-9978-96FDD917D767__GUID-A387994C-49AD-36A2-9C17-78425AF3E124"><span class="apiname">CPosNetworkPrivacy::NotifyLocationRequest()</span></a>.
This method is asynchronous and non-blocking. The client can process multiple
requests by calling <samp class="codeph">NotifyLocationRequest()</samp> multiple times.
Multiple requests are queued within the LBS subsystem. Each request is identified
by a unique request ID. The LBS subsystem is started if it is not running
when a request is made. 
</li>

</ol>

 The following code example demonstrates how to use the Network Privacy
API to notify LBS of a location request received over a GSM network. 
 <pre class="codeblock" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-E801B01E-DA61-5B7D-884C-BF59071ADC29"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-E801B01E-DA61-5B7D-884C-BF59071ADC29"><!-- --></a>
// Notify LBS of a location request
void CMyNetworkObserver::GSMNotifyLocationRequestL(TDesC* aLCSClient, TDesC* aRequestor)
    {
    
    // Create a new CPosGSMPrivacyRequestInfo object
    CPosGSMPrivacyRequestInfo* info = CPosGSMPrivacyRequestInfo::NewLC();

    // In this example, aLCSClientName is a proper name and aRequestor is a phone number
    info-&gt;SetLCSClientL(*aLCSClient, CPosGSMPrivacyRequestInfo::EIdTypeLogicalName);
    info-&gt;SetRequestorL(*aRequestor, CPosGSMPrivacyRequestInfo::EIdTypeMSISDN);

    // In this example set the request type to single shot
    info-&gt;SetRequestType(CPosNetworkPrivacyRequestInfo::ERequestSingleShot);
    
    // Client has an iRequestId member variable (a production client may need an array to track multiple requests)
    //iRequestId is set when NotifyLocationRequestL is called
    iPrivacy-&gt;NotifyLocationRequestL(*info, iRequestId);
    
    CleanupStack::PopAndDestroy(info);
    
    }
</pre>
 
</li>
<li class="stepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-0D76D936-0105-5A42-983D-EE8ACA54FB06"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-0D76D936-0105-5A42-983D-EE8ACA54FB06"><!-- --></a><span>Write code to cancel
a pending privacy verification request. </span>
 The code example below shows how a client can cancel an outstanding
request by calling <a href="GUID-F5E959D8-3457-3385-9978-96FDD917D767.html#GUID-F5E959D8-3457-3385-9978-96FDD917D767__GUID-BA814E0E-5397-3583-9030-C7234C549594"><span class="apiname">CPosNetworkPrivacy::CancelRequest()</span></a>. 
 <pre class="codeblock" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-FE23688D-33B2-5D85-9181-30C3E4EFBC74"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-FE23688D-33B2-5D85-9181-30C3E4EFBC74"><!-- --></a>
// Cancel an outstanding request
void CMyNetworkObserver::CancelPrivacyRequestL(TInt aRequestId, CPosNetworkPrivacy::TCancelReason aCancelReason)
    {
    
    // TCancelReason may be e.g. CPosNetworkPrivacy::ECancelReasonTimeout

    iPrivacy-&gt;CancelVerifyLocationRequest(aRequestId, aCancelReason);
    
    }
</pre>
 
</li>
<li class="stepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-619AA8B0-69B9-51F0-887B-E3CDA6EB6F6E"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-619AA8B0-69B9-51F0-887B-E3CDA6EB6F6E"><!-- --></a><span>Write code to send
a timeout notification to LBS. </span>
 The code example below shows how a request can be timed out. The network
can timeout the request and the client forwards this to the LBS subsystem
by calling <a href="GUID-F5E959D8-3457-3385-9978-96FDD917D767.html#GUID-F5E959D8-3457-3385-9978-96FDD917D767__GUID-E0A6F960-2EBD-3BBA-95B8-AA3203D250B5"><span class="apiname">CPosNetworkPrivacy::NotifyVerificationTimeoutL()</span></a>. 
 <pre class="codeblock" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-2CC875F4-8489-5D66-BD49-C7CEAB170859"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-2CC875F4-8489-5D66-BD49-C7CEAB170859"><!-- --></a>// Notify LBS that a completed privacy request has timed out
void CMyNetworkObserver::GSMTimeoutPrivacyRequestL(const TDesC* aLCSClient, const TDesC* aRequestor,
                                                  TInt aRequestId, CPosNetworkPrivacy::TRequestDecision aTimeoutAction)
    {
    
    // Create a new CPosGSMPrivacyRequestInfo object    
    CPosGSMPrivacyRequestInfo* info = CPosGSMPrivacyRequestInfo::NewLC();

    // In this example, aLCSClientName is a proper name and aRequestor is a phone number
    info-&gt;SetLCSClientL(*aLCSClient, CPosGSMPrivacyRequestInfo::EIdTypeLogicalName);
    info-&gt;SetRequestorL(*aRequestor, CPosGSMPrivacyRequestInfo::EIdTypeMSISDN);

    iPrivacy-&gt;NotifyVerificationTimeoutL(*info, aRequestId, aTimeoutAction);
    
    CleanupStack::PopAndDestroy(info);
    
    }
</pre>
 
 <pre class="codeblock" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-B6107B5B-329D-5A7A-8AE2-BB9835827593"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-B6107B5B-329D-5A7A-8AE2-BB9835827593"><!-- --></a>
// Handle verify complete messages from LBS
void CMyNetworkObserver::HandleVerifyComplete(TInt aRequestId, TInt aCompleteCode)
    {
    
    // The privacy request identified by aRequestId is complete
    // Inform the network...

    }
</pre>
 
</li>
<li class="stepexpand" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-4144B5F1-9F86-5D7C-949B-10A5C151A8E5"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-4144B5F1-9F86-5D7C-949B-10A5C151A8E5"><!-- --></a><span>Define client capabilities </span>
 The following is a simple MMP file for the client. The header files
for the Network Privacy API are located at <span class="filepath">\epoc32\include\lbs</span> and
the client links to <span class="filepath">eposnwprv.lib</span>. A client requires
the capabilities <samp class="codeph">Location</samp>, <samp class="codeph">NetworkServices</samp> and <samp class="codeph">ReadDeviceData</samp>. 
 <pre class="codeblock" id="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-DCAA7242-6F9E-55A5-8BCD-40E8C809BFCC"><a name="GUID-6526C440-34EA-50C2-B550-2C655DCC2ED8__GUID-DCAA7242-6F9E-55A5-8BCD-40E8C809BFCC"><!-- --></a>/*
============================================================================
 Name        : NetworkPrivacyAPI_Example.mmp
 Author      : 
 Copyright   :
 Description : 
============================================================================
*/

TARGET          NetworkPrivacyAPI_Example.exe
TARGETTYPE      exe
UID             0 0xE3DC328A

USERINCLUDE     ..\inc
SYSTEMINCLUDE   \epoc32\include \epoc32\include\lbs

SOURCEPATH      ..\src
SOURCE          NetworkPrivacyAPI_Example.cpp CMyNetworkListener.cpp

LIBRARY         euser.lib eposnwprv.lib


CAPABILITY Location NetworkServices ReadDeviceData</pre>
 
</li>
</ol>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-B27F6C1D-6815-5DF5-B3F8-449260030B3D.html" title="The Privacy Protocol Module (PPM) is an optional LBS component that allows the LBS subsystem to process privacy requests from the device domestic OS. The privacy request may have been received from the network or from an installed application.">Privacy Protocol Module</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-B3000A78-3BE5-5E0A-A718-87BC9BA03726.html" title="The Network Privacy API is an interface through which the LBS subsystem can receive and respond to privacy requests when it is built to include the Privacy Protocol Module.">Network Privacy
API</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br/>
<div><a href="GUID-746866CE-809A-5598-BA60-2947763E5EE9.html" title="This section describes the dynamic behaviour of the Network Privacy API using a set of sequence diagrams.">Network Privacy
API Reference</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>