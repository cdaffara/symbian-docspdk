<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="CoverFlow: using ScreenPlay"/>
<meta name="abstract" content="This example application demonstrates creating semi-transparent UI content over OpenVG content that is rendered to a composition surface. This is only possible when ScreenPlay is enabled."/>
<meta name="description" content="This example application demonstrates creating semi-transparent UI content over OpenVG content that is rendered to a composition surface. This is only possible when ScreenPlay is enabled."/>
<meta name="DC.Relation" scheme="URI" content="GUID-47851718-8DCA-57F5-8520-7044048A5852.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-47851718-8DCA-57F5-8520-7044048A5852.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>CoverFlow: using ScreenPlay</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2384397 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-47851718-8DCA-57F5-8520-7044048A5852.html" title="Example code for the Graphics package.">Graphics Example Code</a> &gt; </div>
<h1 class="topictitle1">CoverFlow: using ScreenPlay</h1>
<div><p>This example application demonstrates creating semi-transparent
UI content over OpenVG content that is rendered to a composition surface.
This is only possible when ScreenPlay is enabled. </p>

<div class="section" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-A512AE19-D921-47B7-86D7-1AE293365BC9-GENID-1-12-1-15-1-1-6-1-5-1-3-1"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-A512AE19-D921-47B7-86D7-1AE293365BC9-GENID-1-12-1-15-1-1-6-1-5-1-3-1"><!-- --></a><h2 class="sectiontitle">Download</h2> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-25ca392e-ce0c-414e-99aa-3f419cfe5170.zip" target="_blank">GraphicsShell.zip</a></p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-25ca392e-ce0c-414e-99aa-3f419cfe5170.html">browse</a> to view the example code. </p>
<p>The example
is located in the <span class="filepath">examples\Graphics\CoverFlow</span> directory.</p>
</div>

<div class="section" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-12DAE9CC-9E18-40AA-A820-FBC86F179425-GENID-1-12-1-15-1-1-6-1-5-1-3-2"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-12DAE9CC-9E18-40AA-A820-FBC86F179425-GENID-1-12-1-15-1-1-6-1-5-1-3-2"><!-- --></a><h2 class="sectiontitle">Description</h2> This code implements a 'coverflow' application. It uses OpenVG to
display images while semi-transparent or transparent windows and controls
are used to display overlaid content. The application does the following:
  <ul>
<li>Creates an EGL drawing surface by calling the <a href="GUID-AFCD509C-11EA-305D-9E25-D5A8E4244CF1.html"><span class="apiname">eglCreateWindowSurface()</span></a> function.</li>

<li>Converts bitmap cover images to OpenVG images. </li>

<li>Applies OpenVG transformations on the converted OpenVG images.</li>

<li>Draws the transformed images on the EGL surface by calling the <a href="GUID-D825614F-A95A-3BE3-9B31-5E76507AB79A.html"><span class="apiname">vgDrawImage()</span></a> function.</li>

<li>Draws the mirror image of bitmap cover images on the surface.</li>

<li>Displays an incoming call animation and a moving ticker window
in a separate active object. These are activated when relevant key
press events are detected. It uses the invalidate and re-draw pattern
of the window server to draw the contents on the window. </li>

</ul>
       The ScreenPlay graphics architecture uses a composition
engine to display multiple overlaid windows. The composition engine
takes multiple overlaid surfaces as input and creates a single screen
buffer. For more information, see <a href="GUID-859CAA08-59C9-5FD3-98DE-6BDD0D6ED50B.html">Graphics Composition</a> and <a href="GUID-D93978BE-11A3-5CE3-B110-1DEAA5AD566C.html" title="This topic provides an introduction to ScreenPlay and its architecture. ScreenPlay is a new graphics architecture, introduced in Symbian^3 (S^3). ScreenPlay enables device creators to take advantage of improved software performance, hardware acceleration and third party graphics engines. ScreenPlay is sometimes known as the New Graphics Architecture (NGA).">The ScreenPlay
Graphics Architecture</a>.  </div>

<div class="section" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-7CC504AD-E99D-419D-9A86-E5051B80705E"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-7CC504AD-E99D-419D-9A86-E5051B80705E"><!-- --></a><strong>Screenshots</strong><div class="fignone" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-0022F196-B3BD-5438-99C8-6EF0AA0D1E43-GENID-1-12-1-15-1-1-6-1-5-1-3-3-2"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-0022F196-B3BD-5438-99C8-6EF0AA0D1E43-GENID-1-12-1-15-1-1-6-1-5-1-3-3-2"><!-- --></a><span class="figcap">Figure 1.            Basic Screenshot      </span>

<img src="GUID-61BB12AA-7467-5633-8E4C-54D82AFF0F5E_d0e232670_href.jpg"/>
</div>
<div class="fignone" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-C918E177-E2DF-4F76-A6AD-709B93959B9E"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-C918E177-E2DF-4F76-A6AD-709B93959B9E"><!-- --></a><span class="figcap">Figure 2. Screenshot showing ticker and incoming call animation </span>

<img src="GUID-59D86225-4727-5B3F-9117-7815B4900445_d0e232677_href.jpg"/>
</div>
<div class="fignone" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-0B983730-C5C8-47DF-82FB-4A02624CEECD"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-0B983730-C5C8-47DF-82FB-4A02624CEECD"><!-- --></a><span class="figcap">Figure 3. Screenshot showing the absence of the mirror surface </span>

<img src="GUID-D84847BB-523D-5057-8F14-F6BCEECA2327_d0e232684_href.jpg"/>
</div>
</div>

<div class="section" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-801DEEAD-37EC-4FE3-88C9-CBCFA7650E0A"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-801DEEAD-37EC-4FE3-88C9-CBCFA7650E0A"><!-- --></a><h2 class="sectiontitle">Class
Summary</h2><div class="p">These are the principal classes used in this example:<ul>
<li><samp class="codeph">CCoverFlowAppUi</samp></li>

<li><samp class="codeph">CEGLRendering</samp></li>

<li><samp class="codeph">MEngine</samp></li>

<li><samp class="codeph">CDialogBox</samp></li>

<li><samp class="codeph">COpenVGEngine</samp></li>

<li><samp class="codeph">CTicker</samp></li>

<li><samp class="codeph">CLoader</samp></li>

</ul>
</div>
</div>

<div class="section" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-6F6FBA67-C8F1-4B55-9922-ADCF9CB0636A"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-6F6FBA67-C8F1-4B55-9922-ADCF9CB0636A"><!-- --></a><h2 class="sectiontitle">Design
and Implementation</h2><div class="p"><div class="fignone" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-0022F196-B3BD-5438-99C8-6EF0AA0D1E43-GENID-1-12-1-15-1-1-6-1-5-1-3-5-2-1"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-0022F196-B3BD-5438-99C8-6EF0AA0D1E43-GENID-1-12-1-15-1-1-6-1-5-1-3-5-2-1"><!-- --></a><span class="figcap">Figure 4. UML class diagram     </span>

</div>
<div class="fignone" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-F08882AF-B171-4D56-A3E7-F510D87D9FEC"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-F08882AF-B171-4D56-A3E7-F510D87D9FEC"><!-- --></a>
<img src="GUID-02970C7B-5B98-50C7-A324-0DDD71120DEB_d0e232734_href.png"/>
</div>
</div>
</div>

<div class="section" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-11F1F1BF-F1DC-4876-B47A-275B07C645E3-GENID-1-12-1-15-1-1-6-1-5-1-3-6"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-11F1F1BF-F1DC-4876-B47A-275B07C645E3-GENID-1-12-1-15-1-1-6-1-5-1-3-6"><!-- --></a><h2 class="sectiontitle">Building
and running</h2> <p>The Symbian build process describes how to
build an application.</p>
</div>

<div class="section" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-3D4FF2C6-91B8-4EFC-A008-DE4FEEF5938A"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-3D4FF2C6-91B8-4EFC-A008-DE4FEEF5938A"><!-- --></a><h2 class="sectiontitle">Configuration
settings for running the example on an Emulator or H4 board</h2><ol>
<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-CC897C4A-15CF-4B05-ABF7-32A1A0C38AFA-GENID-1-12-1-15-1-1-6-1-5-1-3-7-2-1"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-CC897C4A-15CF-4B05-ABF7-32A1A0C38AFA-GENID-1-12-1-15-1-1-6-1-5-1-3-7-2-1"><!-- --></a><p>Change the <samp class="codeph">WINDOWMODE</samp> parameter  to <samp class="codeph">Color16MAP </samp>in <samp class="codeph">epoc32\release\winscw\&lt;udeb/urel&gt;\z\system\data\wsini.ini </samp>(<samp class="codeph">epoc32\data\z\system\data\wsini.ini on the H4 board</samp>).</p>
</li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-CC897C4A-15CF-4B05-ABF7-32A1A0C38AFA-GENID-1-12-1-15-1-1-6-1-5-1-3-7-2-2"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-CC897C4A-15CF-4B05-ABF7-32A1A0C38AFA-GENID-1-12-1-15-1-1-6-1-5-1-3-7-2-2"><!-- --></a><p>The application
cannot run if ScreenPlay is disabled. If it is not already enabled,
you need to enable it. See <a href="GUID-6D8A1FC7-095B-587E-8274-23C132978C53.html" title="There are two variants of the graphics architecture. These are referred to as the ScreenPlay and the Non-ScreenPlay variants, respectively. This topic describes how to build and enable these two variants.">Enabling the Graphics
Architecture Variants </a>for more information.</p>
</li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-B6E8CCB6-B71F-45AF-9BC5-6C79E30B74F6"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-B6E8CCB6-B71F-45AF-9BC5-6C79E30B74F6"><!-- --></a><p>(Emulator only):
Copy all <span class="filepath">.mbm</span> (image) files from the <span class="filepath">coverflow\gfx\call</span> directory to the <span class="filepath">epoc32\release\winscw\&lt;udeb/urel&gt;\z\resource\apps</span> directory.</p>
</li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-C8F36B2B-5B19-43A6-8F6C-75E2782C91EE"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-C8F36B2B-5B19-43A6-8F6C-75E2782C91EE"><!-- --></a><p>Performance
can be boosted significantly by switching to portrait mode, which
is the native mode for the LCD controller. To enable portrait mode,
uncomment the following line in the <span class="filepath">coverflowapp.mmp</span>:</p>
<pre class="codeblock">// MACRO PORTRAIT_MODE</pre>
</li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-7070197E-8E9C-450E-B9AC-5CE8846CE382"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-7070197E-8E9C-450E-B9AC-5CE8846CE382"><!-- --></a><p>Add the following
configuration statements to the <span class="filepath">epoc32\data\epoc.ini</span> to run the example in portrait mode. </p>
<pre class="codeblock">screenwidth 240
screenheight 320
fasciabitmap null.bmp
screenoffsetx 0
screenoffsety 0</pre>
</li>

</ol>
</div>


<div class="section" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-FDB1B241-DD03-4C44-959B-905D6059B5A1"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-FDB1B241-DD03-4C44-959B-905D6059B5A1"><!-- --></a><h2 class="sectiontitle">Building the ROM Image</h2><div class="p">Perform the following steps to build the ROM image:<ol>
<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-E1C673B2-5D3A-4DFB-9336-554620F0BA4F"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-E1C673B2-5D3A-4DFB-9336-554620F0BA4F"><!-- --></a>Ensure that the
SD card is connected and its drive letter is <samp class="codeph">F:</samp>.</li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-B2B32E0C-0FFD-4257-BC6A-8C8D78947CED"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-B2B32E0C-0FFD-4257-BC6A-8C8D78947CED"><!-- --></a><p>Create the ROM
image using the following command from <span class="filepath">epoc32\rom\</span>:</p>
<div class="p">  <pre class="codeblock"> &gt; buildrom.cmd -D_EABI=ARMV5 -DRVCT -DEXCLUDE_JAVA -DSYMBIAN_BASE_USE_GCE -DSYMBIAN_GRAPHICS_USE_GCE -nosymbols -nofm h4hrp techview coverflowapp.iby -osys$rom.bin &amp;&amp; zip sys$rom.zip sys$rom.bin &amp;&amp; copy /y sys$rom.zip f:\ &amp;&amp; chkdsk f:</pre>
</div>
</li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-DA0049E4-0595-4DB3-B692-92AE42B34B48"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-DA0049E4-0595-4DB3-B692-92AE42B34B48"><!-- --></a>Copy all <span class="filepath">.mbm</span> (image) files from <span class="filepath"> coverflow\gfx\call</span> to<span class="filepath">e:\resource\apps</span> of the SD card.   Copy the <span class="filepath">covers.mbm</span> file from<span class="filepath"> \epoc32\data\z\resource\apps\covers.mbm </span>to <span class="filepath">e:\resource\apps\</span>of the SD card. </li>

</ol>
</div>
</div>

<div class="section" id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-0ECB73AE-87F0-449A-8F3E-7959794F52DC"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-0ECB73AE-87F0-449A-8F3E-7959794F52DC"><!-- --></a><h2 class="sectiontitle">Running
and using the example</h2><div class="p"><ol>
<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-D819C144-751D-4FD6-8229-4EFF00F379D1"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-D819C144-751D-4FD6-8229-4EFF00F379D1"><!-- --></a>Run <span class="filepath">coverflowapp.exe</span>.</li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-076DD732-5AD6-471C-8E93-33992A44A92D"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-076DD732-5AD6-471C-8E93-33992A44A92D"><!-- --></a>Press the Left
or the Right arrow key to navigate through the covers.</li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-985331D6-029A-4777-B006-9A4F370827B1"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-985331D6-029A-4777-B006-9A4F370827B1"><!-- --></a>Press the Down
arrow key to show or hide the Ticker at the bottom of the screen.</li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-746C8166-2BBB-435F-A6D5-61ED86045F0C"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-746C8166-2BBB-435F-A6D5-61ED86045F0C"><!-- --></a>Press the Up arrow
key to show or hide the incoming call animation.   </li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-29369361-B50F-499D-9B50-D81E5151A3A1"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-29369361-B50F-499D-9B50-D81E5151A3A1"><!-- --></a>Press the Tab key
to show or hide the semi-transparent green window around the incoming
call animation.</li>

<li id="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-0DED8319-2F36-42BB-998C-291A3E4ADA9A"><a name="GUID-53707903-9A88-409B-80F8-FDF7EF47ACBF__GUID-0DED8319-2F36-42BB-998C-291A3E4ADA9A"><!-- --></a>Press the Backspace
key to show or hide mirror images of the covers. </li>

</ol>
   </div>
</div>


</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-47851718-8DCA-57F5-8520-7044048A5852.html" title="Example code for the Graphics package.">Graphics Example Code</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>