<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Registering Services"/>
<meta name="DC.Relation" scheme="URI" content="GUID-756D831F-F302-594C-8116-144358DD8442.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DD13AA8E-BDAD-57EC-81EC-49C8D6D30A86.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-071A1E59-FE77-5D4D-B4D1-E6ECDF68BB03.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-EC7A9299-4272-5C1E-8A10-8267E154D56A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-756D831F-F302-594C-8116-144358DD8442.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Registering Services</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2535271 id2535280 id2535294 id2535308 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-DD13AA8E-BDAD-57EC-81EC-49C8D6D30A86.html" title="The Short Link Services module enables licensees to implement Bluetooth, USB, Infrared and OBEX on Symbian platform devices.">Short Link Services Guide</a> &gt; <a href="GUID-071A1E59-FE77-5D4D-B4D1-E6ECDF68BB03.html" title="The Bluetooth collection contains the SDP, GAVDP and Notifiers Support components.">Bluetooth Collection</a> &gt; <a href="GUID-EC7A9299-4272-5C1E-8A10-8267E154D56A.html" title="The Bluetooth Service Discovery Protocol (SDP) component enables you to register services to the SDP database and query the database for available services.">Bluetooth SDP</a> &gt; <a href="GUID-756D831F-F302-594C-8116-144358DD8442.html">Using Bluetooth Service Discovery Database</a> &gt; </div>
<h1 class="topictitle1">Registering Services</h1>
<div><p>Services must be registered in the SDP database before they can be found by an SDP Agent query. </p>
 <div class="section"><h2 class="sectiontitle">How to register a service in the database</h2> <p>After <a href="GUID-B75BD3DE-9C2E-5429-B55B-891462B92795.html" title="Bluetooth services are registered to the service discovery database.">connecting to the SDP database</a>, a service record can be created. You do this by supplying the UUID for the service class of the record. As the service class may be a single UUID or a list of UUIDs in the form of a DES, there are two overloaded functions. </p>
 <p>The steps to register a service are as follows: </p>
 <a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-AFA9213B-869F-5DDB-9572-181F4B058626"><!-- --></a><ol id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-AFA9213B-869F-5DDB-9572-181F4B058626"><li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-CD2C1B73-F3C0-5A9E-AA50-7E29B7D9C84E"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-CD2C1B73-F3C0-5A9E-AA50-7E29B7D9C84E"><!-- --></a><p>Create a blank service record object, <a href="GUID-9DDF886B-1556-30A2-A417-1919BA6D255A.html"><span class="apiname">TSdpServRecordHandle</span></a>. </p>
 </li>
 <li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-60B2CB64-CAC7-5FF6-88B3-84D32A9C05F5"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-60B2CB64-CAC7-5FF6-88B3-84D32A9C05F5"><!-- --></a><p>If the service class attribute should be a single UUID, create and set a <a href="GUID-FAD6BB78-84B7-335A-9D9C-3ADE7CF0958F.html"><span class="apiname">TUUID</span></a> object. If the attribute should be a list of UUIDs, create a attribute list object, <a href="GUID-7AF08589-F6E5-36A1-AD2C-84D3CB877451.html"><span class="apiname">CSdpAttrValueDES</span></a> or <a href="GUID-74C4154F-9C20-3C23-86EB-D4B602E79DC1.html"><span class="apiname">CSdpAttrValueDEA</span></a>, and call <a href="GUID-3DC9CB25-E55D-38E6-8940-B3320EF7E9DD.html#GUID-3DC9CB25-E55D-38E6-8940-B3320EF7E9DD__GUID-F073DB29-EF75-3D5D-A6D9-D7BC9ABFB4C3"><span class="apiname">MSdpElementBuilder::BuildUUIDL()</span></a> repeatedly to add UUIDs to the list. </p>
 </li>
 <li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-BD149ABF-42AD-5B2F-AF55-4FDF317B0D5A"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-BD149ABF-42AD-5B2F-AF55-4FDF317B0D5A"><!-- --></a><p>Call <a href="GUID-FC133F0F-C9E8-30CB-B2FE-8AC9F7F802AC.html#GUID-FC133F0F-C9E8-30CB-B2FE-8AC9F7F802AC__GUID-1B940D59-432C-3460-80E4-09A5CBE0FD49"><span class="apiname">RSdpDatabase::CreateServiceRecordL()</span></a> on an open subsession. On return, the record handle object holds a handle to the service record. </p>
 </li>
 </ol>
 </div>
 <div class="section"><h2 class="sectiontitle">Registering a single service class</h2> <p>The following example creates a service record with a single service class. </p>
 <a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-41928671-1E4F-56FD-99E1-3F8FCF2343AA"><!-- --></a><ol id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-41928671-1E4F-56FD-99E1-3F8FCF2343AA"><li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-B6A06A7A-D068-5929-8E5C-315656738811"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-B6A06A7A-D068-5929-8E5C-315656738811"><!-- --></a><p>Create blank record handle </p>
 <pre class="codeblock" id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-B51ED203-67B5-57AB-A29A-E757DF1364AF"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-B51ED203-67B5-57AB-A29A-E757DF1364AF"><!-- --></a>// Assumes sdpSession is an open session to the database
TSdpServRecordHandle recordHandle = 0;</pre>
 </li>
 <li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-E1AB9D3B-DDEB-50A0-A92A-B541FD6341C1"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-E1AB9D3B-DDEB-50A0-A92A-B541FD6341C1"><!-- --></a><p>Create the service class UUIDs </p>
 <pre class="codeblock" id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-298CDC04-2834-5865-81BD-B794CEDE7DCF"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-298CDC04-2834-5865-81BD-B794CEDE7DCF"><!-- --></a>TUUID uuid(0x20000);</pre>
 </li>
 <li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-1E51A67C-5E03-5CE9-B7C0-F17C1C74CC50"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-1E51A67C-5E03-5CE9-B7C0-F17C1C74CC50"><!-- --></a><p>Enter record into the database </p>
 <pre class="codeblock" id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-8BB40857-9D30-5197-9C8A-9D65D2785244"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-8BB40857-9D30-5197-9C8A-9D65D2785244"><!-- --></a>sdpSubSession.CreateServiceRecordL(uuid, recordHandle);</pre>
 </li>
 </ol>
 </div>
 <div class="section"><h2 class="sectiontitle">Registering a service class list</h2> <p>The following example creates a service record with a list of service classes. </p>
 <a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-C8474C59-C646-521E-AE94-DF156211002A"><!-- --></a><ol id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-C8474C59-C646-521E-AE94-DF156211002A"><li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-B435DA33-BC38-5659-9F18-05EE93E6B2C5"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-B435DA33-BC38-5659-9F18-05EE93E6B2C5"><!-- --></a><p>Create a blank record handle </p>
 <pre class="codeblock" id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-97417E17-47DA-53B8-899A-556B79F7A2A9"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-97417E17-47DA-53B8-899A-556B79F7A2A9"><!-- --></a>TSdpServRecordHandle recordHandle = 0;</pre>
 </li>
 <li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-50FA6B1F-101C-523A-966B-FD818EB34BE4"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-50FA6B1F-101C-523A-966B-FD818EB34BE4"><!-- --></a><p>Create a list of service class UUIDs </p>
 <pre class="codeblock" id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-EA278AE6-7486-556D-BDBE-DEC42C4C0E23"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-EA278AE6-7486-556D-BDBE-DEC42C4C0E23"><!-- --></a>CSdpAttrValueDES* UUIDlist = CSdpAttrValueDES::NewDESL(NULL);
CleanupStack::PushL(UUIDlist);
UUIDlist
    -&gt;StartListL()
        -&gt;BuildUUIDL(TUUID(TUint32(0x20002000)))
        -&gt;BuildUUIDL(TUUID(TUint32(0x11112222), TUint32(0x33334444), 
                              TUint32(0x55556666), TUint32(0x77778888)))
        -&gt;BuildUUIDL(TUUID(TUint32(0x40000)))
    -&gt;EndListL();
</pre>
 </li>
 <li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-3204B6B6-46AD-5C3E-A586-A1494B7C6D0B"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-3204B6B6-46AD-5C3E-A586-A1494B7C6D0B"><!-- --></a><p>Enter record into the database </p>
 <pre class="codeblock" id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-558C43FB-FBDE-58BA-87CD-E0900A4EBFB9"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-558C43FB-FBDE-58BA-87CD-E0900A4EBFB9"><!-- --></a>sdpSubSession.CreateServiceRecordL(*UUIDlist, recordHandle);
CleanupStack::PopL(); // UUIDlist</pre>
 </li>
 </ol>
 <p><strong>Note </strong> </p>
 <p>The examples shows UUIDs of varying length. Both 16- and 32-bit integers may be used, which are assumed to be offsets from the Bluetooth base UUID. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Where next?</h2> <p>The complete set of Service Discovery Database tutorials are shown below: </p>
 <a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-1ADEBB09-347F-53DD-8CD0-355BA707D7BA"><!-- --></a><ol id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-1ADEBB09-347F-53DD-8CD0-355BA707D7BA"><li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-9B76001A-F7EE-5FC7-8F87-A9B5143AE36A"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-9B76001A-F7EE-5FC7-8F87-A9B5143AE36A"><!-- --></a><p> <a href="GUID-B75BD3DE-9C2E-5429-B55B-891462B92795.html" title="Bluetooth services are registered to the service discovery database.">Connecting to the service discovery database</a>  </p>
 </li>
 <li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-E5587A96-B45F-590F-BCA0-4AD46B293C5B"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-E5587A96-B45F-590F-BCA0-4AD46B293C5B"><!-- --></a><p> <a href="GUID-E2A2FA2A-5D9A-56FE-B7E5-69CCBC656BB9.html">Handling SDP attributes</a>  </p>
 </li>
 <li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-82C85B76-5E78-507A-A61A-44B228528063"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-82C85B76-5E78-507A-A61A-44B228528063"><!-- --></a><p> <strong>Registering Services</strong> - This document </p>
 </li>
 <li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-DA18FDFD-CDAD-559C-8B7C-F075F9178F03"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-DA18FDFD-CDAD-559C-8B7C-F075F9178F03"><!-- --></a><p> <a href="GUID-33210C48-3198-51BC-9970-8B29F711A8E2.html">Setting service record attributes</a>  </p>
 </li>
 <li id="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-196905A6-7D11-535D-87C0-F75C5F686F0A"><a name="GUID-2373A158-C18A-51B5-BE9A-6B8F7FC63A35__GUID-196905A6-7D11-535D-87C0-F75C5F686F0A"><!-- --></a><p> <a href="GUID-ED342E6B-A4A3-576B-8934-7E7C049837F0.html">SDP Service records and attributes</a>  </p>
 </li>
 </ol>
 <p>Also refer to the <a href="GUID-E5893C4A-024A-53A7-805F-68989382DC3F.html">Bluetooth Service Discovery Database overview</a> and the <a href="GUID-8451102A-8E68-5C86-9E40-D53183E32261.html" title="The Bluetooth Service Discovery Protocol (SDP) component enables you to register services to the SDP database and query the database for available services.">Bluetooth SDP Overview</a> for additional background information. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-756D831F-F302-594C-8116-144358DD8442.html">Using Bluetooth Service Discovery Database</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>