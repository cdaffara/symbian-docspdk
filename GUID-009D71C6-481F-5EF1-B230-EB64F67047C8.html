<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Calibration"/>
<meta name="abstract" content="Calibration of the Digitizer Driver is required to convert between digitiser ADC values and screen coordinates."/>
<meta name="description" content="Calibration of the Digitizer Driver is required to convert between digitiser ADC values and screen coordinates."/>
<meta name="DC.Relation" scheme="URI" content="GUID-0563266C-8B5A-5664-9AC6-A5504AB5056F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A91C6359-E547-51AD-AA8C-45BCAFBA98AC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E081474F-6B17-5D2E-833B-E8177778577A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0563266C-8B5A-5664-9AC6-A5504AB5056F.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Calibration</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8"><a name="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2399872 id2400061 id2400098 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-A91C6359-E547-51AD-AA8C-45BCAFBA98AC.html" title="EKA2 is the principal Hardware and Kernel Services module. It manages the CPU and memory resources of a phone, and provides an architecture for device drivers to manage other hardware resources.">Kernel Architecture (EKA2)</a> &gt; <a href="GUID-E081474F-6B17-5D2E-833B-E8177778577A.html" title="The Digitizer Driver is a kernel extension that manages digitizers (touch screens).">Digitizer Driver</a> &gt; <a href="GUID-0563266C-8B5A-5664-9AC6-A5504AB5056F.html" title="Describes the steps to implement a port of the Digitizer Driver.">Porting Tutorial</a> &gt; </div>
<h1 class="topictitle1">Calibration</h1>
<div><p>Calibration of the Digitizer Driver is required to convert between
digitiser ADC values and screen coordinates. </p>

<p>Calibration is done through a user-side calibration application. </p>

<p>The platform specific layer performs the following calculation to convert
between ADC values and co-ordinates: </p>

<div class="fignone" id="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8__GUID-932E1DED-C393-5C26-A08F-E270CF5DC90B"><a name="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8__GUID-932E1DED-C393-5C26-A08F-E270CF5DC90B"><!-- --></a>
<img src="GUID-D6861A7A-1845-52AF-BB09-4B97E6B8AA13_d0e384804_href.png"/>
</div>

<p>Where the <strong>R</strong> matrix determines the scaling and rotation, and the <strong>T</strong> vector
determines the translation. </p>

<p>This conversion is implemented by the platform specific layer's implementation
of <a href="GUID-2EDAF642-2399-3594-986A-5E8A5EEA01B9.html#GUID-2EDAF642-2399-3594-986A-5E8A5EEA01B9__GUID-A51F6890-2D47-3FCC-A51B-19479658E49F"><span class="apiname">DDigitiser::DigitiserToScreen()</span></a> and <a href="GUID-2EDAF642-2399-3594-986A-5E8A5EEA01B9.html#GUID-2EDAF642-2399-3594-986A-5E8A5EEA01B9__GUID-F85119E0-83DC-3C54-BDFC-4F156ADFE538"><span class="apiname">DDigitiser::ScreenToDigitiser()</span></a>.
Default implementations are provided by the template port. Note, however,
that in these implementations, the calculation is slightly more complex because
screen coordinate values are left shifted 16 bits. This allows the operations
to use integer divisions without loosing precision. </p>

<p>All that you need to do is to provide an initial set of values for <strong>R</strong> and <strong>T</strong>.
An example of how to set them up is included in the template port. </p>

<p>The principle is that the application draws cross hairs on the screen,
and then invites the user to touch these points. The digitiser ADC value is
used to calculate the digitiser to screen pixel value transformation. </p>

<p>Any calibration code will interface with the <a href="GUID-2D977A02-5928-5441-8AE7-42A722F2A4B8.html#GUID-2D977A02-5928-5441-8AE7-42A722F2A4B8__GUID-4DA41221-40B9-5BC7-B2C6-7C6EB4522508">User-Side
Hardware Abstraction</a> component using four <a href="GUID-8B3280A2-318F-380C-B2A4-894C3C675868.html"><span class="apiname">UserHal</span></a> functions. </p>

<p>On a cold restart, the calibration application goes through the following
steps: </p>

<ul>
<li id="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8__GUID-DDEF3346-09D3-56B1-A9EE-CC520620611B"><a name="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8__GUID-DDEF3346-09D3-56B1-A9EE-CC520620611B"><!-- --></a><p>Gets the calibration
points by using <a href="GUID-8B3280A2-318F-380C-B2A4-894C3C675868.html#GUID-8B3280A2-318F-380C-B2A4-894C3C675868__GUID-57FFFEEF-200A-3F62-937F-181760F756A9"><span class="apiname">UserHal::CalibrationPoints()</span></a>  </p>
 </li>

<li id="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8__GUID-F93D82ED-924D-5268-807F-8F52F18A1A9E"><a name="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8__GUID-F93D82ED-924D-5268-807F-8F52F18A1A9E"><!-- --></a><p>Sets calibration points
by using: <a href="GUID-8B3280A2-318F-380C-B2A4-894C3C675868.html#GUID-8B3280A2-318F-380C-B2A4-894C3C675868__GUID-D494A58D-BBFA-3D3B-A979-A7CB4045EF23"><span class="apiname">UserHal::SetXYInputCalibration()</span></a>  </p>
 </li>

<li id="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8__GUID-C368C9AA-BE3C-5B95-AEDA-703B91059AFB"><a name="GUID-009D71C6-481F-5EF1-B230-EB64F67047C8__GUID-C368C9AA-BE3C-5B95-AEDA-703B91059AFB"><!-- --></a><p>Saves calibration data
by using: <a href="GUID-8B3280A2-318F-380C-B2A4-894C3C675868.html#GUID-8B3280A2-318F-380C-B2A4-894C3C675868__GUID-B93BD9B9-9F33-337D-A110-993B717F1D50"><span class="apiname">UserHal::SaveXYInputCalibration()</span></a>  </p>
 </li>

</ul>

<p>On a warm restart, the calibration application just restores calibration
data using <a href="GUID-8B3280A2-318F-380C-B2A4-894C3C675868.html#GUID-8B3280A2-318F-380C-B2A4-894C3C675868__GUID-63CC94BD-CD0C-3B2C-8714-1A976FE7D0DD"><span class="apiname">UserHal::RestoreXYInputCalibration()</span></a>. </p>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-0563266C-8B5A-5664-9AC6-A5504AB5056F.html" title="Describes the steps to implement a port of the Digitizer Driver.">Porting Tutorial</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>