<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Using TArray&lt;class T&gt;"/>
<meta name="abstract" content="This document covers important issues in using TArray"/>
<meta name="description" content="This document covers important issues in using TArray"/>
<meta name="DC.Relation" scheme="URI" content="GUID-59DB0115-053A-5D23-8C40-E2428C096BBC.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2E085BAD-AAD7-5D1A-89A7-287EE42D1069.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E3F403EE-717B-5EA6-BC4E-6840097CAC10.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-59DB0115-053A-5D23-8C40-E2428C096BBC.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Using TArray&lt;class T&gt;</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2392081 id2392089 id2392251 id2392348 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" title="The User Library allows the applications and services that run on a phone to access the functionality provided by the Symbian platform Kernel.">User Library</a> &gt; <a href="GUID-2E085BAD-AAD7-5D1A-89A7-287EE42D1069.html">Arrays And Lists</a> &gt; <a href="GUID-E3F403EE-717B-5EA6-BC4E-6840097CAC10.html">Using Dynamic Arrays</a> &gt; <a href="GUID-59DB0115-053A-5D23-8C40-E2428C096BBC.html">How to Use Dynamic Arrays</a> &gt; </div>
<h1 class="topictitle1">Using
TArray&lt;class T&gt;</h1>
<div><p>This document covers important issues in using TArray</p>

<div class="section" id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-658749FD-5BE8-4233-B107-DA466FB662CF"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-658749FD-5BE8-4233-B107-DA466FB662CF"><!-- --></a><h2 class="sectiontitle">Using TArray to avoid the need for overloaded variants</h2> <p>The
use of a <samp class="codeph">TArray</samp> object can avoid the need for the member
function of an end-user class to have overloaded variants to handle all possible
types of arrays of <samp class="codeph">&lt;classÂ T&gt;</samp> elements.</p>
 <p>The following
example illustrates the point. It constructs a fixed flat array, a variable
flat array and a packed array of <samp class="codeph">&lt;TElement&gt;</samp> objects.</p>
 <p>By
taking a <samp class="codeph">TArray&lt;TElement&gt;</samp> argument, the <samp class="codeph">CTot::Total()</samp> member
function can access array elements regardless of the type of array containing
them.</p>
 <pre class="codeblock" id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-C5A09CDE-7923-5427-9BB9-0BB518597E0B"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-C5A09CDE-7923-5427-9BB9-0BB518597E0B"><!-- --></a>class TElement                 // array elements
 {
 public:
  TElement();
  inline TInt GetValue() const;
  void SetValue(TInt aVal);
 private :
  TInt iValue;
 };
</pre>
 <pre class="codeblock" id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-6FB0C2E8-1548-5723-A82A-DDB62124A869"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-6FB0C2E8-1548-5723-A82A-DDB62124A869"><!-- --></a>class CTot : public CBase           
 {
 public :
  void Total(const TArray&lt;TElement&gt;&amp; anArray);
 private :
  TInt iTotalElements;
  TInt iTotalValue;
 };
</pre>
 <pre class="codeblock" id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-9A356EEC-985D-5BA0-90BE-4C5DFBC536D5"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-9A356EEC-985D-5BA0-90BE-4C5DFBC536D5"><!-- --></a>TElement::TElement()
 : iValue(0)
 {}

</pre>
 <pre class="codeblock" id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-D0614571-E2BB-5DB4-A31F-82273D3745E3"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-D0614571-E2BB-5DB4-A31F-82273D3745E3"><!-- --></a>inline TInt TElement::GetValue() const
 {
 return iValue;
 }

</pre>
 <pre class="codeblock" id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-81D89E93-39DC-5FAF-AD45-D345824B7BA5"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-81D89E93-39DC-5FAF-AD45-D345824B7BA5"><!-- --></a>void TElement::SetValue(TInt aVal)
 {
 iValue = aVal;
 }

</pre>
 <pre class="codeblock" id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-0336D0FB-E543-54BC-9A12-77D16340163F"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-0336D0FB-E543-54BC-9A12-77D16340163F"><!-- --></a>void CTot::Total(const TArray&lt;TElement&gt;&amp; anArray)
 {
 TInt count = anArray.Count();
 
 for (TInt jj = 0; jj &lt; count; jj++)
  iTotalValue += anArray[jj].GetValue();
 
 iTotalElements += count;
 }

</pre>
 <p>Then some code using these could be:</p>
 <pre class="codeblock" id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-CF9EDB28-FC0F-5F5A-907A-55DA637BF82F"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-CF9EDB28-FC0F-5F5A-907A-55DA637BF82F"><!-- --></a>//           main body

CArrayFixFlat&lt;TElement&gt;* fix;
CArrayVarFlat&lt;TElement&gt;* var;
CArrayPakFlat&lt;TElement&gt;* pak;
TElement x;
CTot* ptr;

ptr = new CTot;

fix = new CArrayFixFlat&lt;TElement&gt;(2);
var = new CArrayVarFlat&lt;TElement&gt;(2);
pak = new CArrayPakFlat&lt;TElement&gt;(2);

x.SetValue(1);
fix-&gt;AppendL(x);
x.SetValue(2);
var-&gt;AppendL(x,sizeof(x));
x.SetValue(3);
pak-&gt;AppendL(x,sizeof(x));

ptr-&gt;Total(fix-&gt;Array());
ptr-&gt;Total(var-&gt;Array());
ptr-&gt;Total(pak-&gt;Array());</pre>
 <p>Without the use of <samp class="codeph">TArray</samp>,
the <samp class="codeph">Total()</samp> member function would need overloaded variants
to handle all the possible array types which it might expect. The <samp class="codeph">CTot</samp> class
would need redefining as:</p>
 <pre class="codeblock" id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-54155741-69E5-5B1B-A1DD-A1A701806BDF"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-54155741-69E5-5B1B-A1DD-A1A701806BDF"><!-- --></a>class CTot : public CBase           
 {
 public :
  void Total(const CArrayFixFlat&lt;TElement&gt;&amp; anArray);
  void Total(const CArrayFixSeg&lt;TElement&gt;&amp; anArray);
  void Total(const CArrayVarFlat&lt;TElement&gt;&amp; anArray);
  void Total(const CArrayVarSeg&lt;TElement&gt;&amp; anArray);
  void Total(const CArrayPakFlat&lt;TElement&gt;&amp; anArray);
 private :
  TInt iTotalElements;
  TInt iTotalValue;
 };</pre>
 <p>To allow the <samp class="codeph">Total()</samp> function to handle
arrays composed of different types of element, (i.e. arrays constructed with
different template values), then a separate variant of <samp class="codeph">Total()</samp> is
required for each element type. For example, to handle arrays of <samp class="codeph">&lt;TElement1&gt;</samp> elements
and arrays of <samp class="codeph">&lt;TElement2&gt;</samp> elements, the <samp class="codeph">CTot</samp> class
might be defined as:</p>
 <pre class="codeblock" id="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-AD19E818-0B43-5C78-88B6-D8E7B82A914B"><a name="GUID-4F8B0675-AC8D-529A-903D-DA31C8236A98__GUID-AD19E818-0B43-5C78-88B6-D8E7B82A914B"><!-- --></a>class CTot : public CBase           
 {
 public :
  void TotalA(const TArray&lt;TElement1&gt;&amp; anArray);
  void TotalB(const TArray&lt;TElement2&gt;&amp; anArray);
 private :
  TInt iTotalElements;
  TInt iTotalValue;
 };</pre>
 <p>One important point to note; the referenced <samp class="codeph">TElement</samp> returned
by <samp class="codeph">operator[]</samp> is declared as <samp class="codeph">const</samp>. This
means that any member function of <samp class="codeph">TElement</samp> must also be declared
as <samp class="codeph">const</samp>, as shown in this example.</p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-59DB0115-053A-5D23-8C40-E2428C096BBC.html">How to Use Dynamic Arrays</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>