<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Using Clipboard"/>
<meta name="abstract" content="Clipboard allows applications to read and write data to and from a shared clipboard."/>
<meta name="description" content="Clipboard allows applications to read and write data to and from a shared clipboard."/>
<meta name="DC.Relation" scheme="URI" content="GUID-85AA0FD4-3BD1-50A7-B241-AE3908ACCF30.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D02B5AF1-B1C3-560D-9654-971A5CC1A904.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C8BD333E-8384-534B-822B-F61B2F7C8B9F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-85AA0FD4-3BD1-50A7-B241-AE3908ACCF30.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Using Clipboard</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51"><a name="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2381103 id2383459 id2383734 id2383771 id2383844 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html">Generic OS Services Guide</a> &gt; <a href="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF.html">Low Level Libraries and Frameworks</a> &gt; <a href="GUID-D02B5AF1-B1C3-560D-9654-971A5CC1A904.html">Application Utilities</a> &gt; <a href="GUID-C8BD333E-8384-534B-822B-F61B2F7C8B9F.html">Basic Application Framework Library</a> &gt; <a href="GUID-85AA0FD4-3BD1-50A7-B241-AE3908ACCF30.html" title="This section explains the tasks that can performed using Basic Application Framework Library.">Basic Application Framework Library Tutorials</a> &gt; </div>
<h1 class="topictitle1">Using
Clipboard</h1>
<div><p>Clipboard allows applications to read and write data to and from
a shared clipboard. </p>

<div class="section">       <p>The clipboard is implemented as a direct file store, as
defined in the File Store API. Data placed on the clipboard is in streams.
Every data type placed on the clipboard is identified by a UID. The store
has a stream dictionary to allow an application to retrieve the data by specifying
its UID. </p>
 <p>The clipboard class, <a href="GUID-9C1E9536-01E8-3C0E-B1C5-F0A597ED0CA3.html"><span class="apiname">CClipboard</span></a>, provides
operations to get the clipboard file store and stream dictionary. Applications
then read or write data using the standard store and stream interfaces. It
also provides special support for copying and pasting a <samp class="codeph">TReal</samp> to
and from the clipboard. </p>
 <p>To place data on the clipboard, construct
a <samp class="codeph">CClipboard</samp> object and prepare it for the data to be written,
using the <samp class="codeph">NewForWritingLC()</samp> static member function as illustrated
in the following code fragment: </p>
 <pre class="codeblock" id="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-9A1E8DF1-2BA9-5DFE-BFEA-749592A35E84"><a name="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-9A1E8DF1-2BA9-5DFE-BFEA-749592A35E84"><!-- --></a>CClipboard* cb = CClipboard::NewForWritingLC( fsSession );</pre>
 <p>The function requires a file server session. </p>
 <p>The file associated
with the clipboard's store may or may not exist. If it already exists, any
existing content is discarded; if the file does not exist, it is created.
In either event, <samp class="codeph">NewForWritingLC()</samp> results in an empty clipboard. </p>
 <p>Once
the <samp class="codeph">CClipboard</samp> object has been created, data is stored into
the clipboard 's store. Both the store (<samp class="codeph">CStreamStore</samp>) and
the stream dictionary (<samp class="codeph">CStreamDictionary</samp>), which the example
needs to access, are encapsulated by <samp class="codeph">CClipboard</samp>. The class,
therefore, provides the <samp class="codeph">Store()</samp> and <samp class="codeph">StreamDictionary()</samp> member
functions to return suitable references. </p>
      </div>

<ul><li class="stepexpand" id="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-4A467DE0-7F8F-4F49-BFA6-90A6BA1DCF73"><a name="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-4A467DE0-7F8F-4F49-BFA6-90A6BA1DCF73"><!-- --></a><span><strong>Creating the
data for the clipboard</strong>.</span>
<a name="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-D2D6C0A3-9B55-4CBC-8650-9CAB416C5C38"><!-- --></a><ol id="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-D2D6C0A3-9B55-4CBC-8650-9CAB416C5C38">
<li class="substepexpand" id="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-B6BE715A-6282-4161-93AF-1E5B9CCC09E0"><a name="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-B6BE715A-6282-4161-93AF-1E5B9CCC09E0"><!-- --></a><span>Prepare a new
stream for writing using the <samp class="codeph">CreateLC()</samp> member function of <samp class="codeph">RStoreWriteStream</samp>. </span>
 <p>The CClipboard's store is to contain the new stream and so <samp class="codeph">cb-&gt;Store()</samp> is
passed as a parameter to <samp class="codeph">CreateLC()</samp>. The item object is externalised.
The stream is committed.   The resulting <samp class="codeph">streamId</samp> and the <samp class="codeph">UID</samp>,
which identifies the data type, i.e. stid and <samp class="codeph">KExampleClipUid</samp>,
respectively, are placed in the stream dictionary using the stream dictionary's <samp class="codeph">AssignL()</samp> member
function.  </p>

</li>

<li class="substepexpand" id="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-513EA674-9E19-4020-AA8F-5C7E88221400"><a name="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-513EA674-9E19-4020-AA8F-5C7E88221400"><!-- --></a><span>Conclude by calling <samp class="codeph">CClipboard's
CommitL()</samp> member function to store the dictionary store as the root
stream of the store and to commit all changes to the store.</span>
 <p>Deleting the <samp class="codeph">CClipboard</samp> object causes the file associated
with the clipboard's store to be closed, allowing other applications to access
it.  </p>

</li>

</ol>

</li>
<li class="stepexpand" id="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-2F30C4DD-1601-4D67-B18B-50F52DD211C0"><a name="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-2F30C4DD-1601-4D67-B18B-50F52DD211C0"><!-- --></a><span><strong>Pasting the data
from clipboard </strong></span><br/>
 <p>To attempt to retrieve data from the clipboard, construct a <samp class="codeph">CClipboard</samp> object
and prepare it for reading using either <samp class="codeph">NewForReadingL()</samp> or <samp class="codeph">NewForReadingLC()</samp>.</p>
<pre class="codeblock">// Create clipboard object
TRAPD( ret,cb=CClipboard::NewForReadingL( fsSession ) );
CleanupStack::PushL( cb );
_LIT( KNoPaste,"Nothing to paste" );
if ( ret!=KErrNone )
    {
    doShow( KNoPaste,NULL );
    User::Leave( ret );
    }
// Get stream from store
TStreamId stid = ( cb-&gt;StreamDictionary() ).At( KExampleClipUid );
if ( stid == KNullStreamId )
    {
    doShow( KNoPaste,NULL );
    User::Leave( 0 );
    }
// Read stream
RStoreReadStream stream;
stream.OpenLC( cb-&gt;Store(),stid );
stream &gt;&gt; *item;</pre>

</li>
<li class="stepexpand" id="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-0780BA8D-A141-4061-B5D1-BE9F73C3B349"><a name="GUID-8C94EE15-82EA-4A95-9044-C3404F95BD51__GUID-0780BA8D-A141-4061-B5D1-BE9F73C3B349"><!-- --></a><span><strong>Copying and pasting
real numbers</strong> </span><br/>
 <p>Use <samp class="codeph">CopyToL( TReal )</samp> to place a <samp class="codeph">TReal</samp> on
the clipboard and use <samp class="codeph">PasteFromL( TReal&amp; )</samp> to fetch a <samp class="codeph">TReal</samp> from
the clipboard, if there is any data.</p>
<p> Applications that use these functions
to copy and paste <samp class="codeph">TReal</samp> objects need not concern themselves
with the UID used to identify the corresponding stream in the clipboard store.</p>
<p> It
must be noted that applications which use <samp class="codeph">CopyToL( TReal )</samp>,
must still call <samp class="codeph">CClipboard's CommitL()</samp> member function before
deleting the <samp class="codeph">CClipboard</samp> object.  </p>

</li>
</ul>

<div class="example"><p>Following is an example on how to create data for clipboard. In
this example, the data to be placed on the clipboard's store is a single object
item:</p>
<pre class="codeblock">RStoreWriteStream  stream;
TStreamId stid = stream.CreateLC( cb-&gt;Store() );
stream &lt;&lt; *item;
stream.CommitL();
( cb-&gt;StreamDictionary() ).AssignL( KExampleClipUid,stid );
CleanupStack::PopAndDestroy(); // stream
cb-&gt;CommitL();
CleanupStack::PopAndDestroy(); // cb</pre>
</div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-85AA0FD4-3BD1-50A7-B241-AE3908ACCF30.html" title="This section explains the tasks that can performed using Basic Application Framework Library.">Basic Application Framework Library Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>