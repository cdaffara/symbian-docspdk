<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="pdrstore: Creating a Printer Driver using pdr files"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C5A0D920-EB2A-5C06-B8F3-F3EAA6BB6BB9.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E89F034F-C807-5FF9-B06B-F7CCD2441041.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C5A0D920-EB2A-5C06-B8F3-F3EAA6BB6BB9.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>pdrstore: Creating a Printer Driver using pdr files</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2385294 id2386613 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-E89F034F-C807-5FF9-B06B-F7CCD2441041.html" title="The Graphics Device Interface (GDI) collection provides important functionality within the Graphics subsystem. The functionality includes graphics device abstraction, linear digital differential analysis, font description and information, printer devices abstraction, line breaking and text rendering.">Graphics Device Interface (GDI) Collection</a> &gt; <a href="GUID-C5A0D920-EB2A-5C06-B8F3-F3EAA6BB6BB9.html" title="Example code for the Graphics Device Interface collection.">Graphics Device Interface Example Code</a> &gt; </div>
<h1 class="topictitle1">pdrstore: Creating a Printer Driver using pdr files</h1>
<div>
<div class="section" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-A041DECA-21EB-462E-A503-ED794BEB8CF1"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-A041DECA-21EB-462E-A503-ED794BEB8CF1"><!-- --></a><h2 class="sectiontitle"> Description</h2> <p>This example demonstrates how to load printer driver information
files and create a printer driver. The purpose of the PdrStore API
is to: </p>
 <ul>
<li id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-4320D425-C6D3-5119-A7DF-9C75BA4FA66A"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-4320D425-C6D3-5119-A7DF-9C75BA4FA66A"><!-- --></a><p>Provide access
to the printer driver information contained in <span class="filepath">.pdr</span> files for applications to build a printer driver list </p>
 </li>

<li id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-7F7C199C-EC78-565B-8CF2-3ED6212035A5"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-7F7C199C-EC78-565B-8CF2-3ED6212035A5"><!-- --></a><p>Load and create
an appropriate printer driver for a given printer. </p>
 </li>

</ul>
 <p>During initialisation, the example first loads the printer
driver, then creates a session with the font and bitmap server. This
is detailed in the following sections. </p>
 </div>

<div class="section" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-F2FBFB59-3029-50FD-8854-E734D3ACF5C0"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-F2FBFB59-3029-50FD-8854-E734D3ACF5C0"><!-- --></a><h2 class="sectiontitle">Download</h2> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-b4699e53-658f-4006-a903-12af723cc33f.zip" target="_blank"> PDRStore.zip</a></p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-b4699e53-658f-4006-a903-12af723cc33f.html">browse</a> to view the example code. </p>
 </div>

<div class="section" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-7C100FE7-38EB-4EE0-9D3C-C0D209FE6BAA"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-7C100FE7-38EB-4EE0-9D3C-C0D209FE6BAA"><!-- --></a><h2 class="sectiontitle"> Create
a printer driver</h2> <pre class="codeblock" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-0ED8C6D9-81DF-52A6-8F7F-70D21449C1A1"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-0ED8C6D9-81DF-52A6-8F7F-70D21449C1A1"><!-- --></a>void CPdrExample::CreatePrinterDriver()</pre>
 <p>This function provides the following funtionality: </p>
 <ul>
<li id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-DA7ECFC7-7728-5A57-82B7-E0330ACBE71A"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-DA7ECFC7-7728-5A57-82B7-E0330ACBE71A"><!-- --></a><p>Opens a printer
driver information (<span class="filepath">.pdr</span>) file using <a href="GUID-812DCC89-1897-30FE-AD96-2A35DAF437D8.html#GUID-812DCC89-1897-30FE-AD96-2A35DAF437D8__GUID-89C95254-2667-37CD-A9DC-0DEEC77A9C82"><span class="apiname">CPrinterDriver::OpenPdrL(const TDesC&amp;)</span></a>  </p>
 </li>

<li id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-CF237DFC-249B-5B44-8F5F-3011A75422E3"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-CF237DFC-249B-5B44-8F5F-3011A75422E3"><!-- --></a><p>Gets the total
number of driver models available using <a href="GUID-812DCC89-1897-30FE-AD96-2A35DAF437D8.html#GUID-812DCC89-1897-30FE-AD96-2A35DAF437D8__GUID-99C5E5F5-DF2C-3682-AE88-47E06A0D1AC0"><span class="apiname">CPrinterDriver::NumModels()
const</span></a>  </p>
 </li>

<li id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-8363CBE3-D404-5805-A6FF-F14B5E65D0ED"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-8363CBE3-D404-5805-A6FF-F14B5E65D0ED"><!-- --></a><p>Creates a printer
device using <a href="GUID-812DCC89-1897-30FE-AD96-2A35DAF437D8.html#GUID-812DCC89-1897-30FE-AD96-2A35DAF437D8__GUID-225235E0-2F06-3C7F-BB2E-83A932E410B6"><span class="apiname">CPrinterDriver::CreatePrinterDeviceL(TInt)</span></a>. </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-DE05838E-A239-4535-849C-0F4DA4289DB0"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-DE05838E-A239-4535-849C-0F4DA4289DB0"><!-- --></a><h2 class="sectiontitle">Display
the supported typefaces</h2> <pre class="codeblock" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-95133682-4612-50F6-94F3-7FA6F5EFA54C"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-95133682-4612-50F6-94F3-7FA6F5EFA54C"><!-- --></a>void CPdrExample::DisplayTypefaces()</pre>
 <p>Gets the list of supported typefaces using <a href="GUID-02E9DA67-8CC0-3785-B917-A14C8AA7E714.html#GUID-02E9DA67-8CC0-3785-B917-A14C8AA7E714__GUID-CA59407C-8F11-36F0-A31C-7E7F38F1B624"><span class="apiname">CPrinterDevice::TypefaceSupport(TTypefaceSupport
&amp;,TInt) const</span></a> and displays them. </p>
 </div>

<div class="section" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-4C6EDF7D-49BE-4309-9B83-654F2EA33C08"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-4C6EDF7D-49BE-4309-9B83-654F2EA33C08"><!-- --></a><h2 class="sectiontitle">Create
a printer control</h2> <pre class="codeblock" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-FF996CFF-8CA3-581F-824C-B76EF8EA5006"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-FF996CFF-8CA3-581F-824C-B76EF8EA5006"><!-- --></a>void CPdrExample::CreatePrinterControl()</pre>
 <p>Creates a printer control using <a href="GUID-02E9DA67-8CC0-3785-B917-A14C8AA7E714.html#GUID-02E9DA67-8CC0-3785-B917-A14C8AA7E714__GUID-CEB04B4E-78C8-33C1-B894-1C89C65BF8C4"><span class="apiname">CPrinterDevice::CreateControlL()</span></a>. </p>
 </div>

<div class="section" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-6165F5D5-FBF6-4910-B241-F9D61A4FB5C3"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-6165F5D5-FBF6-4910-B241-F9D61A4FB5C3"><!-- --></a><h2 class="sectiontitle">Preparing
for printing</h2> <pre class="codeblock" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-2BE7956F-C976-583B-8E9A-01990D7B44E1"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-2BE7956F-C976-583B-8E9A-01990D7B44E1"><!-- --></a>void CPdrExample::PrintPages()</pre>
 <p>This function prepares the printer driver for printing the pages.
It involves the following: </p>
 <ul>
<li id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-73362C6E-DEC0-5842-A76E-99247F34E567"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-73362C6E-DEC0-5842-A76E-99247F34E567"><!-- --></a><p>Gets the number
of bands per page using <a href="GUID-2E0F522C-2A42-3E2E-ADE8-43398BB86906.html#GUID-2E0F522C-2A42-3E2E-ADE8-43398BB86906__GUID-6DD8081E-C801-3B80-83FB-E613A527A274"><span class="apiname">CPrinterControl::BandsPerPage()</span></a>  </p>
 </li>

<li id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-5B0F8F3C-FE43-5B97-AE37-97454C71D7BF"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-5B0F8F3C-FE43-5B97-AE37-97454C71D7BF"><!-- --></a><p>Gets each band
to be printed using <a href="GUID-02E9DA67-8CC0-3785-B917-A14C8AA7E714.html#GUID-02E9DA67-8CC0-3785-B917-A14C8AA7E714__GUID-0CE0ABD3-841A-3121-9EDE-CE031567A195"><span class="apiname">CPrinterDevice::QueueGetBand(TRequestStatus&amp;
aStatus, TBandAttributes&amp; aBand)</span></a>  </p>
 </li>

<li id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-EF600D86-1EB8-52EE-B3D4-5A15BBDAEB79"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-EF600D86-1EB8-52EE-B3D4-5A15BBDAEB79"><!-- --></a><p>Creates a graphic
context using <a href="GUID-02E9DA67-8CC0-3785-B917-A14C8AA7E714.html#GUID-02E9DA67-8CC0-3785-B917-A14C8AA7E714__GUID-5A8B4073-BA25-34FC-8186-88D6B000028A"><span class="apiname">CPrinterDevice::CreateContextL()</span></a> to
draw </p>
 </li>

<li id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-D0E0ECC7-BB6F-5EF6-80BE-EFAEA4216B8D"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-D0E0ECC7-BB6F-5EF6-80BE-EFAEA4216B8D"><!-- --></a><p>Terminates the
print process using <a href="GUID-2E0F522C-2A42-3E2E-ADE8-43398BB86906.html#GUID-2E0F522C-2A42-3E2E-ADE8-43398BB86906__GUID-6714C5BC-8458-339B-8BED-DA7BE95106E7"><span class="apiname">CPrinterControl::QueueEndPrint(TRequestStatus
&amp;)</span></a> when no more bands are available. </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-E2DBE267-21AE-4D47-B520-AB78F01C0BC5"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-E2DBE267-21AE-4D47-B520-AB78F01C0BC5"><!-- --></a><h2 class="sectiontitle">Class
Summary</h2><p><a href="GUID-02E9DA67-8CC0-3785-B917-A14C8AA7E714.html"><span class="apiname">CPrinterDevice</span></a></p>
<p><a href="GUID-2E0F522C-2A42-3E2E-ADE8-43398BB86906.html"><span class="apiname">CPrinterControl</span></a></p>
<p><a href="GUID-812DCC89-1897-30FE-AD96-2A35DAF437D8.html"><span class="apiname">CPrinterDriver</span></a></p>
<p><a href="GUID-DAD09DCF-3123-38B4-99E9-91FB24B92138.html"><span class="apiname">CGraphicsContext</span></a></p>
</div>

<div class="section" id="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-F887FECF-4B72-406D-B185-6BDEC8DFE622"><a name="GUID-A1F0D18B-5A89-58FC-9361-7B0A9786C826__GUID-F887FECF-4B72-406D-B185-6BDEC8DFE622"><!-- --></a><h2 class="sectiontitle">Usage</h2> <p>This is a console application, so does not have a GUI. It builds
an executable called <span class="filepath">pdrstoreexample.exe</span> in the
standard location (<span class="filepath">\epoc32\release\winscw\</span> <em>&lt;build_variant&gt;</em> for CodeWarrior). The Symbian platform build
process describes how to build this application. After launching the
executable, depending on the emulator you are using, you may need
to task away from the app launcher/shell screen to view the console. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C5A0D920-EB2A-5C06-B8F3-F3EAA6BB6BB9.html" title="Example code for the Graphics Device Interface collection.">Graphics Device Interface Example Code</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>