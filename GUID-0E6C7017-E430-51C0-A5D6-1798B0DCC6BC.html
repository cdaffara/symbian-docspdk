<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Handshaking Configuration Options"/>
<meta name="abstract" content="This section describes the configuration that can be set to define the handshaking for a port."/>
<meta name="description" content="This section describes the configuration that can be set to define the handshaking for a port."/>
<meta name="DC.Relation" scheme="URI" content="GUID-152B5CE8-B689-5E99-885F-79FB0654B7D6.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-9B83CDD4-FC94-51A0-AC67-CD04BCAFEF08.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-152B5CE8-B689-5E99-885F-79FB0654B7D6.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Handshaking Configuration Options</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2682451 id2518666 id2518853 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html" title="The Communications Framework is the base for all communications, network and telephony services that Symbian platform provides. The Communications Framework manages the communications threads and the flow of information between those threads. The Framework also manages and stores the communications related settings.">Communications Framework Guide</a> &gt; <a href="GUID-9B83CDD4-FC94-51A0-AC67-CD04BCAFEF08.html">Serial Communications Server</a> &gt; <a href="GUID-152B5CE8-B689-5E99-885F-79FB0654B7D6.html" title="This section provides reference information for the Serial Communications Server.">Reference</a> &gt; </div>
<h1 class="topictitle1">Handshaking Configuration Options</h1>
<div><p>This section describes the configuration that can be set to define the handshaking for a port. </p>
<div class="section"><h2 class="sectiontitle">Introduction</h2> <p>In general, the speed at which data is transmitted is deliberately set to be faster than the speed with which it can be processed by the receiver. This results in a highly efficient utilisation of the available bandwidth and data transfers complete faster. When transmitting data over a line leased by time, such as a phone line, the higher utilisation results in a saving of money. </p>
 <p>Consequently, input buffers linked to reliable flow control mechanisms are essential for effective communications, as the receiver needs a mechanism for throttling back the transmitter and telling it to stop sending data. The <samp class="codeph">TCommConfig</samp> package enables flow control to be configured at the driver level, and so applications do not need their own flow control. This reference page describes the handshaking options available to control the flow of data. </p>
 <p>Since multiple handshaking mechanisms may be active simultaneously, the handshaking is defined by a bit field called <a href="GUID-36D2446E-E288-332B-9356-3DA0C3D8C989.html"><span class="apiname">TCommConfig.iHandshake</span></a>. See the tutorials for examples which use this bitmask, for example <a href="GUID-294EF1C3-E7EC-5B93-B4F4-ECA50DD6993F.html" title="This tutorial follows on from the tutorial on How to transfer data.">How to Terminate Write Requests Early: Tutorial</a>. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">iHandshake bit field</h2> <p>The <a href="GUID-FA42F645-D2A8-384B-9FE6-6495EACFA479.html#GUID-FA42F645-D2A8-384B-9FE6-6495EACFA479__GUID-268250D5-7943-39ED-ABF4-77E6539DFEF2"><span class="apiname">TCommConfigV01::iHandshake</span></a> field is a bit field that can be used to set the handshaking for a port. The format of the bit field is: </p>
 
<div class="tablenoborder"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-287F6E31-8C77-5CED-BC87-46DF1C81485C"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-287F6E31-8C77-5CED-BC87-46DF1C81485C" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d166528e61"> Bit </th>
 </tr>
 <tr><th class="cellrowborder" valign="top" id="d166528e66"> Description </th>
 </tr>
 <tr><th class="cellrowborder" valign="top" id="d166528e71"> Terminal</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d166528e61 d166528e66 d166528e71 "><p> <samp class="codeph">0x08</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x04</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x02</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x01</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d166528e61 d166528e66 d166528e71 "><p> <samp class="codeph">KConfigFailCTS</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigObeyCTS</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigSendXoff</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigObeyXoff</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d166528e61 d166528e66 d166528e71 "><p>DTE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DTE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DTE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DTE </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p> </p>
 
<div class="tablenoborder"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-78EB8319-9C95-5275-B5CE-1CD2F2255979"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-78EB8319-9C95-5275-B5CE-1CD2F2255979" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d166528e181"> Bit </th>
 </tr>
 <tr><th class="cellrowborder" valign="top" id="d166528e186"> Description </th>
 </tr>
 <tr><th class="cellrowborder" valign="top" id="d166528e191"> Terminal</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d166528e181 d166528e186 d166528e191 "><p> <samp class="codeph">0x80</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x40</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x20</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x10</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d166528e181 d166528e186 d166528e191 "><p> <samp class="codeph">KConfigFailDCD</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigObeyDCD</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigFailDSR</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigObeyDSR</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d166528e181 d166528e186 d166528e191 "><p>DTE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DTE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DTE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DTE </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p> </p>
 
<div class="tablenoborder"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-9EC32691-4B38-5AE5-87E3-FE1B039DED7B"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-9EC32691-4B38-5AE5-87E3-FE1B039DED7B" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d166528e302"> Bit </th>
 </tr>
 <tr><th class="cellrowborder" valign="top" id="d166528e307"> Description </th>
 </tr>
 <tr><th class="cellrowborder" valign="top" id="d166528e312"> Terminal</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d166528e302 d166528e307 d166528e312 "><p> <samp class="codeph">0x800</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x400</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x200</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0100</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d166528e302 d166528e307 d166528e312 "><p> <samp class="codeph">KConfigFailDTR</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigObeyDTR</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigFreeDTR</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigFreeRTS</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d166528e302 d166528e307 d166528e312 "><p>DCE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DCE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DTE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DTE </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p> </p>
 
<div class="tablenoborder"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-A575C70A-09AA-5B65-8BFC-F61F41A8DB76"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-A575C70A-09AA-5B65-8BFC-F61F41A8DB76" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d166528e422"> Bit </th>
 </tr>
 <tr><th class="cellrowborder" valign="top" id="d166528e427"> Description </th>
 </tr>
 <tr><th class="cellrowborder" valign="top" id="d166528e432"> Terminal</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d166528e422 d166528e427 d166528e432 "><p> <samp class="codeph">0x8000</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x4000</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x2000</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">01000</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d166528e422 d166528e427 d166528e432 "><p> <samp class="codeph">KConfigFreeCTS</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigFreeDSR</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigFailRTS</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigObeyRTS</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d166528e422 d166528e427 d166528e432 "><p>DCE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DCE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DCE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DCE </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p> </p>
 
<div class="tablenoborder"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-6C7A78E2-E612-592F-B222-91A5F6E501AE"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-6C7A78E2-E612-592F-B222-91A5F6E501AE" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d166528e542"> Bit </th>
 </tr>
 <tr><th class="cellrowborder" valign="top" id="d166528e547"> Description </th>
 </tr>
 <tr><th class="cellrowborder" valign="top" id="d166528e552"> Terminal </th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d166528e542 d166528e547 d166528e552 "><p> <samp class="codeph">0x80000000</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>Bits 0x40000 to </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x20000</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">0x10000</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d166528e542 d166528e547 d166528e552 "><p> <samp class="codeph">KConfigWriteBufferedComplete</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>0x40000000 unused </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigFreeRI</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <samp class="codeph">KConfigFreeDCD</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d166528e542 d166528e547 d166528e552 ">&#xA0;</td>
<td class="cellrowborder" valign="top">&#xA0;</td>
<td class="cellrowborder" valign="top"><p>DCE </p>
 </td>
 <td class="cellrowborder" valign="top"><p>DCE </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </div>
 <div class="section"><h2 class="sectiontitle">Flow control when sending</h2> <p>The first four of the handshaking bitmasks control what type of flow control is obeyed when sending data. Any combination of hardware flow control and software flow control can be set up. </p>
 <p>Hardware flow control causes transmission to stop when any specified permutation of the modem input line <span class="keyword">CTS</span>, <span class="keyword">DSR</span> or <span class="keyword">DCD</span> are low and the flow is only resumed when the relevant lines go high. </p>
 <p>Software flow control causes transmission to stop when a configurable <span class="keyword">XOFF</span> character is received and transmission is only resumed when the corresponding <span class="keyword">XON</span> character is received. </p>
 <p>The most common form of flow control for transmitted data is CTS handshaking. CTS handshaking causes flow to stop when the CTS input is low. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Flow control when receiving </h2> <p>The next three of the handshaking bitmasks controls the type of flow control when receiving data, in the expectation that the transmitter will stop sending when instructed to. Any combination of hardware flow control or software flow control can be set. </p>
 <p>Hardware flow control is where we drop the signal levels on one or both of the modem outputs <span class="keyword">DTR</span> and <span class="keyword">RTS</span> to stop the incoming data and then raise the signals again to restart. </p>
 <p>Software flow control is where we transmit our XOFF character to stop the incoming data and then transmit XON when we are ready to resume. Software flow control is enforced by setting the <samp class="codeph">KConfigSendXoff</samp> bit of <samp class="codeph">iHandshake</samp>, while hardware flow control is enabled by setting either one or both of the <samp class="codeph">KConfigFreeRTS</samp> and <samp class="codeph">KConfigFreeDTR</samp> bits, which indicate whether or not the RTS and DTR outputs are under driver control or follow the user-defined settings. See <a href="GUID-B6392845-B724-35FF-80A5-3911B64535B9.html"><span class="apiname">SetSignals()</span></a> for more information. </p>
 <p>The most common form of flow control when receiving data is RTS handshaking. In RTS handshaking we lower our RTS output when we are not able to receive anything and then raise it when we are once again in a position to handle incoming data. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Flow control thresholds</h2> <p>Since the rate at which data is being placed in the input buffer can exceed the rate at which it is being taken out, it is probable that the buffer will gradually fill up. When a particular point (the <span class="keyword">high water
          mark</span>), is reached and a suitable handshaking mode is enabled, a flow control event is triggered. This could be the transmission of an XOFF character or the lowering of either the RTS or DTR output signals, or any combination of these events. </p>
 <p>Whatever action is taken will be taken as a signal by the transmitter, which will stop sending. The inward flow of data will then stop, and the buffer will begin to empty. When a particular point (the <span class="keyword">low water
          mark</span>) is reached, a matching flow control event is triggered, which could be the transmission of an XON character or the raising of the RTS or DTR signals, or any combination of these events. </p>
 <ul><li id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-3311BE0E-1D5A-5A51-A5C7-86EE0EA5BFAC"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-3311BE0E-1D5A-5A51-A5C7-86EE0EA5BFAC"><!-- --></a><p>If hardware flow control is the only kind enabled for reception, the high water mark is normally set at the 75% full level, at which point one or both of the output signal will be lowered. </p>
 </li>
 <li id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-934E819E-CD25-55E2-9969-0DBED0F44EBE"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-934E819E-CD25-55E2-9969-0DBED0F44EBE"><!-- --></a><p>If XON/XOFF software flow control is enabled for reception (even if hardware handshaking is also enabled), the high water mark is set to be 5 bytes below the 50% full level, at which point an XOFF character is transmitted for every other character received. This more stringent level is deemed necessary because it normally takes longer for a transmitter to respond when software handshaking is being used </p>
 </li>
 <li id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-F08D93E3-9714-5E80-9454-CDB1442C9CC5"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-F08D93E3-9714-5E80-9454-CDB1442C9CC5"><!-- --></a><p>It is possible to force the serial drivers to use this more stringent high water mark when using hardware flow control. </p>
 </li>
 <li id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-4F977649-CC0B-5050-B399-4996D826C4F7"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-4F977649-CC0B-5050-B399-4996D826C4F7"><!-- --></a><p>In all cases, the low water mark is set at the 25% full level. Depending on the type of flow control enabled, any combination of sending an XON character or raising one or both of the output signals will occur at this point. </p>
 </li>
 </ul>
 </div>
 <div class="section"><h2 class="sectiontitle">Handshaking latency and buffer sizes</h2> <p>It takes a finite amount of time to respond to flow control and other handshaking events. The term <span class="keyword">latency</span> is generally used in this context to refer to the time taken between the occurrence of a particular event and the response to it. The maximum handshaking latency in ultimately depends on the frequency of the system clock. </p>
 <p>However, the high and low watermarks for inward flow control need to allow for the response times of the systems with which our serial port is communicating rather than the latency associated with our own responses. Suppose it takes one second for a system to which we are connected to respond to a request to stop sending data, and suppose our serial port is running at 38400 bps. This means that we should have at least 3840 bytes free in our buffer when the high water mark is reached, otherwise we may lose incoming data if our buffer overflows. </p>
 <p>The input buffer levels at which these flow control events occur are not something that can be altered. Instead, the recommended way of adjusting the precise times at which flow control events will occur is to alter the size of the receive buffer using the member function <a href="GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF.html#GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF__GUID-A82AF127-0CCC-364B-9331-E0E40874FA4B"><span class="apiname">RComm::SetReceiveBufferLength()</span></a>. In the situation just described, we would need to set a receive buffer size of around 16K to guarantee no data loss. </p>
 <p>(In practise, it may well be possible to get away with a smaller buffer than this even when the sending system takes one second to respond, as we will almost certainly be removing data from the buffer during the latency period. However, the precise calculations would clearly depend on the processing requirements of the receiving application.) </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Internal FIFO Buffer Control</h2> <p>As well as the buffers in the serial port drivers, the components used to implement many RS232 ports include a small internal <span class="keyword">FIFO</span> buffer which can be switched on or off. The presence of such an internal buffer is signified by the <samp class="codeph">iFifo</samp> byte in <samp class="codeph">TCommCaps</samp> being set, and the FIFO can be enabled or disabled by setting or clearing the <samp class="codeph">iFifo</samp> byte in <samp class="codeph">TCommConfig</samp> as appropriate. The default state is for any FIFOs to be automatically enabled, as even a 16 byte FIFO (the usual size) significantly reduces the load on the processor during serial i/o operations, and applications should not disable this without good reason. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Software Flow Control and Binary Data</h2> <p>A problem with Software Flow Control is that the characters that are inserted in the data to control the flow may also appear in the original data. Hardware flow control is the recommended handshaking method whenever there is a requirement for the transfer of binary data in either direction. </p>
 <p>Different policies are used for solving Software Flow Control when transmitting binary data. The policy depends on the direction in which the handshaking operates: </p>
 <ul><li id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-C3F42B0B-E2F9-597B-BA72-A9777850C257"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-C3F42B0B-E2F9-597B-BA72-A9777850C257"><!-- --></a><p>Enabling software flow control when sending does not affect the transmitted data but it can affect the received data. When either of the flow control characters are received, they are acted on by the serial drivers as required and are not passed through to the client application. This policy can be used to send data to a device such as a printer which implements XON/XOFF handshaking. This policy is not recommended to receive binary data from a modem. Set the <samp class="codeph">KConfigObeyXoff</samp> bit in <samp class="codeph">iHandshake</samp> to enable software flow control when sending. </p>
 </li>
 <li id="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-86E3CB07-E515-5480-9A4A-6F5AEB1F82ED"><a name="GUID-0E6C7017-E430-51C0-A5D6-1798B0DCC6BC__GUID-86E3CB07-E515-5480-9A4A-6F5AEB1F82ED"><!-- --></a><p>Enabling software flow control only when receiving has no effect on data transferred in either direction. This does not prevent an application either receiving or transmitting XON or XOFF. If an application uses XON and XOFF characters, the meaning of these characters embedded in binary data being sent is not going to be clear. Set the <samp class="codeph">KConfigSendXoff</samp> bit in <samp class="codeph">iHandshake</samp> to enable software flow control only when receiving. </p>
 </li>
 </ul>
 </div>
 <div class="section"><h2 class="sectiontitle">Changing software flow control characters</h2> <p>The default software flow control characters are ASCII DC1 (decimal 17) for XON and DC3 (decimal 19) for XOFF. </p>
 <p>Change the <samp class="codeph">iXonChar</samp> and <samp class="codeph">iXoffChar</samp> fields of <samp class="codeph">TCommConfig</samp> to change the default software flow control characters. Changing the defaults is not recommended. Setting the defaults to zero is not recommended since this can cause unpredictable behaviour. Disabling flow control must be done through the <samp class="codeph">iHandshake</samp> field. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Cancellation of reads and writes</h2> <p>The next three of the handshaking bitmasks are named <samp class="codeph">KConfigFailxxx</samp>, and can be used to set up the conditions under which pending data transfers are automatically cancelled. For example, this can manage attempts to send data over a cable that has been pulled out, or disconnection of a modem during a file download. </p>
 <p>An <samp class="codeph">RComm</samp> send or receive request can be set to terminate early with a <a href="GUID-4F00C029-B015-3BD6-A492-BAA6F4F6ED1B.html"><span class="apiname">KErrCommsLineFail</span></a> error if any specified combination of the control lines fail. To enable this, set one or more of the handshaking bits <a href="GUID-89B7755D-693B-3AA4-9FB9-456AC2DB64C3.html"><span class="apiname">KConfigFailCTS</span></a>, <a href="GUID-DA744B94-D03B-3D99-B4E2-769A6AB6AB45.html"><span class="apiname">KConfigFailDSR</span></a>, and <a href="GUID-E9728D97-73CF-3F9A-8C92-94F3D1AC49B8.html"><span class="apiname">KConfigFailDCD</span></a>. If multiple failure conditions are enabled, an application can use <a href="GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF.html#GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF__GUID-B2A751BB-6784-31B8-8808-F5BFC087427B"><span class="apiname">RComm::Signals()</span></a> to discover the reason for the comms line failure. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Handshaking capability checks</h2> <p>As with the speed and data format, it is possible to use <a href="GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF.html#GUID-3B4E8ED5-72F7-3E51-B188-3C1045526DDF__GUID-4A6ECC68-EBC7-3B6C-94AE-9272669F6FF2"><span class="apiname">RComm::Caps()</span></a> to find out whether a specified handshaking mode is supported or not. Set the matching bitmasks with the <a href="GUID-8FD727E7-68D6-3E80-913D-6ACBEB092559.html"><span class="apiname">TCommCaps.iHandshake</span></a> field to discover specific capabilities of the port. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-152B5CE8-B689-5E99-885F-79FB0654B7D6.html" title="This section provides reference information for the Serial Communications Server.">Reference</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>