<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="CClientMtmRegistry"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-A0682D04-9084-3DC3-AA18-5B81A78A1DA8"/>

<title>CClientMtmRegistry</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-A0682D04-9084-3DC3-AA18-5B81A78A1DA8"><a name="GUID-A0682D04-9084-3DC3-AA18-5B81A78A1DA8"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0;
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">CClientMtmRegistry Class Reference</h1>
	<table class="signature"><tr><td>class CClientMtmRegistry : public CObserverRegistry</td></tr></table><div class="section"><div>
			<p>Accesses the Client-side MTM registry.</p>

			<p>This registry holds details of the all the Client-side MTMs currently available on the system. Message client applications use this class to get a CBaseMtm-derived object by which to access Client-side MTM functionality.</p>

			<p>Note that the base class <a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html#GUID-5A099801-F688-3376-96B0-31CA43E77025">CMtmDllRegistry</a> provides functions for discovering what MTMs are present in the registry.</p>

		</div></div>
<div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">CClientMtmRegistry<ul class="derivation"><li class="derivation-depth-1 "><a href="GUID-70152315-06CA-30C9-B84B-0CC9D19A6790.html">CObserverRegistry</a><ul class="derivation"><li class="derivation-depth-2 "><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry</a><ul class="derivation"><li class="derivation-depth-3 "><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase</a></li></ul></li></ul></li></ul></li></ul></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-BA393FEE-1F4D-334B-AA69-85C46F2BE509">~CClientMtmRegistry</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a href="GUID-A0682D04-9084-3DC3-AA18-5B81A78A1DA8.html">CClientMtmRegistry</a> *</td><td><a href="#GUID-1E6EE7AD-15AB-3ED9-B83E-36B85AC23555">NewL</a>(<a href="GUID-2DA04D96-F0AD-3FDC-9E36-1C27D889AF4B.html">CMsvSession</a> &amp;, <a href="GUID-EEC5813B-4C9F-323B-BCD6-1BB1A08D0B8C.html">TTimeIntervalMicroSeconds32</a>)</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-177AF50B-14EF-3C45-AE22-1FEE5678261D.html">CBaseMtm</a> *</td><td><a href="#GUID-3010EA8F-DCC4-34AD-ADD8-83B789B10638">NewMtmL</a>(<a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a>)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Protected Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-AF37EDAF-7B38-314D-B6DF-B3E7433A3ADC">CClientMtmRegistry</a>(<a href="GUID-2DA04D96-F0AD-3FDC-9E36-1C27D889AF4B.html">CMsvSession</a> &amp;, <a href="GUID-EEC5813B-4C9F-323B-BCD6-1BB1A08D0B8C.html">TTimeIntervalMicroSeconds32</a>)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-D0102FA3-2F18-30B8-A857-555F02ED56ED">ConstructL</a>()</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">
					<a href="GUID-177AF50B-14EF-3C45-AE22-1FEE5678261D.html">CBaseMtm</a> *</td><td><a href="#GUID-4287EF3B-608B-329F-B0CC-CD571238C367">DoNewMtmL</a>(const <a href="GUID-25327159-83D6-3507-B187-09EA4BB3727F.html">RLibrary</a> &amp;, <a href="GUID-0D5D7FAC-4F14-3046-92FB-873B8350FF4C.html">CRegisteredMtmDll</a> &amp;)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::CBase()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Delete(CBase *)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Extension_(TUint,TAny *&amp;,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::~CBase()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::AddRegisteredMtmDll(TUid,TUid,const CMtmDllInfo &amp;,MRegisteredMtmDllObserver &amp;)</a></td></tr><tr><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::CMtmDllRegistry(RFs &amp;,TUid,TTimeIntervalMicroSeconds32)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::IsInUse()const</a></td></tr><tr><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::IsInUse(TUid)const</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::IsPresent(TUid)const</a></td></tr><tr><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::MtmTypeUid(TInt)const</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::MtmTypeUidToIndex(TUid)const</a></td></tr><tr><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::NumRegisteredMtmDlls()const</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::RegisteredMtmDllInfo(TUid)const</a></td></tr><tr><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::RemoveAllRegisteredMtmDlls()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::RemoveRegisteredMtmDll(TUid)</a></td></tr><tr><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::TechnologyTypeUid(TUid)const</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::~CMtmDllRegistry()</a></td></tr><tr><td> </td><td><a href="GUID-70152315-06CA-30C9-B84B-0CC9D19A6790.html">CObserverRegistry::CObserverRegistry(CMsvSession &amp;,TUid,TTimeIntervalMicroSeconds32)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-70152315-06CA-30C9-B84B-0CC9D19A6790.html">CObserverRegistry::HandleSessionEventL(TMsvSessionEvent,TAny *,TAny *,TAny *)</a></td></tr><tr><td> </td><td><a href="GUID-70152315-06CA-30C9-B84B-0CC9D19A6790.html">CObserverRegistry::~CObserverRegistry()</a></td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Inherited Attributes</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::iFs</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::iMtmDllTypeUid</a></td></tr><tr><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::iRegisteredMtmDllArray</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-5A099801-F688-3376-96B0-31CA43E77025.html">CMtmDllRegistry::iTimeoutMicroSeconds32</a></td></tr><tr><td> </td><td><a href="GUID-70152315-06CA-30C9-B84B-0CC9D19A6790.html">CObserverRegistry::iIsAdded</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-70152315-06CA-30C9-B84B-0CC9D19A6790.html">CObserverRegistry::iMsvSession</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Constructor &amp; Destructor Documentation</h1><div class="nested1" id="GUID-AF37EDAF-7B38-314D-B6DF-B3E7433A3ADC"><a name="GUID-AF37EDAF-7B38-314D-B6DF-B3E7433A3ADC"><!-- --></a>
		<h2 class="topictitle2">CClientMtmRegistry(CMsvSession &amp;, TTimeIntervalMicroSeconds32)</h2>
		<table class="signature"><tr><td>CClientMtmRegistry</td><td>(</td><td><a href="GUID-2DA04D96-F0AD-3FDC-9E36-1C27D889AF4B.html">CMsvSession</a> &amp;</td><td>aMsvSession,</td></tr><tr><td colspan="2"> </td><td><a href="GUID-EEC5813B-4C9F-323B-BCD6-1BB1A08D0B8C.html">TTimeIntervalMicroSeconds32</a></td><td>aTimeoutMicroSeconds32</td></tr><tr><td colspan="1"> </td><td>)</td><td colspan="2">[protected]</td></tr></table><div class="section"></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-2DA04D96-F0AD-3FDC-9E36-1C27D889AF4B.html">CMsvSession</a> &amp; aMsvSession</td><td> </td></tr><tr class="bg"><td class="parameter"><a href="GUID-EEC5813B-4C9F-323B-BCD6-1BB1A08D0B8C.html">TTimeIntervalMicroSeconds32</a> aTimeoutMicroSeconds32</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-BA393FEE-1F4D-334B-AA69-85C46F2BE509"><a name="GUID-BA393FEE-1F4D-334B-AA69-85C46F2BE509"><!-- --></a>
		<h2 class="topictitle2">~CClientMtmRegistry()</h2>
		<table class="signature"><tr><td>IMPORT_C</td><td>~CClientMtmRegistry</td><td>(</td><td>)</td><td/></tr></table><div class="section"><div>
				<p>Destructor. </p>

			</div></div>

	</div>
<h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-D0102FA3-2F18-30B8-A857-555F02ED56ED"><a name="GUID-D0102FA3-2F18-30B8-A857-555F02ED56ED"><!-- --></a>
		<h2 class="topictitle2">ConstructL()</h2>
		<table class="signature"><tr><td>void</td><td>ConstructL</td><td>(</td><td>)</td><td>[protected]</td></tr></table><div class="section"><div>
				<p>Second-phase constructor. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-4287EF3B-608B-329F-B0CC-CD571238C367"><a name="GUID-4287EF3B-608B-329F-B0CC-CD571238C367"><!-- --></a>
		<h2 class="topictitle2">DoNewMtmL(const RLibrary &amp;, CRegisteredMtmDll &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-177AF50B-14EF-3C45-AE22-1FEE5678261D.html">CBaseMtm</a> *</td><td>DoNewMtmL</td><td>(</td><td>const <a href="GUID-25327159-83D6-3507-B187-09EA4BB3727F.html">RLibrary</a> &amp;</td><td>aLib,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-0D5D7FAC-4F14-3046-92FB-873B8350FF4C.html">CRegisteredMtmDll</a> &amp;</td><td>aReg</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">const [private]</td></tr></table><div class="section"></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-25327159-83D6-3507-B187-09EA4BB3727F.html">RLibrary</a> &amp; aLib</td><td> </td></tr><tr class="bg"><td class="parameter"><a href="GUID-0D5D7FAC-4F14-3046-92FB-873B8350FF4C.html">CRegisteredMtmDll</a> &amp; aReg</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-1E6EE7AD-15AB-3ED9-B83E-36B85AC23555"><a name="GUID-1E6EE7AD-15AB-3ED9-B83E-36B85AC23555"><!-- --></a>
		<h2 class="topictitle2">NewL(CMsvSession &amp;, TTimeIntervalMicroSeconds32)</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-A0682D04-9084-3DC3-AA18-5B81A78A1DA8.html">CClientMtmRegistry</a> *</td><td>NewL</td><td>(</td><td><a href="GUID-2DA04D96-F0AD-3FDC-9E36-1C27D889AF4B.html">CMsvSession</a> &amp;</td><td>aMsvSession,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-EEC5813B-4C9F-323B-BCD6-1BB1A08D0B8C.html">TTimeIntervalMicroSeconds32</a></td><td>aTimeoutMicroSeconds32 = 
							<a href="GUID-EEC5813B-4C9F-323B-BCD6-1BB1A08D0B8C.html">TTimeIntervalMicroSeconds32</a>(30000000)</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[static]</td></tr></table><div class="section"><div>
				<p>Gets a <a href="GUID-A0682D04-9084-3DC3-AA18-5B81A78A1DA8.html#GUID-A0682D04-9084-3DC3-AA18-5B81A78A1DA8">CClientMtmRegistry</a> object. The client should delete this object when it is no longer required.</p>

				<p>The registry keeps a reference count of the number of instances of each MTM in use. When that reference count falls to zero, the DLL that provides the MTM is unloaded. However, this is not done immediately, but only after the time specified in aTimeoutMicroSeconds32. This increases efficiency in cases where the DLL is required again shortly.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNoMemory A memory allocation failed </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-2DA04D96-F0AD-3FDC-9E36-1C27D889AF4B.html">CMsvSession</a> &amp; aMsvSession</td><td>The client's Message Server session  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-EEC5813B-4C9F-323B-BCD6-1BB1A08D0B8C.html">TTimeIntervalMicroSeconds32</a> aTimeoutMicroSeconds32 = 
							<a href="GUID-EEC5813B-4C9F-323B-BCD6-1BB1A08D0B8C.html">TTimeIntervalMicroSeconds32</a>(30000000)</td><td>Time to wait before unloading MTM DLLs  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-3010EA8F-DCC4-34AD-ADD8-83B789B10638"><a name="GUID-3010EA8F-DCC4-34AD-ADD8-83B789B10638"><!-- --></a>
		<h2 class="topictitle2">NewMtmL(TUid)</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-177AF50B-14EF-3C45-AE22-1FEE5678261D.html">CBaseMtm</a> *</td><td>NewMtmL</td><td>(</td><td><a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a></td><td>aMtmTypeUid</td><td>)</td><td/></tr></table><div class="section"><div>
				<p>Creates a Client-side MTM object for the specified MTM UID.</p>

				<p>The client should delete the returned object when it is no longer required.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNotFound aMtmTypeUid does not specify a registered MTM </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNoMemory A memory allocation failed </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrBadLibraryEntryPoint Malformed MTM: a library entry point was not of the required type </dd>

						
					</dl>

					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>DLL loading error codes The DLL that provides the MTM cannot be loaded </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a> aMtmTypeUid</td><td>UID of MTM to obtain  </td></tr></table></div>

	</div>

	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>