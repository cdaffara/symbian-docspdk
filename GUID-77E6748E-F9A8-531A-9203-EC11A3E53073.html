<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Criteria for Backup and Restore Types and Data"/>
<meta name="DC.Relation" scheme="URI" content="GUID-796916B2-8B23-5AD8-9DB8-8B0DA7868A62.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A0D4B6EC-8FA7-5FD9-AE5A-E811D876D585.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-78045215-99B0-5D66-8E5F-5396E2D23259.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0FE60A65-6CB6-50AB-B85F-2B60FE96ECFE.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-796916B2-8B23-5AD8-9DB8-8B0DA7868A62.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-796916B2-8B23-5AD8-9DB8-8B0DA7868A62.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Criteria for Backup and Restore Types and Data</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2534806 id2534820 id2534828 id2534849 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-A0D4B6EC-8FA7-5FD9-AE5A-E811D876D585.html">Remote Connectivity Guide</a> &gt; <a href="GUID-78045215-99B0-5D66-8E5F-5396E2D23259.html">Backup and Restore</a> &gt; <a href="GUID-0FE60A65-6CB6-50AB-B85F-2B60FE96ECFE.html">Backup Engine</a> &gt; <a href="GUID-796916B2-8B23-5AD8-9DB8-8B0DA7868A62.html">Backup-aware Software (Data Owner)</a> &gt; </div>
<h1 class="topictitle1">Criteria for Backup and Restore Types and Data</h1>
<div><p>This section describes the factors which an application developer must consider to make an application backup-aware. </p>
 <ul><li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-66D7324B-96D8-5F65-B879-8FB995A073D1"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-66D7324B-96D8-5F65-B879-8FB995A073D1"><!-- --></a><p>Backup and restore all or any private data. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-546E85E5-9786-5B42-B7C4-1DA8A9CEB601"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-546E85E5-9786-5B42-B7C4-1DA8A9CEB601"><!-- --></a><p>Use active or passive backup on the private data. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-451978D4-5162-5825-B5DC-31F47BAE7830"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-451978D4-5162-5825-B5DC-31F47BAE7830"><!-- --></a><p>Based on the above two and whether the application is a GUI application, decide how the application responds to backup and restore events. </p>
 </li>
 </ul>
 <div class="section" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-70586F00-15B6-53B8-B135-F9A487054A78"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-70586F00-15B6-53B8-B135-F9A487054A78"><!-- --></a><h2 class="sectiontitle">Criteria for backing up private data</h2> <p>As a developer responsible for creating or maintaining a process that owns private data, you must decide whether your application takes part in the backup of private data. In general, back up as much private data as possible. The following data is usually not backed up: </p>
 <ul><li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-81BE43E0-8408-501A-AF67-21D8B67E3F3F"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-81BE43E0-8408-501A-AF67-21D8B67E3F3F"><!-- --></a><p>If the private data must not be exposed to the user, it must not be backed up. Assume that all data backed up can be read and potentially altered by the user. This might change if a device creator implements encryption which does not rely on keys provided by the user but that is a device creator-specific decision and cannot be guaranteed. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-68CD4502-AE73-560D-BED3-6B42A31A91B9"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-68CD4502-AE73-560D-BED3-6B42A31A91B9"><!-- --></a><p>If the process cannot keep the private data stable during a backup or restore, they cannot safely back it up. This is a poor reason for not backing up data but may be a practical one. It depends on the sources of external events and whether they can be delayed or placed in a temporary location. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-4413CA48-134C-5AA0-B5B1-B80B0EF9AFE3"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-4413CA48-134C-5AA0-B5B1-B80B0EF9AFE3"><!-- --></a><p>If the private data can be easily recreated by other means, it may be excluded. This may not be a good criteria, but if a process would find it difficult to back up private data (perhaps for the reasons above) and the data could easily be created (for example by receiving configuration messages), choosing not to back it up may be more acceptable. </p>
 </li>
 </ul>
 <p>In addition, consider the implications on other processes of backing up the data or not. If your data must remain consistent with that in public files, the private data must be backed up. If your data must remain consistent with that owned by another process, either both or neither should back up data. </p>
 </div>
 <div class="section" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-DD1DF9F9-FEAD-57DF-9C7A-7DA564093EC9"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-DD1DF9F9-FEAD-57DF-9C7A-7DA564093EC9"><!-- --></a><h2 class="sectiontitle">Active or passive backup</h2> <p>As described above, passive backup and restore is simpler than active backup. It also takes less system resources because processes taking part in active backup must be running during a backup or restore. However, active backup allows the data-owning process more control over the data and this can have both security and performance gains. </p>
 <p>The choice between passive and active backup involves weighing up a number of factors. The following list includes a range of advantages and disadvantages and you need to consider all of these and make a decision. </p>
 <ul><li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-BF488563-549B-5352-8AA5-D7A4E762DC85"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-BF488563-549B-5352-8AA5-D7A4E762DC85"><!-- --></a><p>The registration for passive data backup only specifies whole files or directories. It is not possible to backup only part of a file using passive backup. If you need to backup only part of a file you need to either split the file into two or use active backup. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-A2610862-C4D4-529B-B665-B54E1C317894"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-A2610862-C4D4-529B-B665-B54E1C317894"><!-- --></a><p>The backup registration file that defines the files and directories to be subject to passive backup is created at system build time (for a system process) or at installation time (for an installed application). The backup registration files cannot be modified or created at runtime. If your process creates new directories after installation, the backup registration file cannot be extended for these. If you want these backed up, you need to put them under a common directory which all gets backed up or use active backup and make a run-time decision on what to backup. This aspect may be partially or wholly addressed by installing additional backup registration files. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-560410E9-3A5C-5905-AE6F-7EE0E37DDECD"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-560410E9-3A5C-5905-AE6F-7EE0E37DDECD"><!-- --></a><p>Backed up data is compressed to speed up data transfer which can be disabled. If your private data has a specific format and you can manage to backup only a fraction of it you may be able to make the backup of your data more efficient by implementing active backup. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-82758AB6-DEF9-57A0-85F1-06645F152BD2"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-82758AB6-DEF9-57A0-85F1-06645F152BD2"><!-- --></a><p>Backups can be base backups or incremental backups. With passive backup (as with the backing up of public files) incremental backups include all relevant files which have changed or are new since the last backup took place. If a file contains record-based data (such as a database), the addition or changing of one record will cause the whole file to require backup. If you implement active backup, you could only backup the changed or new records (plus recording deleted records in some way). This could increase the performance of backup and restore for your data. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-3ACF99DB-CF34-549B-92A6-FC4FD18F233D"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-3ACF99DB-CF34-549B-92A6-FC4FD18F233D"><!-- --></a><p>Active backup requires your process to be started during a backup or restore operation. Your process will be started automatically as required by the Backup Engine if not already running. If your process normally runs at all times, this imposes no additional burden on the phone. However, if your process is not normally running, it will require additional resources during a backup or restore and you should consider if the benefits of active backup justify the additional burden. </p>
 </li>
 </ul>
 <p>A hybrid approach may be useful. The Backup Engine allows a data owner to register as both an <a href="GUID-743D2832-E73A-5184-A85D-306B2A6FFACC.html">active backup client</a> and a passive backup client. This was originally intended to allow a data owner to back up some data in each way but an alternative use is for the active backup client to prepare data for backup and then let the Backup Engine handle the actual transfer as a passive backup. The active backup client does not need to actually provide any data. </p>
 <p>In order to support this, the Backup Engine must not retrieve data for passive backup until an active backup client has signaled that the data is ready. This set-up is configurable in the backup registration file. That is, if a data owner is registered to take part in both passive and active backup, the PC host or other client is expected to request active backup data before passive backup data. </p>
 <p>When a restore operation is carried out, the data will be restored as passive data and the data owner is responsible for dealing with it when the restore operation is complete. In order to support this, the PC host or other client is expected to restore passively backed up data before actively backed up data if a data owner has registered for both active and passive backup and restore. </p>
 </div>
 <div class="section" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-47709C29-320A-5B24-B1C2-EBAEF8E4AD52"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-47709C29-320A-5B24-B1C2-EBAEF8E4AD52"><!-- --></a><h2 class="sectiontitle">Private data to be actively backed up</h2> <p>Processes that own private data that needs to be actively backed up, must register with the backup engine as an owner of private data for active backup. </p>
 <p>If an application is designed for separate installation compared to upgrade, it needs to copy a backup registration file into the private directory during installation. If an application is part of the platform, this involves creating a backup registration file as part of the build and ensuring that it is located in the relevant private directory. </p>
 <p>In addition, the process must subscribe to the backup status flag described in <a href="GUID-88A5F321-17BA-566B-B025-22DB11664E54.html" title="This section describes the subscribe and publish flag for backup and restore.">Public and Subscribe Event for Active Backup</a> in order to detect when a backup or restore takes place. Processes which own private data that needs to be actively backed up are started up if required by the Backup Engine in order to do the backup or restore. Therefore, they must check the backup flag on startup rather than making a normal startup. This may involve undesirable access to other servers and files. </p>
 <p> <strong>Behavior required of a process that takes part in active backup of private data:</strong>  </p>
 <a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-5496CA18-912C-50C5-9DC1-F8F605DF94DC"><!-- --></a><ol id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-5496CA18-912C-50C5-9DC1-F8F605DF94DC"><li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-D7DA029C-9FD3-56EE-90B7-7C7AB469E4A3"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-D7DA029C-9FD3-56EE-90B7-7C7AB469E4A3"><!-- --></a><p>When the backup status flag gets set to ‘backup in progress’ any data that has not yet been saved may need to be saved. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-7876FF0F-2AE7-532E-8C07-82F14E160CE4"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-7876FF0F-2AE7-532E-8C07-82F14E160CE4"><!-- --></a><p>The process has to release locks on all public data files that require to be backed up (files that are excluded from backup can be kept locked but assume that all public files will be backed up) so they can be copied off and stop modify private data files. This may require that the process ‘freezes’ all sessions to external processes to avoid external events that would cause files to be written to (whether requests are blocked or errors returned depends on the context). </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-2F248E9E-A268-5E91-B3B2-6170F808F9A5"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-2F248E9E-A268-5E91-B3B2-6170F808F9A5"><!-- --></a><p>The process tries to make a connection to the Backup Engine by name. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-62065E28-1606-53D2-9481-742A92596513"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-62065E28-1606-53D2-9481-742A92596513"><!-- --></a><p>At the start of backing up private files, the process must ask the Backup Engine whether it is a base backup or an incremental backup using the active client APIs described in <a href="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073.html#GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-DD1DF9F9-FEAD-57DF-9C7A-7DA564093EC9">Active or passive backup</a> and, if it is an incremental backup, the process must wait until the file snapshot to use for the increment is provided. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-FB652D32-7F4E-5B91-9FEB-D2246C8B323F"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-FB652D32-7F4E-5B91-9FEB-D2246C8B323F"><!-- --></a><p>The process sends its private data as a stream using the active client APIs described in <a href="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073.html#GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-DD1DF9F9-FEAD-57DF-9C7A-7DA564093EC9">Active or passive backup</a>. The owning process is responsible for taking its data files (all or whichever subset it wants to back up) and streaming them. Reference code will be provided to take all files in a private directory and stream them. Any other behavior will have to be implemented by the data owners. </p>
 <p>If the backup is a base backup, all the data in the relevant files must be provided. </p>
 <p>If it is an incremental backup, it should only stream data corresponding to the changes since the snapshot. The data-owning process has a choice of how sophisticated its behavior is in this regard. The simplest behavior is to always do a base backup (this will be an option, even when an incremental backup has been requested). An alternative is to provide backups of files that have changed since the last backup. The final option is to provide only that data that has changed since the last backup. Which choice is made will depend on the nature of the data to be backed up. </p>
 <p>Note that an application may have been installed after the base backup so a process must handle this (no snapshot will be provided). </p>
 <p>The data-owning process is responsible for providing a snapshot of files that can be used as a baseline for subsequent incremental backups. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-D8CBC8A0-6B45-50C4-89F3-5E49C733BB0F"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-D8CBC8A0-6B45-50C4-89F3-5E49C733BB0F"><!-- --></a><p>The private data being sent may not be received all at once (multiple processes may be trying to supply data at the same time) and may not be received at all (if the backup is partial or has been broken off). </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-041A1BF0-6111-5ABB-A09B-84A308ABE7A8"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-041A1BF0-6111-5ABB-A09B-84A308ABE7A8"><!-- --></a><p>When the backup flag reverts to normal, files can be re-accessed and clients responded to. The process must handle the case where the backup data has only been partially received or has not been received at all. </p>
 </li>
 </ol>
 <p> <strong>Behavior required of a process that responds to an active restore of private data:</strong>  </p>
 <a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-00773A52-FD23-56B8-AA14-7CBADDFB72D1"><!-- --></a><ol id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-00773A52-FD23-56B8-AA14-7CBADDFB72D1"><li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-CB7CC3CF-2121-5D0A-87FE-1640CB9CD16A"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-CB7CC3CF-2121-5D0A-87FE-1640CB9CD16A"><!-- --></a><p>When the backup status flag gets set to ‘restore in progress’ the process has to release locks on all public data files that require to be restored (files that are excluded from restore can be kept locked) so they can be overwritten. This may require that the process ‘freezes’ all sessions to external processes to avoid external events that would cause files to be read or written to (whether requests are blocked or errors returned depends on the context). </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-F1B5D1C7-EB0C-50C4-A85B-4A3D832C5B1C"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-F1B5D1C7-EB0C-50C4-A85B-4A3D832C5B1C"><!-- --></a><p>The process tries to make a connection to the Backup Engine by name. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-0BA3E0ED-8834-55BB-9CF7-436A2B2B6E1E"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-0BA3E0ED-8834-55BB-9CF7-436A2B2B6E1E"><!-- --></a><p>The process receives its private data as a stream using the active client APIs described in <a href="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073.html#GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-DD1DF9F9-FEAD-57DF-9C7A-7DA564093EC9">Active or passive backup</a>. The owning process is responsible for receiving the data as previously provided and recreating the relevant files. Reference code will be provided to take a stream and create files in a private directory. Any other behavior will have to be implemented by the data owners. </p>
 </li>
 </ol>
 <p>The first chunk of data received will be a base backup of (potentially) multiple files. </p>
 <p>If incremental backups have been carried out the base backup data will be followed by a sequence of increments. They will be supplied in the correct (i.e. chronological) order. The receiving process is responsible for amending the data accordingly. If the process can only provide full backups, it will not receive increments. </p>
 <a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-E69D2CD3-0D0F-5636-9F55-0F48E693651D"><!-- --></a><ol id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-E69D2CD3-0D0F-5636-9F55-0F48E693651D"><li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-72324FE3-1E60-5C11-9E61-C3045DB95BF4"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-72324FE3-1E60-5C11-9E61-C3045DB95BF4"><!-- --></a><p>The private data being restored may not be received immediately (multiple processes may be trying to receive data at the same time) and may not be received at all (if the restore is partial or has been broken off). </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-B7C98324-B23D-50FF-BBEF-92A8A3FFCC3D"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-B7C98324-B23D-50FF-BBEF-92A8A3FFCC3D"><!-- --></a><p>When the backup flag reverts to normal, files can be re-accessed and clients responded to. The process must handle the case where the restore data has only been partially received or has not been received at all. Any cached data must be flushed after a restore. </p>
 </li>
 </ol>
 </div>
 <div class="section" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-AADBCA89-2D0B-5BB5-BB15-5A6A138CBB52"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-AADBCA89-2D0B-5BB5-BB15-5A6A138CBB52"><!-- --></a><h2 class="sectiontitle">Private data to be passively backed up</h2> <p>Processes that own private data that needs to be passively backed up must register the fact with the Backup Engine. </p>
 <p>If an application is designed for separate installation (as opposed to upgrade) it will need to copy a backup registration file into the private directory during installation. If an application is part of the platform, this involves creating a backup registration file as part of the build and ensuring that it is located in the relevant private directory. See <a href="GUID-9A6273D8-7797-5190-AFEC-1AD113980B84.html">Backup Registration Files</a>. </p>
 <p>In addition, the process must subscribe to the backup status flag described in <a href="GUID-88A5F321-17BA-566B-B025-22DB11664E54.html" title="This section describes the subscribe and publish flag for backup and restore.">Public and Subscribe Event for Active Backup</a> to be able to detect when a backup or restore takes place. </p>
 <p>During the backup or restore, the process can exit or release locks on all public and private data files. If the process is a GUI app, the default behavior will be for it to be terminated politely so no extra code is required. </p>
 </div>
 <div class="section" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-09EC1C7E-759F-5902-BA4E-34027985912B"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-09EC1C7E-759F-5902-BA4E-34027985912B"><!-- --></a><h2 class="sectiontitle">Private data not backed up</h2> <p>A process that accesses public data, but which does not wish to have private data backed up, does not have to register for backup and restore but it does have to respond to the backup status flag: </p>
 <ul><li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-9F16F729-7B2C-5049-B1FD-48D668F62394"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-9F16F729-7B2C-5049-B1FD-48D668F62394"><!-- --></a><p>If your process is <em>a UI application which can exit during backup and restore</em>, you need do nothing – you will be terminated politely as before. Note that this means that the default behavior is for private data of applications not to be backed up. The application needs to make a positive decision to get private data backed up. This ‘opt-in’ behavior is a deliberate choice for security reasons – applications cannot find their private data backed up without their knowledge. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-1951E457-169F-5359-BD59-8BEFCB11C408"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-1951E457-169F-5359-BD59-8BEFCB11C408"><!-- --></a><p>If your process is <em>a non-UI application, or a UI application which will not terminate during backup and restore, and accesses public data</em>, you will need to subscribe to the backup status flag. It must check it on start-up and, if it is set, enter the correct state (this should never happen because the process should not be started during a backup or restore. If it does, however, it should behave robustly just in case). If the process starts during a backup or restore, it should wait until it is complete before attempting to access any public data files. </p>
 <ul><li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-005E17C1-81A7-5121-9E25-939E3E5512FF"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-005E17C1-81A7-5121-9E25-939E3E5512FF"><!-- --></a><p>When the backup status flag goes to ‘backup in progress’ your process must release all locks or at least make all public data files readable. This may require that the process ‘freeze’ all sessions to external processes to avoid external events that would cause files to be written to (whether requests are blocked or errors returned depends on the context). When the backup flag reverts to normal, sessions can be re-activated and files re-accessed. </p>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-7C237E21-405C-5E57-8100-DBA8F399AE2B"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-7C237E21-405C-5E57-8100-DBA8F399AE2B"><!-- --></a><p>When the backup status flag goes to ‘restore in progress’ your process must change to a state where public files can be overwritten. This will involve releasing all public data files accessed and ensuring that external events cannot cause an attempt to re-access any files. When the restore is complete your process must re-load data files and refresh any data stored in cache. </p>
 </li>
 </ul>
 </li>
 </ul>
 </div>
 <div class="section" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-7FA25558-D066-5730-9350-C89A47E08D43"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-7FA25558-D066-5730-9350-C89A47E08D43"><!-- --></a><h2 class="sectiontitle">Data in a proxy to be backed up</h2> <p>Data owners can have data stored within another data owner’s data cage, such as with the central repository. In this scenario, data from each data cage must be backed up. The data owner holding data on behalf of another data owner is known as a proxy. From the PC’s point of view, this data belongs to the data owner, but internally the data is being requested from the proxy via the active client interface. A data owner requiring data from one of these proxies must specify the proxy in the element <samp class="codeph">&lt;proxy_data_manager /&gt;</samp> using its secure ID. See the example in <a href="GUID-9A6273D8-7797-5190-AFEC-1AD113980B84.html#GUID-9A6273D8-7797-5190-AFEC-1AD113980B84__GUID-EC5C504C-6901-5E05-A4B8-6304B2E39539">Backup Registration Files</a>. </p>
 <p> <em>Note: During a backup or restore operation, the data owner will behave as an active data owner as far as the PC is concerned, although this requires no special action on behalf of the data owner itself.</em>  </p>
 <p>Data stored in the central repository (CentRep) will be backed up if the proxy data manager tag is selected in the backup registration file specifying the central repository’s secure ID. Not all data may be backed up. Each value in CentRep has some metadata associated with it and one bit of the metadata is a backup flag. The value will be backed up only if the backup flag bit is set. It is the responsibility of the data owner to specify the correct settings within the repository initialization file. </p>
 <p>CentRep backups are always base, as opposed to incremental, because the CentRep does not contain sufficient information to efficiently support incremental backups and because CentRep data is not expected to be sufficiently large to justify incremental backup. </p>
 </div>
 <div class="section" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-36AF1561-CF41-571D-9544-5B4315D6C596"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-36AF1561-CF41-571D-9544-5B4315D6C596"><!-- --></a><h2 class="sectiontitle">DBMS files to be backed up</h2> <p>A data owner may be responsible for a number of databases that may need to be subject to back up and restore. Shared databases will be backed up if the policy number is specified in the data owners backup registration file using the <samp class="codeph">&lt;dbms_backup&gt;</samp> tag. There is no need to specify database names as the DBMS will provide the list of the databases belonging to the data owner based on the policy identifier. See the example in <a href="GUID-9A6273D8-7797-5190-AFEC-1AD113980B84.html#GUID-9A6273D8-7797-5190-AFEC-1AD113980B84__GUID-EC5C504C-6901-5E05-A4B8-6304B2E39539">Example backup registration files</a>. </p>
 </div>
 <div class="section" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-790E8367-7CE4-5367-B9B9-4C782DA52FA4"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-790E8367-7CE4-5367-B9B9-4C782DA52FA4"><!-- --></a><h2 class="sectiontitle">System (installed application) data to be backed up</h2> <p>On Symbian devices, installed applications are no longer backed up by default and now require the consent of the application developer. The backup and restore of an application’s binaries and its data is also done separately and requested differently. For an application's data see <a href="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073.html#GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-DD1DF9F9-FEAD-57DF-9C7A-7DA564093EC9">Active or passive backup</a>. For binaries the <samp class="codeph">&lt;system_backup/&gt;</samp> tag must be specified in the backup registration file. See <a href="GUID-9A6273D8-7797-5190-AFEC-1AD113980B84.html">Backup Registration Files</a> for more details. </p>
 <p>The <samp class="codeph">&lt;system_backup/&gt;</samp> tag triggers the Backup Engine to query which package the application belongs to and retrieves a list of all the files referenced by the package. Only the following read-only files will be backed up as system data (any file or directory not listed below will need to be backed up separately using one of the other mechanisms described previously): </p>
 <ul><li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-4A477D6B-4287-5BC0-9D85-5784386A2510"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-4A477D6B-4287-5BC0-9D85-5784386A2510"><!-- --></a><pre class="codeblock" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-7C833F9E-EDAF-55CC-8C99-3779345AF866"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-7C833F9E-EDAF-55CC-8C99-3779345AF866"><!-- --></a>\sys\bin\*</pre>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-22AA333A-07F8-5F80-B237-4D1B29ACAB42"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-22AA333A-07F8-5F80-B237-4D1B29ACAB42"><!-- --></a><pre class="codeblock" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-DB249610-2221-5CF5-BE46-A22386E90565"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-DB249610-2221-5CF5-BE46-A22386E90565"><!-- --></a>\resource\*</pre>
 </li>
 <li id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-5D4B2C38-0177-5757-9678-C57E8FBD9A8C"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-5D4B2C38-0177-5757-9678-C57E8FBD9A8C"><!-- --></a><pre class="codeblock" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-37AF45D1-B672-56D1-9DC8-478A7ED1D79E"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-37AF45D1-B672-56D1-9DC8-478A7ED1D79E"><!-- --></a>\private\123456\backup_registration*.xml</pre>
 </li>
 </ul>
 <p>Writeable files will not be backed up as system data as they will fail to be restored as system data. </p>
 <p> <strong>Note: </strong> It is essential to add the backup registration file(s) to the package. If forgotten, nothing will be backed up or restored. </p>
 <p>An additional mechanism exists to specify backup registration files for data owners that do not have private directories - this is to be used for DLLs which are installed as part of a package. To use this method, the backup registration file must be placed in a special location under the Backup Engine’s private directory: </p>
 <pre class="codeblock" id="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-42130AB1-94FE-5009-B12C-794B5238FBC0"><a name="GUID-77E6748E-F9A8-531A-9203-EC11A3E53073__GUID-42130AB1-94FE-5009-B12C-794B5238FBC0"><!-- --></a>\private\10202D56\import\packages\&lt;package-id&gt;\backup_registration.xml</pre>
 <p> <strong>Note</strong>: <samp class="codeph">10202D56</samp> is the SID of the Backup Engine, and replace &lt;package-id&gt; with the ID of the package containing the DLL. The data owner does not have a private directory, the only methods that are valid in this backup registration file are system and public file backup. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-796916B2-8B23-5AD8-9DB8-8B0DA7868A62.html">Backup-aware Software (Data Owner)</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-796916B2-8B23-5AD8-9DB8-8B0DA7868A62.html">Backup-aware Software (Data Owner)</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>