<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Factory Implementation"/>
<meta name="abstract" content="Media driver must implement a PDD factory class derived from DPhysicalDevice."/>
<meta name="description" content="Media driver must implement a PDD factory class derived from DPhysicalDevice."/>
<meta name="DC.Relation" scheme="URI" content="GUID-E21C4AF8-852A-5BBD-A92A-5473D1DFFBB1.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-52371DAB-A231-558C-B3E6-220DAAEE566B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5C223AD5-4676-58B4-B3A5-066F6B69AA4D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E21C4AF8-852A-5BBD-A92A-5473D1DFFBB1.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Factory Implementation</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2400778 id2402024 id2402050 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-52371DAB-A231-558C-B3E6-220DAAEE566B.html" title="Provides software components that implement the interface between Symbian platform and peripherals.">Logical Device Drivers</a> &gt; <a href="GUID-5C223AD5-4676-58B4-B3A5-066F6B69AA4D.html" title="Provides the logical device driver for the internal and removable storage media on a phone.">Local Media Subsystem</a> &gt; <a href="GUID-E21C4AF8-852A-5BBD-A92A-5473D1DFFBB1.html" title="Describes the steps to implement a new Media Driver.">Media Driver Tutorial</a> &gt; </div>
<h1 class="topictitle1">Factory
Implementation</h1>
<div><p>Media driver must implement a PDD factory class derived from <samp class="codeph">DPhysicalDevice</samp>. </p>

<p>The PDD factory creates the main media driver objects. </p>

<p>The <a href="GUID-0437DB4C-FC4E-51DC-BB4C-95C0B26834F5.html">Device Driver
Guide</a> describes the general theory for implementing a derived class,
while this section gives the specifics for the media driver. </p>

<p>In implementing your <a href="GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930.html"><span class="apiname">DPhysicalDevice</span></a> derived class,
you must, as a minimum, provide an implementation for the following four functions,
defined as pure virtual in <samp class="codeph">DPhysicalDevice</samp>: </p>

<ul>
<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-7D2FC41B-4294-5082-92D7-07DA9A991CF4"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-7D2FC41B-4294-5082-92D7-07DA9A991CF4"><!-- --></a><p> <a href="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930.html#GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-CBAFA0EC-B111-57B9-8E4F-EE8ADDB56252">Install() - complete the initialisation of the PDD factory object</a>  </p>
 </li>

<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-BDCE51AB-897F-5609-971F-1F3E36AC34D0"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-BDCE51AB-897F-5609-971F-1F3E36AC34D0"><!-- --></a><p> <a href="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930.html#GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-32B157E9-0F71-5C1B-A0FA-08D5B1ACA700">Create() - create the media driver object</a>  </p>
 </li>

<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-B3F2FE95-F58A-5C48-99F1-39C2521153C5"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-B3F2FE95-F58A-5C48-99F1-39C2521153C5"><!-- --></a><p> <a href="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930.html#GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-9EAFB357-5770-529A-BED5-0721C38C7BD1">Validate() - check that the PDD is suitable for use</a>  </p>
 </li>

<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-6D959402-0B3F-547D-B1E7-500C96768649"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-6D959402-0B3F-547D-B1E7-500C96768649"><!-- --></a><p> <a href="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930.html#GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-2F29C284-DE66-5A92-9D9A-0348E01D1139">GetCaps() - return the capabilities of the Media Driver</a>  </p>
 </li>

</ul>

<p>The following function is virtual in <a href="GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930.html"><span class="apiname">DPhysicalDevice</span></a> but
has a default implementation that must be changed: </p>

<ul>
<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-53148446-2A45-5E6B-A9F8-B653383F2256"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-53148446-2A45-5E6B-A9F8-B653383F2256"><!-- --></a><p> <a href="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930.html#GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-E3E875BD-F89D-5728-AF4B-658A595E9298">Info() - set the priority of the media driver</a>  </p>
 </li>

</ul>

<div class="section" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-CBAFA0EC-B111-57B9-8E4F-EE8ADDB56252"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-CBAFA0EC-B111-57B9-8E4F-EE8ADDB56252"><!-- --></a><h2 class="sectiontitle">Install() -
complete the initialisation of the PDD factory object</h2> <p>See also <a href="GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930.html#GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930__GUID-0065FAAF-D734-3ED2-816A-CCE9BF607BAB"><span class="apiname">DPhysicalDevice::Install()</span></a>. </p>
 <p>This
PDD factory function is called after the PDD DLL has been successfully loaded,
as a result of a call to <a href="GUID-C197C9A7-EA05-3F24-9854-542E984C612D.html#GUID-C197C9A7-EA05-3F24-9854-542E984C612D__GUID-A0F4BF4A-9C58-3E5E-88E1-6D98597DDA18"><span class="apiname">User::LoadPhysicalDevice()</span></a>, and
the factory object has been successfully created on the kernel heap. </p>
 <p>The
function is a second stage constructor for the factory object, and allows
any further initialisation of the factory object to be done. As a minimum,
the function must set a name for the media driver's factory object. The name
is important as it is the way in which the object will subsequently be found.
The name should be of the form: </p>
 <pre class="codeblock" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-DE6A4AD9-EE64-536D-8532-6624EDAB69AB"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-DE6A4AD9-EE64-536D-8532-6624EDAB69AB"><!-- --></a>Media.&lt;MDExt&gt;</pre>
 <p>where <samp class="codeph">&lt;MDExt&gt;</samp> is descriptive of the specific media. For example, <samp class="codeph">Media.Ata</samp>,
and <samp class="codeph">Media.Iram</samp>. </p>
 <p>When a <a href="GUID-918D17D8-B751-35EE-A592-4F0EAB005EC7.html"><span class="apiname">DMedia</span></a> object,
created by the internal Symbian platform <span class="filepath">ELOCD.LDD</span> logical
device driver, attempts to mount a media device, i.e. to open a media driver,
it does a search by name. This is a search through all loaded PDDs whose names
match <samp class="codeph">Media.*</samp>. </p>
 <p>The following simple function is typical: </p>
 <pre class="codeblock" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-8FA1A096-470B-55EC-A0CE-282AD6ABC9CA"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-8FA1A096-470B-55EC-A0CE-282AD6ABC9CA"><!-- --></a>TInt DMyPhysicalDeviceMedia::Install()
    {
    _LIT(KDrvNm, "Media.MyName");
    return SetName(&amp;KDrvNm);
    }
        </pre>
 </div>

<div class="section" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-32B157E9-0F71-5C1B-A0FA-08D5B1ACA700"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-32B157E9-0F71-5C1B-A0FA-08D5B1ACA700"><!-- --></a><h2 class="sectiontitle">Create() -
create the media driver object</h2> <p>See also <a href="GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930.html#GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930__GUID-B88265CA-0881-3666-BF76-C32E47F9A3A1"><span class="apiname">DPhysicalDevice::Create()</span></a>. </p>
 <p>This
PDD factory function is called by the device driver framework to create, and
return, the media driver object. This is an instance of a class derived from <a href="GUID-A0D4EB25-0BA4-39EE-874B-465EB9628DCC.html"><span class="apiname">DMediaDriver</span></a>.
Note that, occasionally, you may find this object referred to as the physical
channel. </p>
 <p> <samp class="codeph">Create()</samp> is called when initially mounting
a media device, or accessing a removable media after an insertion event. Contrast
this with <a href="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930.html#GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-CBAFA0EC-B111-57B9-8E4F-EE8ADDB56252">Install()</a>,
which is only called once, when the PDD factory object is loaded. </p>
 <p>Typically, <samp class="codeph">Create()</samp> does
the following: </p>
 <ul>
<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-C5FF60E4-9512-597F-9F89-7C0E6BB75ED8"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-C5FF60E4-9512-597F-9F89-7C0E6BB75ED8"><!-- --></a><p>Compares the build version
of the media driver with the version requested, and returns <a href="GUID-F89DA3F0-2A48-3F9B-8F08-29350E92D0E4.html"><span class="apiname">KErrNotSupported</span></a> if
the versions are incompatible. </p>
 </li>

<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-B3F68A1C-320D-5CA5-BAE4-59A716C937B0"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-B3F68A1C-320D-5CA5-BAE4-59A716C937B0"><!-- --></a><p>Creates an instance
of the <a href="GUID-A0D4EB25-0BA4-39EE-874B-465EB9628DCC.html"><span class="apiname">DMediaDriver</span></a> derived class, the media driver object. </p>
 </li>

<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-13D14DBA-8629-54A8-9CFD-E50E7AF32CD7"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-13D14DBA-8629-54A8-9CFD-E50E7AF32CD7"><!-- --></a><p>Initiates second-phase
construction of the media driver object. Typically, this involves initialisation
that is capable of failing. This may be done synchronously or asynchronously.
You would probably do this asynchronously for removable media that is slow
to power up, or for slow internal media, in which case, you would need to
make sure that you attached a DFC queue during <a href="GUID-A70A01D2-467E-5BA8-A01D-6182558F3F52.html" title="How to write an initialisation function, implemented by the Media driver and called by the kernel at boot time.">media
driver initialisation</a>. Although the device driver framework does not
mandate any specific function name in which to implement this, the example
code fragment suggests a function name of <samp class="codeph">DoCreate()</samp>. </p>
 </li>

<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-CB1D26B5-A868-5993-9ABF-BD101A94443F"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-CB1D26B5-A868-5993-9ABF-BD101A94443F"><!-- --></a><p>Acknowledges creation
of the media driver object. The way you do this depends on whether creation
is done synchronously or asynchronously: </p>
 <ul>
<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-0C8288F4-874D-5C34-8D38-FCF1665903BD"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-0C8288F4-874D-5C34-8D38-FCF1665903BD"><!-- --></a><p>Synchronous creation
- call <a href="GUID-A0D4EB25-0BA4-39EE-874B-465EB9628DCC.html#GUID-A0D4EB25-0BA4-39EE-874B-465EB9628DCC__GUID-DF0539A1-FDB2-3A31-A57B-863F9033B67A"><span class="apiname">DMediaDriver::OpenMediaDriverComplete()</span></a> passing <a href="GUID-6CA4F1ED-7947-3087-B618-D35858FAA3BC.html"><span class="apiname">KErrNone</span></a>,
or an error code if appropriate, and then return <samp class="codeph">KErrNone</samp> from <samp class="codeph">Create()</samp>.
Do not return any value other than <a href="GUID-6CA4F1ED-7947-3087-B618-D35858FAA3BC.html"><span class="apiname">KErrNone</span></a> from Create(),
otherwise the framework may call it again. </p>
 <p>Note that <a href="GUID-A0D4EB25-0BA4-39EE-874B-465EB9628DCC.html#GUID-A0D4EB25-0BA4-39EE-874B-465EB9628DCC__GUID-DF0539A1-FDB2-3A31-A57B-863F9033B67A"><span class="apiname">DMediaDriver::OpenMediaDriverComplete()</span></a> can
be called from within the media driver class, if that is the way the driver
is designed, but <samp class="codeph">Create()</samp> must still return <samp class="codeph">KErrNone</samp>. </p>
 </li>

<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-AF5F1A17-990F-5475-8B0D-25DA45E74B72"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-AF5F1A17-990F-5475-8B0D-25DA45E74B72"><!-- --></a><p>Asynchronous creation
- return either <a href="GUID-6CA4F1ED-7947-3087-B618-D35858FAA3BC.html"><span class="apiname">KErrNone</span></a>, if initiation of the operation
was successful, or an error code, if the operation failed immediately. However,
it is the responsibility of the media driver object to signal completion. </p>
 </li>

</ul>
 </li>

</ul>
 <p>The following is a typical example: </p>
 <pre class="codeblock" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-69BF7285-1086-5BD9-9624-61DAF0A22DE9"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-69BF7285-1086-5BD9-9624-61DAF0A22DE9"><!-- --></a>TInt DMyPhysicalDeviceMedia::Create(DBase*&amp; aChannel, TInt aMediaId, const TDesC8* aInfo ,const TVersion &amp;aVer)
    {
    // Check the build version of the media driver
    if (!Kern::QueryVersionSupported(iVersion,aVer))
        {
        return KErrNotSupported;
        }

    //Create my DMediaDriver derived object
    DMyMediaDriver* pD=new DMyMediaDriver (aMediaId);
    aChannel=pD;

    // Call my media driver’s second-stage constructor
    Tint r = KErrNoMemory;
    if(pD)
        {
        r = pD-&gt;DoCreate(aMediaId);
        }

    // Synchronous Creation (don’t do this if Asynchronous)…
    if(r == KErrNone)
        {
        pD-&gt;OpenMediaDriverComplete(KErrNone);
        }

    return r;
    }
        </pre>
 </div>

<div class="section" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-9EAFB357-5770-529A-BED5-0721C38C7BD1"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-9EAFB357-5770-529A-BED5-0721C38C7BD1"><!-- --></a><h2 class="sectiontitle">Validate()
- check that the PDD is suitable for use</h2> <p>See also <a href="GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930.html#GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930__GUID-70B6293C-9000-31D9-AE9E-441C9760B92E"><span class="apiname">DPhysicalDevice::Validate()</span></a>. </p>
 <p>This
PDD factory function is called by the kernel's device driver framework to
check whether this PDD is suitable for use with the media type specified in
the function. </p>
 <p>A typical implementation of this function would perform
the following steps: </p>
 <ul>
<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-A4708377-3D61-5115-92CA-BB0660D9B3F1"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-A4708377-3D61-5115-92CA-BB0660D9B3F1"><!-- --></a><p>Compare the build version
of the media driver with the version requested </p>
 </li>

<li id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-47FECD2E-FF54-56F2-93A6-5CC08CB24DB7"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-47FECD2E-FF54-56F2-93A6-5CC08CB24DB7"><!-- --></a><p>Confirm that this driver
is responsible for the media type </p>
 </li>

</ul>
 <p>The following is a very typical implementation: </p>
 <pre class="codeblock" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-E08EC5CD-BCC7-517F-86A9-0B04E62D6E9E"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-E08EC5CD-BCC7-517F-86A9-0B04E62D6E9E"><!-- --></a>TInt DMyPhysicalDeviceMedia::Validate(TInt aUnit, const TDesC8* aInfo, const TVersion&amp; aVer)
    {
    // Check the build version of the media driver
    if (!Kern::QueryVersionSupported(iVersion,aVer))
        {
        return KErrNotSupported;
        }

    // Check that the given type of media is supported by this driver
    if (aUnit!=MEDIA_DEVICE_MYMEDIA)
        {
        return KErrNotSupported;
        }

    return KErrNone;
    }

        </pre>
 <p>Note that the value passed in via the <samp class="codeph">aUnit</samp> argument
is the unique media ID used when the media driver was registered. In other
contexts, the argument may be denoted by the symobol <samp class="codeph">aMediaId</samp>. </p>
 </div>

<div class="section" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-2F29C284-DE66-5A92-9D9A-0348E01D1139"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-2F29C284-DE66-5A92-9D9A-0348E01D1139"><!-- --></a><h2 class="sectiontitle">GetCaps() -
return the capabilities of the Media Driver</h2> <p>See also <a href="GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930.html#GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930__GUID-CA336905-B068-3CFB-80D7-4DF29B92BF4F"><span class="apiname">DPhysicalDevice::GetCaps()</span></a>. </p>
 <p>For
media drivers, this PDD factory function is not used. However, an implementation
is required because the function is defined as pure virtual in the <samp class="codeph">DPhysicalDevice</samp> base
class. Simply implement an empty function, for example: </p>
 <pre class="codeblock" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-D1DF97CF-7719-5414-9CFB-237E3079B280"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-D1DF97CF-7719-5414-9CFB-237E3079B280"><!-- --></a>void DMyPhysicalDeviceMedia::GetCaps(TDes8&amp; /*aDes*/) const
//
// Return the media drivers capabilities.
//
    {
    }
        </pre>
 </div>

<div class="section" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-E3E875BD-F89D-5728-AF4B-658A595E9298"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-E3E875BD-F89D-5728-AF4B-658A595E9298"><!-- --></a><h2 class="sectiontitle">Info() - set
the priority of the media driver</h2> <p>See also <a href="GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930.html#GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930__GUID-440B4A06-BA90-385B-A06D-B8553F0EE63F"><span class="apiname">DPhysicalDevice::Info()</span></a>. </p>
 <p>This
PDD factory function is intended to return information relating to the media
driver. The function can, potentially, return many different types of information,
depending on the value passed as the first parameter. However, the only type
of information that Symbian platform currently requires is the priority of
the media driver. The returned priority value is used by Symbian platform
to decide the order in which media drivers are to be opened. </p>
 <p>The default
implementation just returns 0, and therefore needs to be overridden. </p>
 <p>Under
most circumstances, you can return the value <a href="GUID-CE45BE16-7122-3250-B9B5-8CD0F7F7FAEB.html"><span class="apiname">KMediaDriverPriorityNormal</span></a>.
You can, however, return <a href="GUID-52FB0DED-240A-342A-8922-9450BE2F9E02.html"><span class="apiname">KMediaDriverPriorityHigh</span></a> in circumstances
where it is important that the driver is initialised before a lower priority
driver. </p>
 <p>The following code fragment is a typical implementation: </p>
 <pre class="codeblock" id="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-7A065EF3-FE4B-541D-B9E4-0F112A9B741B"><a name="GUID-A6D14A03-ADBF-570D-8AC7-E8BC2700F930__GUID-7A065EF3-FE4B-541D-B9E4-0F112A9B741B"><!-- --></a>TInt DMyPhysicalDeviceMedia::Info(TInt aFunction, TAny* /*a1*/)
    {
    if (aFunction==EPriority)
        {
        return KMediaDriverPriorityNormal;
        }
    return KErrNotSupported;
    }
        </pre>
 <p>where <samp class="codeph">EPriority</samp> indicates that priority
information is required (this is an enum value of enum <samp class="codeph">TInfoFunction</samp>,
defined in <a href="GUID-A5484A7F-94B9-34C7-9F88-82B1BF516930.html"><span class="apiname">DPhysicalDevice</span></a>. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-E21C4AF8-852A-5BBD-A92A-5473D1DFFBB1.html" title="Describes the steps to implement a new Media Driver.">Media Driver Tutorial</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>