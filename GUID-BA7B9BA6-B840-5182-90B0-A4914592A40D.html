<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="SendAs Server"/>
<meta name="abstract" content="This section provides detailed description of the SendAs Server functions and how the SendAs Server processes the client request."/>
<meta name="description" content="This section provides detailed description of the SendAs Server functions and how the SendAs Server processes the client request."/>
<meta name="DC.Relation" scheme="URI" content="GUID-91F971B6-CA7A-5FE4-B10A-6CADC935C3B4.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-63816E09-46C7-503A-ADA0-E350C7ACF3C4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-91F971B6-CA7A-5FE4-B10A-6CADC935C3B4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B015C4A3-469E-5AC4-B9B9-A24AF7444E65.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>SendAs Server</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2404348 id2404397 id2405030 id2405045 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html">Messaging Middleware Guide</a> &gt; <a href="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html">Messaging Framework</a> &gt; <a href="GUID-63816E09-46C7-503A-ADA0-E350C7ACF3C4.html">SendAs</a> &gt; <a href="GUID-91F971B6-CA7A-5FE4-B10A-6CADC935C3B4.html" title="This section describes the concepts and functionality of the SendAs component.">SendAs Concepts</a> &gt; </div>
<h1 class="topictitle1">SendAs
Server</h1>
<div><p>This section provides detailed description of the SendAs Server
functions and how the SendAs Server processes the client request. </p>

<div class="section"><h2 class="sectiontitle">SendAs Server process and data flow</h2> <p>The following
figure details the processes and data flow with SendAs Server. </p>
 <div class="fignone" id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-644B137D-D8A4-514F-9D3F-238CC69C751E"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-644B137D-D8A4-514F-9D3F-238CC69C751E"><!-- --></a><span class="figcap">Figure 1.               SendAs Server process and data flow            </span>

<img src="GUID-AE8D314A-5381-5576-9B17-94BA029A7FEA_d0e494071_href.jpg"/>
</div>
 </div>

<div class="section"><h2 class="sectiontitle">SendAs Server functionality</h2> <p>The following sections
give detailed information about the SendAs sever functionality: </p>
 <p><strong>Creating
a SendAs message</strong> </p>
 <p>Client applications can create a message of a
given type that supports SendAs only in the Drafts folder of the message store.
It uses <a href="GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6__GUID-C7CD5EC4-14EE-3375-BEA0-C7FD273C2574"><span class="apiname">RSendAsMessage::Create()</span></a> to create the message.
An MTM can specify its support of SendAs for a message type in the following
two ways: </p>
 <ul>
<li id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-E25A3621-D706-5016-9F94-AE823C597AD7"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-E25A3621-D706-5016-9F94-AE823C597AD7"><!-- --></a><p>The message type can
set the <a href="GUID-7D5C9320-17AB-381E-8369-1804EB143199.html#GUID-7D5C9320-17AB-381E-8369-1804EB143199__GUID-4EDB6002-8750-3E7D-AC60-BFD2BD441E69"><span class="apiname">MTM_CAPABILITIES::send_capability</span></a> resource in its
resource file. This allows the Message Server to know whether the message
type supports SendAs without loading its MTMs. </p>
 </li>

<li id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-1663559F-C4CE-5B40-848C-B312E60FD8A0"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-1663559F-C4CE-5B40-848C-B312E60FD8A0"><!-- --></a><p>If the MTM does not
declare whether it supports SendAs in its resource file, the Message Server
loads the MTM and queries if it supports the <a href="GUID-AB92627B-67B0-39AC-9B00-854EA1589B35.html"><span class="apiname">KUidMtmQueryCanSendMsg</span></a> capability. </p>
 </li>

</ul>
 <p><strong>Modifying a SendAs message</strong> </p>
 <p>Client applications can
modify a message created by the <a href="GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6__GUID-C7CD5EC4-14EE-3375-BEA0-C7FD273C2574"><span class="apiname">RSendAsMessage::Create()</span></a> method.
After sending the request, client applications can no longer modify the message.
They can add the following message parts, if supported by the message type. </p>
 <ul>
<li id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-C84B4945-0E7A-5309-94FF-B849D16F11B7"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-C84B4945-0E7A-5309-94FF-B849D16F11B7"><!-- --></a><p>Body text </p>
 </li>

<li id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-169AEA41-8650-5BE4-8386-36DD3BE1215B"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-169AEA41-8650-5BE4-8386-36DD3BE1215B"><!-- --></a><p>Attachment </p>
 </li>

<li id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-EA862642-6FD7-5248-B7ED-6981AB73CA69"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-EA862642-6FD7-5248-B7ED-6981AB73CA69"><!-- --></a><p>BIO type </p>
 </li>

<li id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-BF7BDB3F-5EAA-565B-8238-3F34E4608222"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-BF7BDB3F-5EAA-565B-8238-3F34E4608222"><!-- --></a><p>Recipientsâ€”address,
alias and type. For example, To, Cc or Bcc. </p>
 </li>

<li id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-9509C4D9-A1B1-5C9D-9890-AEBA109ECA0A"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-9509C4D9-A1B1-5C9D-9890-AEBA109ECA0A"><!-- --></a><p>Subject </p>
 </li>

</ul>
 <p><strong>Sending a SendAs Message </strong> </p>
 <p>When a client application
requests to send a message, it must specify whether SendAs must get confirmation
from the user to send the message or not. </p>
 <p>If a client application
that requests a unconfirmed send is not trusted with the capabilities specified
by the Server MTM of the given message type, the SendAs Server automatically
performs a confirmed send. </p>
 <p>For a confirmed send, the SendAs Server
uses the UI MTM for the message type to confirm the send request by querying
the phone user. If the send is confirmed by the phone user, the SendAs Server
moves the message to Outbox and sends the message. If the send is refused,
then the message remains in the Drafts folder and the Send-As Server fails
the send request. </p>
 <p>After the message send is initiated, the Server
MTM for the message type takes responsibility of the message. For successful
and unsuccessful sends, the Server MTM decides to which folder the message
must be moved to. It also governs the rescheduling policy for a failed send
request. </p>
 <p>A client application can obtain progress for both types of
send requests. Any failures associated with the send are reported back to
the client application through this progress information. The progress information
also provides a send state. For example, message waiting to be sent, sending,
message sent, or message send failed. </p>
 <p><strong>Launching an editor for a
message type</strong> </p>
 <p>The SendAs Server allows client applications to launch
an editor for a specified message type that supports SendAs. After creating
a message, a client application can request to launch the appropriate editor.
It can launch the editor in two ways: a fire-and-forget launch or a launch
and wait. With the fire-and-forget launch, the client application is not notified
when an editor is closed. The launch and wait notifies the client application
when an editor closes. </p>
 <p>After the editor is launched, the SendAs Server
is no longer responsible for that message, the editor takes the responsibility.
The message editors are applications that are trusted with the required capabilities
to modify and send messages of that type. They communicate directly with the
Message Server using the Message Server APIs. </p>
 <p><strong>Querying the message
type registry</strong> </p>
 <p>The SendAs Server provides several APIs to allow
client applications to query the message type registry. The following are
the available queries: </p>
 <ul>
<li id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-51165376-26AF-524E-8BA8-B4EFC0C1716D"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-51165376-26AF-524E-8BA8-B4EFC0C1716D"><!-- --></a><p>List the registered
message types that support a specified set of message capabilities. For example,
amount of body text allowed, attachments supported and so on. </p>
 </li>

<li id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-E875CF63-B35F-581B-A8AE-A04E15A356CE"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-E875CF63-B35F-581B-A8AE-A04E15A356CE"><!-- --></a><p>Obtain the available
account names for a specified message type </p>
 </li>

<li id="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-EBE65718-F480-5840-8A89-A47C099021E3"><a name="GUID-BA7B9BA6-B840-5182-90B0-A4914592A40D__GUID-EBE65718-F480-5840-8A89-A47C099021E3"><!-- --></a><p>Get the localised human
readable name for a specified message type that supports SendAs. </p>
 </li>

</ul>
<div class="note"><span class="notetitle">Note:</span>  Message types that have no accounts or invalid accounts are not
listed. Validation is done by SendAs querying whether the UI MTM supports
validation of the accounts. If the UI MTM does not support validation, all
accounts are assumed to be valid. If the UI MTM supports the verification,
then the list of service IDs is passed to <a href="GUID-1471F3BD-21BF-3600-BEA2-F3B2C6DC4FFB.html"><span class="apiname">InvokeSyncFunctionL</span></a> using
the <a href="GUID-EFB2418B-F3A9-3BF6-90D2-22985845EAAE.html"><span class="apiname">KMtmUiFunctionValidateService</span></a> command.</div>
 <p>The
SendAs Server allows client applications only to query the message type registry
about message types that support SendAs. Other message types are ignored. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-91F971B6-CA7A-5FE4-B10A-6CADC935C3B4.html" title="This section describes the concepts and functionality of the SendAs component.">SendAs Concepts</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-B015C4A3-469E-5AC4-B9B9-A24AF7444E65.html">SendAs Overview</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>