<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Descriptor Arrays"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F61D1710-2D52-5B9B-A25F-6DFA606DAC0F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D02B5AF1-B1C3-560D-9654-971A5CC1A904.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C8BD333E-8384-534B-822B-F61B2F7C8B9F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F61D1710-2D52-5B9B-A25F-6DFA606DAC0F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-685CF352-372F-5393-97AF-1FA17DC57BA8.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E3F403EE-717B-5EA6-BC4E-6840097CAC10.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-E8266924-FA52-5171-BD73-423A46227A74"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Descriptor Arrays</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-E8266924-FA52-5171-BD73-423A46227A74"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2381103 id2383459 id2383734 id2383771 id2383785 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html">Generic OS Services Guide</a> &gt; <a href="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF.html">Low Level Libraries and Frameworks</a> &gt; <a href="GUID-D02B5AF1-B1C3-560D-9654-971A5CC1A904.html">Application Utilities</a> &gt; <a href="GUID-C8BD333E-8384-534B-822B-F61B2F7C8B9F.html">Basic Application Framework Library</a> &gt; <a href="GUID-F61D1710-2D52-5B9B-A25F-6DFA606DAC0F.html">Basic Application Framework Library Concepts</a> &gt; </div>
<h1 class="topictitle1"> Descriptor
Arrays</h1>
<div>
<p>A descriptor array is a mechanism which allows descriptors to be aggregated
in a convenient way. </p>

<div class="section"><h2 class="sectiontitle">Introduction</h2> <p>Descriptor arrays build on the behaviour
supplied by the Dynamic Arrays API and provides normal array operations for
inserting, appending, deleting, and accessing elements. </p>
 <p>There are
two types of descriptor array, based on the way data is represented by the
array: </p>
 <ul>
<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-798A2774-299C-5078-9F48-588AC1EE8143"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-798A2774-299C-5078-9F48-588AC1EE8143"><!-- --></a><p>an array whose elements
consist of non-modifiable pointer descriptors. </p>
 </li>

<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-D456390C-34ED-5908-B188-73F55C26559C"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-D456390C-34ED-5908-B188-73F55C26559C"><!-- --></a><p>an array whose elements
consist of memory pointers. </p>
 </li>

</ul>
 <p>Either array can be used to represent descriptor data. The difference
between them is based on the way they are implemented, and this determines
which one is most suitable for a given situation. </p>
 <p> <strong>NOTE</strong>: All
array classes are provided in variants for narrow and wide characters (for
example, <a href="GUID-5C0DD165-5C23-38C0-983E-B856F9F46F12.html"><span class="apiname">CDesC8Array</span></a> and <a href="GUID-9EC9CD13-91FB-38F7-9E55-F41C584AC5A6.html"><span class="apiname">CDesC16Array</span></a>).
These concrete types can be used directly, but it is usual to use typedefs
(for example, <a href="GUID-1ABD9C74-01F0-3144-9E5C-550E83F4D424.html"><span class="apiname">CDesCArray</span></a>) that are conditionally defined
to map to the wide or narrow characters depending on the build. Only the conditional
types are used below. </p>
 <p>Descriptor arrays has three key concepts - descriptor
array protocol (<samp class="codeph">MDesC16Array</samp>), general descriptor array (<samp class="codeph">CDesC16Array</samp>)
and pointer descriptor array (<samp class="codeph">CPtrC16Array</samp>). </p>
 <p><strong>Descriptor
array protocol</strong> </p>
 <p>This array defines an interface implemented by
all descriptor array classes, and hence provides a degree of polymorphism.
It provides a count function, and can return a <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> for
an indexed element. </p>
 <p>The interface is defined by <a href="GUID-B732E017-EFD5-36BD-B633-7DE2DC57FFA2.html"><span class="apiname">MDesCArray</span></a>. </p>
 <p><strong>General
descriptor array</strong> </p>
 <p>This array accepts elements of any descriptor
type. For each descriptor added, it creates a new heap descriptor (<a href="GUID-A103FB19-60B3-3E45-97A5-1F295934ACA1.html"><span class="apiname">HBufC</span></a>)
and copies the contents into it. </p>
 <p>The base class is <a href="GUID-1ABD9C74-01F0-3144-9E5C-550E83F4D424.html"><span class="apiname">CDesCArray</span></a>.
Derived classes provide storage in flat arrays (<a href="GUID-29384669-FFCE-38FC-A005-61163D99401D.html"><span class="apiname">CDesCArrayFlat</span></a>)
and segmented arrays (<a href="GUID-1B44227C-6F11-3A51-BE2C-8780319C6F72.html"><span class="apiname">CDesCArraySeg</span></a>). </p>
 <p><strong>Pointer
descriptor array</strong> </p>
 <p>This array holds only <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> descriptor
elements, that is, the descriptor type that points to data stored elsewhere.
The data pointed to by the <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> descriptors is not copied
or moved. </p>
 <p>The pointer descriptor array is <a href="GUID-FC3F3E4A-C86C-3DDB-B851-538BF20D5B27.html"><span class="apiname">CPtrCArray</span></a>.
It implements <a href="GUID-B732E017-EFD5-36BD-B633-7DE2DC57FFA2.html"><span class="apiname">MDesCArray</span></a>, and can be used polymorphically
with general descriptor arrays. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Array of non-modifiable pointer descriptor elements</h2> <p>The
array is supplied in two variants: </p>
 <ul>
<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-B55063AC-A34D-5156-B35A-085BADDD66B2"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-B55063AC-A34D-5156-B35A-085BADDD66B2"><!-- --></a><p>the 16-bit variant <a href="GUID-3A648EBA-DD13-31A8-863C-602D84E1913D.html"><span class="apiname">CPtrC16Array</span></a> containing <a href="GUID-8FE95467-D48B-3E61-9028-29C0F15F567E.html"><span class="apiname">TPtrC16</span></a> types. </p>
 </li>

<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-E51F01E9-4956-5E0A-A422-4A5A1E7B642C"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-E51F01E9-4956-5E0A-A422-4A5A1E7B642C"><!-- --></a><p>the 8-bit variant <a href="GUID-421D5F30-909F-39AC-A945-F1AE4B401E2F.html"><span class="apiname">CPtrC8Array</span></a> containing <a href="GUID-6DF731E4-5691-31C4-BEE0-03A3873F15EC.html"><span class="apiname">TPtrC8</span></a> types. </p>
 </li>

</ul>
 <p>The array is also supplied as a build independent type, <a href="GUID-FC3F3E4A-C86C-3DDB-B851-538BF20D5B27.html"><span class="apiname">CPtrCArray</span></a>.
This is used whenever the descriptor elements are used to represent text strings.
By using the build independent type, the appropriate variant, either 16-bit
or 8-bit, is selected at build time depending on whether the <samp class="codeph">_UNICODE</samp> macro
has been defined or not. </p>
 <p>Binary data always requires the 8-bit variant,
regardless of the build, and this should be explicitly used in program code. </p>
 <p>Explicit
use of the 16-bit variant is rare. </p>
 <p>The elements of this type of array
consist of non-modifiable pointer descriptors. These pointer descriptors represent
the data of the descriptors added to the array. The following diagram illustrates
this. The diagram is also true for <a href="GUID-6DF731E4-5691-31C4-BEE0-03A3873F15EC.html"><span class="apiname">TPtrC8</span></a> and <a href="GUID-8FE95467-D48B-3E61-9028-29C0F15F567E.html"><span class="apiname">TPtrC16</span></a>. </p>
 <div class="fignone" id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-AB7B77C5-31BC-5DD0-B1FC-D02436E18D14"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-AB7B77C5-31BC-5DD0-B1FC-D02436E18D14"><!-- --></a><span class="figcap">Figure 1.               Array of non-modifiable pointer descriptor elements 
          </span>

<img src="GUID-77EC9F20-32F4-5A1D-B183-75838EBA30B1_d0e222581_href.png"/>
</div>
 <p> <strong>NOTE:</strong> <a href="GUID-B24BD746-98D1-3837-B834-5C12D4D516FC.html"><span class="apiname">delete()</span></a> and <a href="GUID-FA50BA77-E578-3652-B1FB-AD2D0523CC17.html"><span class="apiname">reset()</span></a> removes
the non-modifiable pointer descriptors from the array but does <strong>not</strong> delete
the data or descriptors that they point to. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Array of pointer elements</h2> <p>The elements of this
type of array consist of <strong>pointers</strong> to heap descriptors. </p>
 <p>When
a descriptor is added to this type of array, a heap descriptor is allocated,
taking its data from the supplied descriptor. The pointer to this heap descriptor
is added as an array element. The following diagram illustrates this. The
diagram is also true for <a href="GUID-2A528453-0279-3E47-838C-F8A8D29B88F1.html"><span class="apiname">HBufC8</span></a> and <a href="GUID-3D3D9CD7-C8FD-3F81-9CC5-1A71D4F9751E.html"><span class="apiname">HBufC16</span></a>. </p>
 <div class="fignone" id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-D6B993E5-AF6B-5AD2-A30F-834C6815EFEF"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-D6B993E5-AF6B-5AD2-A30F-834C6815EFEF"><!-- --></a><span class="figcap">Figure 2.               Array of pointer elements            </span>

<img src="GUID-3853600F-A096-53A6-8E68-4815ED85FD05_d0e222628_href.png"/>
</div>
 <p>There are two implementations of the array, one using a flat buffer
and the other using a segmented buffer. </p>
 <p>The flat buffer implementation
is supplied in two variants: </p>
 <ul>
<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-8E031CC3-AC57-5882-A96A-40F041543714"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-8E031CC3-AC57-5882-A96A-40F041543714"><!-- --></a><p>the 16-bit variant implemented
using a flat buffer, a <a href="GUID-0DF28074-4B76-3767-9FD8-EADF36E3EA14.html"><span class="apiname">CDesC16ArrayFlat</span></a>, constructed from <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html"><span class="apiname">TDesC16</span></a> types. </p>
 </li>

<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-53DE0372-9FE8-55F8-A358-7062CA7FC37A"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-53DE0372-9FE8-55F8-A358-7062CA7FC37A"><!-- --></a><p>the 8-bit variant implemented
using a flat buffer, a <a href="GUID-A774AF80-82C3-3031-A197-5625DACD60FE.html"><span class="apiname">CDesC8ArrayFlat</span></a>, constructed from <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html"><span class="apiname">TDesC8</span></a> types. </p>
 </li>

</ul>
 <p>The segmented buffer implementation is supplied in two variants: </p>
 <ul>
<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-DAEB51F2-19D5-5BC8-95DA-0375AC759C57"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-DAEB51F2-19D5-5BC8-95DA-0375AC759C57"><!-- --></a><p>the 16-bit variant implemented
using a segmented buffer, a <a href="GUID-F2998F7B-DFB1-3EDA-A6FF-1F3B2065DE4D.html"><span class="apiname">CDesC16ArraySeg</span></a>, constructed
from <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html"><span class="apiname">TDesC16</span></a> types. </p>
 </li>

<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-0880573C-40D7-5C27-A2DB-5B9FF808E670"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-0880573C-40D7-5C27-A2DB-5B9FF808E670"><!-- --></a><p>the 8-bit variant implemented
using a segmented buffer, a <a href="GUID-DFC1F01A-A107-3C7F-883A-6C4F11859E1C.html"><span class="apiname">CDesC8ArraySeg</span></a>, constructed
from <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html"><span class="apiname">TDesC8</span></a> types. </p>
 </li>

</ul>
 <p>Both array implementations are also supplied as build independent
types, <a href="GUID-29384669-FFCE-38FC-A005-61163D99401D.html"><span class="apiname">CDesCArrayFlat</span></a> and <a href="GUID-1B44227C-6F11-3A51-BE2C-8780319C6F72.html"><span class="apiname">CDesCArraySeg</span></a>.
These are used whenever the descriptors are used to represent text strings.
By using the build independent types, the appropriate variants, either 16-bit
or 8-bit, are selected at build time depending on whether the <samp class="codeph">_UNICODE</samp> macro
has been defined or not. </p>
 <p>Binary data always requires the 8-bit variants,
regardless of the build, and this should be explicitly used in program code. </p>
 <p>Explicit
use of the 16-bit variants is rare. </p>
 <p> <strong>NOTE:</strong>  <a href="GUID-B24BD746-98D1-3837-B834-5C12D4D516FC.html"><span class="apiname">delete()</span></a> and <a href="GUID-FA50BA77-E578-3652-B1FB-AD2D0523CC17.html"><span class="apiname">reset()</span></a> removes
the pointers from the array and also deletes the heap descriptors that they
point to. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Type of array to be used</h2> <p>The advantages of using
one type over the other are subtle. </p>
 <p>When using an array of non-modifiable
pointer descriptors, the data represented by each <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> exists
independently of the <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> itself. The memory required
by the array is that required to contain the <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> elements.
The data represented by the <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> descriptors is not copied
or moved. On the other hand, that same data must be guaranteed to remain in
memory if the array is to have any purpose. </p>
 <p>When using an array of
pointers, a new heap descriptor is allocated for each descriptor to be added
to the array. This increases the total memory requirements of the array. On
the other hand, each array element is smaller because the size of a pointer
is slightly smaller than the size of a <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> object. The
original descriptor data can also be safely discarded once it has been added
to the array. </p>
 <p>This type also has the advantage that there is no commitment
to a concrete descriptor type. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Relationship between descriptor array classes</h2> <p>The
following diagram illustrates the relationship between the descriptor array
concrete classes and the base classes which support them. </p>
 <div class="fignone" id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-43444E8B-F2F5-539B-BA9D-EDF9B832DFD9"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-43444E8B-F2F5-539B-BA9D-EDF9B832DFD9"><!-- --></a><span class="figcap">Figure 3.               The class relationships for CDesCArrayFlat &amp; CDesCArraySeg
           </span>

<img src="GUID-B3166752-9B99-5669-8AB4-078164144AA1_d0e222782_href.png"/>
</div>
 <p> </p>
 <div class="fignone" id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-3BD4A73F-1E09-515A-9833-6D9592A98E97"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-3BD4A73F-1E09-515A-9833-6D9592A98E97"><!-- --></a><span class="figcap">Figure 4.               The class relationships for CPtrCArray            </span>

<img src="GUID-93678518-1FBD-521D-807A-63DA2E33551F_d0e222793_href.png"/>
</div>
 </div>

<div class="section" id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-9948A6D4-19A2-58A2-B2F1-73EC577E1B0B"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-9948A6D4-19A2-58A2-B2F1-73EC577E1B0B"><!-- --></a><h2 class="sectiontitle">Copying Descriptor
Arrays </h2> <p>An array of non-modifiable pointer descriptors, a <a href="GUID-FC3F3E4A-C86C-3DDB-B851-538BF20D5B27.html"><span class="apiname">CPtrCArray</span></a> type,
provides a function which can copy elements from any descriptor array. </p>
 <p>The
source descriptor array must be one which satisfies the protocol defined by
the <a href="GUID-B732E017-EFD5-36BD-B633-7DE2DC57FFA2.html"><span class="apiname">MDesCArray</span></a> mixin class. Add the new <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> elements
to the <a href="GUID-FC3F3E4A-C86C-3DDB-B851-538BF20D5B27.html"><span class="apiname">CPtrCArray</span></a> array to represent the source data. </p>
 <p>The
implementation of the copy does not and cannot depend on the type of the source
descriptor array,that is, whether it is a <a href="GUID-FC3F3E4A-C86C-3DDB-B851-538BF20D5B27.html"><span class="apiname">CPtrCArray</span></a> type
or a <a href="GUID-1ABD9C74-01F0-3144-9E5C-550E83F4D424.html"><span class="apiname">CDesCArray</span></a> type. However, the following diagram shows
the effect of the copy operation based on the concrete type of the source
array. </p>
 <div class="fignone" id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-E320FF9E-CBCA-597C-AE3B-8480A0829EF7"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-E320FF9E-CBCA-597C-AE3B-8480A0829EF7"><!-- --></a><span class="figcap">Figure 5.               Copying descriptor arrays            </span>

<img src="GUID-6FFEC753-4006-559C-B8E9-14940CFCD012_d0e222839_href.png"/>
</div>
 </div>

<div class="section" id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-009C368B-80E3-523B-BC4A-12BB90244CE1"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-009C368B-80E3-523B-BC4A-12BB90244CE1"><!-- --></a><h2 class="sectiontitle">8-Bit Variant,
16-Bit Variant and Build Independence</h2> <p>Descriptor arrays are supplied
in two variants: </p>
 <ul>
<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-7819B939-C7C0-5117-812D-B2D05D7650D4"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-7819B939-C7C0-5117-812D-B2D05D7650D4"><!-- --></a><p>the 16-bit variant for
16-bit descriptors. These descriptors are used for handling Unicode strings
and double byte valued data. </p>
 </li>

<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-A1DCAB83-37F6-51ED-8AEA-0EFE361BE107"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-A1DCAB83-37F6-51ED-8AEA-0EFE361BE107"><!-- --></a><p>the 8-bit variant for
8-bit variant descriptors. These descriptors are used for handling non-Unicode
strings and single byte valued data. (binary data). </p>
 </li>

</ul>
 <p>Descriptor arrays are also supplied as build independent types. These
are used for descriptors which are used to represent text strings. </p>
 <p>By
using build independent types, the appropriate variant, either 16-bit or 8-bit,
is selected at build time depending on whether the <samp class="codeph">_UNICODE</samp> macro
has been defined or not. </p>
 <p>Binary data always requires the 8-bit variant
regardless of the build, and it must be explicitly used in program code. Explicit
use of the 16-bit variant is rare. With a few exceptions, the behaviour of
both 8-bit and 16-bit variants is the same. </p>
 </div>

<div class="section" id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-A8D3CD4B-9069-5B98-ADBA-2272F597DE4D"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-A8D3CD4B-9069-5B98-ADBA-2272F597DE4D"><!-- --></a><h2 class="sectiontitle">The MDesCArray
mixin class</h2> <p>The <samp class="codeph">MDesCArray</samp> class is a mixin which
defines a protocol for: </p>
 <ul>
<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-21092598-F289-5A57-BA93-48F23EF788AF"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-21092598-F289-5A57-BA93-48F23EF788AF"><!-- --></a><p>returning the number
of elements in a descriptor array </p>
 </li>

<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-0FAE184F-6D54-5CFF-858C-2A75F70D3969"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-0FAE184F-6D54-5CFF-858C-2A75F70D3969"><!-- --></a><p>returning a non-modifiable
pointer descriptor, a <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> type representing a specific
indexed element. </p>
 </li>

</ul>
 <p>The use of the mixin permits a degree of polymorphism amongst the
descriptor array classes. It permits the number of descriptor array elements
to be returned and a <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> type for a specific descriptor
array element to be returned without knowing the specific concrete descriptor
array type being accessed. </p>
 <p id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-DA93F261-9E35-5073-AA06-3991B9B1AA35"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-DA93F261-9E35-5073-AA06-3991B9B1AA35"><!-- --></a><strong>MDesCArray
example</strong> </p>
 <p>The following code fragments illustrate how the <a href="GUID-B732E017-EFD5-36BD-B633-7DE2DC57FFA2.html"><span class="apiname">MDesCArray</span></a> mixin
class is used to return: </p>
 <ul>
<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-6262BE55-0B74-5779-AEB6-94357104051C"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-6262BE55-0B74-5779-AEB6-94357104051C"><!-- --></a><p>the number of descriptor
elements in a descriptor array. </p>
 </li>

<li id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-4D7F6F00-301C-534F-901E-85DB9847E9FF"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-4D7F6F00-301C-534F-901E-85DB9847E9FF"><!-- --></a><p>a <a href="GUID-5CD07A27-E3ED-3273-A560-680501468C91.html"><span class="apiname">TPtrC</span></a> representing
a specific indexed descriptor element. </p>
 </li>

</ul>
 <p>The code uses the build independent forms but the code is equally
valid while using the explicit 8-bit or 16-bit variants. </p>
 <p>In this case, <a href="GUID-29384669-FFCE-38FC-A005-61163D99401D.html"><span class="apiname">CDesCArrayFlat</span></a>, <a href="GUID-1B44227C-6F11-3A51-BE2C-8780319C6F72.html"><span class="apiname">CDesCArraySeg</span></a> and <a href="GUID-FC3F3E4A-C86C-3DDB-B851-538BF20D5B27.html"><span class="apiname">CPtrCArray</span></a> can be handled by the single function <samp class="codeph">foo()</samp>. </p>
 <pre class="codeblock" id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-83C3574E-9FA6-57A3-AD5E-58705C6F5A68"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-83C3574E-9FA6-57A3-AD5E-58705C6F5A68"><!-- --></a> ...
 CDesCArrayFlat* descflat = new( ELeave ) CDesCArrayFlat( 4 );
 CDesCArraySeg*  descseg  = new( ELeave ) CDesCArraySeg( 4 );
 CPtrCArray*     ptrc     = new( ELeave ) CPtrCArray( 4 );
 ...
 ... // add descriptor elements to all three arrays
 ...
 foo( descflat );
 foo( descseg );
 foo( ptrc );
 ...</pre>
 <pre class="codeblock" id="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-CF9F694C-2175-5DAF-9666-C34E097B9992"><a name="GUID-E8266924-FA52-5171-BD73-423A46227A74__GUID-CF9F694C-2175-5DAF-9666-C34E097B9992"><!-- --></a>void foo( MDesCArray* anArray )
    {
    ..
    TInt  somenumber = anArray-&gt;MdcaCount();
    TPtrC someptrc   = anArray-&gt;MdcaPoint( someindexvalue );
    ..
    }</pre>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-F61D1710-2D52-5B9B-A25F-6DFA606DAC0F.html">Basic Application Framework Library Concepts</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-685CF352-372F-5393-97AF-1FA17DC57BA8.html" title="Descriptor arrays provide normal array operations for inserting, appending, deleting, and accessing elements.">Constructing
descriptor                 arrays</a></div>
<div><a href="GUID-E3F403EE-717B-5EA6-BC4E-6840097CAC10.html">Using Dynamic
Arrays</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>