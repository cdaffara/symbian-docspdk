<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Converting between UTC and local time"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F0C71D6E-CAF1-49CC-A697-FC1A810DF1D5.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-237E0861-EC1B-41DA-BDB0-1DEB50620CC8.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F2487AEE-966E-472E-9162-E0400C9A8234.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7A16B6E1-16F7-41EC-ABCC-4A2BEBD66FFF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-043A9408-1A97-4122-9364-965ECC08B40F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-4FCF605D-52D9-5B2D-80CF-80C940F680CA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F0C71D6E-CAF1-49CC-A697-FC1A810DF1D5.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Converting between UTC and local time</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4"><a name="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2520040 id2380831 id2380852 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html">Generic Application Support Guide</a> &gt; <a href="GUID-4FCF605D-52D9-5B2D-80CF-80C940F680CA.html">Time Zone Services</a> &gt; <a href="GUID-F0C71D6E-CAF1-49CC-A697-FC1A810DF1D5.html">Time Zone Services Tutorials</a> &gt; </div>
<h1 class="topictitle1">Converting
between UTC and local time</h1>
<div>
<div class="section" id="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-9CB60EE8-93DA-473B-AF76-5DBFAEED0E09"><a name="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-9CB60EE8-93DA-473B-AF76-5DBFAEED0E09"><!-- --></a><h2 class="sectiontitle">Time zone ID</h2> 
     <p>Each time zone is uniquely identified by its time zone ID which is
a numeric reference or a name. The <samp class="codeph">CTzId</samp> class encapsulates
a time zone identifier. A time zone ID is created using the <a href="GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE.html#GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE__GUID-72A203C7-593F-34E3-9D7A-646D8A1E85D3"><span class="apiname">CTzId::NewL()</span></a> factory
method, for example: </p>
<pre class="codeblock">_LIT8( KAsiaHongKong,"Asia/Hong_Kong" ); //A valid time zone name
CTzId* zoneId = CTzId::NewL( KAsiaHongKong );</pre>
<p>The time zoneâ€™s
numeric ID or name can be retrieved using <a href="GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE.html#GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE__GUID-5165FA78-3EB8-3099-BA0A-EA727BF75AED"><span class="apiname">CTzId::TimeZoneNumericID()</span></a> or <a href="GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE.html#GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE__GUID-A9F74527-2885-326E-9516-FDE2AE8A0425"><span class="apiname">CTzId::TimeZoneNameID()</span></a> respectively.
 </p>
<p><samp class="codeph">operator==()</samp> and <samp class="codeph">operator!=()</samp> can
be used to check if the time zone ID matches or differs from another time
zone ID.  </p>
</div>

<div class="section" id="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-4A2ED95F-8697-47FF-A89A-0871449ADFEE"><a name="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-4A2ED95F-8697-47FF-A89A-0871449ADFEE"><!-- --></a><h2 class="sectiontitle">Converting
between UTC and local time</h2><p>You can convert between times expressed
in UTC and local time using either the <a href="GUID-37A4A4ED-FFF8-3C98-B028-EA1947EA7BEF.html"><span class="apiname">CTzConverter</span></a> or <samp class="codeph">RTz</samp> class.
 </p>
<p> <a href="GUID-37A4A4ED-FFF8-3C98-B028-EA1947EA7BEF.html"><span class="apiname">CTzConverter</span></a> does the conversion on the client
side by caching rules which it gets from the time zone server. This class
should be used for conversion between UTC and local time for the system time
zone, for performance reasons.   </p>
<p>If the conversion involves foreign
time zones, the <samp class="codeph">RTz</samp> class can be used instead.  </p>
<p> The
following types of time conversion are possible:  </p>
<ul>
<li id="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-0B4E9E64-99DB-4BF2-A0FF-E62508F8E54A"><a name="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-0B4E9E64-99DB-4BF2-A0FF-E62508F8E54A"><!-- --></a><p><a href="GUID-237E0861-EC1B-41DA-BDB0-1DEB50620CC8.html">UTC
to local time in any time zone</a></p>
</li>

<li id="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-B90DEC70-F232-43CD-AC8B-6D3D64090E2A"><a name="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-B90DEC70-F232-43CD-AC8B-6D3D64090E2A"><!-- --></a><p><a href="GUID-F2487AEE-966E-472E-9162-E0400C9A8234.html">UTC
to local time in the system time zone</a></p>
</li>

<li id="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-2CC49848-516F-4345-91A4-8DE97566E297"><a name="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-2CC49848-516F-4345-91A4-8DE97566E297"><!-- --></a><p><a href="GUID-7A16B6E1-16F7-41EC-ABCC-4A2BEBD66FFF.html">Local
time in the system time zone to UTC</a> </p>
</li>

<li id="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-474CB987-56DB-4596-AC9F-7333A8619A0F"><a name="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-474CB987-56DB-4596-AC9F-7333A8619A0F"><!-- --></a><p><a href="GUID-043A9408-1A97-4122-9364-965ECC08B40F.html">Local
time in any time zone to UTC</a></p>
</li>

</ul>
</div>

<div class="section" id="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-9B7F2465-48B5-40E5-A459-FFE839DEF58C"><a name="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-9B7F2465-48B5-40E5-A459-FFE839DEF58C"><!-- --></a><h2 class="sectiontitle">Setting the
local time </h2><p><a href="GUID-052221AD-916E-3E47-9510-AC0495A19A70.html#GUID-052221AD-916E-3E47-9510-AC0495A19A70__GUID-ED5486E0-392F-37C5-992F-16421560C49B"><span class="apiname">RTz::SetHomeTime()</span></a> sets the local
time in the system time zone:</p>
<pre class="codeblock">_LIT8( KMyTime, "20050105:103000.00" ); // Local time to set (5th January 2005 10:30 hrs).
TTime myTime( KMyTime ); //Create the time as a TTime object
TInt errCode = myTZoneServer.SetHomeTime( myTime );</pre>
<p>The <samp class="codeph">WriteDeviceData</samp> capability
is needed to set the system time.  </p>
</div>

<div class="section" id="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-12459F4B-EEF2-44DB-BB85-A180DA3FBD47"><a name="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-12459F4B-EEF2-44DB-BB85-A180DA3FBD47"><!-- --></a><h2 class="sectiontitle">Automatic UTC
offset</h2><p>Whenever DST begins or ends, the UTC offset needs to be updated
accordingly. This can be done automatically by calling <a href="GUID-052221AD-916E-3E47-9510-AC0495A19A70.html#GUID-052221AD-916E-3E47-9510-AC0495A19A70__GUID-7CF53489-5FF4-3665-8660-263433D8F090"><span class="apiname">RTz::SetAutoUpdateBehaviorL()</span></a>.
This function takes a value from the <samp class="codeph">TTzAutoDSTUpdateModes</samp> enum.
When set to <a href="GUID-C94A18B2-5652-3F2C-8D87-1B59A37E6122.html#GUID-C94A18B2-5652-3F2C-8D87-1B59A37E6122__GUID-0B745B98-814D-3157-9290-557339119877"><span class="apiname">TTzAutoDSTUpdateModes::ETZAutoDSTUpdateOn()</span></a>,
the UTC offset is automatically updated for changes to DST. </p>
</div>

<div class="section" id="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-BF084ED0-7E7C-4A5B-8BEF-9F809F1F1DC0"><a name="GUID-DF4D7DFF-ECA9-40CF-9F3B-4BBC3F8162E4__GUID-BF084ED0-7E7C-4A5B-8BEF-9F809F1F1DC0"><!-- --></a><h2 class="sectiontitle">See also</h2><p><a href="GUID-A0E21681-F1EF-4E79-965A-040AC7D72A01.html">Time zone conversion overview</a></p>
<p><a href="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13.html">timezoneconversion: Using
the time zone server</a></p>
</div>

</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-237E0861-EC1B-41DA-BDB0-1DEB50620CC8.html">Converting from UTC to local time in a non-system time zone</a></strong><br/>
</li>
<li class="ulchildlink"><strong><a href="GUID-F2487AEE-966E-472E-9162-E0400C9A8234.html">Converting from UTC to local time in the system time zone</a></strong><br/>
</li>
<li class="ulchildlink"><strong><a href="GUID-7A16B6E1-16F7-41EC-ABCC-4A2BEBD66FFF.html">Converting from local time for the system time zone to UTC</a></strong><br/>
</li>
<li class="ulchildlink"><strong><a href="GUID-043A9408-1A97-4122-9364-965ECC08B40F.html">Converting from any local time to UTC</a></strong><br/>
</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-F0C71D6E-CAF1-49CC-A697-FC1A810DF1D5.html">Time Zone Services Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>