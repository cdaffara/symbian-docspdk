<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Including the GPS/A-GPS PSY in ROM"/>
<meta name="abstract" content="This shows how to include the GPS/A-GPS PSY in a device ROM."/>
<meta name="description" content="This shows how to include the GPS/A-GPS PSY in a device ROM."/>
<meta name="DC.Relation" scheme="URI" content="GUID-E045124D-D0A3-538A-89D6-74349BF4B627.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-ADE2ED06-A4F8-5216-A6EF-294D6B4766F7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E045124D-D0A3-538A-89D6-74349BF4B627.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D0C20045-FCC5-53CB-BBDB-7AA058C9139E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5B39D732-7252-57EB-BA74-FC8718ED45E4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D18B4715-3942-52EA-9D2F-E145037FA47A.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Including the GPS/A-GPS PSY in ROM</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F"><a name="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403469 id2403680 id2403694 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html" title="The Data Source Modules collection contains components that enable the LBS subsystem to obtain position data.">Data Source Modules</a> &gt; <a href="GUID-ADE2ED06-A4F8-5216-A6EF-294D6B4766F7.html" title="The GPS/A-GPS PSY connects the Location Server to the A-GPS Location Manager.">GPS/A-GPS Positioning Module (PSY)</a> &gt; <a href="GUID-E045124D-D0A3-538A-89D6-74349BF4B627.html" title="This tutorial describes how to configure and use the GPS/A-GPS Positioning Module (GPS/A-GPS PSY).">GPS/A-GPS Positioning Module Tutorial</a> &gt; </div>
<h1 class="topictitle1">Including the GPS/A-GPS PSY in ROM</h1>
<div><p>This shows how to include the GPS/A-GPS PSY in a device ROM. </p>
<p>To use the GPS/A-GPS PSY in a device it must be installed in the device ROM. This document explains how to include the PSY in ROM using <samp class="codeph">buildrom</samp> macros. </p>
 <div class="section"><h2 class="sectiontitle">Introduction</h2> <p>The GPS/A-GPS PSY can be used to obtain position fixes using either autonomous GPS or assisted GPS (A-GPS). The GPS/A-GPS PSY ECom plug-in contains two PSY implementations: one that supports only autonomous GPS and one that supports assisted GPS. </p>
 <p>The PSY is packaged in a single library <span class="filepath">lbsgpsagpspsy.dll</span> that includes the PSY as a single ECom plug-in that contains two implementations of the PSY interface. </p>
 <p>The ROM build macros described in this document control which versions of the GPS/A-GPS ECom resource <samp class="codeph">.rsc</samp> files are copied to the ECom repository and which Central Repository <samp class="codeph">.cre</samp> initialisation files that define the PSY properties (as specified by the Positioning Plug-in Information API) are included. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Procedure</h2> <a name="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-62FFEB74-1850-5262-91CD-7C0632702FED"><!-- --></a><ol id="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-62FFEB74-1850-5262-91CD-7C0632702FED"><li id="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-676DD09E-6243-5A6E-94D5-33EEDA92CD3B"><a name="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-676DD09E-6243-5A6E-94D5-33EEDA92CD3B"><!-- --></a><p>To install and configure the GPS/A-GPS PSY to support both autonomous GPS and assisted GPS </p>
 <p>Use both macros <samp class="codeph">SYMBIAN_INCLUDE_LOCATION_GPS_PM</samp> and <samp class="codeph">SYMBIAN_INCLUDE_LOCATION_AGPS_PM</samp> when you build the LBS ROM. </p>
 <p>The example below shows how to configure the GPS/A-GPS PSY for autonomous and assisted GPS. You may need to specify additional macros depending on which other optional LBS components you also want to install. </p>
 <div class="p"><pre class="codeblock" id="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-63C7CB8B-EB08-5B91-A4BB-C5AE79FEF111"><a name="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-63C7CB8B-EB08-5B91-A4BB-C5AE79FEF111"><!-- --></a>
buildrom lbs.oby 
-DSYMBIAN_INCLUDE_LOCATION_API_VARIANT2
-DSYMBIAN_INCLUDE_LOCATION_AGPS_PM
-DSYMBIAN_INCLUDE_LOCATION_GPS_PM
</pre>
 </div>
 <p>The file <samp class="codeph">lbs.oby</samp> includes the .iby files necessary to build the LBS ROM (see <a href="GUID-5B39D732-7252-57EB-BA74-FC8718ED45E4.html" title="This section describes the ROM build macros that allow you to included or exclude LBS components from ROM.">LBS ROM macros</a> for more information about the LBS .iby files). The LBS .iby file <samp class="codeph">lbsgpsagpspsy.iby</samp> contains the commands to copy the GPS/A-GPS PSY DLL and all supporting files to the target build location: </p>
 <div class="p"><pre class="codeblock" id="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-4EF4B440-093C-56C7-AEFA-F735CA4EC64A"><a name="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-4EF4B440-093C-56C7-AEFA-F735CA4EC64A"><!-- --></a>
#ifndef __LBS_GPS_AGPS_ADAPTATION_PSY_IBY__
#define __LBS_GPS_AGPS_ADAPTATION_PSY_IBY__

#if !defined(SYMBIAN_EXCLUDE_LOCATION)
#if defined(SYMBIAN_INCLUDE_LOCATION_API_VARIANT2)


#if defined (SYMBIAN_INCLUDE_LOCATION_GPS_PM) &amp;&amp; defined(SYMBIAN_INCLUDE_LOCATION_AGPS_PM)
ECOM_PLUGIN(lbsgpsagpspsy.dll,lbsgpsagpspsy.rsc)
//__ECOM_PLUGIN(ABI_DIR\BUILD_DIR,ECOM_BIN_DIR,DATAZ_,ECOM_RSC_DIR,lbsgpsagpspsy.dll,lbsgpsagpspsy.dll)
#endif

#if defined(SYMBIAN_INCLUDE_LOCATION_GPS_PM) &amp;&amp; !defined(SYMBIAN_INCLUDE_LOCATION_AGPS_PM)
__ECOM_PLUGIN(ABI_DIR\BUILD_DIR,  ECOM_BIN_DIR,   DATAZ_\resource\gps, ECOM_RSC_DIR,     lbsgpsagpspsy.dll, 
    lbsgpsagpspsy.dll)
#endif

#if !defined(SYMBIAN_INCLUDE_LOCATION_GPS_PM) &amp;&amp; defined(SYMBIAN_INCLUDE_LOCATION_AGPS_PM)
__ECOM_PLUGIN(ABI_DIR\BUILD_DIR,  ECOM_BIN_DIR,   DATAZ_\resource\agps, ECOM_RSC_DIR,     lbsgpsagpspsy.dll,
     lbsgpsagpspsy.dll)
#endif

// GPS PSY resource and centrep
#if defined(SYMBIAN_INCLUDE_LOCATION_GPS_PM)
data=ZRESOURCE\lbsgpspsy_name.rsc                            resource\lbsgpspsy_name.rsc
data=EPOCROOT##epoc32\data\z\private\10202BE9\102869C7.cre    private\10202be9\102869C7.cre
#endif // SYMBIAN_INCLUDE_LOCATION_GPS_PM

// AGPS PSY resource and centrep
#if defined(SYMBIAN_INCLUDE_LOCATION_AGPS_PM)
data=ZRESOURCE\lbsagpspsy_name.rsc                            resource\lbsagpspsy_name.rsc
data=EPOCROOT##epoc32\data\z\private\10202BE9\10285abc.cre    private\10202be9\10285abc.cre
#endif // SYMBIAN_INCLUDE_LOCATION_AGPS_PM


#endif // SYMBIAN_INCLUDE_LOCATION_API_VARIANT2

#endif // SYMBIAN_EXCLUDE_LOCATION

#endif // __LBS_GPS_AGPS_ADAPTATION_PSY_IBY__
</pre>
 </div>
 <p>The macros are used to copy one of three different ECom resource file to the ECom registry. The file that is copied can specify that the DLL contains two PSY implementations for A-GPS and autonomous GPS, or only one implementation for either A-GPS or autonomous GPS. </p>
 <p>The files <samp class="codeph">102869C7.cre</samp> and <samp class="codeph">10285abc.cre</samp> are Central Repository initialisation files that define the values specified by the <a href="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html">Positioning Plug-in Information API</a> to register the PSY implementations with the LBS subsystem. File <samp class="codeph">102869C7.cre</samp> contains values for the GPS PSY implementation. File <samp class="codeph">10285abc.cre</samp> contains values for the A-GPS PSY implementation. See <a href="GUID-3319E01A-F500-5F5C-9798-351C6F3EC583.html" title="This shows how to modify the settings of the GPS/A-GPS PSY and the A-GPS Integration Module so that they do not conflict with each other.">Updating the GPS/A-GPS Central Repository Initialisation File</a> for an explanation of values you may have to change in these files. </p>
 </li>
 <li id="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-C59B1242-38C5-5404-9D68-065E80085BED"><a name="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-C59B1242-38C5-5404-9D68-065E80085BED"><!-- --></a><p>To install and configure the GPS/A-GPS PSY to support assisted GPS </p>
 <p>Use the macro <samp class="codeph">SYMBIAN_INCLUDE_LOCATION_AGPS_PM</samp> when you build the ROM. </p>
 <p>The example below shows how to configure the GPS/A-GPS PSY for assisted GPS. Note that you may need to specify additional macros depending on which other optional LBS components you also want to install. </p>
 <div class="p"><pre class="codeblock" id="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-4A98B688-13CA-5A04-AE90-916CA49BC442"><a name="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-4A98B688-13CA-5A04-AE90-916CA49BC442"><!-- --></a>
buildrom lbs.oby 
-DSYMBIAN_INCLUDE_LOCATION_API_VARIANT2
-DSYMBIAN_INCLUDE_LOCATION_AGPS_PM
</pre>
 </div>
 </li>
 <li id="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-BF14E3C5-C8DC-5607-B37E-6554C841A4DF"><a name="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-BF14E3C5-C8DC-5607-B37E-6554C841A4DF"><!-- --></a><p>To install and configure the GPS/A-GPS PSY to support only autonomous GPS </p>
 <p>Use the macro <samp class="codeph">SYMBIAN_INCLUDE_LOCATION_GPS_PM</samp> when you build the ROM. </p>
 <p>The example below shows how to configure the GPS/A-GPS PSY for autonomous GPS only. Note that you may need to specify additional macros depending on which other optional LBS components you also want to install. </p>
 <div class="p"><pre class="codeblock" id="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-2A666A38-6A2E-55CE-8F25-6AE98E7EE53E"><a name="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-2A666A38-6A2E-55CE-8F25-6AE98E7EE53E"><!-- --></a>
buildrom lbs.oby 
-DSYMBIAN_INCLUDE_LOCATION_API_VARIANT2
-DSYMBIAN_INCLUDE_LOCATION_GPS_PM
</pre>
 </div>
 </li>
 </ol>
 </div>
 <div class="section"><h2 class="sectiontitle"> To use the GPS/A-GPS PSY in an emulator </h2> <p>The LBS code build process uses the project file <samp class="codeph">lbsgpsagpspsy.mmp</samp> to build the GPS/A-GPS code. This MMP file contains the following commands to copy ECom registration information to the winscw directory: </p>
 <pre class="codeblock" id="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-B3F4E248-320B-5C73-8002-4B052AAB9058"><a name="GUID-9BB4A44E-6870-5A25-8EA8-0B0F1565213F__GUID-B3F4E248-320B-5C73-8002-4B052AAB9058"><!-- --></a>
START RESOURCE  ../data/10285abb.rss
TARGETPATH /resource/plugins
TARGET lbsgpsagpspsy.rsc
</pre>
 <p>These commands compile and copy the ECom registration information from the resource source file <samp class="codeph">10285abb.rss</samp>, which specifies both the A-GPS and GPS implementations in the library. Therefore on an emulator, the GPS/A-GPS PSY can be used for both A-GPS and autonomous GPS position fixes. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-E045124D-D0A3-538A-89D6-74349BF4B627.html" title="This tutorial describes how to configure and use the GPS/A-GPS Positioning Module (GPS/A-GPS PSY).">GPS/A-GPS Positioning Module Tutorial</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-D0C20045-FCC5-53CB-BBDB-7AA058C9139E.html" title="This document describes the GPS/A-GPS PSY, which connects the Location Server eposserver.exe to the A-GPS Location Manager.">GPS/A-GPS PSY Overview</a></div>
<div><a href="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html">Positioning Plug-in Information API</a></div>
<div><a href="GUID-5B39D732-7252-57EB-BA74-FC8718ED45E4.html" title="This section describes the ROM build macros that allow you to included or exclude LBS components from ROM.">LBS ROM
                macros</a></div>
<div><a href="GUID-D18B4715-3942-52EA-9D2F-E145037FA47A.html" title="The documents in this section describe the tasks necessary to build and configure the LBS subsystem. These documents are for device creators.">LBS
                Integration and Configuration guide</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>