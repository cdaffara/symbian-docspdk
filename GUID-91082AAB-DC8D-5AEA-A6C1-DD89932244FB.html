<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Terminate a Call Tutorial"/>
<meta name="abstract" content="This tutorial describes how to terminate a call with the telephony API for applications."/>
<meta name="description" content="This tutorial describes how to terminate a call with the telephony API for applications."/>
<meta name="DC.Relation" scheme="URI" content="GUID-844C335C-E8FD-5DF8-8E05-7DB1DF4C3360.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0F647342-E069-5444-9370-58520375543A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7C197DC1-43CA-5146-B81D-36B685A1D0C9.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-844C335C-E8FD-5DF8-8E05-7DB1DF4C3360.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-42B10CBF-D45A-580F-A639-E2495FF3B4F3.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Terminate a Call Tutorial</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB"><a name="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2563496 id2562267 id2562189 id2562145 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93.html" title="Cellular Baseband Services provide a common interface to telephony services for applications and higher level platform components. The framework is independent of the underlying network services.">Cellular Baseband Services Guide</a> &gt; <a href="GUID-0F647342-E069-5444-9370-58520375543A.html" title="The Telephony Utilities is a collection of components that provides small utility libraries related to telephony. The collection also includes the component that implements the telephony API for applications.">Telephony Utilities</a> &gt; <a href="GUID-7C197DC1-43CA-5146-B81D-36B685A1D0C9.html" title="The telephony API gives applications access to Telephony services.">Telephony API for Applications</a> &gt; <a href="GUID-844C335C-E8FD-5DF8-8E05-7DB1DF4C3360.html" title="This section provides the tutorials related to calls.">Call Tutorials</a> &gt; </div>
<h1 class="topictitle1">Terminate
a Call Tutorial </h1>
<div><p>This tutorial describes how to terminate a call with the telephony
API for applications. </p>

<div class="section"><div class="p">The procedure for terminating incoming calls is the same whether
there is a second call in progress or not. When you have two calls in progress,
one will always be <strong>active</strong> while the other will always be <strong>on hold</strong>.
You can either:<ul>
<li><p>terminate an <strong>on-hold</strong> call and then you will be left with an
active call</p>
</li>

<li><p>terminate an <strong>active</strong> call and then you will be left with a call
on hold; the on-hold call does <strong>not</strong> become active. You can make it active
with <a href="GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html#GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A__GUID-EFF39B1C-4685-3E79-93B3-5D0FB5AFAD02"><span class="apiname">CTelephony::Resume()</span></a></p>
</li>

</ul>
</div>
</div>


<a name="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-BEA74BFB-57B5-5542-87EC-6665695B8557"><!-- --></a><ol id="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-BEA74BFB-57B5-5542-87EC-6665695B8557"><li class="stepexpand" id="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-2B9D7115-E851-52A4-BD2E-A43351BEF456"><a name="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-2B9D7115-E851-52A4-BD2E-A43351BEF456"><!-- --></a><span/><br/>
 create a new instance of <a href="GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><span class="apiname">CTelephony</span></a>  
</li>
<li class="stepexpand" id="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-DEAFC2E4-C540-5274-B7D6-711C9A33ED14"><a name="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-DEAFC2E4-C540-5274-B7D6-711C9A33ED14"><!-- --></a><span/><br/>
 use <a href="GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><span class="apiname">CTelephony::Hangup()</span></a> terminates
a call. 
 Pass it the ID of the call to terminate. The ID is the <a href="GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><span class="apiname">CTelephony::TCallId</span></a> returned
when you dialled or answered the call 
</li>
<li class="stepexpand" id="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-D7C8BE37-8AC8-5A61-963C-CAB33C347251"><a name="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-D7C8BE37-8AC8-5A61-963C-CAB33C347251"><!-- --></a><span/><br/>
 pass the enumeration <a href="GUID-97D402C8-B4B7-385A-92B3-D3FCC0CA575A.html"><span class="apiname">CTelephony::EHangupCancel</span></a> to
cancel it 
 Use <samp class="codeph">CTelephony::Hangup()</samp> to terminate either call when
you have two call in progress. Pass it the ID of the call you wish to terminate.
To terminate them both, call the method twice with the two IDs.
</li>
</ol>

<div class="example" id="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-180B550B-0A93-5445-B6AC-2CA8D3D17528"><a name="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-180B550B-0A93-5445-B6AC-2CA8D3D17528"><!-- --></a><h2 class="sectiontitle">Call termination
example</h2> <pre class="codeblock" id="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-DC840EA0-D367-5773-9716-090B313F0E0D"><a name="GUID-91082AAB-DC8D-5AEA-A6C1-DD89932244FB__GUID-DC840EA0-D367-5773-9716-090B313F0E0D"><!-- --></a>#include &lt;e32base.h&gt;
#include &lt;Etel3rdParty.h&gt;

class CClientApp : public CActive
    { 

private:
    CTelephony* iTelephony;
    CTelephony::TCallId iCallId;

public:
    CClientApp(CTelephony* aTelephony, CTelephony::TCallId aCallId);
    void SomeFunction();

private:
    /*
       These are the pure virtual methods from CActive that  
       MUST be implemented by all active objects
       */
    void RunL();
    void DoCancel();
   };

CClientApp::CClientApp(CTelephony* aTelephony, CTelephony::TCallId aCallId)
    : CActive(EPriorityStandard),
      iTelephony(aTelephony),
      iCallId(aCallId)
    {
    //default constructor
    }

void CClientApp::SomeFunction()
    {
    iTelephony-&gt;Hangup(iStatus, iCallId);
    SetActive();
    }

void CClientApp::RunL()
    {
    if(iStatus==KErrNone)
       {} // The call has been terminted successfully;
    }

void CClientApp::DoCancel()
    {
    iTelephony-&gt;CancelAsync(CTelephony::EHangupCancel);
    }</pre>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-844C335C-E8FD-5DF8-8E05-7DB1DF4C3360.html" title="This section provides the tutorials related to calls.">Call Tutorials</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-42B10CBF-D45A-580F-A639-E2495FF3B4F3.html" title="This tutorial describes how to detect when a caller at the remote end of the connection has terminated a call with the telephony API for applications.">Remote Call
                Termination Tutorial</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>