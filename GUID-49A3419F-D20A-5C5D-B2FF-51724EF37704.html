<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Prevent Database File Corruption"/>
<meta name="DC.Relation" scheme="URI" content="GUID-831F9AA3-0209-53DC-96C4-04157F22870C.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F8824165-4B33-50D1-9706-BD2438B5A2EE.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-868D5B32-1CC4-506E-9C49-C86428B9A50F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C6D3827F-8F73-593E-A339-B510EEB9771F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-831F9AA3-0209-53DC-96C4-04157F22870C.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-22844C28-AB5B-5A6F-8863-7269464684B4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-78773BCA-ADF6-53E6-AC80-5CB2AE1F8BCC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E51836E1-D33E-506C-B75B-19B8E3CC313A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1F12E3F5-45B2-55EC-B021-00338277C608.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-43CA02E7-0101-5824-B91B-E15EE20C829A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C2FAEBB2-4A1A-5BB0-9670-4801525CBC6A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B994E6F7-228A-5433-B87F-91857C5D93D6.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-4FC23DB7-4758-5DA4-81FF-0DAB169E2757.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2A2920E0-5D40-5358-BC0C-8572CEFE078C.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-126FCCCC-0E7D-59AE-959A-2F94A7319C4B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-ACCCB148-DAF9-59EC-B585-8EF632B9BF04.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B7E978C1-45CA-554C-8028-D901B97BA2E0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-AF5A75D7-0687-546C-87B2-0B7DF7D33217.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Prevent Database File Corruption</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704"><a name="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2859821 id2860178 id2534422 id2534459 id2534479 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html" title="Provides services to enable and support persistence.">Persistent Data Services Guide</a> &gt; <a href="GUID-F8824165-4B33-50D1-9706-BD2438B5A2EE.html" title="The persistent storage collection.">Persistent Storage</a> &gt; <a href="GUID-868D5B32-1CC4-506E-9C49-C86428B9A50F.html" title="The Symbian SQL component.">Symbian SQL</a> &gt; <a href="GUID-C6D3827F-8F73-593E-A339-B510EEB9771F.html">SQL Concept Guides</a> &gt; <a href="GUID-831F9AA3-0209-53DC-96C4-04157F22870C.html" title="This topic discusses tips for SQL developers.">SQL Developer Tips</a> &gt; </div>
<h1 class="topictitle1">Prevent
Database File Corruption</h1>
<div>
<p>This guide describes how databases might be corrupted. </p>

<div class="section" id="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-5C9649BC-EB5A-4528-87AA-ECAB64D62467"><a name="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-5C9649BC-EB5A-4528-87AA-ECAB64D62467"><!-- --></a><h2 class="sectiontitle">Introduction</h2> <p>Although SQLite is very resistant
to database corruption, thanks to the atomic features, it is still possible
for a database file to become corrupt. By understanding the known ways of
corrupting a SQLite database, you can make sure you avoid them. </p>
 <p><strong>Intended
audience:</strong> </p>
 <p>This document is intended to be used by Symbian platform
licensees and third party application developers. </p>
 </div>

<div class="section" id="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-E921DD90-259E-5843-80FF-C5D85BB7545C"><a name="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-E921DD90-259E-5843-80FF-C5D85BB7545C"><!-- --></a><h2 class="sectiontitle">Avoid Corrupting
your Database Files</h2> <p>One of the key benefits of using an atomic
and durable database engine is that you can be responsibly confident that
the database will not be corrupted by application crashes or power failures.
SQLite is very resistant to database corruption but it is possible to corrupt
a database. This section will describe all of the known techniques for corrupting
a SQLite database so that you can make sure you avoid them. </p>
 <p>The following
database corruption situations will be discussed here: </p>
 <ul>
<li id="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-952C9192-E349-5B34-860C-A19B874BFC0F"><a name="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-952C9192-E349-5B34-860C-A19B874BFC0F"><!-- --></a><p>Hardware failure --
beyond the control of SQLite </p>
 </li>

<li id="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-55D027FD-912D-5114-8E85-2AEC56CCBC4E"><a name="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-55D027FD-912D-5114-8E85-2AEC56CCBC4E"><!-- --></a><p>System Crash -- when
rollback journal exists </p>
 </li>

<li id="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-7070E8B3-C218-5E6F-AAAB-7EE4479C196E"><a name="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-7070E8B3-C218-5E6F-AAAB-7EE4479C196E"><!-- --></a><p>post crash application
recovery </p>
 </li>

<li id="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-5D2454C9-075B-5A15-B736-94F1E9188D03"><a name="GUID-49A3419F-D20A-5C5D-B2FF-51724EF37704__GUID-5D2454C9-075B-5A15-B736-94F1E9188D03"><!-- --></a><p>hot journal name conflict </p>
 </li>

</ul>
 <p>A SQLite database is just an ordinary file in the file system. If
the database is placed in a publicly accessible location then any process
can open that file and write nonsense into the middle of it, corrupting the
database. Similarly, an operating system malfunction or a hardware fault can
cause invalid data to be written into the database file. Both of these issues
are beyond the control of SQLite or of application developers. We only mention
them here for completeness. </p>
 <p>After a power loss or system crash and
subsequent system reboot, a rollback journal file will be found in the same
directory as the original database. The presence of this rollback journal
file is the signal to subsequent users that the database is in an inconsistent
state and needs to be restored (by playing back the journal) before it is
used. A rollback journal file that is left over after a crash is called a
“hot journal”. </p>
 <p>If after a post-crash reboot some kind application
recovery occurs which deletes, renames, or moves a hot journal, then SQLite
will have no way of knowing that a hot journal existed. It will not know that
the database is in an inconsistent state and will have no way to restore it.
Deleting or renaming a hot journal will result in a corrupted database nearly
every time. </p>
 <p>The name of the hot journal is related to the name of
the original database file. If the database file is renamed this means that
SQLite will not see the hot journal based on the original name, no database
recovery will be undertaken and the database will become corrupt. </p>
 <p>These
are all of the known ways for corrupting a SQLite database file, and as you
can see, none of these ways are easy to achieve. SQLite databases have proven
to be remarkably reliable and trouble-free. By avoiding the above situations
you can ensure that your databases will be safe and intact even after system
crashes and untimely power failures. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-831F9AA3-0209-53DC-96C4-04157F22870C.html" title="This topic discusses tips for SQL developers.">SQL Developer Tips</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-22844C28-AB5B-5A6F-8863-7269464684B4.html" title="This document introduces you to the Symbian platform implementation of the Structured Query Language(SQL).">SQL Overview</a></div>
<div><a href="GUID-78773BCA-ADF6-53E6-AC80-5CB2AE1F8BCC.html" title="This topic introduces you to the SQL server.">SQL Server
Guide</a></div>
<div><a href="GUID-1F12E3F5-45B2-55EC-B021-00338277C608.html" title="Used to access and query relational databases using the SQL query language.">SQL DB Overview</a></div>
<div><a href="GUID-43CA02E7-0101-5824-B91B-E15EE20C829A.html" title="This guide gives advice for avoiding the use of transient tables.">Avoid Transient
Tables</a></div>
<div><a href="GUID-C2FAEBB2-4A1A-5BB0-9670-4801525CBC6A.html" title="This document includes several tips for using SQL indexes.">SQL Index
Tips</a></div>
<div><a href="GUID-B994E6F7-228A-5433-B87F-91857C5D93D6.html" title="This guide provides some tips for using COMMIT statements.">SQL Insertion
Tips</a></div>
<div><a href="GUID-4FC23DB7-4758-5DA4-81FF-0DAB169E2757.html" title="This guide gives tips for using the database schema.">SQL Schema
Tips</a></div>
<div><a href="GUID-2A2920E0-5D40-5358-BC0C-8572CEFE078C.html" title="This document explains how the optimizer changes expressions.">SQL Expressions</a></div>
<div><a href="GUID-126FCCCC-0E7D-59AE-959A-2F94A7319C4B.html" title="This guide provides tips for using certain SQL statements.">SQL Statement
Tips</a></div>
<div><a href="GUID-ACCCB148-DAF9-59EC-B585-8EF632B9BF04.html" title="This guide explains how to use CROSS JOIN phrases to override the optimizer's ordering of tables.">SQL Joins</a></div>
<div><a href="GUID-B7E978C1-45CA-554C-8028-D901B97BA2E0.html" title="This guide gives details of how to use the ANALYZE command to help the optimizer."> ANALYZE
Command</a></div>
<div><a href="GUID-AF5A75D7-0687-546C-87B2-0B7DF7D33217.html" title="This guide provides tips for using the WHERE clause."> SQL WHERE
CLause Tips</a></div>
</div>
<div class="relinfo"><strong>Related information</strong><br/>
<div><a href="GUID-E51836E1-D33E-506C-B75B-19B8E3CC313A.html">SQLite</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>