<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Using a FAT Filename Conversion Plug-in"/>
<meta name="abstract" content="This section describes how to dynamically load and call a FAT Filename Conversion plug-in to convert file names between Unicode and Windows code page."/>
<meta name="description" content="This section describes how to dynamically load and call a FAT Filename Conversion plug-in to convert file names between Unicode and Windows code page."/>
<meta name="DC.Relation" scheme="URI" content="GUID-F4320746-68DF-50B6-817A-24E46DFBF77B.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1DCA2F4D-ABE6-52A0-AC4E-5AAC1AB5909D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F3406651-0B57-50FD-81CA-A3D4000D5625.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0584846D-D4D9-5093-8FE5-764CCFBA813F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F4320746-68DF-50B6-817A-24E46DFBF77B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-026E865E-12FA-59A9-B923-309B65790E23.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Using a FAT Filename Conversion Plug-in</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE"><a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2535736 id2436351 id2436552 id2436566 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-1DCA2F4D-ABE6-52A0-AC4E-5AAC1AB5909D.html">Text and Localization Guide</a> &gt; <a href="GUID-F3406651-0B57-50FD-81CA-A3D4000D5625.html">Character Conversion (Charconv) Framework Collection</a> &gt; <a href="GUID-0584846D-D4D9-5093-8FE5-764CCFBA813F.html">FAT Filename Conversion Plug-ins</a> &gt; <a href="GUID-F4320746-68DF-50B6-817A-24E46DFBF77B.html">FAT Filename Conversion Plug-ins Tutorials</a> &gt; </div>
<h1 class="topictitle1">Using
a FAT Filename Conversion Plug-in</h1>
<div><p>This section describes how to dynamically load and call a FAT Filename
Conversion plug-in to convert file names between Unicode and Windows code
page. </p>

<div class="p"><p>This tutorial assumes that you have an understanding of the following: </p>
 <ul>
<li id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-DB5761AA-9988-5D61-B42B-9DA5AF0B154B"><a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-DB5761AA-9988-5D61-B42B-9DA5AF0B154B"><!-- --></a><p><a href="GUID-66231EA2-BDEF-582D-A4B9-F356B590038D.html">FAT
Filename Conversion Plug-ins Overview</a> introduces Windows code page
and the main purpose of the Plug-ins component. </p>
 </li>

</ul>
 </div>

<a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-FA2D288A-1D18-504A-86EA-C89876400630"><!-- --></a><ol id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-FA2D288A-1D18-504A-86EA-C89876400630"><li class="stepexpand" id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-3706C5D9-0767-528C-A071-7597C8EE8780"><a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-3706C5D9-0767-528C-A071-7597C8EE8780"><!-- --></a><span>Load
the FAT Filename Conversion plug-in DLL. </span>
 <pre class="codeblock" id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-996C058A-7F99-5B20-A6D3-027DB9722421"><a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-996C058A-7F99-5B20-A6D3-027DB9722421"><!-- --></a>_LIT(KName,"cp1250");  //The name of the plug-in DLL
const TUid KPluginUid={0x10206A9C}; //DLL UID acquired from Symbian
RLibrary lib;

//Encapsulate the UID of this DLL in TUidType.
const TUidType serverUid(KNullUid,KNullUid,KPluginUid);    

//load the DLL
User::LeaveIfError(lib.Load(KName,serverUid));</pre>
 
 <p>In this example, <span class="filepath">cp1250.dll</span> is dynamically loaded.
A function is then called to convert a character from Unicode to CP1250.  </p>

</li>
<li class="stepexpand" id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-3DB9A9F0-244D-5037-82DA-458C89EF80F2"><a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-3DB9A9F0-244D-5037-82DA-458C89EF80F2"><!-- --></a><span/><br/>
 Get the exported function from the DLL. 
 <pre class="codeblock" id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-F85F30A1-C528-5299-AC35-E698CB350771"><a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-F85F30A1-C528-5299-AC35-E698CB350771"><!-- --></a>// Function at ordinal 1 converts text from a Unicode to CP1250.
TLibraryFunction function1 = lib.Lookup(1);

typedef void (*TConvertFromUnicodeL)(TDes8&amp;, const TDesC16&amp;);    
TConvertFromUnicodeL aConvertFromUnicodeL = 
                            reinterpret_cast &lt;TConvertFromUnicodeL&gt; (function1);</pre>
 
</li>
<li class="stepexpand" id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-CD49317B-9C3D-565C-B31E-0471109FA1A7"><a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-CD49317B-9C3D-565C-B31E-0471109FA1A7"><!-- --></a><span/><br/>
 Call the function to convert the text from Unicode to CP1250. 
 <pre class="codeblock" id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-2259D92B-5BAA-503D-9E80-6B19A38B8877"><a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-2259D92B-5BAA-503D-9E80-6B19A38B8877"><!-- --></a>TBuf8&lt;15&gt; foreign1;
_LIT16(Uni_1, "\x0053\x0059\x004D\x0042\x0049\x0041\x004E\xFFFD\x20AC\x02C7\x2015");
const TDesC16&amp; unicode1(Uni_1);
(*aConvertFromUnicodeL)(foreign1, unicode1);
...</pre>
 
</li>
<li class="stepexpand" id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-7E911758-4430-5507-829F-6096564611F2"><a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-7E911758-4430-5507-829F-6096564611F2"><!-- --></a><span/><br/>
 Close the DLL. 
 <pre class="codeblock" id="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-59C882FD-A92F-518C-B69D-F1C0FB151B3A"><a name="GUID-2068DA42-AE77-5213-B3CF-C3AB7F2188BE__GUID-59C882FD-A92F-518C-B69D-F1C0FB151B3A"><!-- --></a>lib.Close();</pre>
 
</li>
</ol>

<div class="section"><p>The parameter <samp class="codeph">foreign1</samp> is returned with the value <samp class="codeph">"\0x53\0x59\0x4D\0x42\0x49\0x41\0x4E\0x81\0x80\0xA1\0x5F"</samp> which is in the CP1250 encoding. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-F4320746-68DF-50B6-817A-24E46DFBF77B.html">FAT Filename Conversion Plug-ins Tutorials</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-026E865E-12FA-59A9-B923-309B65790E23.html" title="This section describes how to create a FAT Filename Conversion plug-in DLL.">Creating
a FAT Filename Conversion                 Plug-in</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>