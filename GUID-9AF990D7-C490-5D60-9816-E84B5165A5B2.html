<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="BIO Watcher Overview"/>
<meta name="DC.Relation" scheme="URI" content="GUID-76DBAFEB-B0A0-5BF1-BAA1-2053CFA1FDC7.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-76DBAFEB-B0A0-5BF1-BAA1-2053CFA1FDC7.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>BIO Watcher Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2"><a name="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2404348 id2404397 id2405014 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html">Messaging Middleware Guide</a> &gt; <a href="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html">Messaging Framework</a> &gt; <a href="GUID-76DBAFEB-B0A0-5BF1-BAA1-2053CFA1FDC7.html">BIO Watcher</a> &gt; </div>
<h1 class="topictitle1">BIO
Watcher Overview</h1>
<div>
<p>The BIO Watcher component is part of the Watcher Framework that handles
BIO messages that come from the SMS and WAP stack. </p>

<div class="section" id="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-A69FED58-8F99-4F6A-8F30-587AB6FA1A7A"><a name="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-A69FED58-8F99-4F6A-8F30-587AB6FA1A7A"><!-- --></a><h2 class="sectiontitle">Purpose</h2> <p>To handle BIO messages that come from the
SMS stack and WAP stack. </p>
 </div>

<div class="section" id="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-5FF9CFB3-34FE-46BF-B91C-24CFA2F423A7"><a name="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-5FF9CFB3-34FE-46BF-B91C-24CFA2F423A7"><!-- --></a><h2 class="sectiontitle">Key terms</h2> <dl>

<dt class="dlterm">Replace-type-messages</dt>

<dd><p>Replace-type-messages are SMS messages received from the service centre,
where the protocol identifier contains a <strong>Replace Short Message Type</strong> code. </p>
 </dd>



<dt class="dlterm">BIO message</dt>

<dd><p>Bearer Independent Objects (BIO) messages contain data that can be
received and interpreted by the device, see <a href="GUID-17DE7D55-00C9-5D40-8AE4-39BDB20FCC5B.html">BIO
Watcher Framework</a> for more details. </p>
 </dd>


</dl>
 </div>

<div class="section" id="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-0FEFAE52-D59F-42CF-AEA4-80CCEE26E7D5"><a name="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-0FEFAE52-D59F-42CF-AEA4-80CCEE26E7D5"><!-- --></a><h2 class="sectiontitle">Architecture</h2> <p>BIO Watcher is made of two watchers—NBS
Watcher and WAP Watcher. The Watcher Framework supports both of them. </p>
 <p> <strong>NBS
watcher:</strong> The NBS watcher handles the reception of SMS messages. When initialised
by Watcher Framework, the watcher queries the BIO Messaging database for BIO
messages that are of type <samp class="codeph">ENbs</samp>. For each of these BIO messages,
the watcher creates an object that opens a connection to the SMS stack and
waits for the particular message type. The message types are either defined
by the port number that the message is received on or by a string to watch
for at the start of the message. </p>
 <p>When the NBS Watcher receives a non-class
2 SMS message, it creates a new entry under the global inbox in the Message
Store. For class 2 messages, the entry is created in the class 2 folder as
defined by the SMS settings, which can be the global inbox. The details field
of the entry is used to store the phone number of the incoming message or
the name of the sender (provided if the watcher finds a match for the phone
number in the contacts database). The description field is used to store the
first N characters of the SMS message, where N is defined in the SMS settings,
or for BIO messages, the description as retrieved from the BIO database. BIO
messages also have the <samp class="codeph">BioType</samp> field set to the UID of the
BIO message as retrieved from the BIO database. The <a href="GUID-790D9BA9-2FB7-3073-AF2F-FFD049C3FD3D.html"><span class="apiname">CSmsHeader</span></a> class,
which is a wrapper around the <a href="GUID-FA6D9B1B-3845-3B81-ACBB-34977D3C9631.html"><span class="apiname">CSmsMessage</span></a> class provided
by the SMS Stack component, is used to externalise the SMS message to the
entry’s <a href="GUID-8CB90FA2-A6CF-3FA2-81FF-7D22EFD9C2CE.html"><span class="apiname">CMsvStore</span></a>. The watcher also places a copy of the
body text of the message in the rich text stream of the entry’s <a href="GUID-8CB90FA2-A6CF-3FA2-81FF-7D22EFD9C2CE.html"><span class="apiname">CMsvStore</span></a>. </p>
 <p>The
NBS Watcher is also responsible for handing the following special SMS types: </p>
 <ul>
<li id="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-ED0F0075-FEF7-5195-B4E3-92A228830838"><a name="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-ED0F0075-FEF7-5195-B4E3-92A228830838"><!-- --></a><p> <strong>Replace type messages:</strong> When
the watcher receives a replace type message, it scans the folder (where the
message is delivered to) for messages that have a matching protocol ID and
from address. For each of the messages, it checks the time stamps from the
service centre and discards the older message. </p>
 </li>

<li id="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-6BD849B6-045C-5E67-B31F-5202302A6EA1"><a name="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-6BD849B6-045C-5E67-B31F-5202302A6EA1"><!-- --></a><p> <strong>Message indications:</strong> The
watcher can listen for incoming message waiting indications. The <a href="GUID-A9FE5C23-4F39-345E-873B-682D9807BAA0.html"><span class="apiname">CSmsSettings</span></a> class
defines whether the watcher listens and delivers the messages to the Inbox
or discards them. If the watcher is configured to listen for messages, it
uses the SMS utilities in the SMS Client MTM to decode the message to determine
the notification type and number of messages. </p>
 </li>

<li id="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-2884C04E-161F-5E02-92BC-0295240167E5"><a name="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-2884C04E-161F-5E02-92BC-0295240167E5"><!-- --></a><p> <strong>Delivery reports:</strong> The
watcher can be configured to listen to the delivery reports. The SMS utilities
get a string from the <span class="filepath">SMSs.rss</span> resource file to generate
descriptions and details fields to store with SMS messages. </p>
 </li>

</ul>
 <p> <strong>WAP watcher:</strong> The WAP watcher listens for incoming messages
from the WAP stack using the WAP Message API. To determine ports to listen
for messages, the watcher queries the BIO database for BIO message types—<samp class="codeph">EWsp</samp>, <samp class="codeph">EWspSecure</samp>, <samp class="codeph">EWap</samp>, <samp class="codeph">EWapSecure</samp> and registers them as an observer of the BIO
database. It listens for new BIO message with these types when they are added.
The watcher stores the messages in the global inbox tagged with the BIO type
listed in the BIO database. </p>
 <p> <strong>Note:</strong> The Symbian
platform provides the preceding two watchers, but licensees can write their
own watchers. </p>
 </div>

<div class="section" id="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-3CA936AF-57E4-448A-AEF5-91EDE6F52AE3"><a name="GUID-9AF990D7-C490-5D60-9816-E84B5165A5B2__GUID-3CA936AF-57E4-448A-AEF5-91EDE6F52AE3"><!-- --></a><h2 class="sectiontitle">See also</h2> <p><a href="GUID-E18592CD-223D-5B50-AF40-1AC7267BAB8C.html">Watcher
Framework</a>  </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-76DBAFEB-B0A0-5BF1-BAA1-2053CFA1FDC7.html">BIO Watcher</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>