<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Location Acquisition API Runtime Behaviour"/>
<meta name="abstract" content="This document describes some differences in runtime behaviour that application clients may observe depending on the Symbian platform on which they are running."/>
<meta name="description" content="This document describes some differences in runtime behaviour that application clients may observe depending on the Symbian platform on which they are running."/>
<meta name="DC.Relation" scheme="URI" content="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-55F5F029-6A00-5894-8892-90836DE4BA40.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0D5692FB-305E-58B2-B105-B309BB9AE38D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F5944819-2942-5ADA-A0AD-510D20BFBDEB.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Location Acquisition API Runtime Behaviour</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5"><a name="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2402946 id2402960 id2402974 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-55F5F029-6A00-5894-8892-90836DE4BA40.html" title="The Location Management collection contains components to manage location requests and to interface with a network. It also contains several common core LBS libraries that are used by many components of the LBS subsystem.">Location Management</a> &gt; <a href="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html" title="Location Admin is an LBS component that contains several common LBS libraries grouped for convenience in a single system component.">Location Admin</a> &gt; <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">The Location Acquisition API</a> &gt; </div>
<h1 class="topictitle1">Location
Acquisition API Runtime Behaviour</h1>
<div><p>This document describes some differences in runtime behaviour that
application clients may observe depending on the Symbian platform on which
they are running. </p>

<div class="section"><h2 class="sectiontitle">Purpose</h2> <p>This document describes some differences
in runtime behaviour that a Location Acquisition API client may observe. The
exact behaviour of the API depends on the configuration of the LBS subsystem
in the Symbian platform and on the positioning technologies that are available. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Types of runtime behaviour differences</h2> <p>There are
two main types of runtime behaviour differences: </p>
 <ul>
<li id="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-8B64686F-3159-52F5-A576-30C3B5428E6C"><a name="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-8B64686F-3159-52F5-A576-30C3B5428E6C"><!-- --></a><p>The <a href="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5.html#GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-95EE0194-408E-5366-9273-8F72682E05F2">accuracy of position updates</a> returned to API clients </p>
 </li>

<li id="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-08F51FA9-4AC9-5B0D-A53C-729828441D5E"><a name="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-08F51FA9-4AC9-5B0D-A53C-729828441D5E"><!-- --></a><p>The <a href="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5.html#GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-2DF0D6FF-BB17-56B9-B19F-C0F33C6F0F15">source of position updates</a> (the positioning module from which the
updates may originate) </p>
 </li>

</ul>
 <p id="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-95EE0194-408E-5366-9273-8F72682E05F2"><a name="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-95EE0194-408E-5366-9273-8F72682E05F2"><!-- --></a><strong>Accuracy of position updates</strong> </p>
 <p>This
section describes the behavior that a client application can expect depending
on the Symbian platform on which it runs. </p>
 <p>A client application may
receive a location update whenever a position is available. The current latitude
and longitude have been determined but their accuracy may not meet the clientâ€™s
expectations. A timeout of the client's location request will only occur when
it is not possible to calculate a position (irrespective of its quality). </p>
 <p>Some
platforms may be configured to return a position update only if it meets the
required accuracy. A call to <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html#GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575__GUID-321F6046-3551-3ACE-B0A3-26D51FAEB477"><span class="apiname">RPositioner::NotifyPositionUpdate()</span></a> completes
only when the Location Server has a position fix that meets the specified
quality criteria. A client may set its accuracy requirements by passing a <a href="GUID-483AE6F4-5DEB-312D-ADDA-FC5AA932DE3D.html"><span class="apiname">TPositionCriteria</span></a> object
in <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html#GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575__GUID-AF3D9B5F-8025-3AFF-A101-82025520EBD6"><span class="apiname">RPositioner::Open()</span></a>. If no criteria are specified then
default quality criteria are used to filter position updates returned to the
client. </p>
 <p>It is recommended that applications are designed to be aware
that they may receive positions that do not meet their expected accuracy before
the timeout period expires. If accuracy is critical to a client application
it should check the accuracy values <a href="GUID-AB9F288E-86C6-327A-9E53-2EA746416038.html#GUID-AB9F288E-86C6-327A-9E53-2EA746416038__GUID-187C862D-500F-3095-8F03-9EF4E4CEF80F"><span class="apiname">TPosition::HorizontalAccuracy()</span></a> and <a href="GUID-AB9F288E-86C6-327A-9E53-2EA746416038.html#GUID-AB9F288E-86C6-327A-9E53-2EA746416038__GUID-742043CB-40B1-3BA1-A879-CA2F401C56C3"><span class="apiname">TPosition::VerticalAccuracy()</span></a> of
the returned <a href="GUID-AB9F288E-86C6-327A-9E53-2EA746416038.html"><span class="apiname">TPosition</span></a> object. This is advised as the <samp class="codeph">TRequestStatus</samp> return
parameter may not indicate position quality loss (it may be set to <samp class="codeph">KErrNone</samp> and
not to <samp class="codeph">KPositionQualityLoss</samp>). </p>
 <p>Table 1 shows the position
updates and <samp class="codeph">TRequestStatus</samp> values that are returned by the
Location Acquisition API when a client calls <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html#GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575__GUID-321F6046-3551-3ACE-B0A3-26D51FAEB477"><span class="apiname">RPositioner::NotifyPositionUpdate()</span></a>. </p>
 
<div class="tablenoborder"><a name="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-EEE1C9B5-A81C-589D-9636-79E900415F4F"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-EEE1C9B5-A81C-589D-9636-79E900415F4F" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d810223e129">Event</th>

<th class="cellrowborder" valign="top" id="d810223e132"> API response to client (partial updates OFF)</th>

<th class="cellrowborder" valign="top" id="d810223e135">API response to client (partial updates ON)</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d810223e129 "><p>Module returns <samp class="codeph">&lt;error code&gt;</samp> before request timeout. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e132 "><p>Position is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">&lt;error
code&gt;</samp>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e135 "><p>Position is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">&lt;error
code&gt;</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d810223e129 "><p>Module returns incomplete position before request timeout. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e132 "><p>Position is not returned. <samp class="codeph">NotifyPositionUpdate()</samp> does
not complete. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e135 "><p>Position is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KPositionPartialUpdate</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d810223e129 "><p>Module returns accurate position before request timeout. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e132 "><p>Position is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KErrNone</samp>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e135 "><p>Position is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KErrNone</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d810223e129 "><p>Module returns inaccurate position before request timeout. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e132 "><p> <strong>If LBS is configured to return all positions:</strong>  </p>
 <p>Position
is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KErrNone</samp>. </p>
 <p> <strong>Else
if LBS is configured to return only accurate positions:</strong>  </p>
 <p>Position
is not returned. <samp class="codeph">NotifyPositionUpdate()</samp> does not complete. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e135 "><p> <strong>If LBS is configured to return all positions:</strong>  </p>
 <p>Position
is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KErrNone</samp>  </p>
 <p> <strong>Else
if LBS is configured to return only accurate positions:</strong>  </p>
 <p>Position
is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KPositionPartialUpdate</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d810223e129 "><p>Timeout in Location Server. Module has not yet returned a position. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e132 "><p>Position containing "Not a Number" <samp class="codeph">(NaN)</samp> values
is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KErrTimedOut</samp>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e135 "><p>Position containing <samp class="codeph">NaN</samp> values is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KErrTimedOut</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d810223e129 "><p>Timeout in Location Server. Module has previously returned an inaccurate
position. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e132 "><p> <strong>If LBS is configured to return all positions:</strong>  </p>
 <p>This
can't happen. Inaccurate position would have been returned to client. </p>
 <p> <strong>Else
if LBS is configured to return only accurate positions:</strong>  </p>
 <p>Inaccurate
position is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KPositionQualityLoss</samp>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e135 "><p>This can't happen. Inaccurate position would have been returned
before the timeout. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d810223e129 "><p>Timeout in Location Server. Module has previously returned an incomplete
position. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e132 "><p>Incomplete position is returned (contains some <samp class="codeph">NaN</samp> values). <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KPositionQualityLoss</samp>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e135 "><p>This can't happen. The incomplete position would have been returned
before the timeout. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d810223e129 "><p>Module returns an accurate or an inaccurate position and an error
code of <a href="GUID-A88ADC78-BF9D-31C5-AF05-8613C326D2F3.html"><span class="apiname">KPositionCalculationFutile</span></a>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e132 "><p>The most accurate available position is returned. </p>
 <p> <strong>If
LBS is configured to return all positions:</strong>  </p>
 <p> <samp class="codeph"> TRequestStatus</samp> is <samp class="codeph">KErrNone</samp>. </p>
 <p> <strong>Else
if LBS is configured to return only accurate positions:</strong>  </p>
 <p>TRequestStatus
is <samp class="codeph">KPositionQualityLoss</samp> if position is inaccurate. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e135 "><p>The most accurate available position is returned. </p>
 <p> <strong>If
LBS is configured to return all positions:</strong>  </p>
 <p> <samp class="codeph"> TRequestStatus</samp> is <samp class="codeph">KErrNone</samp>. </p>
 <p> <strong>Else
if LBS is configured to return only accurate positions:</strong>  </p>
 <p> <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KPositionQualityLoss</samp> if
position is inaccurate. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d810223e129 "><p>Module returns an incomplete position and an error code of <a href="GUID-A88ADC78-BF9D-31C5-AF05-8613C326D2F3.html"><span class="apiname">KPositionCalculationFutile</span></a>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e132 "><p>The most accurate available position is returned. TRequestStatus
is <samp class="codeph">KPositionQualityLoss</samp>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e135 "><p>The most accurate available position is returned. TRequestStatus
is <samp class="codeph">KPositionPartialUpdate</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d810223e129 "><p>Client calls <samp class="codeph">RPositioner::CompleteRequest()</samp>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e132 "><p>The last calculated position is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KPositionEarlyComplete</samp>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d810223e135 "><p>The last calculated position is returned. <samp class="codeph">TRequestStatus</samp> is <samp class="codeph">KPositionEarlyComplete</samp>. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>Table 1. Location Acquisition API runtime behavior. </p>
 <p id="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-2DF0D6FF-BB17-56B9-B19F-C0F33C6F0F15"><a name="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5__GUID-2DF0D6FF-BB17-56B9-B19F-C0F33C6F0F15"><!-- --></a><strong>Source of position updates</strong> </p>
 <p>This
section describes differences in the source of the position updates that a
client application receives depending on the Symbian platform on which it
runs. </p>
 <p>On platforms with more than one positioning module, a position
may be obtained by the Location Server from more than one module (for example,
a position may be returned from GPS hardware or from the network). Whether
a position is returned to the Location Acquisition API client depends on which <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html#GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575__GUID-AF3D9B5F-8025-3AFF-A101-82025520EBD6"><span class="apiname">RPositioner::Open()</span></a> method
was used to open the client/server subsession. </p>
 <p>On some platforms,
when a client/server subsession is opened using <samp class="codeph">RPositioner::Open(RPositionServer&amp;
aPosServer, TPositionModuleId              aModuleId)</samp> only position
updates from the specified module are returned to the client. Opening a subsession
using other versions of <samp class="codeph">RPositioner::Open()</samp> can return position
updates from other positioning modules. </p>
 <p>On some platforms LBS may
be configured to return position updates from any positioning module when
any version of <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html#GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575__GUID-AF3D9B5F-8025-3AFF-A101-82025520EBD6"><span class="apiname">RPositioner::Open()</span></a> is used. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">The Location Acquisition API</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-F5944819-2942-5ADA-A0AD-510D20BFBDEB.html" title="This document demonstrates how a client application uses the API to get device status and quality status events from positioning modules.">How to Get
Module Status Changes</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br/>
<div><a href="GUID-0D5692FB-305E-58B2-B105-B309BB9AE38D.html" title="This document lists the main classes of the Location Acquisition API with links to reference documentation.">Location
Acquisition API Reference</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>