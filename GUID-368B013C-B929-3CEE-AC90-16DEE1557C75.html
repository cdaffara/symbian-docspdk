<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="MMsgConnManager"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-368B013C-B929-3CEE-AC90-16DEE1557C75"/>

<title>MMsgConnManager</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-368B013C-B929-3CEE-AC90-16DEE1557C75"><a name="GUID-368B013C-B929-3CEE-AC90-16DEE1557C75"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2366708 id2898290 id2898295 id2898361 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">MMsgConnManager Class Reference</h1>
	<table class="signature"><tr><td>class MMsgConnManager</td></tr></table><div class="section"></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">void</td><td><a href="#GUID-3DE45E5B-9281-3BDB-84B9-FA502E96267C">AddEventSubscriberL</a>(<a href="GUID-22DF3302-C431-338A-8757-1D340E0B5905.html">MMsgBearerObsCallback</a> *)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-6F75FB30-513C-3120-802D-2C20CE222F7A">CancelStartL</a>()</td></tr><tr><td align="right" class="code">
					<a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html">RConnection</a> &amp;</td><td><a href="#GUID-5EB3D3C3-6D41-3F9D-99AA-B0E9CBCB3572">Connection</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-5757D497-0D2C-3017-8CF4-3B80096AE1A2">Destroy</a>()</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-D378F62C-8146-3D5C-87DA-E8BC24A02DB7">NumberOfActiveConns</a>()</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-3D3D9CD7-C8FD-3F81-9CC5-1A71D4F9751E.html">HBufC</a> *</td><td><a href="#GUID-5DF82F60-3295-3AC0-8B92-356F3F326D7C">ReadFromCommsDbLC</a>(const <a href="GUID-C1C14F53-3C9F-3134-B17A-06EAB7859B9D.html">TSupportedCommDbRecords</a>)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-B5FB6434-E845-3063-B7BA-4EA14106A210">RemoveEventSubscriber</a>(<a href="GUID-22DF3302-C431-338A-8757-1D340E0B5905.html">MMsgBearerObsCallback</a> *)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-13249728-F1CA-3F84-A341-8642D7E74151">SetAccessPointIDL</a>(const <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr><td align="right" class="code">
					<a href="GUID-EF29C1D7-B1E5-370F-AE37-66231A6BE449.html">RSocketServ</a> &amp;</td><td><a href="#GUID-ECBAFC1D-E8C3-3E85-A4C5-F3225DEBEACC">SocketSession</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-C6461A64-4036-32AC-B5C0-F8B887C55627">StartConnection</a>(<a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-0BDCDB47-752B-3BDE-AB7B-63FD4112060B">Status</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-9CD076FC-C12E-3D4C-9A28-80063ACD2E67">StopConnection</a>()</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-D5CA1905-6776-3EC8-8EFD-21BD967D222A">StopConnection</a>(<a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-3DE45E5B-9281-3BDB-84B9-FA502E96267C"><a name="GUID-3DE45E5B-9281-3BDB-84B9-FA502E96267C"><!-- --></a>
		<h2 class="topictitle2">AddEventSubscriberL(MMsgBearerObsCallback *)</h2>
		<table class="signature"><tr><td>void</td><td>AddEventSubscriberL</td><td>(</td><td><a href="GUID-22DF3302-C431-338A-8757-1D340E0B5905.html">MMsgBearerObsCallback</a> *</td><td>aClient</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Add an object to the queue of listeners. The object to be added must inplement the interface <a href="GUID-22DF3302-C431-338A-8757-1D340E0B5905.html#GUID-22DF3302-C431-338A-8757-1D340E0B5905">MMsgBearerObsCallback</a> in order to receive events from the system agent. It is important to note that the call to the notification handler (HandleBearerEventL()) takes place inside the RunL() method of this Connection Manager, so the listening object MUST return the control to the Manager AS SOON AS POSSIBLE in order not to clog the scheduler.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-22DF3302-C431-338A-8757-1D340E0B5905.html">MMsgBearerObsCallback</a> * aClient</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-6F75FB30-513C-3120-802D-2C20CE222F7A"><a name="GUID-6F75FB30-513C-3120-802D-2C20CE222F7A"><!-- --></a>
		<h2 class="topictitle2">CancelStartL()</h2>
		<table class="signature"><tr><td>void</td><td>CancelStartL</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<div class="p">Cancel <a href="GUID-368B013C-B929-3CEE-AC90-16DEE1557C75.html#GUID-C6461A64-4036-32AC-B5C0-F8B887C55627">StartConnection()</a>. The method may leave with<ul><li><p>KErrAbort if the <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html#GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646">TRequestStatus</a> object the client supplied is not active, hence, there is no pending request that would require cancelling. In normal cases - when <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-4B95503F-5300-3254-812D-554BFE35B536">RConnection::Start()</a> or its progress notifications are pending - ConnMan completes the client's request with the "error" KErrCancel.</p>
</li>
</ul>
</div>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-5EB3D3C3-6D41-3F9D-99AA-B0E9CBCB3572"><a name="GUID-5EB3D3C3-6D41-3F9D-99AA-B0E9CBCB3572"><!-- --></a>
		<h2 class="topictitle2">Connection()</h2>
		<table class="signature"><tr><td>
					<a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html">RConnection</a> &amp;</td><td>Connection</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Returns a reference to the currently open connection</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-5757D497-0D2C-3017-8CF4-3B80096AE1A2"><a name="GUID-5757D497-0D2C-3017-8CF4-3B80096AE1A2"><!-- --></a>
		<h2 class="topictitle2">Destroy()</h2>
		<table class="signature"><tr><td>void</td><td>Destroy</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Destructor. Must be called when the services of the manager are no longer needed. This is merely a wrapper to the C++ destructor.</p>

				<p>It is highly advisable that a client of this API ALWAYS <a href="GUID-368B013C-B929-3CEE-AC90-16DEE1557C75.html#GUID-5757D497-0D2C-3017-8CF4-3B80096AE1A2">Destroy()</a>s the instance it owns only after it has disposed of all other connection-related components at its command. This is because the other components may still be dependent on the <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html#GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD">RConnection</a> and <a href="GUID-EF29C1D7-B1E5-370F-AE37-66231A6BE449.html#GUID-EF29C1D7-B1E5-370F-AE37-66231A6BE449">RSocketServ</a> instances provided by this object.</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-D378F62C-8146-3D5C-87DA-E8BC24A02DB7"><a name="GUID-D378F62C-8146-3D5C-87DA-E8BC24A02DB7"><!-- --></a>
		<h2 class="topictitle2">NumberOfActiveConns()</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>NumberOfActiveConns</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Returns the number of active connections currently open</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-5DF82F60-3295-3AC0-8B92-356F3F326D7C"><a name="GUID-5DF82F60-3295-3AC0-8B92-356F3F326D7C"><!-- --></a>
		<h2 class="topictitle2">ReadFromCommsDbLC(const TSupportedCommDbRecords)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-3D3D9CD7-C8FD-3F81-9CC5-1A71D4F9751E.html">HBufC</a> *</td><td>ReadFromCommsDbLC</td><td>(</td><td>const <a href="GUID-C1C14F53-3C9F-3134-B17A-06EAB7859B9D.html">TSupportedCommDbRecords</a></td><td>aParameter</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Read data from the Comms Database</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-C1C14F53-3C9F-3134-B17A-06EAB7859B9D.html">TSupportedCommDbRecords</a> aParameter</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-B5FB6434-E845-3063-B7BA-4EA14106A210"><a name="GUID-B5FB6434-E845-3063-B7BA-4EA14106A210"><!-- --></a>
		<h2 class="topictitle2">RemoveEventSubscriber(MMsgBearerObsCallback *)</h2>
		<table class="signature"><tr><td>void</td><td>RemoveEventSubscriber</td><td>(</td><td><a href="GUID-22DF3302-C431-338A-8757-1D340E0B5905.html">MMsgBearerObsCallback</a> *</td><td>aClient</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Remove an object from the queue of listeners. It is not necessary to call this method at deletion time, as the destructor destroys the subscriber queue altogether. If, however, a listener object is destroyed (or is likely to be) before an instance of Connection Manager, it is mandatory to remove the listener from the queue prior to deleting the listener.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-22DF3302-C431-338A-8757-1D340E0B5905.html">MMsgBearerObsCallback</a> * aClient</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-13249728-F1CA-3F84-A341-8642D7E74151"><a name="GUID-13249728-F1CA-3F84-A341-8642D7E74151"><!-- --></a>
		<h2 class="topictitle2">SetAccessPointIDL(const TInt)</h2>
		<table class="signature"><tr><td>void</td><td>SetAccessPointIDL</td><td>(</td><td>const <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>aAccessPointID</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Set the ID of the Access Point to connect to. Note that this function is effective only when there is no active connection the start of which has been initiated by the client. In other words, the ID of the desired Access Point can be changed only BEFORE calling <a href="GUID-368B013C-B929-3CEE-AC90-16DEE1557C75.html#GUID-C6461A64-4036-32AC-B5C0-F8B887C55627">StartConnection()</a>.</p>

				<div class="p">May leave with<ul><li><p>KErrNotFound if the Access Point ID does not exist</p>
</li>
</ul>
</div>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a> aAccessPointID</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-ECBAFC1D-E8C3-3E85-A4C5-F3225DEBEACC"><a name="GUID-ECBAFC1D-E8C3-3E85-A4C5-F3225DEBEACC"><!-- --></a>
		<h2 class="topictitle2">SocketSession()</h2>
		<table class="signature"><tr><td>
					<a href="GUID-EF29C1D7-B1E5-370F-AE37-66231A6BE449.html">RSocketServ</a> &amp;</td><td>SocketSession</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Returns a reference to the active socket server.</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-C6461A64-4036-32AC-B5C0-F8B887C55627"><a name="GUID-C6461A64-4036-32AC-B5C0-F8B887C55627"><!-- --></a>
		<h2 class="topictitle2">StartConnection(TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>StartConnection</td><td>(</td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Start a connection. This asynchronous request completes as soon as a connection has been successfully opened or an error condition has been detected.</p>

				<p>Completes with:</p>

				<div class="p">
					<ul>
						<li>
							<p>KErrNone if a connection has been succesfully opened</p>

						</li>

						<li>
							<p>KErrNotReady if client has called <a href="GUID-368B013C-B929-3CEE-AC90-16DEE1557C75.html#GUID-9CD076FC-C12E-3D4C-9A28-80063ACD2E67">StopConnection()</a> and attempts to start a new connection before the previous one has been disconnected.</p>

						</li>

						<li>
							<p>KErrAlreadyExists if a client attempts to open a connection while one is already being opened</p>

						</li>

						<li>
							<p>KErrTimedOut if the specified timeout value expires</p>

						</li>

					</ul>

				</div>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td>Request status of the client.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-0BDCDB47-752B-3BDE-AB7B-63FD4112060B"><a name="GUID-0BDCDB47-752B-3BDE-AB7B-63FD4112060B"><!-- --></a>
		<h2 class="topictitle2">Status()</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>Status</td><td>(</td><td>)</td><td>const [pure virtual]</td></tr></table><div class="section"><div>
				<p>Returns the state of this connection manager:</p>

				<div class="p">
					<ul>
						<li>
							<p>ETrue, if a connection is available</p>

						</li>

						<li>
							<p>EFalse otherwise; bearer suspended, <a href="GUID-368B013C-B929-3CEE-AC90-16DEE1557C75.html#GUID-C6461A64-4036-32AC-B5C0-F8B887C55627">StartConnection()</a> failed etc.</p>

						</li>

					</ul>

				</div>

				<p>A component that wishes to send/receive data is encouraged to call this function before opening a socket, or reading from or writing to one. This way it can be assured that no component prompts up that annoying IAP dialog.</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-9CD076FC-C12E-3D4C-9A28-80063ACD2E67"><a name="GUID-9CD076FC-C12E-3D4C-9A28-80063ACD2E67"><!-- --></a>
		<h2 class="topictitle2">StopConnection()</h2>
		<table class="signature"><tr><td>void</td><td>StopConnection</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Stop a connection, synchronous version </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-D5CA1905-6776-3EC8-8EFD-21BD967D222A"><a name="GUID-D5CA1905-6776-3EC8-8EFD-21BD967D222A"><!-- --></a>
		<h2 class="topictitle2">StopConnection(TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>StopConnection</td><td>(</td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Stop a connection. This asynchronous request completes as soon as a connection has been closed. Note that it takes a few seconds for the connection to really wear out. Thus, when a client calls this function, it should really mean what it is saying, because a new connection CANNOT BE OPENED before a previous one has been deactivated.</p>

				<div class="p">The request may complete with<ul><li><p>KErrNone if connection closing is successful</p>
</li>
<li><p>KErrAbort if call takes place while connection initiation is ongoing or if there is no active connection that would require closing. If a connection initiation is ongoing client should use <a href="GUID-368B013C-B929-3CEE-AC90-16DEE1557C75.html#GUID-6F75FB30-513C-3120-802D-2C20CE222F7A">CancelStartL()</a> method instead.</p>
</li>
</ul>
</div>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td>Request status of the client  </td></tr></table></div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>