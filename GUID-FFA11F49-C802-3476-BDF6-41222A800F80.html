<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="CFbsRasterizer"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-FFA11F49-C802-3476-BDF6-41222A800F80"/>

<title>CFbsRasterizer</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-FFA11F49-C802-3476-BDF6-41222A800F80"><a name="GUID-FFA11F49-C802-3476-BDF6-41222A800F80"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2578593 id2545618 id2545667 id2545672 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">CFbsRasterizer Class Reference</h1>
	<table class="signature"><tr><td>class CFbsRasterizer : public CBase</td></tr></table><div class="section"><div>
			<p>
				<a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-FFA11F49-C802-3476-BDF6-41222A800F80">CFbsRasterizer</a> represents the system's rasterizer that has the ability to generate standard pixel data from data stored in proprietary formats.</p>

			<p>Multiple formats of proprietary data may be supported by the rasterizer. Formats are identified by UID. Support for formats is platform-specific and controlled by the platform vendor. The OS does not mandate that the system's rasterizer must support any specific data formats.</p>

			<p>
				<a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-FFA11F49-C802-3476-BDF6-41222A800F80">CFbsRasterizer</a> is used solely by the Font &amp; Bitmap Server component to simulate pixel access to extended bitmaps, i.e. bitmaps created using CFbsBitmap::CreateExtendedBitmap(). <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-FFA11F49-C802-3476-BDF6-41222A800F80">CFbsRasterizer</a> is not intended for use by applications.</p>

			<p>
				<a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-FFA11F49-C802-3476-BDF6-41222A800F80">CFbsRasterizer</a> is intended to be implemented by licensees through derivation from the abstract base class. If a licensee wishes to provide a rasterizer implementation, they should create a rasterizer dll that is exported as "fbsrasterizer.dll" and include it in their ROM. Note that a stub rasterizer is exported to "fbsrasterizer.dll" and is loaded by the Font &amp; Bitmap server by default to prevent a rogue dll being loaded in the rasterizer's place from the C:\ drive or removable media. Licensees can override this by using the following build option: -DFBSRASTERIZER_DLL &lt;rasterizer_dll_name&gt; where &lt;rasterizer_dll_name&gt; is the name of the licensee rasterizer dll.</p>

			<p>
				<a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-FFA11F49-C802-3476-BDF6-41222A800F80">CFbsRasterizer</a> will be instantiated in client threads that use the Font &amp; Bitmap Server, including the Window Server's main thread. Therefore the implementation of the rasterizer must be robust. Rasterizer functions should never lead to process termination, even when invalid proprietary data is passed in. Instances of <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-FFA11F49-C802-3476-BDF6-41222A800F80">CFbsRasterizer</a> are not intended to be shared between threads.</p>

			<p>The <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-FFA11F49-C802-3476-BDF6-41222A800F80">CFbsRasterizer</a> interface has been designed to allow the implementation to optimise certain access patterns for performance. For example, the implementation might prepare for sequential access to a region by rasterizing the entire region inside a private scratch buffer. A further opportunity would be to take advantage of the immutability of extended bitmaps by maintaining rasterized scratch buffers for the most recently used bitmaps. </p>

		</div></div>
<div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">CFbsRasterizer<ul class="derivation"><li class="derivation-depth-1 "><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase</a></li></ul></li></ul></div>
<div class="section nested"><h2 class="sectiontitle">Nested Classes and Structures</h2><ul><li><a href="GUID-256060A7-9C19-3D20-B7BB-407664680A21.html">CFbsRasterizer::TBitmapDesc</a></li></ul></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">void</td><td><a href="#GUID-5227BDC2-0F2E-372B-B32E-39B8DBB61250">BeginBitmap</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt64</a>, const <a href="GUID-256060A7-9C19-3D20-B7BB-407664680A21.html">TBitmapDesc</a> &amp;, const <a href="GUID-740A218E-76FB-31BF-BD91-BA6780AC4DEE.html">TRegion</a> *)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-4A13FEA9-6979-3EF7-9900-A7159CF17DA9">EndBitmap</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt64</a>)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-F0A4B317-00BC-3D06-999A-21A6F7EE6B99">GetInterface</a>(<a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a>, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *&amp;)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html">CFbsRasterizer</a> *</td><td><a href="#GUID-F081ED11-A479-30F5-9D1A-1048C199A3F5">New</a>()</td></tr><tr><td align="right" class="code">const <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a> *</td><td><a href="#GUID-2CD5E0AD-8715-369F-9761-B4F8BF9F0CF0">ScanLine</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt64</a>, const <a href="GUID-339EC4C5-89DC-3972-9579-6DD38D418317.html">TPoint</a> &amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::CBase()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Delete(CBase *)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Extension_(TUint,TAny *&amp;,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::~CBase()</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-5227BDC2-0F2E-372B-B32E-39B8DBB61250"><a name="GUID-5227BDC2-0F2E-372B-B32E-39B8DBB61250"><!-- --></a>
		<h2 class="topictitle2">BeginBitmap(TInt64, const TBitmapDesc &amp;, const TRegion *)</h2>
		<table class="signature"><tr><td>void</td><td>BeginBitmap</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt64</a></td><td>aBitmapId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-256060A7-9C19-3D20-B7BB-407664680A21.html">TBitmapDesc</a> &amp;</td><td>aBitmapDesc,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-740A218E-76FB-31BF-BD91-BA6780AC4DEE.html">TRegion</a> *</td><td>aRegionOfInterest</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Registers an extended bitmap so that scanline access requests can be made on the bitmap. The same bitmap may be registered multiple times. The rasterizer instance must be able to maintain at least 3 registrations simultaneously. This is to support BitGDI drawing operations that make use of 3 source bitmaps.</p>

				<div class="p">
					<a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-4A13FEA9-6979-3EF7-9900-A7159CF17DA9">EndBitmap()</a> <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-2CD5E0AD-8715-369F-9761-B4F8BF9F0CF0">ScanLine()</a><dl class="postcondition"><dt class="dlterm">Post-condition</dt>
<dd>The rasterizer is able to satisfy scanline requests for the bitmap identified by aBitmapId. </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt64</a> aBitmapId</td><td>A unique identifier for the bitmap that is being registered. This identifier is never reused for other bitmaps.  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-256060A7-9C19-3D20-B7BB-407664680A21.html">TBitmapDesc</a> &amp; aBitmapDesc</td><td>A full description of the bitmap including the proprietary data. The description and proprietary data associated with a particular value of aBitmapId never changes. This allows the implementation to cache this information even after a bitmap has been unregistered.  </td></tr><tr><td class="parameter">const <a href="GUID-740A218E-76FB-31BF-BD91-BA6780AC4DEE.html">TRegion</a> * aRegionOfInterest</td><td>The region within which scanline access requests will be made, if known. A value of NULL implies that the user does not have any useful information to contribute and the implementation must be prepared to accept scanline requests anywhere inside the bitmap. If the rasterizer uses the region of interest after the call to BeginBitmap() then it must make a copy of it, since the region pointed to by aRegionOfInterest is valid only during the call to BeginBitmap(). </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-4A13FEA9-6979-3EF7-9900-A7159CF17DA9"><a name="GUID-4A13FEA9-6979-3EF7-9900-A7159CF17DA9"><!-- --></a>
		<h2 class="topictitle2">EndBitmap(TInt64)</h2>
		<table class="signature"><tr><td>void</td><td>EndBitmap</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt64</a></td><td>aBitmapId</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Unregisters a bitmap previously registered using <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-5227BDC2-0F2E-372B-B32E-39B8DBB61250">BeginBitmap()</a>. The rasterizer should access the proprietary data of a bitmap only between calls to <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-5227BDC2-0F2E-372B-B32E-39B8DBB61250">BeginBitmap()</a> and <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-4A13FEA9-6979-3EF7-9900-A7159CF17DA9">EndBitmap()</a>, since a bitmap can be destroyed without notifying the rasterizer after the call to <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-4A13FEA9-6979-3EF7-9900-A7159CF17DA9">EndBitmap()</a>.</p>

				<div class="p">
					<a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-5227BDC2-0F2E-372B-B32E-39B8DBB61250">BeginBitmap()</a> <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-2CD5E0AD-8715-369F-9761-B4F8BF9F0CF0">ScanLine()</a><dl class="precondition"><dt class="dlterm">Pre-condition</dt>
<dd>aBitmapId is registered with this rasterizer. </dd>
</dl>
<dl class="postcondition"><dt class="dlterm">Post-condition</dt>
<dd>aBitmapId is unregistered once from this rasterizer. If all registrations for aBitmapId have been removed, scanline access for aBitmapId is no longer supported and any scanline pointers previously returned by <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-2CD5E0AD-8715-369F-9761-B4F8BF9F0CF0">ScanLine()</a> become invalid. </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt64</a> aBitmapId</td><td>A unique identifier for the bitmap that is being unregistered. </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-F0A4B317-00BC-3D06-999A-21A6F7EE6B99"><a name="GUID-F0A4B317-00BC-3D06-999A-21A6F7EE6B99"><!-- --></a>
		<h2 class="topictitle2">GetInterface(TUid, TAny *&amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>GetInterface</td><td>(</td><td><a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a></td><td>aInterfaceId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *&amp;</td><td>aInterface</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Returns a pointer to an extension interface. Allows extension of the <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-FFA11F49-C802-3476-BDF6-41222A800F80">CFbsRasterizer</a> interface without breaking compatibility with existing implementations.</p>

				<div class="p">
					<dl class="postcondition">
						
							<dt class="dlterm">Post-condition</dt>

							<dd>If successful, KErrNone is returned and aInterface can be cast into a pointer to the M-class associated with the specified extension UID. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a> aInterfaceId</td><td>A UID defined by the OS identifying a specific extension interface.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *&amp; aInterface</td><td>A pointer that will be set to the extension interface. </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-F081ED11-A479-30F5-9D1A-1048C199A3F5"><a name="GUID-F081ED11-A479-30F5-9D1A-1048C199A3F5"><!-- --></a>
		<h2 class="topictitle2">New()</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html">CFbsRasterizer</a> *</td><td>New</td><td>(</td><td>)</td><td>[static]</td></tr></table><div class="section"><div>
				<p>Create a new rasterizer. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-2CD5E0AD-8715-369F-9761-B4F8BF9F0CF0"><a name="GUID-2CD5E0AD-8715-369F-9761-B4F8BF9F0CF0"><!-- --></a>
		<h2 class="topictitle2">ScanLine(TInt64, const TPoint &amp;, TInt)</h2>
		<table class="signature"><tr><td>const <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a> *</td><td>ScanLine</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt64</a></td><td>aBitmapId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-339EC4C5-89DC-3972-9579-6DD38D418317.html">TPoint</a> &amp;</td><td>aPixel,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>aLength</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Requests a pointer to a scanline containing pixel data for a specified bitmap.</p>

				<div class="p">
					<a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-5227BDC2-0F2E-372B-B32E-39B8DBB61250">BeginBitmap()</a> <a href="GUID-FFA11F49-C802-3476-BDF6-41222A800F80.html#GUID-4A13FEA9-6979-3EF7-9900-A7159CF17DA9">EndBitmap()</a><dl class="precondition"><dt class="dlterm">Pre-condition</dt>
<dd>aBitmapId must be registered with this rasterizer. The sequence of pixels identified by aPixel and aLength must lie entirely inside the conceptual width and height of the bitmap, i.e. the bounds specified by the bitmap's <a href="GUID-256060A7-9C19-3D20-B7BB-407664680A21.html#GUID-A7AD3B8E-513A-3445-940E-21D18DE1E10F">TBitmapDesc::iSizeInPixels</a>. </dd>
</dl>
<dl class="postcondition"><dt class="dlterm">Post-condition</dt>
<dd>Any scanline address previously returned by this rasterizer is not guaranteed to be valid. If successful, the returned pointer references the start of a scanline buffer, the full length of which can hold an entire row of pixels. The pixel range within the scanline buffer specified by the user (aPixel.iX...aPixel.iX+aLength) will contain accurate pixel values. </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt64</a> aBitmapId</td><td>The unique identifier of the bitmap to extract the scanline from.  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-339EC4C5-89DC-3972-9579-6DD38D418317.html">TPoint</a> &amp; aPixel</td><td>An co-ordinate within the bitmap of the first pixel to retrieve.  </td></tr><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a> aLength</td><td>The number of pixels to retrieve. </td></tr></table></div>

	</div>

	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>