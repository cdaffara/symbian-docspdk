<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Alarm Server Overview"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CFE3A216-E637-51C1-B258-2ADF4E0F4150.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1FB321DE-4A02-5468-9AF1-F3786EB678CF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CFE3A216-E637-51C1-B258-2ADF4E0F4150.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E6788741-EF34-57B7-B4D4-8AAC21B25774.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-63730EBD-E5C1-5BA9-AB71-8FF668ECEF00.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7BCA8B7A-E250-5452-9837-26C60F71F14F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-74153585-D483-5761-85B6-2CF2D2615C00.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Alarm Server Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2520040 id2380129 id2380138 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html">Generic Application Support Guide</a> &gt; <a href="GUID-1FB321DE-4A02-5468-9AF1-F3786EB678CF.html">Common Application Services</a> &gt; <a href="GUID-CFE3A216-E637-51C1-B258-2ADF4E0F4150.html">Alarm Server</a> &gt; </div>
<h1 class="topictitle1">Alarm
Server Overview</h1>
<div>
<p>Alarm Server is a system server, which starts during device start-up. It
is responsible for maintaining a queue of all system-wide alarms. </p>

<p>It allows clients to query the status of alarms, set alarms, remove alarms
and perform other utility functions. The Alarm client API allows other components
to interact with the Alarm Server. The Alarm Server sends notification of
alarm expiry to the Alert Server, which then notifies the Alarm UI to display
dialogs and play sound. </p>

<p>The typical clients of Alarm Server include Clock and Calendar applications. </p>

<div class="section" id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-4BD14572-C34A-4541-A0A6-63ACE773FC58"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-4BD14572-C34A-4541-A0A6-63ACE773FC58"><!-- --></a><h2 class="sectiontitle">Purpose</h2> <p>The Alarm Server manages the alarms in
the system and provides the following functionality: </p>
 <ul>
<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-56175798-4930-55A3-ACD8-848192C07A63"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-56175798-4930-55A3-ACD8-848192C07A63"><!-- --></a><p>adding, updating and
deleting alarms. </p>
 </li>

<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-FCF13562-7E88-5A5B-84B9-05B7934E7277"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-FCF13562-7E88-5A5B-84B9-05B7934E7277"><!-- --></a><p>getting and setting
client-specific data associated with the alarm. </p>
 </li>

<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-44A49D6B-A12E-5C05-A7D7-9BDE3E430521"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-44A49D6B-A12E-5C05-A7D7-9BDE3E430521"><!-- --></a><p>performing alarm category-based
operations such as retrieval and deletion. Retrieving alarm information includes
alarm count, unique identifiers based on alarm states. </p>
 </li>

<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-57B8169F-1166-5534-9236-D1C367AB2413"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-57B8169F-1166-5534-9236-D1C367AB2413"><!-- --></a><p>getting and setting
Alarm Server’s global sound state and play intervals. </p>
 </li>

<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-7BB3AD26-5650-5B6A-B656-76A24EF9086A"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-7BB3AD26-5650-5B6A-B656-76A24EF9086A"><!-- --></a><p>notifying the client
when alarm settings change and when the alarm expires. </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-E208DCC1-4183-4773-8E4A-CC5989581F5F"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-E208DCC1-4183-4773-8E4A-CC5989581F5F"><!-- --></a><h2 class="sectiontitle">Key concepts and terms</h2> <dl>

<dt class="dlterm">Duration</dt>

<dd><p>It is the time period, in seconds, for which the alarm sound is played. </p>
 </dd>



<dt class="dlterm">Offset</dt>

<dd><p>It is the time (in minutes) duration of alarm sound played after the
alarm expiry. </p>
 </dd>



<dt class="dlterm">Alarm play interval</dt>

<dd><p>Alarm play interval consists of duration and an offset. At each offset,
the Alarm Server makes a request to the Alarm Alert Server to display the
alarm dialog and play the alarm sound. </p>
 </dd>



<dt class="dlterm">Universal Time Coordinated (UTC)</dt>

<dd><p>It is the international time standard. It is the current term for what
was commonly referred as Greenwich Meridian Time (GMT) . Zero hours UTC is
midnight in Greenwich England, which lies on the zero longitudinal meridian.
Universal time is based on a 24-hour clock. Therefore, afternoon hours such
as 4 PM are expressed as 16:00 UTC. </p>
 </dd>



<dt class="dlterm">Daylight Saving Time (DST)</dt>

<dd><p>Daylight Saving Time or Summer Time, is a way of utilizing more daylight
by advancing the local time by one hour during the summer. </p>
 </dd>



<dt class="dlterm">Session alarms</dt>

<dd><p>The alarms that are removed from the alarm queue when their session
owners disconnect are referred as Session Alarms. </p>
 </dd>



<dt class="dlterm">Non-Session alarms</dt>

<dd><p>The alarms that continue to persist in the alarm queue, even after
their session owner which added these alarms disconnect, are referred as Non-Session
alarms. These alarms are also referred to as Orphaned Session alarms. </p>
 </dd>



<dt class="dlterm">Wake-Up alarms</dt>

<dd><p>An alarm that wakes-up the device if the device is switched OFF when
the alarm occurs, is referred to as Wake-Up alarm. </p>
 </dd>



<dt class="dlterm">Skipped/Missed Calendar alarms</dt>

<dd><p>An alarm which does not expire normally because of an environment change
but the alarm’s expiry time is put in the past, is referred as Skipped Calendar
alarms. </p>
 </dd>


</dl>
 </div>

<div class="section" id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-9AE0E149-5735-46AC-9BC5-688696828150"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-9AE0E149-5735-46AC-9BC5-688696828150"><!-- --></a><h2 class="sectiontitle">Architecture</h2> <p>Alarm Server is implemented using
the Symbian platform IPC client-server architecture. It has an interface to
the Alarm Alert server, which is delivered as part of the Application Framework
(UIKON component). Alarm Alert Server is responsible for displaying the alarm
dialog when an alarm expires. The Alarm Server implements the Alarm Alert
server’s client side DLL to send and receive notifications to and from the
Alarm UI. Alarm Alert Server is a part of the UIKON server (<samp class="codeph">Eiksrv.exe</samp>).
The Alarm Server itself implements the client-side APIs since it is the only
client for the Alarm Alert server. The following diagram illustrates the Alarm
Server architecture: </p>
 <div class="fignone" id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-D6309F3E-4835-5703-8929-8A108CC5D376"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-D6309F3E-4835-5703-8929-8A108CC5D376"><!-- --></a><span class="figcap">Figure 1.               Alarm Server Architecture            </span>

<img src="GUID-7CD8F0E3-68C3-5939-A96D-547740D796E5_d0e176365_href.png"/>
</div>
 <p><strong>Alarm Client and Alarm Shared</strong> </p>
 <p>They are the static
interface DLLs. Alarm client is the client side of the Alarm Server, which
allows other components to interact with the Alarm Server. </p>
 <p>The Alarm
Shared facilitates a common format shared across server and its clients for
providing definition for an alarm. It consists of shared objects such as alarm
class, IPC messages, repeat definitions, alarm states. </p>
 <p><strong>Alarm Server</strong> </p>
 <p>Alarm
Server manages all alarms on the device and enables client UI applications
to use the services provided by the Alarm Server. It relies on the Alarm UI
to notify, which includes displaying and playing sounds. </p>
 <p>It uses a
resource file to configure the sound intervals required for the alarm to repeat.
The compiled resource file resides in the private directory of the Alarm Server.
The resource file is used only for initial configuration. </p>
 <p>Alarm Server
configurations are stored in <samp class="codeph">AlarmServer.ini</samp> file and <samp class="codeph">Backup_Registration.xml</samp> file
performs a passive backup of this <samp class="codeph">.ini</samp> file to the PC-side
at runtime. For secure backup of this <samp class="codeph">.ini</samp> file, <samp class="codeph">backuprestorenotification.lib</samp> is
used. For more information on the resource file and backup, refer to the <a href="GUID-A5F65344-BE05-5295-85BB-E8114505FB82.html">Alarm Sound Play Control</a>. </p>
 <p>It
provides Publish and Subscribe keys to enable the client to receive notifications
of the changes to the Alarm Server. The P&amp;S key are: </p>
 <ul>
<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-BDB9B185-B20A-5598-AD66-29EE0DC25224"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-BDB9B185-B20A-5598-AD66-29EE0DC25224"><!-- --></a><p> <samp class="codeph">KMissingAlarmPubSubKey</samp> -
provides information about missed calendar alarms, which were missed due to
the device being in the shutdown state. </p>
 </li>

<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-D0ABBB1C-0796-5E5B-A7E0-216ECAD537F5"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-D0ABBB1C-0796-5E5B-A7E0-216ECAD537F5"><!-- --></a><p> <samp class="codeph">KSkippedAlarmInstancesPubSubKey</samp> -
provides information about skipped calendar alarms instances which can used
for searching the required data in the calendar store. </p>
 </li>

<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-2FCE4A66-7199-5B74-AE68-DCD702672FD3"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-2FCE4A66-7199-5B74-AE68-DCD702672FD3"><!-- --></a><p> <samp class="codeph">KWakeupAlarmPubSubKey</samp> -
provides information about an active wake-up alarm which is set or unset. </p>
 </li>

</ul>
 <p>For more information on Skipped Calendar Alarms and Wake-up Alarms,
refer to <a href="GUID-12A32F8E-0C53-5311-9B2B-8E0EA373ED08.html">Types of Alarm</a> section. </p>
 <p>It
listens to the following events: </p>
 <ul>
<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-266EBC9B-E834-5DCD-9B5F-F9E4A13EFF4E"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-266EBC9B-E834-5DCD-9B5F-F9E4A13EFF4E"><!-- --></a><p>DST rollover - Using <samp class="codeph">KDSTChangePropertyKey</samp> P&amp;S
key, Alarm Server listens to DST rollover information from <a href="GUID-3CD0CEB1-CE8B-5108-A7F7-5E1414020C37.html">Time
Zone Server</a> resulting in the change of wall clock/local time clock. </p>
 </li>

<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-F759197E-A22E-5C4F-89B7-247BF64134E1"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-F759197E-A22E-5C4F-89B7-247BF64134E1"><!-- --></a><p>System state changes
- Using <a href="GUID-788BD091-186A-5E25-B058-952C7629A8D4.html" title="System State Manager (SSM) is a Symbian platform component that manages the state of a device throughout its life cycle. SSM extends the existing Generic Start-up Architecture (GSA) and also manages the system state and the system-wide property.">System State
Manager</a> (SSM), Alarm Server listens to the system state changes (normal
and shutdown states) to synchronize the backup of the alarm server queue to
the <samp class="codeph">AlarmServer.ini</samp> backup file. </p>
 </li>

<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-42C04AB7-8BCC-57D6-A716-4F6B12F5AC30"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-42C04AB7-8BCC-57D6-A716-4F6B12F5AC30"><!-- --></a><p>Environment change -
Using <a href="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6.html">Environment Change
Notifier</a> (<samp class="codeph">bafl.dll</samp>), Alarm Server listens to the changes
in the environment, such as system time/date change, workdays change or UTC
offset change. </p>
 </li>

</ul>
 <p><strong>UIKON Server</strong> </p>
 <p>UIKON server is responsible for starting
the Alarm Server at the device boot-up, by loading the polymorphic DLL, EIKSRVUI
provided by the device creator. </p>
 <p>It is also responsible for playing
sounds, flashing lights and displaying the message. Through the UIKON server,
alarms can be cleared, snoozed or silenced. Alarm server implements and uses
the client side interface. Alarm UI implements the server side of the UIKON
server. </p>
 </div>

<div class="section" id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-DA3E40F6-983B-4B4D-8543-C3FFA757E230"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-DA3E40F6-983B-4B4D-8543-C3FFA757E230"><!-- --></a><h2 class="sectiontitle">APIs</h2> <p>The Alarm Server provides the following client
API: </p>
 
<div class="tablenoborder"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-60D7DF2B-BA9C-5CEC-9048-6B8536D04CFE"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-60D7DF2B-BA9C-5CEC-9048-6B8536D04CFE" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d187481e341">API</th>

<th class="cellrowborder" valign="top" id="d187481e344">Description</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d187481e341 "><p> <a href="GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html"><span class="apiname">RASCliSession</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d187481e344 "><p>Client interface to the Alarm session. </p>
</td>

</tr>

</tbody>

</table>
</div>
 </div>

<div class="section" id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-2D95B5E3-88E2-4C30-8917-AE3EA24C78D8"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-2D95B5E3-88E2-4C30-8917-AE3EA24C78D8"><!-- --></a><h2 class="sectiontitle">Typical uses</h2> <p>The following are the typical use
cases of Alarm Server: </p>
 <ul>
<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-854E8EA9-3194-5D0E-8BB5-3006B04BB6D3"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-854E8EA9-3194-5D0E-8BB5-3006B04BB6D3"><!-- --></a><p>Using Alarm Server to
add, update and delete alarms, set alarm status and so on. </p>
 </li>

<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-9A999DC2-6D48-58B8-B251-F22A88A1978C"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-9A999DC2-6D48-58B8-B251-F22A88A1978C"><!-- --></a><p>Playing an alarm continuously. </p>
 </li>

<li id="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-2D7D1AF6-2728-59CF-BD92-32D97FD6C6B6"><a name="GUID-114D4F3F-9358-5B50-94DC-45CCBA783DF4__GUID-2D7D1AF6-2728-59CF-BD92-32D97FD6C6B6"><!-- --></a><p>Activating an alarm
on specified days. </p>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-CFE3A216-E637-51C1-B258-2ADF4E0F4150.html">Alarm Server</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-E6788741-EF34-57B7-B4D4-8AAC21B25774.html" title="This section provides a summary of related concepts and functionality of Alarm Server such as different states and types of alarms, sound control, alarm play interval, and alarm time changes as per system time changes.">Alarm Server
Concepts</a></div>
<div><a href="GUID-63730EBD-E5C1-5BA9-AB71-8FF668ECEF00.html" title="This section lists the tutorials which explain how to add, delete and update an alarm, receive alarm notifications, play an alarm continuously and activate an alarm on given days.">Alarm Server
Tutorials</a></div>
<div><a href="GUID-74153585-D483-5761-85B6-2CF2D2615C00.html">Alarm Server
Example</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br/>
<div><a href="GUID-7BCA8B7A-E250-5452-9837-26C60F71F14F.html">Alarm Server
Reference</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>