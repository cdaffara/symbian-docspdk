<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Unified Stores Overview"/>
<meta name="DC.Relation" scheme="URI" content="GUID-39B459CD-8210-59B5-95F4-85CE36676735.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2663ED06-8C97-5867-B7F6-6167EBFEA223.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C3290344-486B-554D-97FC-42DF48E150AA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-39B459CD-8210-59B5-95F4-85CE36676735.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Unified Stores Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3"><a name="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2858558 id2859383 id2859414 id2859476 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html">OS Security Guide</a> &gt; <a href="GUID-2663ED06-8C97-5867-B7F6-6167EBFEA223.html">Crypto Services</a> &gt; <a href="GUID-C3290344-486B-554D-97FC-42DF48E150AA.html">Certificate and Key Management</a> &gt; <a href="GUID-39B459CD-8210-59B5-95F4-85CE36676735.html">Unified Stores</a> &gt; </div>
<h1 class="topictitle1">Unified
Stores Overview </h1>
<div>
<p>A Symbian platform device may contain zero or more individual certificate
stores, and zero or more key stores. Software implementations for both of
these are supplied, and device creators may add their own, perhaps using special
hardware on the device - for example, using a WIM. The certificate store and
key store classes act as central interfaces for certificate and key management,
so that application writers do not need to know details of the specific implementations
present. These classes automatically discover all implementations of the relevant
interface on the device using the crypto token framework. </p>

<p>The certificate and key stores centralize and amalgamate the individual
certstore and keystore implementations. The stores are unified in the sense
that client requests, which relate to all store implementations (such as "list
keys" or "list certificates"), are passed to every implementation in turn,
and the results collated. Requests that relate to a specific store are routed
to the correct implementation. </p>

<p>Clients should only use the certificate store and key store classes to
access certificates and keys. There is no need to use the crypto token framework
directly, and although this is possible, it is not recommended. </p>

<div class="section" id="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3__GUID-490A4096-02BF-47F9-B630-3E5CE07E43AD"><a name="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3__GUID-490A4096-02BF-47F9-B630-3E5CE07E43AD"><!-- --></a><h2 class="sectiontitle">Programming with the Certificate Store and the Key       
   Store</h2> <p>The ctframework component provides the interfaces for
key store and certificate store implementations, and the unified stores themselves
are implemented in Certificate Management's (certman's) certstore component.
Programs wishing to use the unified stores should therefore be linked against
both <samp class="codeph">certstore.lib</samp> and <samp class="codeph">ctframework.lib</samp>.
Note that <samp class="codeph">certstore.lib</samp> provides both the <a href="GUID-0010EB39-8C23-5453-BE96-4EFC520B6F81.html">unified
certificate store</a> and the <a href="GUID-695FCEB8-EA04-5C1C-A197-648275BA0281.html" title="The Unified Keystore is responsible for managing cryptographic keys.">unified
key store</a>. </p>
 <p>The software certificate store implementation supplied
with the Symbian platform is provided by <samp class="codeph">filecertstore.dll</samp>,
and this runs entirely in the client application. The software key store runs
in a separate server process - this is implemented by <samp class="codeph">fstokenserver.exe</samp>,
and the client side part that communicates with the server is provided by <samp class="codeph">fstokencli.dll</samp>.
The unified stores use the ECom framework to load these DLLs automatically,
so there is no need to link against them in client applications. </p>
 <p>Within
the header files for the Unified Certificate Store and the Unified Key Store,
most of the functions are asynchronous and this means that clients need to
be implemented as active objects to work. All calls to asynchronous functions
must be called from the context of active objects - the active scheduler will
call the client's <samp class="codeph">RunL()</samp> function when the asynchronous function
completes. </p>
 <p>This means that the following code will not work: </p>
 <pre class="codeblock" id="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3__GUID-6D87CFA3-44ED-5B24-B17C-6A5A77854688"><a name="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3__GUID-6D87CFA3-44ED-5B24-B17C-6A5A77854688"><!-- --></a> 
// Broken!
TRequestStatus status;
certStore-&gt;DoSomething(parameters, status);
User::WaitForRequest(&amp;status);
</pre>
 </div>

<div class="section" id="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3__GUID-92B8798E-3963-49C9-8994-60CDAC33AC74"><a name="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3__GUID-92B8798E-3963-49C9-8994-60CDAC33AC74"><!-- --></a><h2 class="sectiontitle">APIs</h2> <p>The following table provides information on
the APIs for the unified certificate store and the unified key store. </p>
 
<div class="tablenoborder"><a name="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3__GUID-09857F72-9410-5F5A-BE8E-61D5BD04D01D"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-0F4DE9E0-4A98-5914-9AB1-DD6CE1A5A1F3__GUID-09857F72-9410-5F5A-BE8E-61D5BD04D01D" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d174377e89">API</th>

<th class="cellrowborder" valign="top" id="d174377e92">Description</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d174377e89 "><p> <a href="GUID-AD63C29A-17C3-375C-840F-42A92422300D.html"><span class="apiname">CUnifiedCertStore</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d174377e92 "><p>This class provides a unified view of all the certificate store
implementations in the device. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d174377e89 "><p> <a href="GUID-818689D6-EB99-382E-A435-D9C6C5D464DE.html"><span class="apiname">CUnifiedKeyStore</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d174377e92 "><p>This class provides a unified view of all the certificate store
implementations in the device. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-39B459CD-8210-59B5-95F4-85CE36676735.html">Unified Stores</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>