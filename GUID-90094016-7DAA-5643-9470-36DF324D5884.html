<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Opening a session that uses the Network PSY"/>
<meta name="abstract" content="This shows how to open a session using the Network PSY."/>
<meta name="description" content="This shows how to open a session using the Network PSY."/>
<meta name="DC.Relation" scheme="URI" content="GUID-A2721B54-9B0A-572E-A695-22058F627639.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5C01B66C-9F21-508F-A612-2ADAE1837A8A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A2721B54-9B0A-572E-A695-22058F627639.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7CE5CF4C-7661-5FE1-87CA-CC4EB1CECE34.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-90094016-7DAA-5643-9470-36DF324D5884"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Opening a session that uses the Network PSY</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-90094016-7DAA-5643-9470-36DF324D5884"><a name="GUID-90094016-7DAA-5643-9470-36DF324D5884"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403469 id2403727 id2403741 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html" title="The Data Source Modules collection contains components that enable the LBS subsystem to obtain position data.">Data Source Modules</a> &gt; <a href="GUID-5C01B66C-9F21-508F-A612-2ADAE1837A8A.html" title="The Network Positioning Module (PSY) connects the Location Server to the Network Location Manager.">Network Positioning Module</a> &gt; <a href="GUID-A2721B54-9B0A-572E-A695-22058F627639.html" title="This tutorial describes how configure and use the Network Positioning Module (Network PSY).">Network Positioning Module Tutorial</a> &gt; </div>
<h1 class="topictitle1">Opening a session that uses the Network PSY</h1>
<div><p>This shows how to open a session using the Network PSY. </p>
<div class="section"><p>The Network PSY is used by the Location Server <samp class="codeph">eposserver.exe</samp> to connect to positioning hardware using the Network Location Manager and a Network Protocol Module. </p>
 <p>To use the Network PSY a <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a> client opens an <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html"><span class="apiname">RPositioner</span></a> subsession using one of the following methods: </p>
 <ul><li id="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-0AF70316-601E-5D6F-819E-BFC804C6EED4"><a name="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-0AF70316-601E-5D6F-819E-BFC804C6EED4"><!-- --></a><p>Explicitly using a PSY implementation UID </p>
 </li>
 <li id="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-AF225F22-4B3D-5D99-83FB-BE9D5949AD61"><a name="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-AF225F22-4B3D-5D99-83FB-BE9D5949AD61"><!-- --></a><p>Implicitly (the Location Server uses the Default PSY) </p>
 </li>
 </ul>
 <p>These methods are described in more detail below. </p>
 </div>
 <a name="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-6076878E-2B0C-5FF8-AD0E-455A923FDBF9"><!-- --></a><ol id="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-6076878E-2B0C-5FF8-AD0E-455A923FDBF9"><li class="stepexpand" id="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-C40F3000-ACC6-54DB-8C08-CFF5D1113520"><a name="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-C40F3000-ACC6-54DB-8C08-CFF5D1113520"><!-- --></a><span>To use the Network PSY explicitly, open a session using the Network PSY implementation UID. </span>  The Network PSY has an implementation UID = 0x10285abc.   Open a session and subsession using the Location Acquisition API as shown below:   <pre class="codeblock" id="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-B89ECABA-CEAE-5490-A076-0BE568164046"><a name="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-B89ECABA-CEAE-5490-A076-0BE568164046"><!-- --></a>#include &lt;lbs.h&gt;
#include &lt;lbserrors.h&gt;

#define KNetPSYImplUid 0x10285abe

...

RPositionServer server;
RPositioner positioner;

/Create a session with the location server
User::LeaveIfError(server.Connect());
CleanupClosePushL(server);

// Create a subsession with the Location Server using the Network PSY
User::LeaveIfError(positioner.Open(server, TUid::Uid(KNetPSYImplUid)));
CleanupClosePushL(positioner);

// Use Location Acquisition API as normal - see API documentation for more details

...

// Close the session

CleanupStack::PopAndDestroy(&amp;positioner);
CleanupStack::PopAndDestroy(&amp;server);
</pre>
  </li>
<li class="stepexpand" id="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-D564080A-8ADD-5520-9EEF-998349030CF8"><a name="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-D564080A-8ADD-5520-9EEF-998349030CF8"><!-- --></a><span>To use the Network PSY implicitly through the Default PSY, open a session without specifying a PSY UID. </span>  <pre class="codeblock" id="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-2AE70E99-B63B-5C97-90C8-2F42E09B8D49"><a name="GUID-90094016-7DAA-5643-9470-36DF324D5884__GUID-2AE70E99-B63B-5C97-90C8-2F42E09B8D49"><!-- --></a>
...

//Create a session with the location server
User::LeaveIfError(server.Connect());
CleanupClosePushL(server);

// Location Server uses the default PSY, which can use the Network PSY
User::LeaveIfError(positioner.Open(server);
CleanupClosePushL(positioner);

// Use Location Acquisition API as normal...

...
</pre>
   The Default PSY has a list of all available PSYs. If the Network PSY is installed it can be used by the Default PSY. The choice of which PSY is used is based on the priority and availability of the PSYs.   See <a href="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html">Positioning Plug-in Information API</a> for more information about PSY settings.   See <a href="GUID-7CE5CF4C-7661-5FE1-87CA-CC4EB1CECE34.html" title="The Default Positioning Module is a proxy PSY used by the Location Server (eposserver.exe) to select a PSY when a Location Acquisition API client opens a session without specifying a PSY ID.">Default PSY</a> for information about how a PSY is selected.  </li>
</ol>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-A2721B54-9B0A-572E-A695-22058F627639.html" title="This tutorial describes how configure and use the Network Positioning Module (Network PSY).">Network Positioning Module Tutorial</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-7CE5CF4C-7661-5FE1-87CA-CC4EB1CECE34.html" title="The Default Positioning Module is a proxy PSY used by the Location Server (eposserver.exe) to select a PSY when a Location Acquisition API client opens a session without specifying a PSY ID.">Default
                PSY</a></div>
<div><a href="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html">Positioning Plug-in Information API</a></div>
<div><a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>