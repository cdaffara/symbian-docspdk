<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="MLbsNetworkProtocolObserver"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4"/>

<title>MLbsNetworkProtocolObserver</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4"><a name="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2578593 id2731347 id2731952 id2731957 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">MLbsNetworkProtocolObserver Class Reference</h1>
	<table class="signature"><tr><td>class MLbsNetworkProtocolObserver</td></tr></table><div class="section"><div>
			<p>The <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4">MLbsNetworkProtocolObserver</a> class is used in partnership with <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5">CLbsNetworkProtocolBase</a>. The observer interface is used by a protocol module to forward network requests and information to the LBS subsystem. It is also the interface that a protocol module uses to provide responses to requests made by the LBS subsystem via <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5">CLbsNetworkProtocolBase</a>.</p>

			<p>When a network protocol module makes a request via the observer API the LBS subsystem provides a response via the corresponding notification method in the <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5">CLbsNetworkProtocolBase</a> class. Although all the interface methods in the <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4">MLbsNetworkProtocolObserver</a> are synchronous they will return quickly. The LBS subsystem will internally queue requests and process them asynchronously.</p>

			<p>For example, when the network sends a message requesting the current location of the handset, the protocol module should forwarded this request via the method <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-38D42D53-4F23-3565-9434-7319729AA127">ProcessLocationRequest()</a>. When the current position is eventually calculated, the LBS subsystem informs the protocol module by calling MLbsNetworkProtocolObserver::RespondLocationRequest().</p>

			<p>Calls from the protocol module to the LBS subsystem may be unsolicited and/or in response to requests made by the observer. For example, if the subsystem requests GPS assistance data via <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-FDC425C8-7ADF-3769-AF44-DC4620486FC4">CLbsNetworkProtocolBase::RequestAssistanceData()</a> the protocol module will respond some time later via <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-FDFF613D-D4E8-3E22-9F25-6E4CB1373170">ProcessAssistanceData()</a>. However, the protocol module is also allowed to provide assistance data updates at any time and not just in response to the requests from the observer.</p>

			<p>
				<a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5">CLbsNetworkProtocolBase</a>
			</p>

		</div></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">void</td><td><a href="#GUID-91D233E3-D7DC-3B7E-8510-3A1CBEAA58FE">GetCurrentCapabilities</a>(<a href="GUID-90640AC2-12C6-3BBB-B620-71AA99F44BFA.html">TLbsNetPosCapabilities</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-FDFF613D-D4E8-3E22-9F25-6E4CB1373170">ProcessAssistanceData</a>(<a href="GUID-F6A93811-7F3F-3DE2-8915-4AC90F00BCDC.html">TLbsAsistanceDataGroup</a>, const RLbsAssistanceDataBuilderSet &amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-38D42D53-4F23-3565-9434-7319729AA127">ProcessLocationRequest</a>(const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>, <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html">TLbsNetProtocolService</a>, const <a href="GUID-A7515056-BA95-346F-9271-8941894E9A3C.html">TLbsNetPosRequestQuality</a> &amp;, const <a href="GUID-346C477F-005A-311D-A920-8C0F40E391CE.html">TLbsNetPosRequestMethod</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-2655DBFF-6F91-3084-B632-2D262490AE1E">ProcessLocationUpdate</a>(const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp;, const <a href="GUID-73D6F438-C270-33B9-974B-D4D1583E1738.html">TPositionInfoBase</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-25C0DE58-1144-35F8-BADC-1705A8F10C00">ProcessPrivacyRequest</a>(const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>, const <a href="GUID-B6FE76E9-E213-3FA8-8F1B-D3333D4B74C0.html">TLbsNetPosRequestPrivacy</a> &amp;, const TLbsExternalRequestInfo &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-8D77AE07-4088-363E-B0BA-4D04AA910ACB">ProcessSessionComplete</a>(const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-300CC32C-56F2-3211-A2AE-68C5709E3044">ProcessStatusUpdate</a>(<a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html">TLbsNetProtocolServiceMask</a>)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a href="GUID-D82DEC7A-71C2-3004-BFC2-C82C009A2715.html">TVersion</a></td><td><a href="#GUID-CB352F52-0885-36AE-A934-32171F416420">Version</a>()</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *</td><td><a href="#GUID-D783432F-927E-33EC-B0B2-7C1936855D56">ExtendedInterface</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Enumerations</th></tr></thead><tbody><tr><td align="right" valign="top">enum</td><td><a href="#GUID-C4E1BFDE-7111-3A25-941C-BAC1025FD1CA">TLbsNetProtocolService</a> { <br/><a href="#GUID-FCB8E343-533F-3F67-BFED-DE2F0BE1813F">EServiceNone</a> = 0x00, <a href="#GUID-F01757EA-AA2D-32C3-93D7-5BAA0CE5F064">EServiceNetworkLocation</a> = 0x01, <a href="#GUID-544EE672-2926-3D04-B085-972002B60245">EServiceSelfLocation</a> = 0x02, <a href="#GUID-0691A174-FD48-3D11-A9AD-C4AD73A3AC9B">EServiceMobileTerminated</a> = 0x04, <a href="#GUID-52E7B415-5C9A-3DC6-B940-5DA0D00CEBBD">EServiceTransmitThirdParty</a> = 0x08, <a href="#GUID-A31EAFC0-0BC9-3E80-A3AF-0A2D541C12A6">EServiceNetworkInduced</a> = 0x10, <a href="#GUID-4A2483A1-B60D-340E-BFC0-B36D1DA05BA9">EServiceTriggeredMolr</a> = 0x20<br/> }</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Type Definitions</th></tr></thead><tbody><tr><td align="right" valign="top">typedef</td><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
				 <a href="#GUID-81AC4613-8227-3310-B535-A19FB29C7AAA">TLbsNetProtocolServiceMask</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-D783432F-927E-33EC-B0B2-7C1936855D56"><a name="GUID-D783432F-927E-33EC-B0B2-7C1936855D56"><!-- --></a>
		<h2 class="topictitle2">ExtendedInterface(TInt, TAny *, TAny *)</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *</td><td>ExtendedInterface</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>aFunctionNumber,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *</td><td>aPtr1,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> *</td><td>aPtr2</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[private, virtual]</td></tr></table><div class="section"><div>
				<p>This methods is reserved for future expansion and should not be used. Currently not implemented. </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a> aFunctionNumber</td><td> </td></tr><tr class="bg"><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> * aPtr1</td><td> </td></tr><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TAny</a> * aPtr2</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-91D233E3-D7DC-3B7E-8510-3A1CBEAA58FE"><a name="GUID-91D233E3-D7DC-3B7E-8510-3A1CBEAA58FE"><!-- --></a>
		<h2 class="topictitle2">GetCurrentCapabilities(TLbsNetPosCapabilities &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>GetCurrentCapabilities</td><td>(</td><td><a href="GUID-90640AC2-12C6-3BBB-B620-71AA99F44BFA.html">TLbsNetPosCapabilities</a> &amp;</td><td>aCapabilities</td><td>)</td><td>const [pure virtual]</td></tr></table><div class="section"><div>
				<p>Retrieves from the LBS subsystem the current capabilities of the device.</p>

				<p>
					<a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-91D233E3-D7DC-3B7E-8510-3A1CBEAA58FE">GetCurrentCapabilities()</a> is used by the protocol module to obtain details of what types of network request the device is able to respond to. For example, this might include terminal based GPS but not terminal assisted.</p>

				<p>The protocol module should call <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-91D233E3-D7DC-3B7E-8510-3A1CBEAA58FE">GetCurrentCapabilities()</a> each time it needs to obtain the device's capabilities. The capabilities may vary as the user or network configures the device.</p>

				<p>The device may support more than one positioning method, in which case the first one in the list is the preferred positioning method for the device. The preferred positioning method is the method returned by calling aCapabilities.GetPosMethod(0, method).</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-90640AC2-12C6-3BBB-B620-71AA99F44BFA.html">TLbsNetPosCapabilities</a> &amp; aCapabilities</td><td>Returns the current capabilities of the device.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-FDFF613D-D4E8-3E22-9F25-6E4CB1373170"><a name="GUID-FDFF613D-D4E8-3E22-9F25-6E4CB1373170"><!-- --></a>
		<h2 class="topictitle2">ProcessAssistanceData(TLbsAsistanceDataGroup, const RLbsAssistanceDataBuilderSet &amp;, TInt)</h2>
		<table class="signature"><tr><td>void</td><td>ProcessAssistanceData</td><td>(</td><td><a href="GUID-F6A93811-7F3F-3DE2-8915-4AC90F00BCDC.html">TLbsAsistanceDataGroup</a></td><td>aDataMask,</td></tr><tr><td colspan="3"> </td><td>const RLbsAssistanceDataBuilderSet &amp;</td><td>aData,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>aReason</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Assistance data may arrive as a result of the LBS subsystem requesting it via a call to the <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5">CLbsNetworkProtocolBase</a> methods RequestSelfLocation() or RequestAssistanceData(). However, assistance data can also be delivered unsolicited. For example, a MT-LR location request (e.g. measurement control) from the network will normally include a default set of assistance data.</p>

				<p>This method can also be used by the network to request that the LBS subsystem deletes all of its cached assistance data, or a subset of it. This is done by setting aReason to KPositionAssistanceDataReset and aDataMask to specify which subset of assistance data must be reset. The parameter aDataMask must not be 0, and it must be a valid bitmask of values specified by TLbsAssistanceDataItem. When using this method to reset assistance data, the parameter aData can be left empty.</p>

				<p>
					<a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-B5D9869B-549B-327D-8716-7BA37D8B6AED">CLbsNetworkProtocolBase::RequestSelfLocation()</a> <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-FDC425C8-7ADF-3769-AF44-DC4620486FC4">CLbsNetworkProtocolBase::RequestAssistanceData()</a> </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-F6A93811-7F3F-3DE2-8915-4AC90F00BCDC.html">TLbsAsistanceDataGroup</a> aDataMask</td><td>Is a bitmask that specifies which subsets of GPS assistance data are included in the aData parameter, or which subsets of GPS assistance data should be reset. </td></tr><tr class="bg"><td class="parameter">const RLbsAssistanceDataBuilderSet &amp; aData</td><td>A container that holds all of the GPS assistance data to be delivered. </td></tr><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a> aReason</td><td>Delivery status for the GPS assistance data being supplied. KErrNone is passed if the specified assistance data has been successfully retrieved from the network and delivered. KPositionAssistanceDataReset can be passed to ask the LBS subsystem to reset its cached assistance data, or a subset of it. Otherwise, an error code is passed indicating the reason why the assistance data referenced in aData could not be obtained. </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-38D42D53-4F23-3565-9434-7319729AA127"><a name="GUID-38D42D53-4F23-3565-9434-7319729AA127"><!-- --></a>
		<h2 class="topictitle2">ProcessLocationRequest(const TLbsNetSessionId &amp;, TBool, TLbsNetProtocolService, const TLbsNetPosRequestQuality &amp;, const TLbsNetPosRequestMethod &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>ProcessLocationRequest</td><td>(</td><td>const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp;</td><td>aSessionId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td>aEmergency,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html">TLbsNetProtocolService</a></td><td>aService,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-A7515056-BA95-346F-9271-8941894E9A3C.html">TLbsNetPosRequestQuality</a> &amp;</td><td>aQuality,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-346C477F-005A-311D-A920-8C0F40E391CE.html">TLbsNetPosRequestMethod</a> &amp;</td><td>aMethod</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Location (e.g. measurement control) requests are received from the network, instructing the terminal to calculate and return its current position.</p>

				<p>When the network protocol module calls <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-38D42D53-4F23-3565-9434-7319729AA127">ProcessLocationRequest()</a> the method will return quickly. This initiates a position calculation by the LBS subsystem. When the current position is available, the subsystem return the location to the module via a call to <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-110D5EFE-377B-370D-A3FB-C132926D1D91">CLbsNetworkProtocolBase::RespondLocationRequest()</a>.</p>

				<p>The parameter aType indicates why the network has generated the location request and can take the following values:</p>

				<p>(a) It is the second stage of a MT-LR. This is normally generated by the network if device has responded positively to the preceding privacy request.</p>

				<p>(b) Location requests may also generated by the network when the terminal wishes to obtain assistance data - for example via a Mobile Originated Location Request (MO-LR).</p>

				<p>(c) A request from the terminal to transmit its current location to a remote third-party (X3P) can also result in the network generating a location request.</p>

				<p>(d) Under some location protocols, a request from the terminal for a network based location calculation (e.g. cell-id) may also result in the network asking the terminal for its position.</p>

				<p>(e) It is also possible for the network to send location requests without any preamble. These Network Induced Location Requests (NI-LR) are generated by the network and instruct the terminal to calculate and return its current position.</p>

				<p>The session ID parameter is used to connect a series of requests and responses. If this location request is the result of a MT-LR the session ID will be the same as that passed in the privacy request.</p>

				<p>Similarly, when performing a transmit to third-party (X3P), the session ID of the location request will be the same as that used to initiate the transfer.</p>

				<p>However, in the other cases the location request starts a new session. In this situation, the session ID will be unrelated to any previous request.</p>

				<p>Note: The aMethod parameter contains a network preferred list of positioning modes, however in order to determine the final positioning mode the LBS subsystem is using more information, like the default positioning mode ( CLbsAdmin); the number and the type of other positioning sessions and the capabilities of the AGPS positioning module (see the module configuration file).<a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-110D5EFE-377B-370D-A3FB-C132926D1D91">CLbsNetworkProtocolBase::RespondLocationRequest()</a> <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-25C0DE58-1144-35F8-BADC-1705A8F10C00">ProcessPrivacyRequest()</a> <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-9B87D8C5-A038-349F-AFA8-4A46385051ED">CLbsNetworkProtocolBase::RequestTransmitLocation()</a> <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-B5D9869B-549B-327D-8716-7BA37D8B6AED">CLbsNetworkProtocolBase::RequestSelfLocation()</a> <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-0129E9D8-867D-306C-998A-4FEED1A16F73">CLbsNetworkProtocolBase::RequestNetworkLocation()</a> <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-8D77AE07-4088-363E-B0BA-4D04AA910ACB">ProcessSessionComplete()</a> TLbsExternalRequestInfo TLbsNetRequestQuality TLbsNetRequestMode </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp; aSessionId</td><td>The Id of the location request within the LBS sub-system. </td></tr><tr class="bg"><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> aEmergency</td><td>ETrue if this is an emergency request, EFalse otherwise. </td></tr><tr><td class="parameter"><a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html">TLbsNetProtocolService</a> aService</td><td>Specifies the type of the service/session the request is related to. </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-A7515056-BA95-346F-9271-8941894E9A3C.html">TLbsNetPosRequestQuality</a> &amp; aQuality</td><td>Stipulates both the desired accuracy of the location information and the maximum time the network is prepared to wait. Zero values for these fields indicates there are no accuracy or time constraints. </td></tr><tr><td class="parameter">const <a href="GUID-346C477F-005A-311D-A920-8C0F40E391CE.html">TLbsNetPosRequestMethod</a> &amp; aMethod</td><td>contains a list of the positioning methods that should be used to obtain the device's position in the network's order of preference </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-2655DBFF-6F91-3084-B632-2D262490AE1E"><a name="GUID-2655DBFF-6F91-3084-B632-2D262490AE1E"><!-- --></a>
		<h2 class="topictitle2">ProcessLocationUpdate(const TLbsNetSessionId &amp;, const TPositionInfoBase &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>ProcessLocationUpdate</td><td>(</td><td>const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp;</td><td>aSessionId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-73D6F438-C270-33B9-974B-D4D1583E1738.html">TPositionInfoBase</a> &amp;</td><td>aPosInfo</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Location Information may arrive as a result of the LBS subsystem requesting it via a call to <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-0129E9D8-867D-306C-998A-4FEED1A16F73">CLbsNetworkProtocolBase::RequestNetworkLocation()</a>. However, location information can be delivered unsolicited. For example, a location request (e.g. measurement control) from the network will typically include a reference location that is derived from the terminal's serving cell. The reference location is injected at most once a session. This is valid even if assistance data is reset during the positioning request in order to avoid impacting the standard behaviour of the LBS sub-system when reset message is being received.</p>

				<p>The Session ID parameter indicates which request led to the location information being delivered. For a MT-LR, the session ID will be the ID assigned by the protocol module. This is the ID passed by the protocol module when it calls <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-25C0DE58-1144-35F8-BADC-1705A8F10C00">ProcessPrivacyRequest()</a>.</p>

				<p>If the location information was delivered as a result of a request generated by the terminal, the session ID should be the identifier used by the LBS subsystem when it initiated that request. This will be the ID passed to RequestSelfLocation(), RequestNetworkLocation() or RequestTransmitLocation() by the LBS subsystem.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp; aSessionId</td><td>The Id of the request under which the assistance data has arrived. </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-73D6F438-C270-33B9-974B-D4D1583E1738.html">TPositionInfoBase</a> &amp; aPosInfo</td><td>Location details of terminal as provided by the network. The parameter aPosInfo is normally of type TPositionInfo.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-25C0DE58-1144-35F8-BADC-1705A8F10C00"><a name="GUID-25C0DE58-1144-35F8-BADC-1705A8F10C00"><!-- --></a>
		<h2 class="topictitle2">ProcessPrivacyRequest(const TLbsNetSessionId &amp;, TBool, const TLbsNetPosRequestPrivacy &amp;, const TLbsExternalRequestInfo &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>ProcessPrivacyRequest</td><td>(</td><td>const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp;</td><td>aSessionId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td>aEmergency,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-B6FE76E9-E213-3FA8-8F1B-D3333D4B74C0.html">TLbsNetPosRequestPrivacy</a> &amp;</td><td>aPrivacy,</td></tr><tr><td colspan="3"> </td><td>const TLbsExternalRequestInfo &amp;</td><td>aRequestInfo</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Ask the LBS subsystem to process a privacy request from the network.</p>

				<p>Privacy requests (for example an LCS-Notification) are typically the first stage of a Mobile Terminated Location Request (MT-LR). They are received from the network to determine if the handset is willing to reveal its location to an external third-party.</p>

				<p>
					<a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-25C0DE58-1144-35F8-BADC-1705A8F10C00">ProcessPrivacyRequest()</a> supplies information about the external requestor but does not actually ask the device for its position. If the LBS subsystem responds indicating it is willing to reveal its location, the network will normally send the second stage of the MT-LR. This follow-on message is forward by the protocol module via a separate method (ProcessLocationRequest) and is the trigger for the LBS subsystem to calculate the current position.</p>

				<p>The <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-25C0DE58-1144-35F8-BADC-1705A8F10C00">ProcessPrivacyRequest()</a> method will return quickly. However, it does not indicate if request should be accepted or rejected. After the LBS subsystem has determined the user's preferences, it responds to the protocol module via a call to <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-6DEE1387-7EBD-3164-B080-C8ECC3C26907">CLbsNetworkProtocolBase::RespondPrivacyRequest()</a>. The response indicates if handset is willing to accept a location request.</p>

				<p>If the terminal does indicate it is willing to accept a location request, the network will typically send a follow-on request (measurement control) that asks for the devivce's location. The protocol module forwards this second request via the method <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-38D42D53-4F23-3565-9434-7319729AA127">ProcessLocationRequest()</a>.</p>

				<p>In all subsequent requests and responses, the same unique session ID (aSessionId) must be used in order to connect the various requests and responses.</p>

				<p>
					<a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-6DEE1387-7EBD-3164-B080-C8ECC3C26907">CLbsNetworkProtocolBase::RespondPrivacyRequest()</a> <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-38D42D53-4F23-3565-9434-7319729AA127">ProcessLocationRequest()</a> <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-110D5EFE-377B-370D-A3FB-C132926D1D91">CLbsNetworkProtocolBase::RespondLocationRequest()</a> <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-8D77AE07-4088-363E-B0BA-4D04AA910ACB">ProcessSessionComplete()</a> TLbsExternalRequestInfo TLbsLocationNotification </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp; aSessionId</td><td>The Id of the privacy request. This is generated by the protocol module and is used by the LBS subsystem when it responses to the privacy request via CLbsNetworkProtocolBase::RespondPrivacyRequest(). The same session identifier must be also be used by the protocol module if and when it receives the corresponding location request from the network. </td></tr><tr class="bg"><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> aEmergency</td><td>ETrue if this is an emergency privacy request, EFalse otherwise. </td></tr><tr><td class="parameter">const <a href="GUID-B6FE76E9-E213-3FA8-8F1B-D3333D4B74C0.html">TLbsNetPosRequestPrivacy</a> &amp; aPrivacy</td><td>Privacy procedure requested by the network on how to advise the user, </td></tr><tr class="bg"><td class="parameter">const TLbsExternalRequestInfo &amp; aRequestInfo</td><td>The identity of the external third party that is requesting the handsets position. </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-8D77AE07-4088-363E-B0BA-4D04AA910ACB"><a name="GUID-8D77AE07-4088-363E-B0BA-4D04AA910ACB"><!-- --></a>
		<h2 class="topictitle2">ProcessSessionComplete(const TLbsNetSessionId &amp;, TInt)</h2>
		<table class="signature"><tr><td>void</td><td>ProcessSessionComplete</td><td>(</td><td>const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp;</td><td>aSessionId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>aReason</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>The protocol module issues a single call to <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-8D77AE07-4088-363E-B0BA-4D04AA910ACB">ProcessSessionComplete()</a> to close a session and to return the final result code to the LBS subsystem.</p>

				<p>The aReason parameter indicates the overall success or failure for the request.</p>

				<p>The session ID parameter identifies the session that is being closed. This ID is allocated when a new request is created:</p>

				<p>In the case of MT-LR, the session ID is created by the protocol module when it issues the initial privacy request (<a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-25C0DE58-1144-35F8-BADC-1705A8F10C00">ProcessPrivacyRequest()</a>). That session extends through the various responses and, if appropriate, the subsequent location request (<a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-38D42D53-4F23-3565-9434-7319729AA127">ProcessLocationRequest()</a>). The protocol modules issues a single call to <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-8D77AE07-4088-363E-B0BA-4D04AA910ACB">ProcessSessionComplete()</a> to indicate the overall success or failure of the MT-LR.</p>

				<p>In normal situations, <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-8D77AE07-4088-363E-B0BA-4D04AA910ACB">ProcessSessionComplete()</a> will be invoked when the overall request has finished. However, it may occur at any stage - for example, in the case of a MT-LR the protocol module will complete the session immediately if there was an error transmitting the initial privacy response back to the network.</p>

				<p>Similarly, <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-8D77AE07-4088-363E-B0BA-4D04AA910ACB">ProcessSessionComplete()</a> is also used by the protocol module to terminate a request if a protocol conflict has arisen. For example, the location protocol may be unable to simulateously perform two requests.</p>

				<p>For a MT-LRs and NI-LRs the session ID are assigned by the network protocol module. For other requests, the session ID is generated by the LBS subsystem. In either situation, the assigned session ID is used by both the protocol module and the LBS subsystem to connect requests and responses arising from a particular request.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-72965288-F426-3487-BC47-4AB88E465415.html">TLbsNetSessionId</a> &amp; aSessionId</td><td>The Id of the request being closed. </td></tr><tr class="bg"><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a> aReason</td><td>Reason for the completion of the request. KErrNone if the request is succecsfully completed, or one of a range of error codes otherwise.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-300CC32C-56F2-3211-A2AE-68C5709E3044"><a name="GUID-300CC32C-56F2-3211-A2AE-68C5709E3044"><!-- --></a>
		<h2 class="topictitle2">ProcessStatusUpdate(TLbsNetProtocolServiceMask)</h2>
		<table class="signature"><tr><td>void</td><td>ProcessStatusUpdate</td><td>(</td><td><a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html">TLbsNetProtocolServiceMask</a></td><td>aActiveServiceMask</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Provides the LBS subsystem with details of the current status of the network protocol module</p>

				<p>
					<a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-300CC32C-56F2-3211-A2AE-68C5709E3044">ProcessStatusUpdate()</a> provides a bit mask of values from TLbsNetProtocolService. The bit-mask indicates which services are currently being handled by the protocol module.</p>

				<p>For example, if the protocol module is currently processing a Mobile Terminated Location Request and a local request for assistance data, aActiveServiceMask will be set to EServiceMobileTerminated + EServiceAssistanceData.</p>

				<p>The method is called each time the services that are active in the protocol module change.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html">TLbsNetProtocolServiceMask</a> aActiveServiceMask</td><td>This parameter indicates which services are currently active in the the protocol module. The parameter contains a bit-mask of values from TLbsNetProtocolService. If the protocol module is idle, the parameter is set to zero.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-CB352F52-0885-36AE-A934-32171F416420"><a name="GUID-CB352F52-0885-36AE-A934-32171F416420"><!-- --></a>
		<h2 class="topictitle2">Version()</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-D82DEC7A-71C2-3004-BFC2-C82C009A2715.html">TVersion</a></td><td>Version</td><td>(</td><td>)</td><td>const [virtual]</td></tr></table><div class="section"><div>
				<p>Get the current version of the observer interface </p>

			</div></div>

	</div>
<h1 class="pageHeading topictitle1">Member Enumerations Documentation</h1><div class="nested1" id="GUID-C4E1BFDE-7111-3A25-941C-BAC1025FD1CA"><a name="GUID-C4E1BFDE-7111-3A25-941C-BAC1025FD1CA"><!-- --></a>
		<h2 class="topictitle2">Enum TLbsNetProtocolService</h2>
		<div class="section"><div>
				<p>Values of type TLbsNetProtocolService describe the processes that can be active or queued in network protocol module.</p>

				<p>A single value is supplied as a parameter in <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-38D42D53-4F23-3565-9434-7319729AA127">ProcessLocationRequest()</a> to indicate why the location request was generated.</p>

				<p>
					<a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-300CC32C-56F2-3211-A2AE-68C5709E3044">ProcessStatusUpdate()</a> provides a mask of TLbsNetProtocolService values to indicate all the various tasks being performed or queued by the protocol module.</p>

				<p>
					<a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-38D42D53-4F23-3565-9434-7319729AA127">ProcessLocationRequest()</a> <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-81AC4613-8227-3310-B535-A19FB29C7AAA">TLbsNetProtocolServiceMask</a> <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-300CC32C-56F2-3211-A2AE-68C5709E3044">ProcessStatusUpdate()</a> </p>

			</div></div>
<div class="section enumerators"><h3 class="sectiontitle">Enumerators</h3><table border="0" class="enumerators"><tr><td valign="top">EServiceNone = 0x00</td><td>
							<p>No service </p>

						 </td></tr><tr class="bg"><td valign="top">EServiceNetworkLocation = 0x01</td><td>
							<p>Indicates that the protocol module has currently a request from the handset to perform a network calculation of the device s position. </p>

						 </td></tr><tr><td valign="top">EServiceSelfLocation = 0x02</td><td>
							<p>Indicates that the protocol module has currently a request to perform a self location. </p>

						 </td></tr><tr class="bg"><td valign="top">EServiceMobileTerminated = 0x04</td><td>
							<p>Indicates that the protocol module has currently a MT-LR request by an external party. This initially results in the protocol module issuing a privacy request, that contains the details of the request originator, followed by a location request. </p>

						 </td></tr><tr><td valign="top">EServiceTransmitThirdParty = 0x08</td><td>
							<p>Indicates that the protocol module has currently a request to to send the device's current position to a remote third party. </p>

						 </td></tr><tr class="bg"><td valign="top">EServiceNetworkInduced = 0x10</td><td>
							<p>Indicates that the protocol module has currently a location request that was generated by the network (NI-LR). In this situation, the protocol module will only generate a location request. There is no preceding privacy request. </p>

						 </td></tr><tr><td valign="top">EServiceTriggeredMolr = 0x20</td><td>
							<p>Indicates that the protocol module has currently a location request that was generated by the network (Triggered MOLR, SUPL 2.0). </p>

						 </td></tr></table></div>

	</div>
<h1 class="pageHeading topictitle1">Member Type Definitions Documentation</h1><div class="nested1" id="GUID-81AC4613-8227-3310-B535-A19FB29C7AAA"><a name="GUID-81AC4613-8227-3310-B535-A19FB29C7AAA"><!-- --></a>
		<h2 class="topictitle2">Typedef TLbsNetProtocolServiceMask</h2>
		<table class="signature"><tr><td>typedef 
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
				</td><td>TLbsNetProtocolServiceMask</td></tr></table><div class="section"><div>
				<p>TLbsNetProtocolServiceMask is used to hold a bit mask of values of TLbsNetProtocolService. This is used by <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-300CC32C-56F2-3211-A2AE-68C5709E3044">ProcessStatusUpdate()</a> to indicate the tasks currently being processed or queued by the network protocol module</p>

				<p>
					<a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-300CC32C-56F2-3211-A2AE-68C5709E3044">ProcessStatusUpdate()</a> <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-C4E1BFDE-7111-3A25-941C-BAC1025FD1CA">TLbsNetProtocolService</a> </p>

			</div></div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>