<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="RTPExample: RTP Packet Streaming Example"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>RTPExample: RTP Packet Streaming Example</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2397554 id2397597 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html">Multimedia Protocols Guide</a> &gt; <a href="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F.html">RTP</a> &gt; </div>
<h1 class="topictitle1">RTPExample: RTP Packet Streaming Example</h1>
<div>
<div class="section" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-50EDE46C-719B-4D77-8C61-666A5125C07C"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-50EDE46C-719B-4D77-8C61-666A5125C07C"><!-- --></a><h2 class="sectiontitle">Description</h2> <p>This example code demonstrates RTP packet streaming. It uses <samp class="codeph">CRtpFileSender</samp> to send RTP packets and <samp class="codeph">CRtpFileStreamer</samp> to receive RTP packets. The example opens an RTP session using the
pre-connected socket and initialises new send and receive sources
on the RTP session. It registers the callback functions when an RTP
packet is successfully sent by a send source or received by a receive
source, to receive notifications whenever an RTP packet is sent or
received. </p>
 <p>The <span class="filepath">RTPExample</span> example code
provides the following functionality: </p>
 </div>

<div class="section" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-1A5135CC-CAF2-58D8-B37D-5C04B0454D59"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-1A5135CC-CAF2-58D8-B37D-5C04B0454D59"><!-- --></a><h2 class="sectiontitle">Download</h2> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-a4ef24ea-0ffa-410a-a19c-e1085f64c0e2.zip" target="_blank">RTPExample.zip</a></p>
<p>Click <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-a4ef24ea-0ffa-410a-a19c-e1085f64c0e2.html">browse</a> to view the example code. </p>
 </div>

<div class="section" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-6CB87F84-BDBB-4606-917D-3FE79FDA16C5"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-6CB87F84-BDBB-4606-917D-3FE79FDA16C5"><!-- --></a><h2 class="sectiontitle">Initialising</h2> <pre class="codeblock" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-DD0E36D0-2CC4-52FF-8C58-2D0061A453CA"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-DD0E36D0-2CC4-52FF-8C58-2D0061A453CA"><!-- --></a>void CRtpFileStreamer::ConstructL();</pre>
 <p>Opens an RTP session using the pre-connected socket and initialises
new send sources on the RTP session. </p>
 </div>

<div class="section" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-3F6D2D79-9639-4EAC-9EE6-BA32DC688B6F"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-3F6D2D79-9639-4EAC-9EE6-BA32DC688B6F"><!-- --></a><h2 class="sectiontitle">Sending
an RTP packet</h2> <pre class="codeblock" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-53DAAACD-46A9-5DAA-8B2D-A4108DA6DFA7"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-53DAAACD-46A9-5DAA-8B2D-A4108DA6DFA7"><!-- --></a>void CRtpFileSender::RunL();</pre>
 <p>Sends the RTP packet. This does the following: </p>
 <ul>
<li id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-C279418B-B804-53F1-B18F-1FB030BC6007"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-C279418B-B804-53F1-B18F-1FB030BC6007"><!-- --></a><p>gets a new RTP
packet to send from the send source </p>
 </li>

<li id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-35269B55-BD88-5CEA-A9E1-5423BB0E3AF9"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-35269B55-BD88-5CEA-A9E1-5423BB0E3AF9"><!-- --></a><p>sets the RTP
timestamp of the RTP packet </p>
 </li>

<li id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-E38F83C8-5D08-51D2-9E6A-DA81FEBF6512"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-E38F83C8-5D08-51D2-9E6A-DA81FEBF6512"><!-- --></a><p>reads a block
of data from the source file </p>
 </li>

<li id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-42F2FE2D-D3B5-583E-B05C-CC693D3E14C9"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-42F2FE2D-D3B5-583E-B05C-CC693D3E14C9"><!-- --></a><p>creates an RTP
packet using the block of data </p>
 </li>

<li id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-B6ED7AF9-F395-589E-B511-3EBEAEF2E359"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-B6ED7AF9-F395-589E-B511-3EBEAEF2E359"><!-- --></a><p>sends the RTP
packet </p>
 </li>

<li id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-84488760-F28D-584A-A5F1-9E5D44C8C2D4"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-84488760-F28D-584A-A5F1-9E5D44C8C2D4"><!-- --></a><p>closes the source
file. </p>
 </li>

</ul>
 <p> <samp class="codeph">CRtpFileSender::PacketSent()</samp> is called
to notify that the RTP packet has been successfully sent. </p>
 </div>

<div class="section" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-72251E64-B5EF-4994-8ECF-89872AE23D2F"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-72251E64-B5EF-4994-8ECF-89872AE23D2F"><!-- --></a><h2 class="sectiontitle">Receiving
an RTP packet</h2> <pre class="codeblock" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-0C30C58E-70B9-5E2A-946F-F349E8026454"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-0C30C58E-70B9-5E2A-946F-F349E8026454"><!-- --></a>void CRtpFileStreamer::NewSource();</pre>
 <p>When an RTP packet with a new receive source arrives, this callback
function is called, which registers the packet. This can be used for
different types of RTP packets such as APP, BYE, SDES, SR and RR. </p>
 <pre class="codeblock" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-22A41C41-613E-5DB5-BA35-1F92FEE214AF"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-22A41C41-613E-5DB5-BA35-1F92FEE214AF"><!-- --></a>void CRtpFileStreamer::PacketArrived();</pre>
 <p>Whenever an RTP packet arrives, this callback function is called.
The function retrieves the payload from the packet received and writes
it to the target file. </p>
 </div>

<div class="section" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-2291AD95-0A59-4FE0-A52E-12FA0876E097"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-2291AD95-0A59-4FE0-A52E-12FA0876E097"><!-- --></a><h2 class="sectiontitle">Class
summary</h2><p> <a href="GUID-D4F08503-F1EF-3531-9C3C-4AF24A6255F0.html"><span class="apiname">RSocket </span></a>  <a href="GUID-EF29C1D7-B1E5-370F-AE37-66231A6BE449.html"><span class="apiname">RSocketServ </span></a>  <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><span class="apiname">RConnection </span></a> <a href="GUID-97FC8566-E4AD-3881-8669-134798A88779.html"><span class="apiname"> RRtpSession </span></a>  <a href="GUID-EF30A0A3-612A-362D-9AC5-07FD314E5CDC.html"><span class="apiname">RRtpSendSource </span></a>  <a href="GUID-3690BFA1-A4EA-34EA-AD63-5FCC14CB67A2.html"><span class="apiname">RRtpReceiveSource </span></a>  <a href="GUID-0720D1BD-7F73-3EF6-80A6-17127EF17C91.html"><span class="apiname">RRtpSendPacket </span></a>  <a href="GUID-3E4F47A8-0432-307A-B871-A2F7F3A7505F.html"><span class="apiname">RRtpReceivePacket </span></a>  <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html"><span class="apiname">RFs </span></a> <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html"><span class="apiname">RFile </span></a>  </p>
</div>

<div class="section" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-8FE5D0CA-57F6-4CF2-A5AA-44C6A7534AA3"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-8FE5D0CA-57F6-4CF2-A5AA-44C6A7534AA3"><!-- --></a><h2 class="sectiontitle">Usage</h2> <p>The Symbian build process describes how to build an application. </p>
 <p>This is a console application, so does not have
a GUI. It builds an executable called <span class="filepath">RTPExample.exe</span> in the standard location (<span class="filepath">\epoc32\release\winscw\</span> <em>&lt;build_variant&gt;</em> for CodeWarrior). After launching the
executable, depending on the emulator you are using, you may need
to task away from the app launcher/shell screen to view the console. </p>
 </div>

<div class="section" id="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-467EE2A3-9D85-4909-9CB1-98C9CBCAA41D"><a name="GUID-59230503-7E2E-505D-9BC9-C2D2DB96B3E9__GUID-467EE2A3-9D85-4909-9CB1-98C9CBCAA41D"><!-- --></a><h2 class="sectiontitle">See
also</h2> <p> <a href="GUID-993629CB-17B4-5E87-8DE1-06A4AC473FDD.html">RTP overview</a>  </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F.html">RTP</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>