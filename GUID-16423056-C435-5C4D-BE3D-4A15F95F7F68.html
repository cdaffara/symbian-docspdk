<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Configuration Tutorial"/>
<meta name="abstract" content="Describes the steps required in producing a ROM that will work with Writable Data Paging (WDP)."/>
<meta name="description" content="Describes the steps required in producing a ROM that will work with Writable Data Paging (WDP)."/>
<meta name="DC.Relation" scheme="URI" content="GUID-2D8B8FF1-7A35-5E98-BDDB-2B0BD8DE6215.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F78B7BF9-5FDD-4EF8-A921-71CCBB830A99.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F123D574-44DE-528A-806C-DB64229BCEA2.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2B7D04D9-98DE-5284-836D-01DB4FA8949D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2D8B8FF1-7A35-5E98-BDDB-2B0BD8DE6215.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6B9041F7-79A6-5CCA-9B4D-B8EF377FD378.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Configuration Tutorial</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2387995 id2388574 id2388657 id2388718 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-F78B7BF9-5FDD-4EF8-A921-71CCBB830A99.html" title="The device driver framework and how to implement a device driver.">Device Driver Guide</a> &gt; <a href="GUID-F123D574-44DE-528A-806C-DB64229BCEA2.html">Demand Paging</a> &gt; <a href="GUID-2B7D04D9-98DE-5284-836D-01DB4FA8949D.html">Writable Data Paging</a> &gt; <a href="GUID-2D8B8FF1-7A35-5E98-BDDB-2B0BD8DE6215.html">Writable Data Paging Tutorial</a> &gt; </div>
<h1 class="topictitle1">Configuration
Tutorial </h1>
<div><p>Describes the steps required in producing a ROM that will work
with Writable Data Paging (WDP). </p>

<div class="section" id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-77EC86D2-A74E-574C-868E-4304668A3863"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-77EC86D2-A74E-574C-868E-4304668A3863"><!-- --></a><p>Writable Data Paging
(WDP) allows allocated memory that is to be written e.g. stacks and heaps
to be paged in and out of the RAM pool. </p>
 </div>

<a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-F19DB5BA-CC38-5C2D-A337-12F4EB85F9E3"><!-- --></a><ol id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-F19DB5BA-CC38-5C2D-A337-12F4EB85F9E3"><li class="stepexpand" id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-DE8E7A0E-DB35-58B5-A5AA-85A2BFC7301C"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-DE8E7A0E-DB35-58B5-A5AA-85A2BFC7301C"><!-- --></a><span/><br/>
 It is recommended to enable WDP kerneltrace warnings if the build is
being migrated to a data paged system. 
 This is done by setting trace bit number 60 of the kernel trace flags. 
 The UDEB version of the build has to be used in order for tracing messages
to be available. 
 Once the demand paging build is stable, then the REL version of the
build can be used. 
</li>
<li class="stepexpand" id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-D5F19B3A-3520-576A-8D59-7E1BF29AB97B"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-D5F19B3A-3520-576A-8D59-7E1BF29AB97B"><!-- --></a><span/><br/>
 Set the paging policy for pages of the core ROM image. This is done
by using the datapagingpolicy and pagingpolicy keywords in the 'ROM_IMAGE[0]
{}' block. 
</li>
<li class="stepexpand" id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-C1DF8A12-8CB4-5E71-8247-7B8F29EE66D5"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-C1DF8A12-8CB4-5E71-8247-7B8F29EE66D5"><!-- --></a><span/><br/>
 Next, the data paging for ROFS images is enabled by using datapagingoverride
and pagingoverride keywords for each ROFS partition that contains executables
that should use data paging. This is done by adding the keywords into each
relevant 'ROM_IMAGE[&lt;partion&gt;] {}' block. 
</li>
<li class="stepexpand" id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-A13FBB84-3885-5A49-9BA9-698F65CBF1BF"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-A13FBB84-3885-5A49-9BA9-698F65CBF1BF"><!-- --></a><span/><br/>
 In order for a ROM to support data paging, it has to have a media driver
that supports data paging. 
</li>
</ol>

<div class="section" id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-9565A808-C86C-57CF-931E-2684A382D5E2"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-9565A808-C86C-57CF-931E-2684A382D5E2"><!-- --></a><p>The output of this
tutorial will be a configuration that allows the ROM build to use demand paging. </p>
 <div class="p"> <div class="note"><span class="notetitle">Note:</span>  This
tutorial only describes how to configure the general paging behaviour.</div>
 </div>
 </div>

<div class="example" id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-9A892A74-0823-57D7-A146-BC8E14508B99"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-9A892A74-0823-57D7-A146-BC8E14508B99"><!-- --></a><h2 class="sectiontitle">Example OBY
configuration file</h2> <p>Below is a typical OBY file that uses data paging,
XIP ROM and code paging: </p>
 <pre class="codeblock" id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-1A753A2E-3846-51BC-AF30-06A53785589C"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-1A753A2E-3846-51BC-AF30-06A53785589C"><!-- --></a>// MyDPConfig.oby 
// 
// The section below is used to specify if XIP ROM paging is to be implemented.
#if !defined PAGED_ROM 
#define PAGED_ROM 
#endif 

// The section below is used when code paging is to be implemented.
#if !defined USE_CODE_PAGING 
// Comment out the next line if code paging is wanted 
#define USE_CODE_PAGING 
#endif
 
#if !defined CODE_PAGING_FROM_ROFS 
// Comment out the next line if code paging from primary rofs is wanted 
#define CODE_PAGING_FROM_ROFS 
#endif 

// The section below is used to configure the RAM pages for writable data paging.
ROM_IMAGE[0] { 
pagedrom 
compress 
//                 Min   Max   Young/Old 
//                 Live  Live  Page 
//                 Pages Pages Ratio 
demandpagingconfig 256         512            3 
pagingoverride defaultpaged 

// The section below specifies if the default paging policy is to used.
#if defined USE_CODE_PAGING &amp;&amp; !defined USE_DATA_PAGING 
codepagingpolicy defaultpaged 
#endif
 
#if defined USE_DATA_PAGING 
#if defined USE_CODE_PAGING 
codepagingpolicy defaultpaged 
#endif
 
datapagingpolicy defaultpaged 
#endif 
}

#if defined CODE_PAGING_FROM_ROFS || defined USE_DATA_PAGING 
ROM_IMAGE[1] { 
pagingoverride defaultpaged 
}
#endif 
</pre>
 <p>The OBY file that determined the start of the primary ROFS
partition, for example base.iby, would then be adjusted thus: </p>
 <pre class="codeblock" id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-7C438B69-DEB8-5598-A338-9707FA23F758"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-7C438B69-DEB8-5598-A338-9707FA23F758"><!-- --></a>
#if defined(_NAND) || defined(_NAND2) 
#if !defined PAGED_ROM || defined CODE_PAGING_FROM_ROFS || defined USE_DATA_PAGING 
REM Start of ROFS image 
ROM_IMAGE[1] { 
#endif 
#endif </pre>
 <div class="p"> <div class="note"><span class="notetitle">Note:</span>  Make sure to include media drivers that can
support writable data paging.</div>
  </div>
 </div>

<div class="section" id="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-DFC44549-2B7B-5D4F-9686-7E7BEA7E430A"><a name="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-DFC44549-2B7B-5D4F-9686-7E7BEA7E430A"><!-- --></a><p>This tutorial only
covers the configuration of the general demand paging parameters. To see how
to make individual executables pageable see (<a href="GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68.html#GUID-16423056-C435-5C4D-BE3D-4A15F95F7F68__GUID-9A892A74-0823-57D7-A146-BC8E14508B99">the
mmp configuration tutorial</a>). </p>
 <p>The next step is to <a href="GUID-6B9041F7-79A6-5CCA-9B4D-B8EF377FD378.html" title="Describes how to build a ROM that will use demand paging. It assumes that the configuration files have been suitably modified.">build
the writable data paging ROM</a>  </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-2D8B8FF1-7A35-5E98-BDDB-2B0BD8DE6215.html">Writable Data Paging Tutorial</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-6B9041F7-79A6-5CCA-9B4D-B8EF377FD378.html" title="Describes how to build a ROM that will use demand paging. It assumes that the configuration files have been suitably modified.">Building
ROM tutorial</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>