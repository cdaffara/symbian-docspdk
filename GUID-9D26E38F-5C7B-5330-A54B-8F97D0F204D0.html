<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Performance Logging"/>
<meta name="abstract" content="Symbian platform provides macros that you can use in device driver and kernel extension programs to write a trace log."/>
<meta name="description" content="Symbian platform provides macros that you can use in device driver and kernel extension programs to write a trace log."/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC8D3736-EDCF-54CB-A614-2AAC4664F1CA.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F78B7BF9-5FDD-4EF8-A921-71CCBB830A99.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC8D3736-EDCF-54CB-A614-2AAC4664F1CA.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Performance Logging</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2387995 id2388473 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-F78B7BF9-5FDD-4EF8-A921-71CCBB830A99.html" title="The device driver framework and how to implement a device driver.">Device Driver Guide</a> &gt; <a href="GUID-DC8D3736-EDCF-54CB-A614-2AAC4664F1CA.html" title="This section describes how device drivers can use the services that the Kernel provides.">Kernel-Side Services</a> &gt; </div>
<h1 class="topictitle1">Performance
Logging</h1>
<div><p>Symbian platform provides macros that you can use in device driver
and kernel extension programs to write a trace log. </p>

<p>You can use the trace log to test the performance of the programs. </p>

<div class="section" id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-C332215D-B9E8-415B-8246-27D69F6A6E74"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-C332215D-B9E8-415B-8246-27D69F6A6E74"><!-- --></a><h2 class="sectiontitle">Perfomance macros</h2> <p>There are three macros that you
can insert into your code. They only differ with respect to the optional data
that you can add to the trace record. All are defined in <span class="filepath">kernperfloger.h</span>  </p>
 <ul>
<li id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-FB5EA9F3-4236-504C-B5A7-9FC1803A0DB8"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-FB5EA9F3-4236-504C-B5A7-9FC1803A0DB8"><!-- --></a><p> <a href="GUID-0CBE2ABA-A508-3E26-88FE-E4DAAE945D5E.html"><span class="apiname">PERF_LOG0</span></a> <samp class="codeph">(aSubCategory)</samp>  </p>
 </li>

<li id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-3B115481-BB41-55E3-AD33-225EB3B5A91C"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-3B115481-BB41-55E3-AD33-225EB3B5A91C"><!-- --></a><p> <a href="GUID-226FB57A-414A-3DC8-BFD7-6B93B55CD4B1.html"><span class="apiname">PERF_LOG1</span></a> <samp class="codeph">(aSubCategory,aUserData)</samp> </p>
 </li>

<li id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-FCBBFB1A-7DC9-5857-A0E0-050EA5C48FED"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-FCBBFB1A-7DC9-5857-A0E0-050EA5C48FED"><!-- --></a><p> <a href="GUID-78D928F5-0ADA-31BE-A71D-0542A9B6E3D6.html"><span class="apiname">PERF_LOG2</span></a> <samp class="codeph">(aSubCategory,aUserData,aUserData2)</samp> </p>
 <p>Note:
the <a href="GUID-02CF31A2-562D-3E8B-9A12-4C93D1B8DD19.html"><span class="apiname">PERF_LOG</span></a> macro is identical to <a href="GUID-78D928F5-0ADA-31BE-A71D-0542A9B6E3D6.html"><span class="apiname">PERF_LOG2</span></a>. </p>
 </li>

</ul>
 <p>You must specify an the 8-bit integer subcategory value in the <samp class="codeph">aSubCategory</samp> argument.
You can also supply one or two (or zero) 32-bit values; you are free to decide
on the meaning of such values. </p>
 <p>The macros wrap around the standard <samp class="codeph">BTrace***</samp> macros.
All trace records generated by these macros are given a category of <a href="GUID-5BF17780-AD31-30CF-AFD9-915CBDA74441.html#GUID-5BF17780-AD31-30CF-AFD9-915CBDA74441__GUID-E0E36933-0D01-35A9-9CCE-015F28E7E386"><span class="apiname">BTrace::EKernPerfLog</span></a>. </p>
 <p>The
generation and capture of trace information is implemented as a kernel extension.
This means that it is loaded and activated at an early stage in the startup
process of the device. </p>
 </div>

<div class="section" id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-AD31830B-ED00-436F-9B36-EB3B3B0BFE4F"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-AD31830B-ED00-436F-9B36-EB3B3B0BFE4F"><!-- --></a><h2 class="sectiontitle">Performance macro output format</h2> <p>The following table
shows which fields of a trace record are generated by each of the macros <a href="GUID-0CBE2ABA-A508-3E26-88FE-E4DAAE945D5E.html"><span class="apiname">PERF_LOG0</span></a>, <a href="GUID-226FB57A-414A-3DC8-BFD7-6B93B55CD4B1.html"><span class="apiname">PERF_LOG1</span></a>,
and <a href="GUID-78D928F5-0ADA-31BE-A71D-0542A9B6E3D6.html"><span class="apiname">PERF_LOG2</span></a>: </p>
 
<div class="tablenoborder"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-B409B220-479A-5999-A746-33787F764B6C"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-B409B220-479A-5999-A746-33787F764B6C" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p> <strong>Field</strong>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <strong>PERF_LOG0</strong>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <strong>PERF_LOG1</strong>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <strong>PERF_LOG2</strong>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>Fast Counter Timestamp </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>Context Id </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>PC value </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>the 32-bit integer value passed as aUserData </p>
 </td>

<td class="cellrowborder" valign="top"><p>NO </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>the 32-bit integer value passed as aUserData2 </p>
 </td>

<td class="cellrowborder" valign="top"><p>NO </p>
 </td>

<td class="cellrowborder" valign="top"><p>NO </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>Tick Count as returned from a call to <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-CAE58268-9553-37B3-9669-EACD32A1A662"><span class="apiname">NKern::TickCount()</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

<td class="cellrowborder" valign="top"><p>Yes </p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>

<div class="section" id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-70DA77F8-2B90-41B3-9373-7AE902FDE0EA"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-70DA77F8-2B90-41B3-9373-7AE902FDE0EA"><!-- --></a><h2 class="sectiontitle">How to use the macros</h2> <p>To use the macros: </p>
 <ul>
<li id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-4A92EAE7-B042-524B-B007-7828ECC99EC5"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-4A92EAE7-B042-524B-B007-7828ECC99EC5"><!-- --></a><p>Include the header file <span class="filepath">kernperfloger.h</span> in
your source code. </p>
 </li>

<li id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-A7A4BEED-F4D5-5D08-A4CB-0C088336FE37"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-A7A4BEED-F4D5-5D08-A4CB-0C088336FE37"><!-- --></a><p>Link to <samp class="codeph">btrace.lib</samp> in
your project </p>
 </li>

<li id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-BF42F248-7D2B-5BE3-87CD-5CEEDBF0B3A5"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-BF42F248-7D2B-5BE3-87CD-5CEEDBF0B3A5"><!-- --></a><p>Call the <samp class="codeph">PERF_LOG***</samp> macros
at appropriate points in your code. </p>
 <p>For examples, see the test code
for the macros in <span class="filepath">...\e32test\group\d_perflogger_test_ldd.mmp</span> and <span class="filepath">...\e32test\group\t_perflogger.mmp</span>  </p>
 </li>

<li id="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-B3C6CA8D-7257-59B8-8F96-D7F848F76223"><a name="GUID-9D26E38F-5C7B-5330-A54B-8F97D0F204D0__GUID-B3C6CA8D-7257-59B8-8F96-D7F848F76223"><!-- --></a><p>Rebuild your project </p>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-DC8D3736-EDCF-54CB-A614-2AAC4664F1CA.html" title="This section describes how device drivers can use the services that the Kernel provides.">Kernel-Side Services</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>