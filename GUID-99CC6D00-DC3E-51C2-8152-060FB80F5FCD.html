<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Composing the XML Data"/>
<meta name="DC.Relation" scheme="URI" content="GUID-219F3313-419B-5D10-B0FC-058FDF4B9269.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1A43A45B-80AE-56A0-A94C-64BA75519C67.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2F6D0FB7-656B-5195-8828-E70531EA56D3.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-99BD7331-D82A-5A2E-B2E4-314AD3FF38B7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-219F3313-419B-5D10-B0FC-058FDF4B9269.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-FDC0004A-A2EE-5B73-9E2D-B6864C600AF9.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2468D736-9F95-5412-B687-765D630651C7.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Composing the XML Data</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2403778 id2403849 id2403874 id2403889 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-1A43A45B-80AE-56A0-A94C-64BA75519C67.html">Messaging Application Guide</a> &gt; <a href="GUID-2F6D0FB7-656B-5195-8828-E70531EA56D3.html">Messaging Application Base</a> &gt; <a href="GUID-99BD7331-D82A-5A2E-B2E4-314AD3FF38B7.html">SMIL Parser</a> &gt; <a href="GUID-219F3313-419B-5D10-B0FC-058FDF4B9269.html">SMIL Parser Tutorials</a> &gt; </div>
<h1 class="topictitle1">Composing
the XML Data</h1>
<div>
<p>An MMS client may choose to use the SMIL composer to generate the presentation
part of outgoing messages, alternatively, it may use template SMIL files.
The first option results in a more flexible MMS composer, while the second
may be easier to implement. </p>

<div class="section"><h2 class="sectiontitle">Procedure</h2> <a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-10B85996-706E-5886-B0CB-254B14386863"><!-- --></a><ol id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-10B85996-706E-5886-B0CB-254B14386863">
<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-422300FD-099F-54DD-AEFB-6179F15934DE"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-422300FD-099F-54DD-AEFB-6179F15934DE"><!-- --></a><p><a href="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD.html#GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-E6F8AD16-4AEC-50DA-A234-5BFB1B54E44C">Build a DOM tree</a>. </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-6AC3C78D-478B-5055-8275-0F9E264CD9A5"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-6AC3C78D-478B-5055-8275-0F9E264CD9A5"><!-- --></a><p><a href="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD.html#GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-86533BEC-CF53-5F97-A5D9-A35392B70091">Generate XML data from the DOM tree</a>. </p>
 </li>

</ol>
 <p id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-E6F8AD16-4AEC-50DA-A234-5BFB1B54E44C"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-E6F8AD16-4AEC-50DA-A234-5BFB1B54E44C"><!-- --></a><strong>Build a DOM tree</strong> </p>
 <p>The
following steps are required to build the DOM tree: </p>
 <a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-44FDC571-1E07-529B-B15A-F4106B7D5DE0"><!-- --></a><ol id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-44FDC571-1E07-529B-B15A-F4106B7D5DE0">
<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-6A5B91D2-8BC8-5A6F-9B48-02C564EBD877"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-6A5B91D2-8BC8-5A6F-9B48-02C564EBD877"><!-- --></a><p>Create a <a href="GUID-2A597821-BF7F-379A-A32C-99CF9B5CDFAA.html"><span class="apiname">CMDXMLDocument</span></a> object. </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-9095F646-AA1C-5C8E-AB18-CF39FAB0E2E4"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-9095F646-AA1C-5C8E-AB18-CF39FAB0E2E4"><!-- --></a><p>Validate it using any
of the following methods, if required. </p>
 <ul>
<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-5683A64F-25A0-5546-B23B-E6977F8614A2"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-5683A64F-25A0-5546-B23B-E6977F8614A2"><!-- --></a><p>To validate SMIL data
as it is parsed, an instance of the SMIL DTD class must be passed to the <a href="GUID-3AF26F84-F4C0-312D-9ABD-1C6EC0BD1675.html"><span class="apiname">CMDXMLParser</span></a> on
construction. </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-07982E51-D361-5E59-9136-462F5ACF3731"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-07982E51-D361-5E59-9136-462F5ACF3731"><!-- --></a><p>To validate SMIL composition,
the SMIL DTD class must be passed to the <a href="GUID-2A597821-BF7F-379A-A32C-99CF9B5CDFAA.html"><span class="apiname">CMDXMLDocument</span></a> on
construction. </p>
 </li>

</ul>
 <p> <strong>Note: </strong> The DTD class provided standard is the SMIL DTD; however
it is possible to implement others. In order to provide support for validating
other DTDs, it is necessary to derive a class from <a href="GUID-F294DC1C-D762-3CF7-BB64-18E742BA6EAA.html"><span class="apiname">MXMLDtd</span></a>. </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-FF8536D6-4037-56D5-9028-5ED1586B9879"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-FF8536D6-4037-56D5-9028-5ED1586B9879"><!-- --></a><p>Call <a href="GUID-2A597821-BF7F-379A-A32C-99CF9B5CDFAA.html#GUID-2A597821-BF7F-379A-A32C-99CF9B5CDFAA__GUID-C6D821B2-7571-305C-A6D8-1B031BAE3774"><span class="apiname">CMDXMLDocument::DocumentElement()</span></a> to
get the root node of the DOM tree. </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-5DC5A1B2-5A5A-5BC1-923C-648B39937D4A"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-5DC5A1B2-5A5A-5BC1-923C-648B39937D4A"><!-- --></a><p>Create a child node
of the required type, for example <a href="GUID-DF432AB6-7895-30E8-9B4B-378E61A7A901.html"><span class="apiname">CMDXMLElement</span></a> or <a href="GUID-20E3DBF1-98CB-3B4D-AF93-38061F1E827A.html"><span class="apiname">CMDXMLComment</span></a>. </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-D4E61C95-2811-5016-9750-E7CDBB684D26"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-D4E61C95-2811-5016-9750-E7CDBB684D26"><!-- --></a><p>Add the node using <a href="GUID-8BBCB6A5-A133-3BDD-8614-E5E2F1FED7E5.html#GUID-8BBCB6A5-A133-3BDD-8614-E5E2F1FED7E5__GUID-F726866F-6CE0-34E5-B49C-7CC57B37BC1B"><span class="apiname">CMDXMLNode::AppendChild()</span></a>. </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-E83CDD32-A47D-55BF-A693-B561B4EA7947"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-E83CDD32-A47D-55BF-A693-B561B4EA7947"><!-- --></a><p>The tree can be navigated
as above, as more child nodes are added. </p>
 <p>Nodes can also be manipulated
by using the following functions: </p>
 <ul>
<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-64E13F5C-D7DA-5BA5-89DA-B3D6AA7E94CB"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-64E13F5C-D7DA-5BA5-89DA-B3D6AA7E94CB"><!-- --></a><p> <a href="GUID-8BBCB6A5-A133-3BDD-8614-E5E2F1FED7E5.html#GUID-8BBCB6A5-A133-3BDD-8614-E5E2F1FED7E5__GUID-34A68CA0-F498-3D7F-963D-F4AE695E0094"><span class="apiname">CMDXMLNode::RemoveChild()</span></a>  </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-190BF096-EEB7-5B3B-9BF6-1D950EA0A56D"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-190BF096-EEB7-5B3B-9BF6-1D950EA0A56D"><!-- --></a><p> <a href="GUID-8BBCB6A5-A133-3BDD-8614-E5E2F1FED7E5.html#GUID-8BBCB6A5-A133-3BDD-8614-E5E2F1FED7E5__GUID-97E6C080-E365-3B56-B30A-CB7FAB4C399F"><span class="apiname">CMDXMLNode::InsertBefore()</span></a>  </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-81622B01-DB8E-5F07-87D1-943D246403E9"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-81622B01-DB8E-5F07-87D1-943D246403E9"><!-- --></a><p> <a href="GUID-8BBCB6A5-A133-3BDD-8614-E5E2F1FED7E5.html#GUID-8BBCB6A5-A133-3BDD-8614-E5E2F1FED7E5__GUID-0C84FB21-298C-3295-A02E-D2F1005424A6"><span class="apiname">CMDXMLNode::ReplaceChild()</span></a>  </p>
 </li>

</ul>
 </li>

</ol>
 <p id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-86533BEC-CF53-5F97-A5D9-A35392B70091"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-86533BEC-CF53-5F97-A5D9-A35392B70091"><!-- --></a><strong>Generate XML data
from the DOM tree</strong> </p>
 <p>Once the DOM tree has been built it can be used
to generate the XML data. The following steps must be followed to compose
the data: </p>
 <a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-7C5B89A4-77D5-5755-8B33-E6D61AEEE437"><!-- --></a><ol id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-7C5B89A4-77D5-5755-8B33-E6D61AEEE437">
<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-952A92F5-FD89-5723-93F7-D0A09F716DD4"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-952A92F5-FD89-5723-93F7-D0A09F716DD4"><!-- --></a><p>Create an instance of <a href="GUID-78751199-C2AA-37C4-970B-191C4D496AAA.html"><span class="apiname">CMDXMLComposer</span></a>,
passing in an observer. </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-7897ABE8-8C44-512B-A5D6-F3E1D3F6E87A"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-7897ABE8-8C44-512B-A5D6-F3E1D3F6E87A"><!-- --></a><p>Call <a href="GUID-78751199-C2AA-37C4-970B-191C4D496AAA.html#GUID-78751199-C2AA-37C4-970B-191C4D496AAA__GUID-4252C6FB-970D-3ABB-A134-704C62CD4D52"><span class="apiname">CMDXMLComposer::ComposeFile()</span></a>,
passing in the name of the file where the XML data is to be written. </p>
 </li>

<li id="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-DD8EDCDD-3A0D-56F6-8923-2FF97DE100E8"><a name="GUID-99CC6D00-DC3E-51C2-8152-060FB80F5FCD__GUID-DD8EDCDD-3A0D-56F6-8923-2FF97DE100E8"><!-- --></a><p>The composer calls the <a href="GUID-5D55EC1A-8AF3-360F-A19C-FC93ED9312C6.html#GUID-5D55EC1A-8AF3-360F-A19C-FC93ED9312C6__GUID-E230031A-8C89-3EC9-8D1A-F31A73723AAA"><span class="apiname">MMDXMLComposerObserver::ComposeFileCompleteL()</span></a> function
on the observer when it has completed. The observer can then check the composer
to see if the XML has been generated successfully. </p>
 </li>

</ol>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-219F3313-419B-5D10-B0FC-058FDF4B9269.html">SMIL Parser Tutorials</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-FDC0004A-A2EE-5B73-9E2D-B6864C600AF9.html">SMIL Parser
Overview</a></div>
<div><a href="GUID-2468D736-9F95-5412-B687-765D630651C7.html">Parsing the
XML Data</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>