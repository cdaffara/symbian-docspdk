<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Creating a SRTP Stream"/>
<meta name="DC.Relation" scheme="URI" content="GUID-41E0D200-4A79-5D2B-BA4F-7AE55B5C3FBF.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-690FD404-5F40-5A0B-BE71-A4A310DF1C0E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-41E0D200-4A79-5D2B-BA4F-7AE55B5C3FBF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-06370120-7738-5694-9A8C-3B5B1E3A4352.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-425A208C-5D2D-55FD-8623-9E00006E2781.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-79846EA2-33CD-5D01-8E96-6092C15BD839.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-922F292E-9420-593B-B226-2764C5F29DF9.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6E1AC4C9-7CA3-503A-AFC0-BAF29CCA8290.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F9A24A47-7A0B-5F6E-8B0A-B7A7BCC4EAFC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B9BD2E0A-F214-5344-91A6-E4E99F0D74C8.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F9A24A47-7A0B-5F6E-8B0A-B7A7BCC4EAFC.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Creating a SRTP Stream</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2397554 id2398072 id2398087 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html">Multimedia Protocols Guide</a> &gt; <a href="GUID-690FD404-5F40-5A0B-BE71-A4A310DF1C0E.html" title="The Secure Real-Time Transport Protocol (SRTP) is defined as a profile of RTP. SRTP provides confidentiality, message authentication, and replay protection to the RTP traffic. It also protects the traffic of Real-time Transport Control Protocol (RTCP).">Secure Real-Time Transport Protocol</a> &gt; <a href="GUID-41E0D200-4A79-5D2B-BA4F-7AE55B5C3FBF.html">Tutorials:Index</a> &gt; </div>
<h1 class="topictitle1">Creating
a SRTP Stream</h1>
<div><div><p>SRTP library generates SRTP packets from the RTP or RTCP stream
and forwards the packets to the receiver. SRTP transforms incoming SRTP packets
to RTP/RTCP packets and passes them up the stack.  </p>
<p> The cryptographic
state information associated with each SRTP stream is termed the cryptographic
context. The state information is maintained by both the sender and receiver
of SRTP streams. If multiple SRTP streams exist within a given RTP session,
then separate cryptographic contexts must be maintained for each stream. Each
stream is identified by a Synchronisation Source (SSRC). The stream can be
a incoming or outgoing.  </p>
</div>

<div class="p"><p>Prior to stream creation: </p>
 <ul>
<li id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-A5BAEFAD-4D7E-55E8-8C7E-6D0050E4EA51"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-A5BAEFAD-4D7E-55E8-8C7E-6D0050E4EA51"><!-- --></a><p>A SRTP session must
be created and initialised. </p>
 </li>

<li id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-D39A619E-3302-555C-BA48-437438E87A90"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-D39A619E-3302-555C-BA48-437438E87A90"><!-- --></a><p>Values to populate the
cryptographic context for the stream shall be available. </p>
 <p>The callback
object (for MSRTPReKeyingObserver) shall be implemented . </p>
 </li>

</ul>
 </div>

<a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-CABD5696-FCB4-57FD-953D-2DCB97FF7021"><!-- --></a><ol id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-CABD5696-FCB4-57FD-953D-2DCB97FF7021"><li class="stepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-D9014EE0-7D97-5C29-B37E-E09E1A421705"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-D9014EE0-7D97-5C29-B37E-E09E1A421705"><!-- --></a><span>Create a SRTP stream
(incoming) by invoking the <a href="GUID-86044C21-B6E7-3A38-AEA1-DC1DF372DAAE.html"><span class="apiname">NewL()</span></a> of
the class <a href="GUID-86044C21-B6E7-3A38-AEA1-DC1DF372DAAE.html"><span class="apiname">CSRTPStreamIn</span></a>. </span>

 The functions <a href="GUID-86044C21-B6E7-3A38-AEA1-DC1DF372DAAE.html"><span class="apiname">NewL()</span></a> has six
variants. Each of the variants are explained below. 
<a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-F852D7E8-4434-53DF-92F5-DEE5EEB5A009"><!-- --></a><ol type="a" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-F852D7E8-4434-53DF-92F5-DEE5EEB5A009">
<li class="substepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-CF0C39A0-E813-5FEA-91FE-8548F74559B8"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-CF0C39A0-E813-5FEA-91FE-8548F74559B8"><!-- --></a><span/><br/>
 <pre class="codeblock" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-5E7C4FF4-FBBB-5B31-AC1E-F1CDE07152E8"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-5E7C4FF4-FBBB-5B31-AC1E-F1CDE07152E8"><!-- --></a>
                     IMPORT_C static CSRTPStreamIn* NewL( CSRTPSession&amp; aSession,
                                      TUint aSSRC);</pre>
 

 This API is appropriate when the stream uses the cryptographic context
of the session. 
 aSession is the input parameter that contains the session. The stream
will use the cryptographic context of the session. 
 aSSRC is the input parameter that contains the synchronization source
ID of the SRTP stream. 
 The API leaves with KErrNone if successfully executed, else returns
a valid system-wide error code. 
</li>

<li class="substepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-685A0114-7E49-5F44-BA72-D012D9F949D7"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-685A0114-7E49-5F44-BA72-D012D9F949D7"><!-- --></a><span/><br/>
 <pre class="codeblock" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-AD168026-EC51-5685-8C8E-A8C3968DB47B"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-AD168026-EC51-5685-8C8E-A8C3968DB47B"><!-- --></a>
                     IMPORT_C static CSRTPStreamIn* NewL( CSRTPSession&amp; aSession,
                                      TUint aSSRC,
                                      CSRTPCryptoContext* aCon,
                                      MSRTPReKeyingObserver&amp; aObs );</pre>
 

 This API is appropriate when the stream will have a cryptographic context
of its own. 
 aSession is the input parameter that contains the session. 
 aSSRC is the input parameter that contains the synchronization source
ID of the SRTP stream. 
 aCon is the input parameter that contains cryptographic context of
the SRTP stream. 
 aObs is the callback object. 
 The API leaves with KErrNone if successfully executed, else returns
a valid system-wide error code. 
</li>

<li class="substepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-160B8669-5CC2-5B80-9639-8FC80493A4C6"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-160B8669-5CC2-5B80-9639-8FC80493A4C6"><!-- --></a><span/><br/>
 <pre class="codeblock" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-91CB350B-6572-5250-A08C-A1150CB59468"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-91CB350B-6572-5250-A08C-A1150CB59468"><!-- --></a>
                     IMPORT_C static CSRTPStreamIn* NewL( CSRTPSession&amp; aSession);</pre>
 

 This API is appropriate when the stream will use the cryptographic context
of the session. No synchronisation source id is provided at the time of stream
creation. The stream uses late binding. 
 aSession is the input parameter that contains the session. 
 The API leaves with KErrNone if successfully executed, else returns
a valid system-wide error code. 
</li>

<li class="substepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-25FD7761-7ED8-5435-B772-2C61E2CD36CC"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-25FD7761-7ED8-5435-B772-2C61E2CD36CC"><!-- --></a><span/><br/>
 <pre class="codeblock" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-E126672C-D116-5567-9884-8F4D0D7B35E6"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-E126672C-D116-5567-9884-8F4D0D7B35E6"><!-- --></a>
                     IMPORT_C static CSRTPStreamIn* NewL( CSRTPSession&amp; aSession,
                                      CSRTPCryptoContext* aCon,
                                      MSRTPReKeyingObserver&amp; aObs );</pre>
 

 This API is appropriate when the stream will have a cryptographic context
of its own. No synchronisation source id is provided at the time of stream
creation. The stream uses late binding. 
 aSession is the input parameter that contains the session. 
 aCon is the input parameter that contains cryptographic context of
the SRTP stream. 
 aObs is the callback object. 
 The API leaves with KErrNone if successfully executed, else returns
a valid system-wide error code. 
</li>

<li class="substepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-A0CF7B65-9696-5D19-A58F-A9CA9B6C81E3"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-A0CF7B65-9696-5D19-A58F-A9CA9B6C81E3"><!-- --></a><span/><br/>
 <pre class="codeblock" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-2120336E-C154-5C64-9D89-E60A486BB062"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-2120336E-C154-5C64-9D89-E60A486BB062"><!-- --></a>
                    IMPORT_C static CSRTPStreamIn* NewL( CSRTPSession&amp; aSession,
                                      TUint aSSRC,
                                      MSRTPReKeyingObserver&amp; aObs );</pre>
 

 This API is appropriate when the stream will have a cryptographic context
of its own. The cryptographic context is set later using <a href="GUID-86044C21-B6E7-3A38-AEA1-DC1DF372DAAE.html"><span class="apiname">SetCryptoInL().</span></a>  
 aSession is the input parameter that contains the session. 
 aSSRC is the input parameter that contains the synchronization source
ID of the SRTP stream. 
 aObs is the callback object. 
 The API leaves with KErrNone if successfully executed, else returns
a valid system-wide error code. 
</li>

<li class="substepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-DD5D97B1-9170-5BD9-A484-EF3BD94DD7D3"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-DD5D97B1-9170-5BD9-A484-EF3BD94DD7D3"><!-- --></a><span/><br/>
 <pre class="codeblock" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-B99F6769-1B3B-5D5E-B592-231D42960FF3"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-B99F6769-1B3B-5D5E-B592-231D42960FF3"><!-- --></a>
                     IMPORT_C static CSRTPStreamIn* NewL( CSRTPSession&amp; aSession,
                                      MSRTPReKeyingObserver&amp; aObs ); </pre>
 

 This API is appropriate when the stream will have a cryptographic context
of its own. The cryptographic context is set later using <a href="GUID-86044C21-B6E7-3A38-AEA1-DC1DF372DAAE.html"><span class="apiname">SetCryptoInL().</span></a> No
synchronisation source id is provided at the time of stream creation .The
stream uses late binding. 
 aSession is the input parameter that contains the session. 
 aObs is the callback object. 
 The API leaves with KErrNone if successfully executed, else returns
a valid system-wide error code. 
</li>

</ol>

</li>
<li class="stepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-2305B32B-0C0A-561A-8EAC-501DBB246632"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-2305B32B-0C0A-561A-8EAC-501DBB246632"><!-- --></a><span>Create a SRTP stream
(outgoing) by invoking the <a href="GUID-86044C21-B6E7-3A38-AEA1-DC1DF372DAAE.html"><span class="apiname">NewL()</span></a> of
the class <a href="GUID-86044C21-B6E7-3A38-AEA1-DC1DF372DAAE.html"><span class="apiname">CSRTPStreamOut</span></a>. </span>

 The functions <a href="GUID-86044C21-B6E7-3A38-AEA1-DC1DF372DAAE.html"><span class="apiname">NewL()</span></a> has three
variants. Each of the variants are explained below. 
<a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-70902482-3118-5F45-85D1-4D35D82831BD"><!-- --></a><ol type="a" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-70902482-3118-5F45-85D1-4D35D82831BD">
<li class="substepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-5A084F2A-85B7-59F9-8801-831A1B10057E"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-5A084F2A-85B7-59F9-8801-831A1B10057E"><!-- --></a><span/><br/>
 <pre class="codeblock" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-5BA8A9E3-7BAE-5409-854E-B6840D32C80E"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-5BA8A9E3-7BAE-5409-854E-B6840D32C80E"><!-- --></a>
                     IMPORT_C static CSRTPStreamOut* NewL( CSRTPSession&amp; aSession, TUint aSSRC );</pre>
 

 This API is appropriate when the stream uses the cryptographic context
of the session. 
 aSession is the input parameter that contains the session. The stream
will use the cryptographic context of the session. 
 aSSRC is the input parameter that contains the synchronization source
ID of the SRTP stream. 
 The API leaves with KErrNone if successfully executed, else returns
a valid system-wide error code. 
</li>

<li class="substepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-86DC7C26-24BF-5973-8F46-90A716024F27"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-86DC7C26-24BF-5973-8F46-90A716024F27"><!-- --></a><span/><br/>
 <pre class="codeblock" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-7E9DCEB2-6A34-5C3E-B944-9C558CCDA2F2"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-7E9DCEB2-6A34-5C3E-B944-9C558CCDA2F2"><!-- --></a>
                     IMPORT_C static CSRTPStreamOut* NewL( CSRTPSession&amp; aSession,
                                       TUint aSSRC,
                                       CSRTPCryptoContext* aCon,
                                       MSRTPReKeyingObserver&amp; aObs );
        </pre>
 

 This API is appropriate when the stream will have a cryptographic context
of its own. 
 aSession is the input parameter that contains the session. 
 aSSRC is the input parameter that contains the synchronization source
ID of the SRTP stream. 
 aCon is the input parameter that contains cryptographic context of
the SRTP stream. 
 aObs is the callback object. 
 The API leaves with KErrNone if successfully executed, else returns
a valid system-wide error code. 
</li>

<li class="substepexpand" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-08AEA9DC-88BC-56B5-8E6C-51C312875B19"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-08AEA9DC-88BC-56B5-8E6C-51C312875B19"><!-- --></a><span/><br/>
 <pre class="codeblock" id="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-ADDC31FE-6D66-5860-9B1B-ACFF9E9CCCBC"><a name="GUID-372B7A9F-261E-5F3F-B114-4BE2FE2EF7C7__GUID-ADDC31FE-6D66-5860-9B1B-ACFF9E9CCCBC"><!-- --></a>
                    IMPORT_C static CSRTPStreamOut* NewL( CSRTPSession&amp; aSession,
                                       TUint aSSRC,
                                       MSRTPReKeyingObserver&amp; aObs ); </pre>
 

 This API is appropriate when the stream will have a cryptographic context
of its own. The cryptographic context is set later using <a href="GUID-86044C21-B6E7-3A38-AEA1-DC1DF372DAAE.html"><span class="apiname">SetCryptoOutL().</span></a>  
 aSession is the input parameter that contains the session. 
 aSSRC is the input parameter that contains the synchronization source
ID of the SRTP stream. 
 aObs is the callback object. 
 The API leaves with KErrNone if successfully executed, else returns
a valid system-wide error code. 
</li>

</ol>

</li>
</ol>

<div class="section"><p>On successful execution of the API, a SRTP stream is created and
initialized. </p>
 </div>

<div class="section"><p>The cryptographic context of the stream can be deleted and the
stream can be re-initialised using <a href="GUID-86044C21-B6E7-3A38-AEA1-DC1DF372DAAE.html"><span class="apiname">UpdateCryptoAndStatesL() </span></a>. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-41E0D200-4A79-5D2B-BA4F-7AE55B5C3FBF.html">Tutorials:Index</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-06370120-7738-5694-9A8C-3B5B1E3A4352.html">Creating
an SRTP                 Session</a></div>
<div><a href="GUID-425A208C-5D2D-55FD-8623-9E00006E2781.html">Creating
a                 Cryptographic Context</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-79846EA2-33CD-5D01-8E96-6092C15BD839.html">Encrypting
                RTCP Packet Data</a></div>
<div><a href="GUID-922F292E-9420-593B-B226-2764C5F29DF9.html">Encrypting
RTP                 Packet Data</a></div>
<div><a href="GUID-6E1AC4C9-7CA3-503A-AFC0-BAF29CCA8290.html">Decrypting
RTP                 Packet Data</a></div>
<div><a href="GUID-F9A24A47-7A0B-5F6E-8B0A-B7A7BCC4EAFC.html">Decrypting
                RTCP Packet Data</a></div>
<div><a href="GUID-B9BD2E0A-F214-5344-91A6-E4E99F0D74C8.html">Updating
Master                 Key</a></div>
<div><a href="GUID-F9A24A47-7A0B-5F6E-8B0A-B7A7BCC4EAFC.html">Managing
                Master Key</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>