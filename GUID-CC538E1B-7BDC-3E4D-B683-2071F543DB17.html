<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="conn::CSecureBUREncryptKeySource"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-CC538E1B-7BDC-3E4D-B683-2071F543DB17"/>

<title>conn::CSecureBUREncryptKeySource</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-CC538E1B-7BDC-3E4D-B683-2071F543DB17"><a name="GUID-CC538E1B-7BDC-3E4D-B683-2071F543DB17"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2366708 id2391687 id2391691 id2391696 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">conn::CSecureBUREncryptKeySource Class Reference</h1>
	<table class="signature"><tr><td>class conn::CSecureBUREncryptKeySource : public CBase</td></tr></table><div class="section"><div>
			<p>This class is responsible for providing keys for encryption of backup data or decryption of restore data based on drive and SID of the data owner.</p>

			<p>The class will be included in a separate key-providing DLL provided by licensees at build time. The default Symbian implementation will not provide keys.</p>

			<p>It is permissible to not provide any keys and to not encrypt data. It is also permissible for one key to be common to all or a set of SIDs or for one key to be common to a set of drives.</p>

			<p>The class can provide a data buffer with backup keys. If it does then the buffer will be stored (un-encrypted!) with the backup and will be provided when keys are requested for a restore operation. The class supports a default data buffer for a whole backup plus the ability to override it with buffers for specific SIDs. If the buffer is used then the implementor must be aware that is is not encrypted in the backup and so must not contain any sensitive data or any data that would allow an attacker to recreate the key. If a buffer is provided then it is returned at restore time on a per-SID basis - there is no provision to provide a default buffer at restore time.</p>

			<p>If keys are provided then the implementor needs to consider a number of factors:</p>

			<div class="p">
				<ul>
					<li>
						<p>If the key is entered by the user then it should be assumed that the user can decrypt data off the device.</p>

					</li>

				</ul>

				<ul>
					<li>
						<p>If the key is local to the device then the data cannot be restored to a new device.</p>

					</li>

				</ul>

				<ul>
					<li>
						<p>If the key depends on the drive being backed up or restored then the implementor needs to consider whether a drive may have its letter changed (e.g. if a device has multiple slots for removable media).</p>

					</li>

				</ul>
This class owns a <a href="GUID-2DF692CA-B34F-3A4E-ABE2-4F6DF606FB5E.html#GUID-2DF692CA-B34F-3A4E-ABE2-4F6DF606FB5E">CSecureBURKeySourceImpl</a> instance and publishes the public API to the outside world. The reason for this facade class is twofold:</div>

			<div class="p">
				<ul>
					<li>
						<p>Hiding the implementation details of <a href="GUID-2DF692CA-B34F-3A4E-ABE2-4F6DF606FB5E.html#GUID-2DF692CA-B34F-3A4E-ABE2-4F6DF606FB5E">CSecureBURKeySourceImpl</a></p>

					</li>

				</ul>

				<ul>
					<li>
						<p>Future binary compatibility</p>

					</li>

				</ul>

			</div>

		</div></div>
<div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">conn::CSecureBUREncryptKeySource<ul class="derivation"><li class="derivation-depth-1 "><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase</a></li></ul></li></ul></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-FDD50DDA-E0F5-3382-A1B5-DA947C736F08">~CSecureBUREncryptKeySource</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-E2090CC8-CF4C-3FC3-B780-76CC055880C6">GetBackupKeyL</a>(<a href="GUID-8269C6D2-B7F4-39ED-AA99-2C0338A45139.html">TDriveNumber</a>, <a href="GUID-E924490C-D174-3CE8-98BB-85A1D10BC90B.html">TSecureId</a>, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;, <a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-FF0031D3-734C-32DE-966F-6361A129451B">GetDefaultBufferForBackupL</a>(<a href="GUID-8269C6D2-B7F4-39ED-AA99-2C0338A45139.html">TDriveNumber</a>, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-83C10566-0C37-3CEF-95AD-F0B8FC25A6CF">GetRestoreKeyL</a>(<a href="GUID-8269C6D2-B7F4-39ED-AA99-2C0338A45139.html">TDriveNumber</a>, <a href="GUID-E924490C-D174-3CE8-98BB-85A1D10BC90B.html">TSecureId</a>, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;, <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;, <a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-CC538E1B-7BDC-3E4D-B683-2071F543DB17.html">CSecureBUREncryptKeySource</a> *</td><td><a href="#GUID-5CA01110-8089-37AD-84D3-C334F72E4BD2">NewL</a>()</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-3AF1D9B0-565B-3EF8-B371-436CA24E80FA">CSecureBUREncryptKeySource</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-207984C7-6DF0-3DCD-8105-8FE15B67A3CC">ConstructL</a>()</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::CBase()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Delete(CBase *)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Extension_(TUint,TAny *&amp;,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::~CBase()</a></td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Attributes</th></tr></thead><tbody><tr><td align="right" valign="top">
					<a href="GUID-2DF692CA-B34F-3A4E-ABE2-4F6DF606FB5E.html">CSecureBURKeySourceImpl</a> *</td><td><a href="#GUID-6E95DD3D-4483-3F3E-9603-A4A4B954E863">iImpl</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Constructor &amp; Destructor Documentation</h1><div class="nested1" id="GUID-3AF1D9B0-565B-3EF8-B371-436CA24E80FA"><a name="GUID-3AF1D9B0-565B-3EF8-B371-436CA24E80FA"><!-- --></a>
		<h2 class="topictitle2">CSecureBUREncryptKeySource()</h2>
		<table class="signature"><tr><td>CSecureBUREncryptKeySource</td><td>(</td><td>)</td><td>[private]</td></tr></table><div class="section"><div>
				<p>Standard C++ Constructor</p>

				<p>C++ constructor </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-FDD50DDA-E0F5-3382-A1B5-DA947C736F08"><a name="GUID-FDD50DDA-E0F5-3382-A1B5-DA947C736F08"><!-- --></a>
		<h2 class="topictitle2">~CSecureBUREncryptKeySource()</h2>
		<table class="signature"><tr><td>IMPORT_C</td><td>~CSecureBUREncryptKeySource</td><td>(</td><td>)</td><td>[virtual]</td></tr></table><div class="section"><div>
				<p>Standard virtual destructor </p>

			</div></div>

	</div>
<h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-207984C7-6DF0-3DCD-8105-8FE15B67A3CC"><a name="GUID-207984C7-6DF0-3DCD-8105-8FE15B67A3CC"><!-- --></a>
		<h2 class="topictitle2">ConstructL()</h2>
		<table class="signature"><tr><td>void</td><td>ConstructL</td><td>(</td><td>)</td><td>[private]</td></tr></table><div class="section"><div>
				<p>Symbian Second phase constructor</p>

				<p>Symbian 2nd phase construction </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-E2090CC8-CF4C-3FC3-B780-76CC055880C6"><a name="GUID-E2090CC8-CF4C-3FC3-B780-76CC055880C6"><!-- --></a>
		<h2 class="topictitle2">GetBackupKeyL(TDriveNumber, TSecureId, TBool &amp;, TDes8 &amp;, TBool &amp;, TDes &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>GetBackupKeyL</td><td>(</td><td><a href="GUID-8269C6D2-B7F4-39ED-AA99-2C0338A45139.html">TDriveNumber</a></td><td>aDrive,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E924490C-D174-3CE8-98BB-85A1D10BC90B.html">TSecureId</a></td><td>aSID,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;</td><td>aDoEncrypt,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp;</td><td>aKey,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;</td><td>aGotBuffer,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aBuffer</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<p>Provides a key to use to encrypt backup data for a specific data owner from a specific drive. It is permissible to provide the same key for some or all data owners. It is permissible to provide the same key for some or all drives.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-8269C6D2-B7F4-39ED-AA99-2C0338A45139.html">TDriveNumber</a> aDrive</td><td>the drive (EDrive A to EDriveZ) which is being backed up  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E924490C-D174-3CE8-98BB-85A1D10BC90B.html">TSecureId</a> aSID</td><td>the secure id of the data owner  </td></tr><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp; aDoEncrypt</td><td>returns ETrue if a key is provided, EFalse if data is not to be encrypted  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp; aKey</td><td>the key to use to encrypt data - ignored if aDoEncrypt is set to EFalse  </td></tr><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp; aGotBuffer</td><td>returns ETrue if a buffer is returned that is specific to this SID  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aBuffer</td><td>if aGotBuffer is set to ETrue then this is a buffer of data to be included with backups.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-FF0031D3-734C-32DE-966F-6361A129451B"><a name="GUID-FF0031D3-734C-32DE-966F-6361A129451B"><!-- --></a>
		<h2 class="topictitle2">GetDefaultBufferForBackupL(TDriveNumber, TBool &amp;, TDes &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>GetDefaultBufferForBackupL</td><td>(</td><td><a href="GUID-8269C6D2-B7F4-39ED-AA99-2C0338A45139.html">TDriveNumber</a></td><td>aDrive,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;</td><td>aGotBuffer,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aBuffer</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<p>Get a default data buffer for all backups of a specified drive.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-8269C6D2-B7F4-39ED-AA99-2C0338A45139.html">TDriveNumber</a> aDrive</td><td>the drive being backed up - may be ignored  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp; aGotBuffer</td><td>set to ETrue on return if a buffer is supplied  </td></tr><tr><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aBuffer</td><td>if aGotBuffer is set to ETrue then this is a buffer of data to be included with backups.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-83C10566-0C37-3CEF-95AD-F0B8FC25A6CF"><a name="GUID-83C10566-0C37-3CEF-95AD-F0B8FC25A6CF"><!-- --></a>
		<h2 class="topictitle2">GetRestoreKeyL(TDriveNumber, TSecureId, TBool, TDes &amp;, TBool &amp;, TDes8 &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>GetRestoreKeyL</td><td>(</td><td><a href="GUID-8269C6D2-B7F4-39ED-AA99-2C0338A45139.html">TDriveNumber</a></td><td>aDrive,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E924490C-D174-3CE8-98BB-85A1D10BC90B.html">TSecureId</a></td><td>aSID,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td>aGotBuffer,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aBuffer,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp;</td><td>aGotKey,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp;</td><td>aKey</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<p>Provides a key to use to decrypt backup data for a specific data owner from a specific drive. It is permissible to provide the same key for some or all data owners. It is permissible to provide the same key for some or all drives.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-8269C6D2-B7F4-39ED-AA99-2C0338A45139.html">TDriveNumber</a> aDrive</td><td>the drive (EDrive A to EDriveZ) which is being restored  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E924490C-D174-3CE8-98BB-85A1D10BC90B.html">TSecureId</a> aSID</td><td>the secure id of the data owner  </td></tr><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> aGotBuffer</td><td>set to ETrue if a buffer is provided  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aBuffer</td><td>if aGotBuffer is set to ETrue then this is a buffer of data that was provided with the key for the backup (or the default buffer)  </td></tr><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a> &amp; aGotKey</td><td>returns ETrue if a key is provided, EFalse if data is not to be decrypted  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp; aKey</td><td>the key to use to decrypt data - ignored if aGotKey is set to EFalse  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-5CA01110-8089-37AD-84D3-C334F72E4BD2"><a name="GUID-5CA01110-8089-37AD-84D3-C334F72E4BD2"><!-- --></a>
		<h2 class="topictitle2">NewL()</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-CC538E1B-7BDC-3E4D-B683-2071F543DB17.html">CSecureBUREncryptKeySource</a> *</td><td>NewL</td><td>(</td><td>)</td><td>[static]</td></tr></table><div class="section"><div>
				<p>Static factory method (two phase construction)</p>

				<p/>

			</div></div>

	</div>
<h1 class="pageHeading topictitle1">Member Data Documentation</h1><div class="nested1" id="GUID-6E95DD3D-4483-3F3E-9603-A4A4B954E863"><a name="GUID-6E95DD3D-4483-3F3E-9603-A4A4B954E863"><!-- --></a>
		<h2 class="topictitle2">
					CSecureBURKeySourceImpl * iImpl</h2>
		<table class="signature"><tr><td>
					<a href="GUID-2DF692CA-B34F-3A4E-ABE2-4F6DF606FB5E.html">CSecureBURKeySourceImpl</a> *</td><td>iImpl</td><td>[private]</td></tr></table><div class="section"><div>
				<p>Pointer the the <a href="GUID-2DF692CA-B34F-3A4E-ABE2-4F6DF606FB5E.html#GUID-2DF692CA-B34F-3A4E-ABE2-4F6DF606FB5E">CSecureBURKeySourceImpl</a> implementation </p>

			</div></div>

	</div>

	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>