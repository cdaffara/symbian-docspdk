<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="SUPL Push API"/>
<meta name="abstract" content="The SUPL Push API is used to process SUPL INIT messages sent from a SUPL Location Platform (SLP)."/>
<meta name="description" content="The SUPL Push API is used to process SUPL INIT messages sent from a SUPL Location Platform (SLP)."/>
<meta name="DC.Relation" scheme="URI" content="GUID-816334A7-488B-5F91-8C2E-47076D875013.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-01C03839-C88B-5FC3-9E0E-686415888B63.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-816334A7-488B-5F91-8C2E-47076D875013.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-EE07DF44-6B3B-5D9A-A794-C49863597721.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CC3454B1-21DA-542E-8949-52C30755AC77.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>SUPL Push API</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403195 id2403262 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-01C03839-C88B-5FC3-9E0E-686415888B63.html" title="The Network Adaptation collection contains Protocol Module ECOM plug-ins that can be used by the Network Gateway to support location and privacy requests.">Network Adaptation</a> &gt; <a href="GUID-816334A7-488B-5F91-8C2E-47076D875013.html" title="The LBS subsystem contains a reference Network Protocol Module that supports the Open Mobile Alliance (OMA) SUPL V1.0 standard. This section contains documentation that describes the Symbian platform reference SUPL Protocol Module, its supporting components and APIs, its runtime behaviour and details about how it is configured by device creators.">SUPL Protocol Module</a> &gt; </div>
<h1 class="topictitle1">SUPL
Push API</h1>
<div><p>The SUPL Push API is used to process <samp class="codeph">SUPL INIT</samp> messages
sent from a SUPL Location Platform (SLP). </p>

<p>Note: From Symbian^3 the SUPL Protocol Module is deprecated.
For the preferred way of using SUPL see <a href="GUID-1F7F543A-8A9C-4460-BDB1-A6866E9DF0B9.html">SUPL
Proxy Protocol Module</a>. </p>

<div class="section" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-E41670FA-DE7E-44F2-8664-9124B2D75A61"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-E41670FA-DE7E-44F2-8664-9124B2D75A61"><!-- --></a><h2 class="sectiontitle">Purpose</h2> <p>This document describes the SUPL Push API
which is used to process <samp class="codeph"/><samp class="codeph">SUPL INIT</samp> messages
sent from a SUPL Location Platform (SLP). A <samp class="codeph">SUPL INIT</samp> message
is sent from an SLP to a SUPL Enabled Terminal (SET) to start a network initiated
location request. </p>
 <p><a href="GUID-CC3454B1-21DA-542E-8949-52C30755AC77.html" title="The SUPL Protocol Module is a Network Protocol Module provided by Symbian to support the OMA SUPL v1.0 standard.">SUPL
Protocol Module Overview</a> describes how the WAP Push plug-in and test
SMS Trigger plug-in use the SUPL Push API to forward <samp class="codeph">SUPL INIT</samp> messages
to the SUPL Protocol Module (SPM). </p>
 <p>This document is intended for Symbian
licensees who want to create their own handlers to process <samp class="codeph">SUPL INIT</samp> messages.
Licensees who simply want to use the WAP Push plug-in do not need to use this
API. </p>
 </div>

<div class="section" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-8C01FD97-A1A2-4618-AD92-CB4D7E3F93C5"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-8C01FD97-A1A2-4618-AD92-CB4D7E3F93C5"><!-- --></a><h2 class="sectiontitle">Introduction</h2> <p>Secure User Plane Location (SUPL)
is a standard for enabling Location Based Services using IP for most of the
communication between a SET and an SLP. To start a network initiated request,
the SLP must send a <samp class="codeph">SUPL           INIT</samp> message to a SET.
The flow of events is as follows: </p>
 <a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-221892B8-4886-555C-9FCB-C32B90F636AD"><!-- --></a><ol id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-221892B8-4886-555C-9FCB-C32B90F636AD">
<li id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-B99B0CE0-8C5A-5F89-8310-A46A3398387D"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-B99B0CE0-8C5A-5F89-8310-A46A3398387D"><!-- --></a><p>To start a location
request, the SLP sends a <samp class="codeph">SUPL INIT</samp> message to the SET using
WAP Push or SMS Trigger [<a href="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E.html#GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-202D83AC-6C99-5481-8074-ACFEBD426AE3">1</a>]. </p>
 </li>

<li id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-85ADC9EF-AE10-5F69-87F6-4DDE307DDBD2"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-85ADC9EF-AE10-5F69-87F6-4DDE307DDBD2"><!-- --></a><p>To support SUPL, the
LBS subsystem ROM is built to include the SUPL WAP Push plug-in or an SMS
Trigger plug-in as described in <a href="GUID-91F95D0C-E4CF-510E-B280-E27F89274ACE.html" title="This document describes how a device creator starts working with the SUPL Protocol Module.">SUPL
Protocol Module Quick Start</a>. </p>
 <p>The <samp class="codeph">SUPL INIT</samp> message
is received by either the WAP Push plug-in (loaded by the WAP Push Framework)
or the SMS Trigger plug-in (loaded by the Messaging Watcher Framework) shown
in figure 1. Either plug-in processes a <samp class="codeph">SUPL INIT</samp> message
and call the methods of the SUPL Push API to cause the SUPL Protocol Module
to open a socket connection to the SLP. </p>
 <p>A licensee can also create
their own <samp class="codeph">SUPL INIT</samp> handler to process messages received
from an SLP. All <samp class="codeph">SUPL INIT</samp> handlers must use the SUPL Push
API. </p>
 </li>

<li id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-5B15D26D-5FD8-5421-8A41-5100C67F316A"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-5B15D26D-5FD8-5421-8A41-5100C67F316A"><!-- --></a><p>The SLP and the SET
process the location request as described in <a href="GUID-DC0F9E05-CB03-5BA6-AA5F-7D9A83070FAF.html">SUPL
sequence diagrams</a>. </p>
 </li>

</ol>
 </div>

<div class="section" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-4C059230-5393-4AEA-8A77-A4852260EE11"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-4C059230-5393-4AEA-8A77-A4852260EE11"><!-- --></a><h2 class="sectiontitle">Symbian plug-ins that use the SUPL Push API</h2> <p>Symbian
provides two plug-ins that can process <samp class="codeph">SUPL INIT</samp> messages
and call the SUPL Push API: </p>
 <ul>
<li id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-DB057171-D10D-5C53-8B0A-CCB150AB1184"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-DB057171-D10D-5C53-8B0A-CCB150AB1184"><!-- --></a><p>The SUPL WAP Push plug-in
receives <samp class="codeph">SUPL INIT</samp> messages sent via WAP Push. </p>
 </li>

<li id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-B39D8B6C-D679-57E0-99D6-903B1EF4899D"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-B39D8B6C-D679-57E0-99D6-903B1EF4899D"><!-- --></a><p>The Symbian test SUPL
SMS Trigger plug-in receives <samp class="codeph">SUPL                 INIT</samp> messages
sent via SMS. </p>
 </li>

</ul>
 <p>The SUPL WAP Push handler plug-in and SUPL SMS Trigger plug-in use
the SUPL Push API to notify the SUPL Protocol Module that an SLP is starting
a network initiated location request. </p>
 <div class="fignone" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-BEDFACD2-D262-500C-ACF5-37679F7FA091"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-BEDFACD2-D262-500C-ACF5-37679F7FA091"><!-- --></a><span class="figcap">Figure 1.               Figure 1: SUPL Push API and Symbian plug-ins        
   </span>

<img src="GUID-398483AD-C341-5777-AD23-381A067F9180_d0e457872_href.png"/>
</div>
 <p><strong>SUPL
WAP Push plug-in</strong> </p>
 <p>The Symbian platform includes the WAP Push Framework
to process WAP Push messages. If the Symbian SUPL WAP Push plug-in is installed,
the WAP Push Framework uses it to process <samp class="codeph">SUPL INIT</samp> messages
sent by WAP Push. The plug-in calls the methods of the SUPL Push API causing
the SUPL Protocol Module to open a connection to the SLP. </p>
 <p>The SUPL
WAP Push handler plug-in is a production component. Licensees can install
the plug-in in their ROM so that it is available to the WAP Push Framework.
Licensees do not need to develop their own WAP Push handler plug-in. See <a href="GUID-91F95D0C-E4CF-510E-B280-E27F89274ACE.html" title="This document describes how a device creator starts working with the SUPL Protocol Module.">SUPL Protocol Module Quick
Start</a> for details of how to configure an LBS ROM to include the WAP
Push plug-in. </p>
 <p>Source code for the WAP Push plug-in can be found at <span class="filepath">&lt;LBS_SOURCE_ROOT&gt;/LbsSuplProtocolModule/SuplWapPush</span> and consists of a single class which gets the <samp class="codeph">SUPL INIT</samp> message
body and uses the SUPL Push API to forward it to the SUPL Protocol Module. </p>
 <p><strong>SUPL SMS Trigger plug-in</strong> </p>
 <p>If the Symbian SUPL SMS Trigger plug-in
is installed, it is loaded on OS startup by the Watcher Framework, which uses
it to process <samp class="codeph">SUPL              INIT</samp> messages sent by SMS
Trigger. The plug-in calls the methods of the SUPL Push API causing the SUPL
Protocol Module to open a connection to the SLP. </p>
 <p>Source code for the
SMS Trigger plug-in can be found at <span class="filepath">&lt;LBS_SOURCE_ROOT&gt;/LbsSuplProtocolModule/SuplSmsTrigger</span> and
consists of a single class which gets the <samp class="codeph">SUPL INIT</samp> message
body and uses the SUPL Push API to forward it to the SUPL Protocol Module. </p>
 </div>

<div class="section" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-B7FCA0ED-7ADE-46D0-AC7A-29ED26805FB4"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-B7FCA0ED-7ADE-46D0-AC7A-29ED26805FB4"><!-- --></a><h2 class="sectiontitle">SUPL Push API description</h2> <p>The SUPL Push API is
used to notify the SUPL Protocol Module that a SUPL INIT message was received
from an SLP to start a network location request. </p>
 <p>The SUPL API has
two different types of client: </p>
 <ul>
<li id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-E14E2A80-5E87-558C-BF90-9EF8685DCF90"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-E14E2A80-5E87-558C-BF90-9EF8685DCF90"><!-- --></a><p>Clients that receive <samp class="codeph">SUPL
INIT</samp> messages and send them into the LBS subsystem, such as the Symbian
WAP Push plug-in. These components use the SUPL Push API sender classes. </p>
 </li>

<li id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-3327FFF2-F626-5679-9CA4-9769B0862380"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-3327FFF2-F626-5679-9CA4-9769B0862380"><!-- --></a><p>Clients that require
notification of <samp class="codeph">SUPL INIT</samp> messages, such as the SUPL Protocol
Module. The SUPL Protocol Module uses the SUPL Push API receiver classes to
receive notification of network initiated location requests. </p>
 </li>

</ul>
 <p>The SUPL Push API has <samp class="codeph">publishedPartner</samp> interface
access. </p>
 <p><strong>SUPL
Push API sender classes</strong> </p>
 <p>This section describes the classes of
the SUPL Push API that the SUPL WAP Push handler plug-in and SUPL SMS Trigger
plug-in use to send <samp class="codeph">SUPL              INIT</samp> messages into
the LBS subsystem. Figure 2 shows the SUPL Push API sender classes. Licensees
use the API sender classes to implement their own <samp class="codeph">SUPL INIT</samp> handler
(if required). </p>
 <div class="fignone" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-47957CAE-DC5F-55C9-B157-6274D00B0990"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-47957CAE-DC5F-55C9-B157-6274D00B0990"><!-- --></a><span class="figcap">Figure 2.                  Figure 2: Class diagram of SUPL Push API sender classes
              </span>

<img src="GUID-0A24FF35-5A61-5305-812B-632F20F0395D_d0e457976_href.png"/>
</div>
 
<div class="tablenoborder"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-01E93B41-A2AB-5251-947D-E4839A0AC71D"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-01E93B41-A2AB-5251-947D-E4839A0AC71D" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d2078353e282">Class name</th>

<th class="cellrowborder" valign="top" id="d2078353e285">Description</th>

<th class="cellrowborder" valign="top" id="d2078353e288">Header file</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d2078353e282 "><p> <a href="GUID-A55B3609-097F-3D14-80FF-76ADA5462621.html"><span class="apiname">CLbsSuplPush</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2078353e285 "><p>The interface used to send <samp class="codeph">SUPL INIT</samp> messages to
the LBS subsystem. A WAP Push message handler or SMS Trigger handler creates
and owns an instance of this class. The class defines the interface only and
delegates all its functionality to an implementation class. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2078353e288 "><p> <span class="filepath">lbssuplpush.h</span>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d2078353e282 "><p> <a href="GUID-7A1E29E6-CF2C-3B19-BADE-2DDD67F6DC36.html"><span class="apiname">MLbsSuplPushObserver</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2078353e285 "><p>The observer interface used with <samp class="codeph">CLbsSuplPush</samp>.
The interface defines a callback method to allow message delivery results
to be returned to a client. The Symbian WAP Push plug-in implements this interface
to receive confirmation of <samp class="codeph">SUPL INIT</samp> message delivery to
the SUPL Protocol Module. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2078353e288 "><p> <span class="filepath">lbssuplpush.h</span>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d2078353e282 "><p> <a href="GUID-EDDB3400-9EBC-3518-8047-D49C4A261C08.html"><span class="apiname">_TLbsSuplPushChannel</span></a> and <a href="GUID-C6EB9DF6-1AAF-3754-9F55-6CC5373EDB61.html"><span class="apiname">TLbsSuplPushChannel</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2078353e285 "><p>Defines an enumeration and a typedef for the source of the <samp class="codeph">SUPL
INIT</samp> message. Two 'channels' are defined: a WAP push channel and
an SMS trigger channel. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2078353e288 "><p> <span class="filepath">lbssuplcommon.h</span>  </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p><strong>Request queueing </strong> </p>
 <p>The SUPL Push API uses Publish and Subscribe
(P&amp;S) properties to store the details of <samp class="codeph">SUPL INIT</samp> messages.
Properties are written by SUPL Push API sender class clients and are read
by SUPL Push API receiver class clients. </p>
 <p>One potential problem with
using P&amp;S properties occurs in the situation where multiple calls to <a href="GUID-A55B3609-097F-3D14-80FF-76ADA5462621.html#GUID-A55B3609-097F-3D14-80FF-76ADA5462621__GUID-5AD5A31B-0DE0-36DF-A19F-E0E57EBCCEA9"><span class="apiname">CLbsSuplPush::SuplInit()</span></a> are
made in quick succession. Without a means of queueing requests and synchronising
access to P&amp;S properties, it would be possible for property values to
be overwritten without first being read, leading to the possible loss of some <samp class="codeph">SUPL
INIT</samp> messages. </p>
 <p>The implementation of the SUPL Push API queues <samp class="codeph">SUPL
INIT</samp> messages that are sent by API clients by calling <a href="GUID-A55B3609-097F-3D14-80FF-76ADA5462621.html#GUID-A55B3609-097F-3D14-80FF-76ADA5462621__GUID-5AD5A31B-0DE0-36DF-A19F-E0E57EBCCEA9"><span class="apiname">CLbsSuplPush::SuplInit()</span></a> and
also synchronises access to the P&amp;S properties so that all received <samp class="codeph">SUPL
INIT</samp> messages are processed by the SUPL Protocol Module. </p>
 <p><strong>API restrictions </strong> </p>
 <p>The SUPL Push API can be used by up to two
threads, each of which must use a different 'channel' as specified by <a href="GUID-EDDB3400-9EBC-3518-8047-D49C4A261C08.html"><span class="apiname">_TLbsSuplPushChannel</span></a>.
An API client specifies the channel it wants to use when it calls <a href="GUID-A55B3609-097F-3D14-80FF-76ADA5462621.html#GUID-A55B3609-097F-3D14-80FF-76ADA5462621__GUID-75549F72-F22C-3B6B-92D4-20BDE7441AFE"><span class="apiname">CLbsSuplPush::NewL()</span></a>.
Two channels are defined: <samp class="codeph">ELbsSuplPushChannelWAP</samp> and <samp class="codeph">ELbsSuplPushChannelSMS</samp>. </p>
 <p>A
single thread in an API client can create multiple instances of <samp class="codeph">CLbsSuplPush</samp>,
but each instance must use the same channel. </p>
 <p>The Symbian WAP Push
Framework instantiates multiple copies of the SUPL WAP Push plug-in to handle
multiple <samp class="codeph">SUPL INIT</samp> messages. All of the instances are started
by the same WAP Push Framework thread. </p>
 <p>There is only one instance
of the Symbian test SUPL SMS Trigger plug-in which is loaded by the Messaging
Watcher Framework and all messages are processed by the same thread. </p>
 <p>Licensees
who implement their own method of handing <samp class="codeph">SUPL              INIT</samp> messages
without using the Symbian WAP Push Framework or the Watcher Framework must
remember the API limitations: </p>
 <ul>
<li id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-87B4BB23-DCE8-5E50-A357-DAFA8DA85612"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-87B4BB23-DCE8-5E50-A357-DAFA8DA85612"><!-- --></a><p>A maximum total of two
threads can use the API concurrently. </p>
 </li>

<li id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-16660648-A891-518F-8817-E5DFB00CFDC8"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-16660648-A891-518F-8817-E5DFB00CFDC8"><!-- --></a><p>Each thread must use
a different 'channel'. </p>
 </li>

</ul>
 <p><strong>SUPL
Push API receiver classes</strong> </p>
 <p>This section describes the classes of
the SUPL Push API that the SUPL Protocol Module uses to receive <samp class="codeph">SUPL
INIT</samp> messages. </p>
 <p>Figure 3 shows the SUPL Push API receiver
classes. Symbian licensees do not need to use the receiver classes - they
are used by the Symbian reference SUPL Protocol Module. </p>
 <div class="fignone" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-62800587-837F-5EC0-872C-AA505491E3E0"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-62800587-837F-5EC0-872C-AA505491E3E0"><!-- --></a><span class="figcap">Figure 3.                  Figure 3: Class diagram of SUPL Push API receiver
classes               </span>

<img src="GUID-120CA508-9984-54D0-B366-6D10D646FD49_d0e458206_href.png"/>
</div>
 
<div class="tablenoborder"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-1D1A1ED6-1BEC-575C-98B4-1B93F6F5D1DD"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-1D1A1ED6-1BEC-575C-98B4-1B93F6F5D1DD" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d2078353e523">Class name</th>

<th class="cellrowborder" valign="top" id="d2078353e526">Description</th>

<th class="cellrowborder" valign="top" id="d2078353e529">Header file</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d2078353e523 "><p> <a href="GUID-15AFA2A5-E300-3DE0-909D-837ECA25A1B8.html"><span class="apiname"> MLbsSuplPushRecObserver</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2078353e526 "><p>The observer interface that the SUPL Protocol Module implements
to receive <samp class="codeph">SUPL INIT</samp> messages sent via <a href="GUID-A55B3609-097F-3D14-80FF-76ADA5462621.html"><span class="apiname">CLbsSuplPush</span></a>. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2078353e529 "><p> <span class="filepath">lbsuplpushreceiver.h</span>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d2078353e523 "><p> <a href="GUID-FD4CC018-C09B-3B0E-B0BC-A887874A610A.html"><span class="apiname"> CLbsSuplPushRec</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2078353e526 "><p>The interface defines a method <samp class="codeph">SuplInitComplete()</samp> to
allow the SUPL protocol module to notify LBS that a <samp class="codeph">SUPL INIT</samp> message
was successfully processed. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2078353e529 "><p> <span class="filepath">lbssuplpushreceiver.h</span>  </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>The SUPL Protocol Module implements <a href="GUID-15AFA2A5-E300-3DE0-909D-837ECA25A1B8.html"><span class="apiname">MLbsSuplPushRecObserver</span></a> to
receive notification of SUPL INIT messages sent by using <a href="GUID-A55B3609-097F-3D14-80FF-76ADA5462621.html#GUID-A55B3609-097F-3D14-80FF-76ADA5462621__GUID-5AD5A31B-0DE0-36DF-A19F-E0E57EBCCEA9"><span class="apiname">CLbsSuplPush::SuplInit()</span></a>.
It calls <a href="GUID-FD4CC018-C09B-3B0E-B0BC-A887874A610A.html#GUID-FD4CC018-C09B-3B0E-B0BC-A887874A610A__GUID-77430315-2C56-33F0-A553-1E4409A13921"><span class="apiname">CLbsSuplPushRec::NewL()</span></a> to register itself for
notifications. </p>
 <p>The SUPL Protocol Module calls <a href="GUID-FD4CC018-C09B-3B0E-B0BC-A887874A610A.html#GUID-FD4CC018-C09B-3B0E-B0BC-A887874A610A__GUID-9F42BE74-9C52-3BD8-9CD0-0F96214010BD"><span class="apiname">CLbsSuplPushRec::SuplInitComplete()</span></a> to
send notification that a message was received successfully. The method <a href="GUID-7A1E29E6-CF2C-3B19-BADE-2DDD67F6DC36.html#GUID-7A1E29E6-CF2C-3B19-BADE-2DDD67F6DC36__GUID-4FC083C9-640B-3CC1-8D8B-3A9AE8E57D17"><span class="apiname">MLbsSuplPushObserver::OnSuplInitComplete()</span></a> is
called to notify the sender that the message was received. </p>
 </div>

<div class="section" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-84F15E4C-4ABA-48F7-963D-BABB6188906B"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-84F15E4C-4ABA-48F7-963D-BABB6188906B"><!-- --></a><h2 class="sectiontitle">Libraries </h2> <p>The SUPL Push API is packaged in <span class="filepath">lbssuplpush.dll</span>.
Clients link to <span class="filepath">lbssuplpush.lib</span>. </p>
 </div>

<div class="section" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-736CACE9-91BD-4818-8CE2-B60397587CE9"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-736CACE9-91BD-4818-8CE2-B60397587CE9"><!-- --></a><h2 class="sectiontitle">Capabilities</h2> <p>API clients require <samp class="codeph">NetworkServices</samp> and <samp class="codeph">ReadDeviceData</samp> capabilities. </p>
 </div>

<div class="section" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-C5F3D283-D329-4FEC-A19D-19479A35A562"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-C5F3D283-D329-4FEC-A19D-19479A35A562"><!-- --></a><h2 class="sectiontitle">Sequence diagram</h2> <p>Figure 4 is a simple sequence
diagram showing the WAP Push plug-in receiving a <samp class="codeph">SUPL INIT</samp> message
and sending it to the SUPL Protocol Module. </p>
 <p>An SMS Trigger plug-in
would use the channel <samp class="codeph">ELbsSuplPushChannelSMS</samp> with <a href="GUID-A55B3609-097F-3D14-80FF-76ADA5462621.html#GUID-A55B3609-097F-3D14-80FF-76ADA5462621__GUID-75549F72-F22C-3B6B-92D4-20BDE7441AFE"><span class="apiname">CLbsSuplPush::NewL()</span></a>. </p>
 <p>The
error parameter <samp class="codeph">aError</samp> returned in <a href="GUID-7A1E29E6-CF2C-3B19-BADE-2DDD67F6DC36.html#GUID-7A1E29E6-CF2C-3B19-BADE-2DDD67F6DC36__GUID-4FC083C9-640B-3CC1-8D8B-3A9AE8E57D17"><span class="apiname">MLbsSuplPushObserver::OnSuplInitComplete()</span></a> is <samp class="codeph">KErrNone</samp> if
the SUPL INIT was successfully processed by the SUPL Protocol Module, but
may be another error code as decribed in the API reference documentation. </p>
 <p>Note
that the SUPL Protocol Module calls <a href="GUID-B26D8EEC-9DD0-373C-8B29-38C6AC06390C.html#GUID-B26D8EEC-9DD0-373C-8B29-38C6AC06390C__GUID-049D2C6E-7892-3223-9AC3-B130E0AE7FCC"><span class="apiname">CSuplPushRec::SuplInitComplete()</span></a> when
the <samp class="codeph">SUPL           INIT</samp> message is received, but this does
not guarantee that the network initiated location request will complete successfully. </p>
 <div class="fignone" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-AF4F52FA-F4CC-58E0-BD6F-5C74BC6B6ECD"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-AF4F52FA-F4CC-58E0-BD6F-5C74BC6B6ECD"><!-- --></a><span class="figcap">Figure 4.               Figure 4: SUPL Push API sequence diagram            </span>

<img src="GUID-84623607-ACCA-5E57-9001-DA56E16C1652_d0e458402_href.png"/>
</div>
 </div>

<div class="section" id="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-202D83AC-6C99-5481-8074-ACFEBD426AE3"><a name="GUID-E7DD9CFD-F477-5D25-BC10-BEBFB1022F7E__GUID-202D83AC-6C99-5481-8074-ACFEBD426AE3"><!-- --></a><h2 class="sectiontitle">References</h2> <p>[1] <a href="http://www.openmobilealliance.org" target="_blank">Open Mobile Alliance</a> Secure
User Plane Location (SUPL) Architecture OMA-AD-SUPL-V1_0-20070615-A </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-816334A7-488B-5F91-8C2E-47076D875013.html" title="The LBS subsystem contains a reference Network Protocol Module that supports the Open Mobile Alliance (OMA) SUPL V1.0 standard. This section contains documentation that describes the Symbian platform reference SUPL Protocol Module, its supporting components and APIs, its runtime behaviour and details about how it is configured by device creators.">SUPL Protocol Module</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-CC3454B1-21DA-542E-8949-52C30755AC77.html" title="The SUPL Protocol Module is a Network Protocol Module provided by Symbian to support the OMA SUPL v1.0 standard.">SUPL Protocol
                Module Overview</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-EE07DF44-6B3B-5D9A-A794-C49863597721.html" title="This topic describes how the Symbian SUPL WAP Push plug-in uses the SUPL Push API (deprecated). Device creators can use this information if they want to implement their own SUPL INIT push plug-in.">SUPL    
            Push API Tutorial</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>