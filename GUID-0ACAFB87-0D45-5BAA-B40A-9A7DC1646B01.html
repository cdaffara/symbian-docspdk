<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Managing the RTCP packets and reports"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Managing the RTCP packets and reports</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01"><a name="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2397554 id2397597 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html">Multimedia Protocols Guide</a> &gt; <a href="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F.html">RTP</a> &gt; </div>
<h1 class="topictitle1">Managing
the RTCP packets and reports</h1>
<div>
<p>This section describes how to send various types of RTCP packets, set the
stream parameters, get stream statistics and close the session. </p>

<div class="section" id="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-663C6781-3137-5D48-A836-6ADDD4474805"><a name="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-663C6781-3137-5D48-A836-6ADDD4474805"><!-- --></a><h2 class="sectiontitle">Sending various
RTCP packets</h2><p>To automatically send SR, RR, or SDES packets, call <a href="GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-97FC8566-E4AD-3881-8669-134798A88779__GUID-B32E14CD-DE13-3E89-96B4-5713CB7217A7"><span class="apiname">RRtpSession::SetRTCPAutoSend()</span></a> with
its paramter set to ETrue. For more information about these packets, see Managing
send and receive reports.</p>
<pre class="codeblock">session.SetRTCPAutoSend(ETrue);
</pre>
<p>Set the RTCP auto-send time interval in microseconds by calling <a href="GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-97FC8566-E4AD-3881-8669-134798A88779__GUID-506A9D47-03DE-36D0-8466-D7BFB725FBB1"><span class="apiname">RRtpSession::SetRtcpInterval()</span></a>.</p>
<pre class="codeblock">session.SetRtcpInterval(1000);
</pre>
<p>If auto-sending is set to EFalse, call <a href="GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-97FC8566-E4AD-3881-8669-134798A88779__GUID-7AF454C8-6943-3986-BC82-CF6BFB27AF7A"><span class="apiname">RRtpSession::SendRTCPPacketL()</span></a> to
send a packet.</p>
<pre class="codeblock">//aPacket is a valid RTCP packet session.SendRTCPPacketL(aPacket);
</pre>
<p>For more information, see the definition of TRtpSendPacketType.
 </p>
<pre class="codeblock">Call RRtpSession::SendAppL() to send an APP packet.</pre>
<p>For
an SDES RTP packet, call <a href="GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-97FC8566-E4AD-3881-8669-134798A88779__GUID-1D4254AC-043A-3BA7-ABF7-B008DC9F4D01"><span class="apiname">RRtpSession::SetSDESL()</span></a> to set
the SDES details such as CNAME, NAME, PHONE, EMAIL and so on. You must set
these details before the packet is sent. The CNAME must be unique for an RTP
session.   <a href="GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-97FC8566-E4AD-3881-8669-134798A88779__GUID-0B04130D-585C-31D9-A1F0-B4166BC26A92"><span class="apiname">RRtpSession::GetSDES()</span></a> enables you to fetch
the data associated with the specified SDES item.  </p>
<p> You can set the
data associated with a PRIV (Private Extensions) SDES item by calling <a href="GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-97FC8566-E4AD-3881-8669-134798A88779__GUID-D7E02919-E39A-3CA0-A8C7-BE77504C0948"><span class="apiname">RRtpSession::SetPRIVL()</span></a>.
 PRIV (Private Extensions) SDES is not supported.   Call <a href="GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-97FC8566-E4AD-3881-8669-134798A88779__GUID-00D4DBEA-3EDB-3F88-90B8-374D2CECB383"><span class="apiname">RRtpSession::ByeL()</span></a> to
send an RTCP Bye packet.  </p>
 </div>

<div class="section"><h2 class="sectiontitle">Setting the stream parameters </h2> <p>The <a href="GUID-8420B7F8-7BE3-30C0-BFC4-05F7A13361B6.html"><span class="apiname">SetRtpStreamParameters()</span></a> method
sets the following stream parameters: </p>
 <ul>
<li id="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-60CD5E08-6829-5675-AC64-6CAA3C6D53D9"><a name="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-60CD5E08-6829-5675-AC64-6CAA3C6D53D9"><!-- --></a><p>maximum number of sequential
packets that must be received for a good stream. </p>
 </li>

<li id="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-8ED20A24-B6D0-5CE4-A115-459FED0E885C"><a name="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-8ED20A24-B6D0-5CE4-A115-459FED0E885C"><!-- --></a><p>maximum number of dropped
packets to be considered a dropout. </p>
 </li>

<li id="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-688E9BB0-96E9-5090-B80F-1E75D27D2FCD"><a name="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-688E9BB0-96E9-5090-B80F-1E75D27D2FCD"><!-- --></a><p>maximum number of packets
by which a packet can be delayed to be considered as dropped. </p>
 </li>

</ul>
 <pre class="codeblock" id="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-601FA412-12EA-571F-913C-7F4E383EE8BD"><a name="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-601FA412-12EA-571F-913C-7F4E383EE8BD"><!-- --></a>SetRtpStreamParameters(1,100,3000);// set MinSequential, MaxMisorder &amp; MaxDropout </pre>
 </div>

<div class="section"><h2 class="sectiontitle">Getting the stream statistics</h2> <p>The <a href="GUID-97FC8566-E4AD-3881-8669-134798A88779.html#GUID-97FC8566-E4AD-3881-8669-134798A88779__GUID-63B8D608-D078-3F8E-9ABD-2CD29F1396F5"><span class="apiname">RRtpSession::RtcpStatistics()</span></a> method
provides sending and receiving statistics about the current active RTP session.
The statistics depend on the contents of the latest Sender Report (SR) packets
and Receiver Report (RR) packets. The returned <a href="GUID-53671562-A0BB-379D-AC1A-0006F70A4513.html"><span class="apiname">TRtcpStatistics</span></a> structure
contains the following statistics: </p>
 
<div class="tablenoborder"><a name="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-82B41FFA-00C1-5477-9727-2C3DBCA754D5"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-82B41FFA-00C1-5477-9727-2C3DBCA754D5" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d119576e135">Direction </th>

<th class="cellrowborder" valign="top" id="d119576e138">Statistic </th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d119576e135 "><p>Sending </p>
 </td>

<td class="cellrowborder" valign="top" headers="d119576e138 "><p>Total number of packets sent from the beginning of the RTP session
to the latest SR. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d119576e135 "><p>Total number of payload octets sent from the beginning of the RTP
session to the latest SR. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d119576e135 "><p>Receiving </p>
 </td>

<td class="cellrowborder" valign="top" headers="d119576e138 "><p>Inter-arrival jitter. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d119576e135 "><p>Total number of packets lost since the beginning of the RTP session. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d119576e135 "><p>Fraction of packets lost since the previous SR or RR. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>For more information about these statistics, see the RTP standard
in <a href="http://www.ietf.org/rfc/rfc3550.txt" target="_blank">RFC 3550</a>. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Closing a session</h2> <p> <samp class="codeph">Close()</samp> closes
the RTP session. All the send and receive streams are disconnected after this
call. </p>
 <pre class="codeblock" id="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-6723F7F1-DDBE-5912-BF72-8B0902CDE681"><a name="GUID-0ACAFB87-0D45-5BAA-B40A-9A7DC1646B01__GUID-6723F7F1-DDBE-5912-BF72-8B0902CDE681"><!-- --></a>session.Close(); 
delete session;</pre>
 </div>

<div class="section"><h2 class="sectiontitle">See also</h2> <p><a href="GUID-FBA52F3B-0A7A-5FE3-82CD-72F88788D432.html#GUID-FBA52F3B-0A7A-5FE3-82CD-72F88788D432__GUID-352B33B6-D02B-5ECB-B154-6CB06C21A377">Types
of RTCP packets</a>  </p>
 <p><a href="GUID-5287A403-1094-5682-A443-A6C2A04A1F23.html">Creating
and Managing an RTP session</a>  </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C467E6CD-6656-55F6-BDDF-BFA4F187B14F.html">RTP</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>