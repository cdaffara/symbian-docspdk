<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Sending Location to a Remote Party - Overview"/>
<meta name="abstract" content="LBS allows a user to send their location to a remote party over a network."/>
<meta name="description" content="LBS allows a user to send their location to a remote party over a network."/>
<meta name="DC.Relation" scheme="URI" content="GUID-90757A79-A001-52BF-81D9-CFA02FDDE1BE.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-710BC22B-E4F0-5E16-B970-E2D21F5571FC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CE970F0F-C922-516F-9D7E-EA1F4754A205.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-90757A79-A001-52BF-81D9-CFA02FDDE1BE.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Sending Location to a Remote Party - Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2402671 id2402731 id2402918 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-710BC22B-E4F0-5E16-B970-E2D21F5571FC.html" title="The Location Request Management collection contains components that handle requests for location request information both from installed applications and from the network.">Location Request Management</a> &gt; <a href="GUID-CE970F0F-C922-516F-9D7E-EA1F4754A205.html" title="The Network Request Handler processes privacy and location requests received from the network.">Network Request Handler</a> &gt; <a href="GUID-90757A79-A001-52BF-81D9-CFA02FDDE1BE.html">Sending location to a remote party</a> &gt; </div>
<h1 class="topictitle1">Sending Location to a Remote Party - Overview</h1>
<div><p>LBS allows a user to send their location to a remote party over a network. </p>
<div class="section"><h2 class="sectiontitle">Purpose</h2> <p>This document describes the Transmit Location API, which allows client applications to send location data to remote parties. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Key concepts</h2> <p><strong>Transmit position server </strong> </p>
 <p>The LBS Symbian server that sends position data to a remote location server in the network. Multiple applications can use the server simultaneously as transmit location requests are queued and prioritised. The Transmit Location API is the client application view of the transmit position server. </p>
 <p><strong>Remote party </strong> </p>
 <p>The remote destination to which the location is sent. This may be identified by a phone number, email address or web service URL. </p>
 <p><strong>Remote location server </strong> </p>
 <p>The network server that receives the location data sent from the handset. It is the first stage in routing the location data message to the destination remote party. </p>
 <p><strong>X3P request </strong> </p>
 <p>Transmit to third party request. The request made by a client application to calculate the mobile device location and to send it to a remote party (the 'third party'). More formally known as MO-LR (transfer to third party). </p>
 </div>
 <div class="section"><h2 class="sectiontitle">API summary</h2> <p>The Transmit Location API consists of three classes: </p>
 <ul><li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-137412A2-F59F-5A0F-B7D2-23809955ED85"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-137412A2-F59F-5A0F-B7D2-23809955ED85"><!-- --></a><p> <a href="GUID-97CFE236-9DAD-3455-8969-6D0B4C484E0B.html"><span class="apiname">RLbsTransmitPositionServer</span></a>  </p>
 <p>Client applications use this class to create a session with the transmit position server. </p>
 </li>
 <li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-55711D51-FC49-58EF-9A07-95B930629F90"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-55711D51-FC49-58EF-9A07-95B930629F90"><!-- --></a><p> <a href="GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF.html"><span class="apiname">RLbsTransmitPosition</span></a>  </p>
 <p>Applications use this class to create a subsession with the transmit position server. Applications use the subsession to make requests to send location data to a remote location server. </p>
 </li>
 <li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-B23446D7-8396-56C3-8EA5-C0C9AAA17915"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-B23446D7-8396-56C3-8EA5-C0C9AAA17915"><!-- --></a><p> <a href="GUID-FD409038-85FC-3442-9D8E-CBA80E9B5FD5.html"><span class="apiname">TLbsTransmitPositionOptions</span></a> is used to set a timeout on sending the location. If location data cannot be sent before the timeout expires then the send request is cancelled. </p>
 </li>
 </ul>
 <p>Figure 1 shows the three classes. </p>
 <div class="fignone" id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-656E1D67-CE50-5A82-8EB2-F9224033B718"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-656E1D67-CE50-5A82-8EB2-F9224033B718"><!-- --></a><span class="figcap">Figure 1. 
             Figure 1. Classes used to send location to a remote server 
          </span> <img src="GUID-96FEE9E3-E870-5CE2-A049-9425B82894B0_d0e437571_href.png"/></div>
 <p>To send location, an application must have the <samp class="codeph">WriteDeviceData</samp> and <samp class="codeph">NetworkServices</samp> capabilities. </p>
 <p>The three classes of the Transmit Location API are defined in the file <span class="filepath">LbsX3P.h</span>. Client applications link against <span class="filepath">Lbsx3p.lib</span>. </p>
 <p><strong>Sending location data </strong> </p>
 <p>Applications call <a href="GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF.html#GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF__GUID-EB88EBE8-0B6A-359C-895C-15D063CAD4AA"><span class="apiname">RLbsTransmitPosition::TransmitPosition()</span></a> to send location data to a remote location server. <samp class="codeph">TransmitPosition()</samp> makes an asynchronous service request and calling applications pass a <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html"><span class="apiname">TRequestStatus</span></a> parameter to be notified of completion. </p>
 <p>To calculate the device location, LBS may obtain position data from the network and/or from GPS hardware. The exact sequence of events is dependent upon which positioning modules are installed in the device and the quality profile that is configured for use with X3P requests. See <a href="GUID-23BBC1D8-B3A0-5148-A4F1-22ECF3043E4E.html" title="The documents in this section explain how to configure LBS by using the LBS Administration API or by using a repository initialisation file.">LBS administration</a> and <a href="GUID-D18B4715-3942-52EA-9D2F-E145037FA47A.html" title="The documents in this section describe the tasks necessary to build and configure the LBS subsystem. These documents are for device creators.">LBS integration and configuration</a> for more information about configuring LBS and quality profiles. </p>
 <p><strong>TransmitPosition() </strong> </p>
 <p>There are two <samp class="codeph">TransmitPosition()</samp> methods. To send the device location, an application calls <em>one</em> of them: </p>
 <ul><li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-2CB2EA8F-C4E5-591C-A479-4C94A73856E3"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-2CB2EA8F-C4E5-591C-A479-4C94A73856E3"><!-- --></a><p> <samp class="codeph">void TransmitPosition(const TDesC&amp; aDestinationID,TUint
                aTransmitPriority, TRequestStatus&amp; aTransmittedPosStatus,
                TPositionInfo&amp; aTransmittedPosInfo)</samp>  </p>
 <p>This method takes four parameters: </p>
 <ul><li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-C441043A-EF15-559A-BA2A-0CE8B7B28651"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-C441043A-EF15-559A-BA2A-0CE8B7B28651"><!-- --></a><p> <samp class="codeph">aDestinationID</samp> is the phone number, email address or URL to which the device location is to be sent. </p>
 </li>
 <li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-AC7417D9-0432-5046-9112-737FCEB79575"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-AC7417D9-0432-5046-9112-737FCEB79575"><!-- --></a><p> <samp class="codeph">aTransmitPriority</samp> is the priority of the request. </p>
 </li>
 <li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-922173A5-6E60-544B-B8C7-B0869CA5F7D9"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-922173A5-6E60-544B-B8C7-B0869CA5F7D9"><!-- --></a><p> <samp class="codeph">aTransmittedPosStatus</samp> is a <samp class="codeph">TRequestStatus</samp> variable from the calling object. This variable is used to notify when the location data is sent (or a failure or timeout occurs). </p>
 </li>
 <li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-1E268B8F-E710-5C7C-8D22-1E8C2C0812D3"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-1E268B8F-E710-5C7C-8D22-1E8C2C0812D3"><!-- --></a><p> <samp class="codeph">aTransmittedPosInfo</samp> is used to access the location data that is sent to the remote party. </p>
 </li>
 </ul>
 <p>The calling application receives only one notification of completion (through <samp class="codeph">aTransmittedPosStatus</samp>) when the calculated location is sent to the network (or there is a failure or timeout). An application calls this <samp class="codeph">TransmitPosition()</samp> method when it requires only notification of the final state of its send location request. </p>
 </li>
 <li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-1155FCDF-7C99-5B0C-A52A-144339889E13"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-1155FCDF-7C99-5B0C-A52A-144339889E13"><!-- --></a><p> <samp class="codeph">void TransmitPosition(const TDesC&amp; aDestinationID,TUint
                aTransmitPriority, TRequestStatus&amp; aRefPosStatus, TPositionInfo&amp;
                aRefPosInfo, TRequestStatus&amp; aTransmittedPosStatus, TPositionInfo&amp;
                aTransmittedPosInfo)</samp>  </p>
 <p>This method takes two additional parameters: </p>
 <ul><li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-D55C03B6-41B5-5603-B3B6-7449FAB12A3B"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-D55C03B6-41B5-5603-B3B6-7449FAB12A3B"><!-- --></a><p> <samp class="codeph">aRefPosStatus</samp> is a <samp class="codeph">TRequestStatus</samp> variable from the calling object (it may be the same variable as <samp class="codeph">aTransmittedPosStatus</samp>). This variable is used to notify when reference position data is obtained from the network (or a failure or timeout occurs). </p>
 </li>
 <li id="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-2473DA51-241A-56A6-9C4F-7D4A31960DAC"><a name="GUID-33BACB23-5BEB-5A1A-85B2-71E6AA7730C4__GUID-2473DA51-241A-56A6-9C4F-7D4A31960DAC"><!-- --></a><p> <samp class="codeph">aRefPosInfo</samp> is used to access the reference position data obtained from the network. </p>
 </li>
 </ul>
 <p>The calling application receives two notifications. The first is an update of <samp class="codeph">aRefPosStatus</samp> to notify the client application of receipt of reference position data from the network. The second notification is an update of <samp class="codeph">aTransmittedPosStatus</samp> when the final calculated location is sent to the network. </p>
 </li>
 </ul>
 <p><strong>TLbsTransmitPositionOptions </strong> </p>
 <p>A client application can specify a timeout on its request to send location data by constructing a <a href="GUID-FD409038-85FC-3442-9D8E-CBA80E9B5FD5.html"><span class="apiname">TLbsTransmitPositionOptions</span></a> object and then calling <a href="GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF.html#GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF__GUID-0100DFFE-E8AF-3ADB-AF86-F8EAD80B2B82"><span class="apiname">RLbsTransmitPosition::SetTransmissionOptions()</span></a> before calling <a href="GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF.html#GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF__GUID-EB88EBE8-0B6A-359C-895C-15D063CAD4AA"><span class="apiname">RLbsTransmitPosition::TransmitPosition()</span></a>. </p>
 <p>If no timeout is specified by calling <samp class="codeph">SetTransmissionOptions()</samp> then a default timeout value is used. The default timeout is the value <samp class="codeph">MaxTime</samp> specified in the quality profile for X3P requests. See <a href="GUID-23BBC1D8-B3A0-5148-A4F1-22ECF3043E4E.html" title="The documents in this section explain how to configure LBS by using the LBS Administration API or by using a repository initialisation file.">LBS administration</a> and <a href="GUID-D18B4715-3942-52EA-9D2F-E145037FA47A.html" title="The documents in this section describe the tasks necessary to build and configure the LBS subsystem. These documents are for device creators.">LBS integration and configuration</a> for more information about quality profiles. </p>
 <p><strong>Request priority </strong> </p>
 <p>The transmit position server can handle multiple requests from the same application or requests from different applications. Requests are queued and sent on a priority basis. If a new request is received that has a higher priority than any queued requests then the new request preempts the queued requests. </p>
 <p>A request's priority is set when <a href="GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF.html#GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF__GUID-EB88EBE8-0B6A-359C-895C-15D063CAD4AA"><span class="apiname">RLbsTransmitPosition::TransmitPosition()</span></a> is called (see above). The request priority is an unsigned integer number with priority zero as the highest priority. Higher numbers have decreasing priority. </p>
 <p><strong>Request cancellation </strong> </p>
 <p>If a request is incomplete (location has not yet been sent to the network), it may be cancelled by calling <a href="GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF.html#GUID-10A380F1-7550-336E-BAE4-8CB889C5BACF__GUID-C7DC5CEC-A96C-3FBD-A0F5-FB986EC912DE"><span class="apiname">RLbsTransmitPosition::CancelTransmitPosition()</span></a>. Note however, that the location may still be sent to the network soon after <samp class="codeph">CancelTransmitPosition()</samp> is called. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">See also</h2> <p><a href="GUID-9711A7CD-8367-538C-9397-881FD0FE0703.html" title="This document describes how to send a location to a remote party.">How to send location to a remote party</a>  </p>
 <p><a href="GUID-23BBC1D8-B3A0-5148-A4F1-22ECF3043E4E.html" title="The documents in this section explain how to configure LBS by using the LBS Administration API or by using a repository initialisation file.">LBS administration</a>  </p>
 <p><a href="GUID-D18B4715-3942-52EA-9D2F-E145037FA47A.html" title="The documents in this section describe the tasks necessary to build and configure the LBS subsystem. These documents are for device creators.">LBS integration and configuration</a>  </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-90757A79-A001-52BF-81D9-CFA02FDDE1BE.html">Sending location to a remote party</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>