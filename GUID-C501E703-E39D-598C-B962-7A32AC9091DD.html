<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Folding and collation (comparing strings)"/>
<meta name="abstract" content="Describes descriptor folding and descriptor collation."/>
<meta name="description" content="Describes descriptor folding and descriptor collation."/>
<meta name="DC.Relation" scheme="URI" content="GUID-79BAF19D-F003-5468-9C01-6E918B06C36D.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DBF88873-21B1-5493-8EBF-C9071D314A09.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-11EEFB3D-0414-5BEB-9D78-56A4B9154008.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-79BAF19D-F003-5468-9C01-6E918B06C36D.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-C501E703-E39D-598C-B962-7A32AC9091DD"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Folding and collation (comparing strings)</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2392081 id2392600 id2392686 id2392694 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" title="The User Library allows the applications and services that run on a phone to access the functionality provided by the Symbian platform Kernel.">User Library</a> &gt; <a href="GUID-DBF88873-21B1-5493-8EBF-C9071D314A09.html" title="Links to documents that describe buffers and strings.">Buffers And Strings</a> &gt; <a href="GUID-11EEFB3D-0414-5BEB-9D78-56A4B9154008.html" title="This is a list of documents that describe how to use descriptors.">Using Descriptors</a> &gt; <a href="GUID-79BAF19D-F003-5468-9C01-6E918B06C36D.html" title="These documents describe descriptor concepts.">Descriptor concepts</a> &gt; </div>
<h1 class="topictitle1">Folding
and collation (comparing strings)</h1>
<div><p>Describes descriptor folding and descriptor collation.</p>

<p>There are two techniques that may be used to modify the characters in a
descriptor prior to performing operations such as comparisons on text strings: </p>

<ul>
<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-C550B19E-0312-52F4-936C-95C53D4D4FA9"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-C550B19E-0312-52F4-936C-95C53D4D4FA9"><!-- --></a><p>folding </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-77D0249A-F9B7-5189-808F-C4FB88BED5B3"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-77D0249A-F9B7-5189-808F-C4FB88BED5B3"><!-- --></a><p>collation </p>
 </li>

</ul>

<div class="section" id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-4AD769A8-A90B-4BE5-B514-DCE9C808C4A8"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-4AD769A8-A90B-4BE5-B514-DCE9C808C4A8"><!-- --></a><h2 class="sectiontitle">Folding</h2> <p>Folding is a relatively simple way of normalising
text for comparison by removing case distinctions, converting accented characters
to characters without accents etc. Folding is used for tolerant comparisons,
i.e. comparisons that are biased towards a match. </p>
 <p>For example, the
file system uses folding to decide whether two file names are identical or
not. Folding is locale-independent behaviour, and means that the file system,
for example, can be locale-independent. </p>
 <p> <em> It is important to note
that there can be no guarantee that folding is in any way culturally appropriate,
and should not be used for comparing strings in natural language; </em> <a href="GUID-C501E703-E39D-598C-B962-7A32AC9091DD.html#GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-F93D3C40-FDB4-5D92-A90C-736BB0225982">collation</a> <em>is
the correct functionality for this.</em>  </p>
 <p>Variants of member functions
that fold are provided where appropriate. For example, <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-7BDF7FA1-39FF-35D2-97DE-12A223514345"><span class="apiname">TDesC16::CompareF()</span></a> for
folded comparison. </p>
 <p>See also: </p>
<p><a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-7BDF7FA1-39FF-35D2-97DE-12A223514345"><span class="apiname">TDesC16::CompareF()</span></a><a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-57DED784-A51D-308B-888C-968EFB35B732"><span class="apiname">TDesC16::MatchF()</span></a><a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-D4BDA3FC-E11A-392B-A8A5-B468AC800396"><span class="apiname">TDesC16::FindF()</span></a><a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-F88740FB-C90A-30AF-AA19-E2260EB39A47"><span class="apiname">TDesC16::LocateF()</span></a> <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-F88740FB-C90A-30AF-AA19-E2260EB39A47"><span class="apiname">TDesC16::LocateF()</span></a> <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-BE28DE82-AEF1-3E71-A0E1-7A053095B5B0"><span class="apiname">TDesC16::LocateReverseF()</span></a></p>
 </div>

<div class="section" id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-F93D3C40-FDB4-5D92-A90C-736BB0225982"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-F93D3C40-FDB4-5D92-A90C-736BB0225982"><!-- --></a><h2 class="sectiontitle">Collation</h2> <p>Collation
is a much better and more powerful way to compare strings and produces a dictionary-like
('lexicographic') ordering. Folding cannot remove piece accents or deal with
correspondences that are not one-to-one like the mapping from German upper
case SS to lower case ß. In addition, folding cannot optionally ignore punctuation. </p>
 <p>For
languages using the Latin script, for example, collation is about deciding
whether to ignore punctuation, whether to fold upper and lower case, how to
treat accents, and so on. In a given locale there is usually a standard set
of collation rules that can be used. </p>
 <p> <em>Collation should always be
used for comparing strings in natural language.</em>  </p>
 <p>Variants of member
functions that use collation are provided where appropriate. For example, <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-8B44C890-6E64-37CF-B3D9-AEF9EFCBA284"><span class="apiname">TDesC16::CompareC()</span></a> for
collated comparison. </p>
 <p><strong>Comparing
and sorting strings</strong> </p>
 <p>The <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-8B44C890-6E64-37CF-B3D9-AEF9EFCBA284"><span class="apiname">TDesC16::CompareC()</span></a> variant
prototyped as: </p>
 <pre class="codeblock" id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-42E8C509-DA19-50AD-8A80-D381F812639A"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-42E8C509-DA19-50AD-8A80-D381F812639A"><!-- --></a>TInt CompareC(const TDesC16&amp; aDes, TInt aMaxLevel, const TCollationMethod* aCollationMethod) const;</pre>
 <p>returns 0, if two strings match. </p>
 <p>There are many ways in which
two strings can match, even when they do not have the same length: </p>
 <ul>
<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-8BD9DEF8-3B24-576D-B634-0E38BA2D5859"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-8BD9DEF8-3B24-576D-B634-0E38BA2D5859"><!-- --></a><p>if one string includes
combining characters, but the collation level is set to 0 (which means that
accents are ignored) </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-999CCABF-D8DC-5967-90F1-7739EDCAEFF9"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-999CCABF-D8DC-5967-90F1-7739EDCAEFF9"><!-- --></a><p>if one string contains
"pre-composed" versions of accented characters and the other contains "decomposed"
versions of the same character </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-9491E1CF-9BA3-52D6-8996-FC32BB54538A"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-9491E1CF-9BA3-52D6-8996-FC32BB54538A"><!-- --></a><p>if one string contains
a ligature that, in a collation table, matches multiple characters in the
other string and the collation level is set to less than 3 (for example "æ"
might match "ae") </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-2D4FF198-7C41-5838-97FB-8A23A2D3DD49"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-2D4FF198-7C41-5838-97FB-8A23A2D3DD49"><!-- --></a><p>if one string contains
a "surrogate pair" (a 32-bit encoded character) which happens to match a normal
character at the level specified </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-66B770C7-3215-559A-B70D-68FF3AC9DDAC"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-66B770C7-3215-559A-B70D-68FF3AC9DDAC"><!-- --></a><p>if the collation method
does not have its "ignore none" flag set and the collation level is set to
less than 3, then spaces and punctuation are ignored; this means that one
string could be much longer than the other just by adding a large number of
spaces </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-33026C64-3740-527A-97E0-DCBB6D7F087D"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-33026C64-3740-527A-97E0-DCBB6D7F087D"><!-- --></a><p>if one string were to
contain the Hangul representation of Korean and the other were to contain
the Jamo representation of the same Korean and the collation level is set
to less than 3. </p>
 </li>

</ul>
 <p>The collation level is an integer that can take one of the values:
0, 1, 2 or 3, and determines how tightly the matching of two strings should
be. This value is passed as the second parameter to <samp class="codeph">CompareC()</samp>.
The values have the following meanings: </p>
 <ul>
<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-EDA2DAB4-E6B4-5815-ADC1-1BDF216D0C2E"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-EDA2DAB4-E6B4-5815-ADC1-1BDF216D0C2E"><!-- --></a><p>0 - only test the character
identity; accents and case are ignored </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-B0300A5F-6AF5-5722-B538-E0DBDE25576B"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-B0300A5F-6AF5-5722-B538-E0DBDE25576B"><!-- --></a><p>1 - test the character
identity and accents; case is ignored </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-B6B7E302-120D-5240-B2AE-C14B19A36FF6"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-B6B7E302-120D-5240-B2AE-C14B19A36FF6"><!-- --></a><p>2 - test the character
identity, accents and case </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-22E919E8-819D-5DE2-BABA-ECCC6F105B3C"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-22E919E8-819D-5DE2-BABA-ECCC6F105B3C"><!-- --></a><p>3 - test the Unicode
value as well as the character identity, accents and case. </p>
 </li>

</ul>
 <p>At levels 0-2: </p>
 <ul>
<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-E08F7C36-2E53-5348-A8D4-6A1E420CEB76"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-E08F7C36-2E53-5348-A8D4-6A1E420CEB76"><!-- --></a><p>ligatures (e.g. "æ")
are the same as their decomposed equivalents (e.g. "ae") </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-937B9898-878A-59BE-B185-A5347038F14C"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-937B9898-878A-59BE-B185-A5347038F14C"><!-- --></a><p>script variants are
the same (for example "R" matches the mathematical real number symbol (Unicode
211D) </p>
 </li>

<li id="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-6D1AF8EB-E8E8-565E-BA1E-CAED0382D801"><a name="GUID-C501E703-E39D-598C-B962-7A32AC9091DD__GUID-6D1AF8EB-E8E8-565E-BA1E-CAED0382D801"><!-- --></a><p>the "micro" symbol (Unicode
00B5) matches Greek "mu" (Unicode 03BC)). </p>
 </li>

</ul>
 <p>At level 3 these are treated differently. </p>
 <p>If the aim is to <strong>sort</strong> strings,
then <strong>level 3 must be used</strong>. For any strings <samp class="codeph">a</samp> and <samp class="codeph">b</samp>,
if <samp class="codeph">a</samp> &lt; <samp class="codeph">b</samp> for some level of collation,
then <samp class="codeph">              a</samp> &lt; <samp class="codeph">b</samp> for all higher
levels of collation as well. It is impossible, therefore, to affect the order
that is generated by using lower collation levels than 3. This just causes
similar strings to sort in a random order. In standard English, sorting at
level 3 gives the following order: </p>
 <p>bat &lt; bee &lt; BEE &lt; bus </p>
 <p>The
case of the B only affects the comparison after all the letter identities
have been found to be the same - this is usually what people are trying to
achieve by using lower collation levels than 3 for sorting. It is never necessary. </p>
 <p>The
sort order can be affected by setting flags in the <a href="GUID-78C4965C-BFCD-3E7E-8F46-2EE3D1BAF6EC.html"><span class="apiname">TCollationMethod</span></a> object. </p>
 <p>Note
that when strings match at level 3, they do not necessarily have the same
binary representation, or even the same length. Unicode contains many strings
that are regarded as equivalent, even though they have different binary representations. </p>
<p> 
       See also:  </p>
<p><a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-8B44C890-6E64-37CF-B3D9-AEF9EFCBA284"><span class="apiname">TDesC16::CompareC()</span></a><a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-ACEEA02F-2594-3C61-B7A9-E96F0737C3AE"><span class="apiname">TDesC16::MatchC()</span></a><a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html#GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23__GUID-33D33034-0757-31F9-B3A2-BA351AADC816"><span class="apiname">TDesC16::FindC()</span></a></p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-79BAF19D-F003-5468-9C01-6E918B06C36D.html" title="These documents describe descriptor concepts.">Descriptor concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>