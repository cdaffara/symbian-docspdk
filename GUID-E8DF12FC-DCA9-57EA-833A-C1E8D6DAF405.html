<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Drawing Tutorial"/>
<meta name="abstract" content="This topic provides tips and code snippets to help you get started drawing."/>
<meta name="description" content="This topic provides tips and code snippets to help you get started drawing."/>
<meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Drawing Tutorial</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405"><a name="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2384499 id2384574 id2384588 id2384709 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" title="The Windowing collection contains two components—the Window Server, which manages the use of the screen by applications, and the Window Server Plugins component.">Windowing Collection</a> &gt; <a href="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" title="The Window Server component manages the use of the screen by applications and handles key and pointer events.">Window Server Component</a> &gt; <a href="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html" title="The Window Server client-side library provides client applications with access to the screen and input devices.">Window Server Client-Side Library</a> &gt; <a href="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" title="This section provides application developers with an introduction to key concepts involved in drawing graphics to the screen.">Graphics and Drawing</a> &gt; </div>
<h1 class="topictitle1">Drawing
Tutorial</h1>
<div><p>This topic provides tips and code snippets to help you get started
drawing. </p>

<p> <strong>Variant</strong>: Both (ScreenPlay and non-ScreenPlay). <strong>Target
audience</strong>: Application developers. </p>

<div class="section" id="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-4123E6D4-0CBA-4244-944B-D472801A4875"><a name="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-4123E6D4-0CBA-4244-944B-D472801A4875"><!-- --></a><h2 class="sectiontitle">Standard windows</h2> <p>All drawing to standard windows
must be <a href="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027.html" title="This topic provides background information about redraw drawing and tips for updating old code to comply with the recommendation that all drawing is migrated to redraw drawing.">redraw drawing</a>,
which means that it takes place between <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow::BeginRedraw()</span></a> and <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow::EndRedraw()</span></a> calls. If you use the <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">CCoeControl::DrawNow()</span></a> and <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">CCoeControl::DrawDeferred()</span></a> methods,
CONE takes care of this for you. </p>
 <p>To redraw to an <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow</span></a>,
an application starts the sequence by activating a <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">CWindowGc</span></a> to
use a particular window for drawing, it then calls <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow::BeginRedraw()</span></a> before
issuing the drawing commands and finally calling <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow::EndRedraw()</span></a>.
For example: </p>
 <pre class="codeblock" id="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-25AE81CE-46CF-5E07-8A94-B35A4A06DAE6"><a name="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-25AE81CE-46CF-5E07-8A94-B35A4A06DAE6"><!-- --></a>gc-&gt;Activate(iWindow);
iWindow.BeginRedraw(rect);
DoDraw(rect);
iWindow.EndRedraw();
gc-&gt;Deactivate();</pre>
 <p> <samp class="codeph">BeginRedraw()</samp> does the
following: </p>
 <ul>
<li id="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-2742E046-2511-5C6A-8E84-396A80AFED18"><a name="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-2742E046-2511-5C6A-8E84-396A80AFED18"><!-- --></a><p>marks the rectangle
passed as its argument as valid (in other words, it removes the rectangle
from the invalid region of the window) </p>
 </li>

<li id="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-4FF89A03-8A77-5640-A77C-943164E869B3"><a name="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-4FF89A03-8A77-5640-A77C-943164E869B3"><!-- --></a><p>sets the clipping region
to the intersection of the invalid region and the rectangle passed as its
argument. </p>
 </li>

</ul>
 <p>In a server-initiated redraw, the drawing must exactly match what
was drawn originally, because the Window Server clips the drawing to the newly
validated region. If the rectangle drawn in response to a redraw event does
not cover the entire invalid region, the Window Server generates another redraw
event specifying the bounding rectangle of the region that is still invalid.
This continues until the entire window is valid. </p>
 <p>In an application-initiated
redraw, it is good practice to invalidate the whole region before passing
it to the redraw. For example: </p>
 <pre class="codeblock" id="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-A4213BAF-00A8-5461-86BF-E708DFFC87F1"><a name="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-A4213BAF-00A8-5461-86BF-E708DFFC87F1"><!-- --></a>gc-&gt;Activate(iWindow);
iWindow.Invalidate(rect);
iWindow.BeginRedraw(rect);
DoDraw(rect);
iWindow.EndRedraw();
gc-&gt;Deactivate();</pre>
 <p>After this sequence, the entire window is
valid. </p>
 </div>

<div class="section" id="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-CB59A6EF-AC04-4ACD-B82D-CBAD42975B09"><a name="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-CB59A6EF-AC04-4ACD-B82D-CBAD42975B09"><!-- --></a><h2 class="sectiontitle">Backed-up windows</h2> <p>Backed-up windows are redrawn
by the Window Server from the backup bitmap and not by the application. They
therefore have no <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow::Invalidate()</span></a>, <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow::BeginRedraw()</span></a> or <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow::EndRedraw()</span></a> member
functions. The sequence for drawing to backed-up windows is therefore as follows: </p>
 <pre class="codeblock" id="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-85C7E7CF-6DF7-5619-B6C3-F9530E316A1C"><a name="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-85C7E7CF-6DF7-5619-B6C3-F9530E316A1C"><!-- --></a>gc-&gt;Activate(iWindow);
DoDraw(rect);
gc-&gt;Deactivate();</pre>
 <p> <strong>Note</strong>: Backed-up windows are deprecated
in Symbian^3. </p>
 </div>

<div class="section" id="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-1894D9BE-0B8A-4FF9-9EAB-83D072CF1FDE"><a name="GUID-E8DF12FC-DCA9-57EA-833A-C1E8D6DAF405__GUID-1894D9BE-0B8A-4FF9-9EAB-83D072CF1FDE"><!-- --></a><h2 class="sectiontitle">Pre-emptive multi tasking</h2> <p>Because Symbian is a
pre-emptive system, another application—or the Window Server itself—may pre-empt
the application that is drawing or redrawing. The result is that <samp class="codeph">DoDraw()</samp> may
be partially complete when preemption occurs. Then, when the <samp class="codeph">DoDraw()</samp> receives
control again, it may draw to an area that has been invalidated without its
knowledge. </p>
 <p>For this reason, the Window Server marks a window region
as valid at <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow::BeginRedraw()</span></a> time, <em>not</em> at <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow::EndRedraw()</span></a> time. Then, any regions that
become invalid because of a preempting application’s activity are correctly
added to the invalid region. The <samp class="codeph">DoDraw()</samp> completes, but
the Window Server generates another redraw event and the application must
start the redraw again. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" title="This section provides application developers with an introduction to key concepts involved in drawing graphics to the screen.">Graphics and Drawing</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" title="This section provides application developers with an introduction to key concepts involved in drawing graphics to the screen.">Graphics
and Drawing </a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>