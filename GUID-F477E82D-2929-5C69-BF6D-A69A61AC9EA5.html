<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Creating a Font Rasterizer Plug-in"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CD464A4E-56D5-5645-B493-DE7BF8F6DB6D.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1DCA2F4D-ABE6-52A0-AC4E-5AAC1AB5909D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-762A665F-43D0-53ED-B698-0CBD3AC46391.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B798C19D-4030-564A-A208-D84738259D72.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-89AD2E29-DF29-5B2B-9894-B7ECD62854F4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CD464A4E-56D5-5645-B493-DE7BF8F6DB6D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1CF78E25-8C83-5812-AE6F-8612B3F9CDA9.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-BCF6FEF0-1792-5DEA-A2D7-896E47163547.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5A89E3C4-DEE7-5823-A109-92ED0D87B58C.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F44D974F-AADE-5E6C-8D69-8D3EEE4BD395.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5BDE6462-E6CA-5738-A587-C7D875574789.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Creating a Font Rasterizer Plug-in</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2535736 id2535744 id2535786 id2535806 id2535827 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-1DCA2F4D-ABE6-52A0-AC4E-5AAC1AB5909D.html">Text and Localization Guide</a> &gt; <a href="GUID-762A665F-43D0-53ED-B698-0CBD3AC46391.html" title="The Font and Text Services Collection contains the Font Store and related plug-ins and the Text Rendering component. Application developers can select fonts from the Font Store. Device creators can create and add fonts.">Font and Text Services Collection</a> &gt; <a href="GUID-B798C19D-4030-564A-A208-D84738259D72.html" title="The Font Store is encapsulated by the Font and Bitmap Server. It represents all of the fonts stored as files in the file system. Font files may be of the native Symbian bitmap format or they may require rasterising into bitmaps. Font rasterisers are ECOM plug-ins to the Font Store.">Font Store Component</a> &gt; <a href="GUID-89AD2E29-DF29-5B2B-9894-B7ECD62854F4.html">Font Store Tutorials</a> &gt; <a href="GUID-CD464A4E-56D5-5645-B493-DE7BF8F6DB6D.html" title="This section provides instructions for creating a font rasterizer. The code examples in this tutorial are take from the FreeType font rasterizer.">Writing a Font Rasterizer Plug-in Tutorial</a> &gt; </div>
<h1 class="topictitle1">Creating
a Font Rasterizer Plug-in</h1>
<div>
<div class="section" id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-BE450962-C675-4974-81C3-ADA81B4328D2"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-BE450962-C675-4974-81C3-ADA81B4328D2"><!-- --></a><h2 class="sectiontitle">Overview</h2> <p>The steps required to write a font rasterizer
DLL are: </p>
 <ul>
<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-C0A88FBF-7D70-5EAC-8754-41AE322A80E0"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-C0A88FBF-7D70-5EAC-8754-41AE322A80E0"><!-- --></a><p>Implement an exported <samp class="codeph">NewL()</samp> factory
function to create rasterizer objects (which you derive from <samp class="codeph">COpenFontRasterizer</samp>).
You may choose to implement this as part of your rasterizer object. </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-1ED7EC05-4217-5FA5-AFBC-D25C1517343F"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-1ED7EC05-4217-5FA5-AFBC-D25C1517343F"><!-- --></a><p>Write a class derived
from <samp class="codeph">COpenFontRasterizer</samp>. This will need to store any context
associated with the rasterization process rather than with individual typefaces.
It also implements a function to create your <samp class="codeph">COpenFontFile</samp> derived
objects. </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-7B5E3CCB-FD32-554F-9BBE-2784C98FEB4B"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-7B5E3CCB-FD32-554F-9BBE-2784C98FEB4B"><!-- --></a><p>Write a class derived
from <samp class="codeph">COpenFontFile</samp>. This class manages a single file representing
a typeface. </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-EA14EC9D-615D-5344-A91C-3171A51E3208"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-EA14EC9D-615D-5344-A91C-3171A51E3208"><!-- --></a><p>Write a class derived
from <samp class="codeph">COpenFont</samp>. </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-8D14151F-B779-5B31-B94D-F4FFA2D8F093"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-8D14151F-B779-5B31-B94D-F4FFA2D8F093"><!-- --></a><p>Place all the code into
a DLL of the right type and provide an exported function to create the rasterizer
object. </p>
 </li>

</ul>
 <p>Deriving from <samp class="codeph">COpenFontRasterizer</samp>, <samp class="codeph">COpenFontFile</samp> and <samp class="codeph">COpenFont</samp> are
discussed in the "See also" topics below. This section describes the operations
required to package the code as a polymorphic DLL. </p>
 <p>For more information,
see: </p>
 <ul>
<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-13833E45-6481-5D93-847D-06F09BFA2717"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-13833E45-6481-5D93-847D-06F09BFA2717"><!-- --></a><p> <a href="GUID-1CF78E25-8C83-5812-AE6F-8612B3F9CDA9.html">Deriving
from COpenFontRasterizer</a>  </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-6ED0A7A3-8DB8-556D-8B77-46DA7D448D6F"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-6ED0A7A3-8DB8-556D-8B77-46DA7D448D6F"><!-- --></a><p> <a href="GUID-BCF6FEF0-1792-5DEA-A2D7-896E47163547.html">Deriving
from COpenFontFile</a>  </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-94F5442E-9A77-53BB-B42E-316C62DCB032"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-94F5442E-9A77-53BB-B42E-316C62DCB032"><!-- --></a><p> <a href="GUID-5A89E3C4-DEE7-5823-A109-92ED0D87B58C.html">Deriving
from COpenFont</a>  </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-027B74C4-6CE7-5D33-B00B-33016734189E"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-027B74C4-6CE7-5D33-B00B-33016734189E"><!-- --></a><p> <a href="GUID-F44D974F-AADE-5E6C-8D69-8D3EEE4BD395.html">Deriving
from COpenFontRasterizerContext</a>  </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-003BDA08-847C-4099-9C83-AF3E6559474C"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-003BDA08-847C-4099-9C83-AF3E6559474C"><!-- --></a><h2 class="sectiontitle">The DLL</h2> <p>A font rasterizer DLL is an ordinary Symbian
polymorphic DLL. It exports just one function and has no unusual behavior. </p>
 <p>In
particular, it must have no writable static data. This is an important constraint
on the use of code from outside sources. See <a href="GUID-5BDE6462-E6CA-5738-A587-C7D875574789.html">Static
Data</a> for more information. </p>
 </div>

<div class="section" id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-ADA409CE-7326-5586-8DC4-B1E3FEBCE070"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-ADA409CE-7326-5586-8DC4-B1E3FEBCE070"><!-- --></a><h2 class="sectiontitle">The exported
function</h2> <p>The exported function is a factory function that creates
objects of a class derived from <samp class="codeph">COpenFontRasterizer</samp>. It will
be called just once â€” when the Font and Bitmap Server loads the DLL. </p>
 <p>Although
the name of the function does not matter because it is loaded by ordinal,
implementers should follow the practice of making it a static member of the
rasterizer class, called <samp class="codeph">NewL()</samp>. Therefore, if the rasterizer
class is <samp class="codeph">CExampleRasterizer</samp> (derived from <samp class="codeph">COpenFontRasterizer</samp>),
the exported function is: </p>
 <pre class="codeblock" id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-45589D16-BF32-54F0-ADFB-566231281110"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-45589D16-BF32-54F0-ADFB-566231281110"><!-- --></a>static COpenFontRasterizer* CExampleRasterizer::NewL()</pre>
 <p>The function must take no arguments. It must create a <samp class="codeph">COpenFontRasterizer</samp> derived
object on the heap, returning it to the caller. The caller is responsible
for deleting the object. As the name of the example function suggests, it
is allowed to leave. </p>
<p><strong>Example </strong> </p>
 <p>The exported function
used in the FreeType rasterizer is given below: </p>
 <pre class="codeblock" id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-1B22E569-A3DD-52B6-AEA2-F1CF8A721BAB"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-1B22E569-A3DD-52B6-AEA2-F1CF8A721BAB"><!-- --></a>EXPORT_C COpenFontRasterizer* CFreeTypeRasterizer::NewL()
    {
    CFreeTypeRasterizer* r = new(ELeave) CFreeTypeRasterizer;
    CleanupStack::PushL( r );
    r-&gt;iContext = CFreeTypeContext::NewL();
    CleanupStack::Pop();
    return r;
    }
</pre>
 </div>

<div class="section" id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-A76BDCFA-AE92-497C-9312-E77F9AB12957"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-A76BDCFA-AE92-497C-9312-E77F9AB12957"><!-- --></a><h2 class="sectiontitle">Project file</h2> <p>The name of the rasterizer DLL, its
type, and its UIDs are all specified in the MMP file. Note that: </p>
 <ul>
<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-AAD480A0-9010-5999-9677-9F7C1C94EC2F"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-AAD480A0-9010-5999-9677-9F7C1C94EC2F"><!-- --></a><p>All capabilities except
TCB (Trusted Computing Base) are required. </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-38FDC5A5-5AA4-530C-AC34-D6BBE852959C"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-38FDC5A5-5AA4-530C-AC34-D6BBE852959C"><!-- --></a><p>The <em>targettype</em> must
be <strong>PLUGIN </strong>. </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-7EE45983-7578-527C-97A6-88ABFFA4EEBB"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-7EE45983-7578-527C-97A6-88ABFFA4EEBB"><!-- --></a><p>The <em>UID</em> line
identifies the project's UID2 and UID3 values. UID2 must be <samp class="codeph">0x10009D8D</samp>,
which identifies the DLL as an ECOM plug-in. UID3 must be <samp class="codeph">0x100012A7</samp>,
which identifies the ECOM plug-in as a font rasterizer. </p>
 </li>

</ul>
 <p><strong>Example </strong> </p>
 <p>A fragment of the project file for the freetype
DLL is given below. </p>
 <pre class="codeblock" id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-1E2029EE-E2C8-5D48-B965-A8EBC991C513"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-1E2029EE-E2C8-5D48-B965-A8EBC991C513"><!-- --></a>target freetype.dll
CAPABILITY All -Tcb
targettype PLUGIN
UID 0x10003B1F 0x100012A7</pre>
 </div>

<div class="section" id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-80B824DC-5C76-479D-B98E-05B4C985258E"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-80B824DC-5C76-479D-B98E-05B4C985258E"><!-- --></a><h2 class="sectiontitle">Header files</h2> <p>Font rasterizer DLLs must <samp class="codeph">#include</samp> the
following header files, which are located in the standard include directory <span class="filepath">\epoc32\include\</span>: </p>
 <ul>
<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-29A10FF8-E5F4-5FF3-AAE9-5DB6769672B7"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-29A10FF8-E5F4-5FF3-AAE9-5DB6769672B7"><!-- --></a><p> <span class="filepath">openfont.h</span> for
the Font Store classes </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-E85D522E-5EA4-5931-906B-1C9B190BE61E"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-E85D522E-5EA4-5931-906B-1C9B190BE61E"><!-- --></a><p> <span class="filepath">e32uid.h</span> for
the UID value for a dynamic library </p>
 </li>

<li id="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-BB94D8BC-24B2-5BE3-8C46-9394FE3585A6"><a name="GUID-F477E82D-2929-5C69-BF6D-A69A61AC9EA5__GUID-BB94D8BC-24B2-5BE3-8C46-9394FE3585A6"><!-- --></a><p> <span class="filepath">f32file.h</span> for
the file handling classes </p>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-CD464A4E-56D5-5645-B493-DE7BF8F6DB6D.html" title="This section provides instructions for creating a font rasterizer. The code examples in this tutorial are take from the FreeType font rasterizer.">Writing a Font Rasterizer Plug-in Tutorial</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-1CF78E25-8C83-5812-AE6F-8612B3F9CDA9.html">Deriving
from COpenFontRasterizer</a></div>
<div><a href="GUID-BCF6FEF0-1792-5DEA-A2D7-896E47163547.html">Deriving
from COpenFontFile</a></div>
<div><a href="GUID-5A89E3C4-DEE7-5823-A109-92ED0D87B58C.html">Deriving
from COpenFont</a></div>
<div><a href="GUID-F44D974F-AADE-5E6C-8D69-8D3EEE4BD395.html">Deriving
from COpenFontRasterizerContext</a></div>
<div><a href="GUID-5BDE6462-E6CA-5738-A587-C7D875574789.html">Static data</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>