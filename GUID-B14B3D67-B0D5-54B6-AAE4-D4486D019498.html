<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="SystemStateManager: The System State Manager example"/>
<meta name="abstract" content="This example demonstrates the System State Manager (SSM) API. It consists of System State Manager example executable (ssmanager.exe), two system state policy plugins (ssm.state.policy.0004.dll and ssm.state.policy.0005.dll), a system-wide property policy plugin (ssm.swp.policy.dummy.diskstatus.dll), an example Normal State policy (ssm.state.policy.0001.dll) and a dummy back-up application (dummybackup.exe)."/>
<meta name="description" content="This example demonstrates the System State Manager (SSM) API. It consists of System State Manager example executable (ssmanager.exe), two system state policy plugins (ssm.state.policy.0004.dll and ssm.state.policy.0005.dll), a system-wide property policy plugin (ssm.swp.policy.dummy.diskstatus.dll), an example Normal State policy (ssm.state.policy.0001.dll) and a dummy back-up application (dummybackup.exe)."/>
<meta name="DC.Relation" scheme="URI" content="GUID-788BD091-186A-5E25-B058-952C7629A8D4.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DF3E24A4-8E97-5E26-8C24-5033A0716B5A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-788BD091-186A-5E25-B058-952C7629A8D4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-26DBE128-6244-557E-989D-A4A608F43A0F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-06724AAF-3C6D-5964-B69D-D9D981543505.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>SystemStateManager: The System State Manager example</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2519078 id2519546 id2519566 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05.html" title="Device Services provides device specific services to control phone resources and establish remote controlled connection with the external devices. It also monitors the phone resources and provides stage shutdown mechanism.">Device Services Guide</a> &gt; <a href="GUID-DF3E24A4-8E97-5E26-8C24-5033A0716B5A.html" title="The startup of the Symbian platform is modularised, so that different classes of servers or applications can be launched by different components. The System State Manager (SSM) extends the existing Generic Start-up Architecure (GSA) to include system state management and shutdown. The expanded GSA is called the System State Management Architecture (SSMA). The SSMA handles system state manager and shutdown and system state plug-in.">System State Management Architecture</a> &gt; <a href="GUID-788BD091-186A-5E25-B058-952C7629A8D4.html" title="System State Manager (SSM) is a Symbian platform component that manages the state of a device throughout its life cycle. SSM extends the existing Generic Start-up Architecture (GSA) and also manages the system state and the system-wide property.">System State Manager</a> &gt; </div>
<h1 class="topictitle1">SystemStateManager: The System State Manager example</h1>
<div><p>This example demonstrates the System State Manager (SSM)
API. It consists of System State Manager example executable (ssmanager.exe),
two system state policy plugins (ssm.state.policy.0004.dll and ssm.state.policy.0005.dll),
a system-wide property policy plugin (ssm.swp.policy.dummy.diskstatus.dll),
an example Normal State policy (ssm.state.policy.0001.dll) and a dummy
back-up application (dummybackup.exe). </p>

<div class="section" id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-2F32F775-F525-5893-A581-3A5396A66333"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-2F32F775-F525-5893-A581-3A5396A66333"><!-- --></a><h2 class="sectiontitle">Purpose</h2> <p>This example demonstrates following SSM features </p>
 <ul>
<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-55D30A2E-9EEF-515C-9DA5-2261AD64FD2E"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-55D30A2E-9EEF-515C-9DA5-2261AD64FD2E"><!-- --></a><p>How to write
a System Wide Property (SWP) policy. </p>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-477F87E7-D3B2-53FB-A96D-8304632AF48D"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-477F87E7-D3B2-53FB-A96D-8304632AF48D"><!-- --></a><p>How to write
a System State policy. </p>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-3AAA1DCD-F21A-53A2-8AB8-39F42396972D"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-3AAA1DCD-F21A-53A2-8AB8-39F42396972D"><!-- --></a><p>How to request
a change to an SWP, with and without notification </p>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-5022B224-8620-5AB8-B8C7-F95296DC7A14"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-5022B224-8620-5AB8-B8C7-F95296DC7A14"><!-- --></a><p>How to request
a change to a system state, with and without notification </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-878E4690-1F02-5C15-8B4E-F53E8EA8719D-GENID-1-12-1-11-1-1-7-1-5-1-6-1-3-2"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-878E4690-1F02-5C15-8B4E-F53E8EA8719D-GENID-1-12-1-11-1-1-7-1-5-1-6-1-3-2"><!-- --></a><h2 class="sectiontitle">Download</h2><p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-77c0248d-dda5-4b56-9d5a-eda76091bca2.zip" target="_blank">ssmanager.zip</a></p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-77c0248d-dda5-4b56-9d5a-eda76091bca2.html">browse</a> to view the example code. </p>
 </div>

<div class="section" id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-BD0B6948-73B3-4814-A8F4-BEF86DBE589E"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-BD0B6948-73B3-4814-A8F4-BEF86DBE589E"><!-- --></a><h2 class="sectiontitle">Class
Summary</h2><ul>
<li><p><a href="GUID-60E6220E-5B9B-3D4E-A95F-B7AD6DB8AF68.html"><span class="apiname">TSsmSwp</span></a></p>
</li>

<li><p><a href="GUID-CEBD45FB-5E0E-3EBA-B134-545B7F82EBEC.html"><span class="apiname">TSsmStateTransition</span></a></p>
</li>

<li><p><a href="GUID-76D2A5E8-BC64-3528-BED6-499E52CF8B2B.html"><span class="apiname">CSsmSystemWideProperty</span></a></p>
</li>

<li><p><a href="GUID-89C25B0F-DB76-30D5-A4D6-0C12922194E4.html"><span class="apiname">RSsmStateAwareSession</span></a></p>
</li>

<li><p><a href="GUID-8CE82869-EA9E-327C-B817-ACF497CCDC9D.html"><span class="apiname">RSsmStateManager</span></a></p>
</li>

<li><p><a href="GUID-31FB0BC8-83FC-3581-A7A3-C1781CAE7187.html"><span class="apiname">MSsmSwpPolicy</span></a></p>
</li>

<li><p><a href="GUID-ABE0DF1C-78FB-3141-8AE6-5CC8C73A8034.html"><span class="apiname">CSsmCommandList</span></a></p>
</li>

<li><p><a href="GUID-62413EF5-F6F1-37C9-9213-5178EAE6C2F5.html"><span class="apiname">MSwpChangeNotificationSubscriber</span></a></p>
</li>

<li><p><a href="GUID-4181374F-8545-3AF0-8932-A73138296FD1.html"><span class="apiname">CSsmCommandListResourceReader</span></a></p>
</li>

<li><p><a href="GUID-B29C0C6D-4BFC-3AAF-B9CB-8C200CF4B4C7.html"><span class="apiname">MSsmConditionalCallback</span></a></p>
</li>

</ul>
</div>

<div class="section" id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-C68A69F1-0692-50E3-A049-D38D90E4B52B"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-C68A69F1-0692-50E3-A049-D38D90E4B52B"><!-- --></a><h2 class="sectiontitle">Design
and implementation</h2> <p>The example consists of several components:
a System State Manager example executable (<span class="filepath">ssmanager.exe</span>), two system state policy plugins (<span class="filepath">ssm.state.policy.0004.dll</span> and <span class="filepath">ssm.state.policy.0005.dll</span>), a system-wide
property policy plugin (<span class="filepath">ssm.swp.policy.dummy.diskstatus.dll</span>), an example Normal State policy (<span class="filepath">ssm.state.policy.0001.dll</span>) and a dummy back-up application (<span class="filepath">dummybackup.exe</span>). </p>
 <p>This section describes the components in the example: </p>
 <ul>
<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-61B148DD-A13E-51C2-9EEB-54E354DE2DB3"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-61B148DD-A13E-51C2-9EEB-54E354DE2DB3"><!-- --></a><p> <span class="filepath">ssmanager.exe</span>: The main process which presents the menu to the user, receives
the input from the user . It has the following functions: </p>
 <ul>
<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-EA2E0A4A-8EC3-5BF8-8994-A2F90E4D032D"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-EA2E0A4A-8EC3-5BF8-8994-A2F90E4D032D"><!-- --></a><p> <samp class="codeph">RequestSwpChange()</samp>. This demonstrates changing the value of a system wide property
without notifying any clients. When the disk status changes, the dummy
backup application is launched to simulate a disk backup. <samp class="codeph">RequestSwpChangeWithNotificationL()</samp> is similar to RequestSwpChange(),
but it notifies its clients when a value of a system wide property
changes. </p>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-D87525A4-570E-5CA9-AAC7-721564BDB50A"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-D87525A4-570E-5CA9-AAC7-721564BDB50A"><!-- --></a><p> <samp class="codeph">RequestSsChange()</samp>. This demonstrates changing the system state without notifying any
clients. When the system state changes from 'Normal' to 'Restore'
state, the dummy backup application is launched. <samp class="codeph">RequestSsChangeWithNotification()</samp> is similar to RequestSwpChange(), but it notifies its clients when
a value of a system wide property changes. </p>
 </li>

</ul>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-A61E42C7-F62E-5012-86D6-9D71833BB488"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-A61E42C7-F62E-5012-86D6-9D71833BB488"><!-- --></a><p> <span class="filepath">ssm.state.policy.0004.dll</span>:The dummy backup system state policy with custom commands listed
in a resource file (<span class="filepath">ssm_cmdlist_state_dummy_backup.rss</span>). The command list is prepared in the dummy backup policy using
the <a href="GUID-4181374F-8545-3AF0-8932-A73138296FD1.html"><span class="apiname">CSsmCommandListResourceReader</span></a> class. </p>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-A74E6A5F-7E2B-5DEF-A8D9-75BDE2BCF765"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-A74E6A5F-7E2B-5DEF-A8D9-75BDE2BCF765"><!-- --></a><p> <span class="filepath">ssm.state.policy.0005.dll</span>: The dummy restore system state policy with custom commands defined
using the command factory classes <a href="GUID-A9E6135E-3C15-3176-A41A-108CE99AE28F.html"><span class="apiname">MSsmCommand</span></a> and <a href="GUID-365DF661-A86F-3218-9C77-483526385EDC.html"><span class="apiname">SsmCommandFactory</span></a>. </p>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-90199262-D9C1-52C3-8475-02957E8A4E74"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-90199262-D9C1-52C3-8475-02957E8A4E74"><!-- --></a><p> <span class="filepath">ssm.swp.policy.dummy.diskstatus.dll</span>: The dummy disk status system-wide property with custom commands
listed in a resource file (<span class="filepath">ssm_cmdlist_swp_dummy_diskstatus.rss</span>). The command list is prepared by using the <a href="GUID-4181374F-8545-3AF0-8932-A73138296FD1.html"><span class="apiname">CSsmCommandListResourceReader</span></a> class. </p>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-6374DEC2-4AAB-500C-8AFA-EE8BF003F741"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-6374DEC2-4AAB-500C-8AFA-EE8BF003F741"><!-- --></a><p> <span class="filepath">ssm.state.policy.0001.dll</span>: the dummy back up and restore states need to be supported by the
Normal state inorder to allow transition from one state to another.
Hence, the existing Normal state policy file is updated with the changes
required to support these transitions. </p>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-4F412BA5-3A79-5688-BD95-A3C384981FC1"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-4F412BA5-3A79-5688-BD95-A3C384981FC1"><!-- --></a><p> <span class="filepath">dummybackup.exe</span>: The dummy application which is launched when the system state changes
to 'backup'. It just prints a series of statements to the console. </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-DEFCF4B9-452A-5EAF-ABD3-BC4F6FBD528B-GENID-1-12-1-11-1-1-7-1-5-1-6-1-3-5"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-DEFCF4B9-452A-5EAF-ABD3-BC4F6FBD528B-GENID-1-12-1-11-1-1-7-1-5-1-6-1-3-5"><!-- --></a><h2 class="sectiontitle">Building
and configuring</h2> <p>To build the example: </p>
 <ul>
<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-BCB63B67-BA41-5BE6-B80A-3DE0A0211A96"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-BCB63B67-BA41-5BE6-B80A-3DE0A0211A96"><!-- --></a><p>The example
builds the following binaries </p>
 <p> <span class="filepath">ssmanager.exe</span>  </p>
 <p> <span class="filepath">ssm.state.policy.0004.dll</span>  </p>
 <p> <span class="filepath">ssm.state.policy.0005.dll</span>  </p>
 <p> <span class="filepath">ssm.swp.policy.dummy.diskstatus.dll</span>  </p>
 <p> <span class="filepath">ssm.state.policy.0001.dll</span>  </p>
 <p> <span class="filepath">dummybackup.exe</span>  </p>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-1D7646C4-40E8-5615-BD7C-DAFF33483CD5"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-1D7646C4-40E8-5615-BD7C-DAFF33483CD5"><!-- --></a><p>You can build
the example from your IDE or the command line. </p>
 <p>If you use
an IDE, import the <span class="filepath">bld.inf</span> file of the example
into your IDE, and use the build command of the IDE. </p>
 <p>If you
use the command line, open a command prompt, and set the current directory
to the source code directory of the example. You can then build the
example with the SBSv1 build tools with the following commands: </p>
 <p><kbd class="userinput">bldmake bldfiles</kbd> </p>
 <p><kbd class="userinput">abld
build</kbd> </p>
 </li>

<li id="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-53F53A62-94CE-5412-AD52-CC00D4A44053"><a name="GUID-B14B3D67-B0D5-54B6-AAE4-D4486D019498__GUID-53F53A62-94CE-5412-AD52-CC00D4A44053"><!-- --></a><p>For the emulator,
the example builds <span class="filepath">ssmanager.exe</span> in the <span class="filepath">epoc32\release\winscw\&lt;udeb or urel&gt;\</span> folder. </p>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-788BD091-186A-5E25-B058-952C7629A8D4.html" title="System State Manager (SSM) is a Symbian platform component that manages the state of a device throughout its life cycle. SSM extends the existing Generic Start-up Architecture (GSA) and also manages the system state and the system-wide property.">System State Manager</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-26DBE128-6244-557E-989D-A4A608F43A0F.html">System
State Manager Overview</a></div>
<div><a href="GUID-06724AAF-3C6D-5964-B69D-D9D981543505.html" title="The tutorials provides a quick start to create policies, plug-in and the property changes that needs to be done. It assumes that you are familiar with native programming and the basics of the SSM architecture, as described in the SSM Concepts.">System
State Manager Tutorials</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>