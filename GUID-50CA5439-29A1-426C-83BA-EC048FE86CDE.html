<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Allowing Large Memory Allocation"/>
<meta name="abstract" content="This section describes how an application can request for free memory from OOM Monitor for large amount of RAM allocation."/>
<meta name="description" content="This section describes how an application can request for free memory from OOM Monitor for large amount of RAM allocation."/>
<meta name="DC.Relation" scheme="URI" content="GUID-C7AA92A9-9595-439A-A3E7-769E36D61FEE.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C4C8395E-F982-4D6A-88D3-28EDC494817F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0185D5DC-5142-42C3-8FFB-8EB76D49AB06.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C3919681-BB41-4CFA-812F-2D7989E952DC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F746C61E-BE8A-4F3B-B8F7-92964B36B298.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C7AA92A9-9595-439A-A3E7-769E36D61FEE.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F6A33835-D677-41D0-86BB-812E3AFA5192.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-39A8FBC9-5FD6-4F92-B71E-5C5438ECFD46.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-88752800-83BD-4845-80A0-6B65D8D81924.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Allowing Large Memory Allocation</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE"><a name="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2520040 id2380957 id2380972 id2381021 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html">Generic Application Support Guide</a> &gt; <a href="GUID-C3919681-BB41-4CFA-812F-2D7989E952DC.html" title="System Resource Monitoring collection contains Out Of Disk (OOD) Monitor component to monitor changes in the disk space levels and Out Of Memory (OOM) Monitor component to handle low RAM situations.">System Resource Monitoring</a> &gt; <a href="GUID-F746C61E-BE8A-4F3B-B8F7-92964B36B298.html" title="Out Of Memory (OOM) Monitor component monitors and handles out of memory situations. This component enables applications to improve their performance when the amount of free RAM in the phone is low.">Out Of Memory (OOM) Monitor</a> &gt; <a href="GUID-C7AA92A9-9595-439A-A3E7-769E36D61FEE.html" title="This section lists the OOM Monitor tutorials.">Using OOM Monitor</a> &gt; </div>
<h1 class="topictitle1">Allowing
Large Memory Allocation</h1>
<div><p>This section describes how an application can request for free
memory from OOM Monitor for large amount of RAM allocation.</p>

<div class="section" id="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE__GUID-54D945B5-EFE2-4639-B040-7A6321448A07"><a name="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE__GUID-54D945B5-EFE2-4639-B040-7A6321448A07"><!-- --></a>       <p>An application
can allocate RAM without seeking the permission from the OOM Monitor if the
amount of RAM is not over <a href="GUID-75DB7CA6-08F0-3CFB-ADDF-621FFF5B8058.html"><span class="apiname">KOomMaxAllocationWithoutPermission</span></a> limit.
 </p>
<p>If an application needs to allocate more RAM than allocated by <a href="GUID-75DB7CA6-08F0-3CFB-ADDF-621FFF5B8058.html"><span class="apiname">KOomMaxAllocationWithoutPermission</span></a>,
it must request the OOM Monitor using the <a href="GUID-02D1911A-D2E5-3D28-9B05-75DA0A75DE73.html#GUID-02D1911A-D2E5-3D28-9B05-75DA0A75DE73__GUID-BE322080-5193-3D8E-9425-C6BEA920ED2E"><span class="apiname">ROomMonitorSession::RequestFreeMemory()</span></a> method. </p>
<p>An
application can request for free RAM either synchronously or asynchronously.</p>
 
 </div>

<a name="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE__GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-1-12-1-13-1-1-9-1-5-1-6-1-6-1-3-2"><!-- --></a><ol id="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE__GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-1-12-1-13-1-1-9-1-5-1-6-1-6-1-3-2"><li class="stepexpand" id="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE__GUID-83631E4F-71D0-4FD2-8FD6-46689AAFA761-GENID-1-12-1-13-1-1-9-1-5-1-6-1-6-1-3-2-1"><a name="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE__GUID-83631E4F-71D0-4FD2-8FD6-46689AAFA761-GENID-1-12-1-13-1-1-9-1-5-1-6-1-6-1-3-2-1"><!-- --></a><span>Create an OOM Monitor
session</span>
 <pre class="codeblock">ROomMonitorSession ioomMonitorSession;
CleanUpClosePushL(ioomMonitorSession);
User::LeaveIfError(ioomMonitorSession.Connect());
</pre>

</li>
<li class="stepexpand" id="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE__GUID-83631E4F-71D0-4FD2-8FD6-46689AAFA761-GENID-1-12-1-13-1-1-9-1-5-1-6-1-6-1-3-2-2"><a name="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE__GUID-83631E4F-71D0-4FD2-8FD6-46689AAFA761-GENID-1-12-1-13-1-1-9-1-5-1-6-1-6-1-3-2-2"><!-- --></a><span>Request for free
memory can be done in two ways:</span>
</li>
</ol>

<div class="section" id="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE__GUID-1D804A3D-8EEC-4E62-8496-2A43CCDC0BEB"><a name="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE__GUID-1D804A3D-8EEC-4E62-8496-2A43CCDC0BEB"><!-- --></a><p>The OOM Monitor
allows the client application to allocate memory, if the free RAM level is
above the <samp class="codeph">LOW_RAM_THRESHOLD</samp> value.</p>
<div class="p"> If the free RAM
level is below the <samp class="codeph">LOW_RAM_THRESHOLD</samp> value,
the OOM Monitor releases RAM using <a href="GUID-02D1911A-D2E5-3D28-9B05-75DA0A75DE73.html#GUID-02D1911A-D2E5-3D28-9B05-75DA0A75DE73__GUID-BE322080-5193-3D8E-9425-C6BEA920ED2E"><span class="apiname">ROomMonitorSession::RequestFreeMemory()</span></a> method.
This method returns the following values: <ul>
<li><p>Requested amount of RAM is available then <samp class="codeph">aStatus</samp> is
set to <samp class="codeph">KErrNone</samp>.</p>
</li>

<li><p>Requested amount of RAM is not available then <samp class="codeph">aStatus</samp> is
set to <samp class="codeph">KErrNoMemory</samp>.</p>
</li>

</ul>
 </div>
</div>

</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-C4C8395E-F982-4D6A-88D3-28EDC494817F.html">Requesting RAM Asynchronously</a></strong><br/>
This section describes how an application can request for free RAM asynchronously.</li>
<li class="ulchildlink"><strong><a href="GUID-0185D5DC-5142-42C3-8FFB-8EB76D49AB06.html">Requesting RAM Synchronously</a></strong><br/>
This section describes how an application can request for free RAM synchronously.</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C7AA92A9-9595-439A-A3E7-769E36D61FEE.html" title="This section lists the OOM Monitor tutorials.">Using OOM Monitor</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-F6A33835-D677-41D0-86BB-812E3AFA5192.html" title="This section provides a summary of related concepts and functionality of OOM Monitor.">OOM Monitor
Concepts</a></div>
<div><a href="GUID-39A8FBC9-5FD6-4F92-B71E-5C5438ECFD46.html" title="This section provides an overview of the functionality and the architecture of the OOM Monitor component.">OOM Monitor
Overview</a></div>
<div><a href="GUID-88752800-83BD-4845-80A0-6B65D8D81924.html" title="This section explains how to set priorities in the configuration file and about out of memory error.">OOM Monitor
Reference</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>