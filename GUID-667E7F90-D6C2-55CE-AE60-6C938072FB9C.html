<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Graphics and Drawing Overview"/>
<meta name="abstract" content="This topic provides an introduction to drawing graphics to the screen."/>
<meta name="description" content="This topic provides an introduction to drawing graphics to the screen."/>
<meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6C16417B-5B37-5310-B59A-750D971AA6D4.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Graphics and Drawing Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C"><a name="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2384499 id2384574 id2384588 id2384709 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" title="The Windowing collection contains two components—the Window Server, which manages the use of the screen by applications, and the Window Server Plugins component.">Windowing Collection</a> &gt; <a href="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" title="The Window Server component manages the use of the screen by applications and handles key and pointer events.">Window Server Component</a> &gt; <a href="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html" title="The Window Server client-side library provides client applications with access to the screen and input devices.">Window Server Client-Side Library</a> &gt; <a href="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" title="This section provides application developers with an introduction to key concepts involved in drawing graphics to the screen.">Graphics and Drawing</a> &gt; </div>
<h1 class="topictitle1">Graphics and Drawing Overview</h1>
<div><p>This topic provides an introduction to drawing graphics
to the screen. </p>

<p> <strong>Variant</strong>: Both (ScreenPlay and non-ScreenPlay). <strong>Target
audience</strong>: Application developers. </p>

<p>Applications can draw to any <samp class="codeph">RDrawableWindow</samp> —such
as an <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow</span></a> —via a graphics device, of type <a href="GUID-30479BE3-296E-3B4D-914D-B080ABD733E4.html"><span class="apiname">CWsScreenDevice</span></a>, and a graphics context, of type <a href="GUID-0AEE5955-C530-35F1-A904-69183331B294.html"><span class="apiname">CWindowGc</span></a>. These classes are derived from the <a href="GUID-B6D4AEE9-5C17-51D9-BBDE-7CCB5218279D.html" title="The GDI component provides abstract interfaces for drawing to devices, such as screens and printers.">GDI component</a> classes <a href="GUID-500FC564-35E9-3B66-A0C2-1269371A2EA0.html"><span class="apiname">CGraphicsDevice</span></a> and <a href="GUID-DAD09DCF-3123-38B4-99E9-91FB24B92138.html"><span class="apiname">CGraphicsContext</span></a>, respectively. This means that general drawing functions can be
used for drawing to windows, as well as to other graphics devices.
The Window Server itself does not provide the facilities to draw graphics
to a physical device. <samp class="codeph">CWindowGc</samp> functions are not
passed to the Window Server directly. Rather, they are stored in a
buffer maintained by the Window Server Client API. This buffer is
flushed to the Window Server only rarely. By this means the context
switching involved in drawing is minimised, and system performance
significantly enhanced. </p>

<p> <samp class="codeph">CWsScreenDeviceminimized</samp> encapsulates the device-dependent
aspects of graphics operations. Graphics functions are not carried
out directly via a <samp class="codeph">CWsScreenDevice</samp>, however, but
via a graphics context with which it is associated. The graphics context
class, <samp class="codeph">CWindowGc</samp>, provides a rich set of drawing
functions, including functions to draw lines, arcs, polygons, text
and bitmaps. </p>

<p>A graphics context contains a collection of configurable parameters
concerned with graphics, such as pen width, pen color, brush color.
It is stored in the server, thus reducing the amount of information
that has to be sent with each graphics call. The graphics call simply
specifies the graphics context it wishes to use, and a single graphics
context can be shared between multiple windows. </p>

<p>To draw to a graphics context it must be associated with a window.
Typically a graphics context is created when a session is constructed,
and that graphics context is shared between several windows in the
application. When the window needs to use the graphics context it
calls <a href="GUID-0AEE5955-C530-35F1-A904-69183331B294.html#GUID-0AEE5955-C530-35F1-A904-69183331B294__GUID-1C0F9DF6-23C2-3707-8F2B-0A738467FF0A"><span class="apiname">CWindowGc::Activate()</span></a>. If necessary it can
change the graphics context's settings. <a href="GUID-0AEE5955-C530-35F1-A904-69183331B294.html#GUID-0AEE5955-C530-35F1-A904-69183331B294__GUID-E977DBB2-8547-3AB7-99E3-9D246DA6CF58"><span class="apiname">CWindowGc::Deactivate()</span></a> should be called first if the graphics context is currently active
upon another window. </p>

<p>Several optimizations are used by the Window Server to obtain high-performance
graphics: </p>

<ul>
<li id="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C__GUID-C8AC84D6-AF17-5975-88B8-CC93C499DFA0"><a name="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C__GUID-C8AC84D6-AF17-5975-88B8-CC93C499DFA0"><!-- --></a><p>Each window
is associated with an <samp class="codeph">RWsSession</samp> which is in turn
associated with a client-side buffer. Instead of implementing graphics
operations by a direct client-server call, which involves expensive
context switching, all graphics operations are stored as opcodes in
the buffer, and the buffer is only flushed in certain circumstances. </p>
 </li>

<li id="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C__GUID-00B3FC8E-25DE-542F-BF67-0F71CF22526A"><a name="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C__GUID-00B3FC8E-25DE-542F-BF67-0F71CF22526A"><!-- --></a><p>The <samp class="codeph">CFbsBitmap</samp> class allows a bitmap to be shared between all
threads in the system, including the client and the Window Server.
This sharing is mediated by the <a href="GUID-A03FB1BF-F67B-519D-A904-74CA3F8375D9.html" title="The Font and Bitmap Server collection contains only one component—the Font and Bitmap Server. As its name suggests, the Font and Bitmap Server manages fonts and bitmaps.">Font and Bitmap server</a>. The <a href="GUID-17150D76-BB82-3A4B-8B1A-8BA93CB1A9EF.html"><span class="apiname">CWsBitmap</span></a> class eliminates further context
switches by taking ownership of the handle of the bitmap. Applications
can use this class to more efficiently open, blit-to-screen, and close
a series of bitmaps. Use functions that take a <samp class="codeph">CWsBitmap</samp> in preference to those that take a <samp class="codeph">CFbsBitmap</samp>,
because they are faster. </p>
 </li>

<li id="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C__GUID-550D1374-C166-54C6-A055-0CA040691654"><a name="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C__GUID-550D1374-C166-54C6-A055-0CA040691654"><!-- --></a><p>A single graphics
context may be used for drawing to many windows—it is not necessary
to have one per window. The <samp class="codeph">Activate()</samp> function associates
a <samp class="codeph">CWindowGc</samp> with a particular window. </p>
 </li>

<li id="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C__GUID-91AFC884-0BB2-5A73-B757-94EF1B2328A7"><a name="GUID-667E7F90-D6C2-55CE-AE60-6C938072FB9C__GUID-91AFC884-0BB2-5A73-B757-94EF1B2328A7"><!-- --></a><p>Provided drawing
operations to an <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow</span></a> are performed as <a href="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027.html" title="This topic provides background information about redraw drawing and tips for updating old code to comply with the recommendation that all drawing is migrated to redraw drawing.">redraw drawing</a>, the Window Server stores the sequence of drawing commands that
represent the window contents in redraw stores. Then when the Window
Server needs to repaint the window (because, for example, a dialog
box popped up over it and has now closed) it simply replays the sequence
of stored commands, rather than sending a redraw request to the client.
This minimizes the number of client-server transactions and means
that windows are repainted as soon as the Window Server detects that
they are needed. </p>
 <p>This means that all <a href="GUID-0AEE5955-C530-35F1-A904-69183331B294.html"><span class="apiname">CWindowGc</span></a> drawing should now be redraw drawing, which means that it takes
place between <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79__GUID-9337538E-7A53-3153-A330-968B5E4F2FF2"><span class="apiname">RWindow::BeginRedraw()</span></a> and <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79__GUID-3DE16607-AD3B-3946-BEB3-88512EAAB9CE"><span class="apiname">RWindow::EndRedraw()</span></a> calls. If you use the <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-D5458F8C-E199-37DD-B821-050B749122C6"><span class="apiname">CCoeControl::DrawNow()</span></a> and <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-9FB682AC-0209-302A-83F3-7BCB1162B998"><span class="apiname">CCoeControl::DrawDeferred()</span></a> methods, the
UI Control Framework (CONE) takes care of this for you. See <a href="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027.html" title="This topic provides background information about redraw drawing and tips for updating old code to comply with the recommendation that all drawing is migrated to redraw drawing.">Redraw Drawing</a> for more information. </p>
 </li>

</ul>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" title="This section provides application developers with an introduction to key concepts involved in drawing graphics to the screen.">Graphics and Drawing</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" title="This section provides application developers with an introduction to key concepts involved in drawing graphics to the screen.">Graphics
and Drawing </a></div>
<div><a href="GUID-6C16417B-5B37-5310-B59A-750D971AA6D4.html">The UI Control Framework
(CONE)</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>