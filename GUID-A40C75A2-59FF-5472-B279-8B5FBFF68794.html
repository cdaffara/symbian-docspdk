<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Content Rendering Plug-ins (CRPs) Overview"/>
<meta name="abstract" content="Content Rendering Plug-ins (CRPs) are Window Server plug-ins that can perform custom drawing in response to client requests. The client simply calls CWindowGc::DrawWsGraphic(TWsGraphicId, TRect)."/>
<meta name="description" content="Content Rendering Plug-ins (CRPs) are Window Server plug-ins that can perform custom drawing in response to client requests. The client simply calls CWindowGc::DrawWsGraphic(TWsGraphicId, TRect)."/>
<meta name="DC.Relation" scheme="URI" content="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Content Rendering Plug-ins (CRPs) Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2384499 id2384574 id2384967 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" title="The Windowing collection contains two components—the Window Server, which manages the use of the screen by applications, and the Window Server Plugins component.">Windowing Collection</a> &gt; <a href="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" title="The Window Server component manages the use of the screen by applications and handles key and pointer events.">Window Server Component</a> &gt; <a href="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html" title="This section describes the generic Window Server plug-in framework and is mainly aimed at system integrators, UI platform providers and device and hardware manufacturers.">Window Server Plug-in Framework</a> &gt; </div>
<h1 class="topictitle1">Content
Rendering Plug-ins (CRPs) Overview</h1>
<div><p>Content Rendering Plug-ins (CRPs) are Window Server plug-ins that
can perform custom drawing in response to client requests. The client simply
calls <samp class="codeph">CWindowGc::DrawWsGraphic(TWsGraphicId, TRect)</samp>. </p>

<p>To the client, a CRP call appears like any other draw operation—the thing
it most resembles is drawing a bitmap. In particular, a CRP call can be issued
as part of a stream of draw operations. If there are draw operations before
and after the CRP call, it may draw above some elements and other elements
may be drawn above it. This is in contrast to anims and sprites, which always
appear above other window drawing. </p>

<p>On the server side, the plugin provides a subclass of <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphicDrawer</span></a>. When the client’s <samp class="codeph">CWindowGc::DrawWsGraphic()</samp> call is processed,
the appropriate <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphicDrawer</span></a> subclass
is called to perform the rendering. </p>

<p>CRPs have several benefits: </p>

<ul>
<li id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-EAF066AE-72E8-5029-B7EA-B2F6BB4D80E7"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-EAF066AE-72E8-5029-B7EA-B2F6BB4D80E7"><!-- --></a><p> <strong>Content abstraction</strong> —the
client has no knowledge of what is rendered—that is left to the plug-in. As
a result, CRPs can enable the appearance of an application to be customized
without any change to application code. (This is similar to the use of skin
bitmaps to customize application appearance, but it goes further.) </p>
 </li>

<li id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-B175FE51-4BF5-56A6-8AD9-D4A03A48F7BB"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-B175FE51-4BF5-56A6-8AD9-D4A03A48F7BB"><!-- --></a><p> <strong>Server-side execution</strong> —CRP
rendering code executes inside the Window Server process. This means that
it is less susceptible to interruptions under CPU loading than client-side
code. However, it also means that CRPs must be written with greater care,
because their failure can cause a device reset rather than a simple application
exit. </p>
 </li>

<li id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-459F38EA-08E3-54E0-B761-51ED774DFCA9"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-459F38EA-08E3-54E0-B761-51ED774DFCA9"><!-- --></a><p> <strong>Animation</strong> —CRPs
are able to schedule their own reanimation within the Window Server. This
is managed by the Window Server animation scheduler and so provides more reliable
animation than can be achieved from the client-side alone. </p>
 </li>

</ul>

<p>CRPs are generally written by device creators for showing customized content
on the screen. For example, a CRP might be an SVG renderer, where the client
application provides data in the form of an SVG source file and the CRP decodes
and renders it. </p>

<p>Unlike animations created using <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CAnim</span></a>,
other drawing can appear above the CRP-based content within the same window. </p>

<div class="section" id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-01B7CC86-E06B-467E-B75B-ED5FCA1839C6"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-01B7CC86-E06B-467E-B75B-ED5FCA1839C6"><!-- --></a><h2 class="sectiontitle">Architecture</h2> <p>The following diagram shows how the
client application and the server-side CRP work together: </p>
 <div class="fignone" id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-DCD46D7C-575D-5F96-B9AF-118FEB6DA8DC"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-DCD46D7C-575D-5F96-B9AF-118FEB6DA8DC"><!-- --></a><span class="figcap">Figure 1.               Figure 1: Relationship of a client application and the
CRP            </span>

<img src="GUID-C8AD9E54-F93D-5E04-A958-95934D29180B_d0e249138_href.png"/>
</div>
 <dl>

<dt class="dlterm">Client UI application</dt>

<dd><p>This originates the draw request that drives the system to render the
result of a CRP to a given location of the screen. </p>
 </dd>



<dt class="dlterm">Server-side CRP</dt>

<dd><p>This runs in the Window Server process. It has the priorities and privileges
of the Window Server. </p>
 </dd>


</dl>
 <p>Prioritized scheduling and access to Window Server resources enable
CRPs to function more efficiently than if they were modeled in the client
UI application. </p>
 <p>The typical workflow in the client application is
as follows: </p>
 <a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-889BC31D-0085-521B-AF16-D78320B00D9C"><!-- --></a><ol id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-889BC31D-0085-521B-AF16-D78320B00D9C">
<li id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-5B5B06A5-9AFF-56DA-8A66-48CC6A74DA20"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-5B5B06A5-9AFF-56DA-8A66-48CC6A74DA20"><!-- --></a><p>Set up the necessary
CRPs by calling constructors. </p>
 </li>

<li id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-E499C0CC-709A-5D52-8A60-706FBB0B1F32"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-E499C0CC-709A-5D52-8A60-706FBB0B1F32"><!-- --></a><p>Set application-specific
values for the CRP by sending method calls from the client UI application
to the client-side CRP proxy (there is more information about this below). </p>
 </li>

<li id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-9F2D8783-9DAC-5C22-9AE6-789FA7B5D5FD"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-9F2D8783-9DAC-5C22-9AE6-789FA7B5D5FD"><!-- --></a><p>Call the <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWindowGc::DrawWsGraphic()</span></a> command. This initiates the drawing,
which is actually done by the <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphicDrawer::DoDraw()</span></a> method of the server-side CRP. </p>
 </li>

</ol>
 </div>

<div class="section" id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-ACE9A1E6-C9C5-49E3-B10A-72A6B1D8DCB4"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-ACE9A1E6-C9C5-49E3-B10A-72A6B1D8DCB4"><!-- --></a><h2 class="sectiontitle">Graphic Drawer library details</h2> <p>The following table
shows the DLLs that provide the server-side functionality. </p>
 
<div class="tablenoborder"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-E4F2FF7F-87D6-5F36-BDAF-74B16746B5E1"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-E4F2FF7F-87D6-5F36-BDAF-74B16746B5E1" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d1514553e171">DLL</th>

<th class="cellrowborder" valign="top" id="d1514553e174">LIB</th>

<th class="cellrowborder" valign="top" id="d1514553e177">Short description</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d1514553e171 "><p> <span class="filepath">wsgraphicdrawer_nga.dll </span>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1514553e174 "><p> <span class="filepath">wsgraphicdrawer.lib</span>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1514553e177 "><p>The server-side base classes for graphic drawers in the ScreenPlay
variant. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1514553e171 "><p> <span class="filepath">wsgraphicdrawer_nonnga.dll </span>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1514553e174 "><p> <span class="filepath">wsgraphicdrawer.lib</span>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1514553e177 "><p>The server-side base classes for graphic drawers in the non-ScreenPlay
variant. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>

<div class="section" id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-FBB7F0CA-045B-441D-B0D9-55543AFBEA57"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-FBB7F0CA-045B-441D-B0D9-55543AFBEA57"><!-- --></a><h2 class="sectiontitle">APIs</h2> <p> <strong>Variant</strong>: <a href="GUID-D93978BE-11A3-5CE3-B110-1DEAA5AD566C.html" title="This topic provides an introduction to ScreenPlay and its architecture. ScreenPlay is a new graphics architecture, introduced in Symbian^3 (S^3). ScreenPlay enables device creators to take advantage of improved software performance, hardware acceleration and third party graphics engines. ScreenPlay is sometimes known as the New Graphics Architecture (NGA).">ScreenPlay</a>. </p>
 <p>Assuming
the construction of objects has been done, the client UI application issues
a <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWindowGc::DrawWsGraphic()</span></a> call
each time it wants a CRP to be shown on the screen. For our SVG rendering
example, the UI application simply decides where on the screen the CRP is
to be shown. </p>
 <p>Any additional information (such as the location of the
SVG file) is handled by the client-side CRP proxy. This is a subclass of <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphic</span></a>.
You can pass application-specific data to the server-side CRP by implementing
the <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphic::SendMessage()</span></a> method.
When a client-side CRP invokes <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphic::SendMessage()</span></a>, the server-side CRP receives a <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphicDrawer::HandleMessage()</span></a> call. </p>
 <p>The client-side UI application uses the GDI interface to issue
draw commands. <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWindowGc::DrawWsGraphic()</span></a> can
be considered to be just another draw command. </p>
 <p>The server-side CRP
interface is defined by the <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphicDrawer</span></a> interface.
This cannot be extended. However, the <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphicDrawer::HandleMessage()</span></a> method that accepts a data buffer can be interpreted in an application-specific
manner by the server-side CRP author. </p>
 <p><strong>Summary </strong> </p>
 
<div class="tablenoborder"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-5418A2B7-B872-55FF-B0A3-A61E47D70997"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-5418A2B7-B872-55FF-B0A3-A61E47D70997" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d1514553e324">API</th>

<th class="cellrowborder" valign="top" id="d1514553e327">Description</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d1514553e324 "><p> <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphicDrawer</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1514553e327 "><p>The abstract base class for the server-side graphic drawer. Each
CRP has a concrete implementation of this class. The most important function
is <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphicDrawer::DoDraw(MWsGc,
TRect)</span></a>, which issues the drawing commands. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1514553e324 "><p> <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">MWsGc</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1514553e327 "><p>This is provided to the graphic drawer in the <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphicDrawer::DoDraw(MWsGc,
TRect)</span></a> function. There main things to note about this interface: </p>
 <ul>
<li id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-7C8FF1A8-D0E7-55CE-A7D2-9D26BAE9884F"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-7C8FF1A8-D0E7-55CE-A7D2-9D26BAE9884F"><!-- --></a><p>Because it is derived
from <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">MWsObjectProvider</span></a>,
it provides the <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">MWsObjectProvider::ResolveObjectInterface()</span></a> function. The CRP can call this to obtain a concrete implementation of the <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">MWsGraphicsContext</span></a> interface
against which to issue draw operations. </p>
 </li>

<li id="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-B60F4FE8-E982-56B0-8403-9C724B0AC33C"><a name="GUID-A40C75A2-59FF-5472-B279-8B5FBFF68794__GUID-B60F4FE8-E982-56B0-8403-9C724B0AC33C"><!-- --></a><p>It provides the <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">MWsGc::ScheduleAnimation()</span></a> function,
which as its name suggests enables the CRP to schedule animations. During
drawing, the CRP can ask to be drawn again after a specified time period. </p>
 </li>

</ul>
 <p>CRPs do not need to hold onto a handle to a graphic context, because
they are passed one every time they are required to draw. This means that
other parts of the Window Server (specifically render stages) can safely redirect
drawing without any concern that CRPs hold invalid graphics contexts. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1514553e324 "><p> <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">CWsGraphic</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1514553e327 "><p>This is the abstract base class for the client-side proxy. This
serves a function similar to <a href="GUID-213DF770-58AE-3176-93E8-8D72E516AE45.html"><span class="apiname">RAnim</span></a>,
enabling the client to control the CRP's state remotely. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html" title="This section describes the generic Window Server plug-in framework and is mainly aimed at system integrators, UI platform providers and device and hardware manufacturers.">Window Server Plug-in Framework</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html" title="This section describes the generic Window Server plug-in framework and is mainly aimed at system integrators, UI platform providers and device and hardware manufacturers.">Window Server
Plug-in                 Framework</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>