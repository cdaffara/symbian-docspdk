<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Using the Domain Name Resolution Tutorial"/>
<meta name="abstract" content="This topic describes how to use the domain name resolution."/>
<meta name="description" content="This topic describes how to use the domain name resolution."/>
<meta name="DC.Relation" scheme="URI" content="GUID-3A14EB6E-2F28-51F6-9D80-1AFCFFBDDF9D.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B144EAB9-53AB-579B-9E12-B16518E4FC01.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-82438A0F-819C-5CDC-81DC-A8BFE3AA4A6A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7821C498-70A2-5D3C-989A-58CEBAE9162B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3A14EB6E-2F28-51F6-9D80-1AFCFFBDDF9D.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Using the Domain Name Resolution Tutorial</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E"><a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2398162 id2398330 id2398339 id2398382 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-B144EAB9-53AB-579B-9E12-B16518E4FC01.html" title="Networking Services provides a standard framework for accessing network services and actual implementations of network protocols. The components of the Networking Services are closely related to the framework provided by the Communications Framework module.">Networking Services Guide</a> &gt; <a href="GUID-82438A0F-819C-5CDC-81DC-A8BFE3AA4A6A.html" title="This collection is a set of plugins to the Sockets Server. The plugins implement network protocols. The network protcocols can be accessed through a sockets type interface.">Network Protocols</a> &gt; <a href="GUID-7821C498-70A2-5D3C-989A-58CEBAE9162B.html" title="The TCP/IP component provides an IPv4 and IPv6 protocol plug-in for the Sockets Server.">TCP/IP</a> &gt; <a href="GUID-3A14EB6E-2F28-51F6-9D80-1AFCFFBDDF9D.html" title="This section describes how to use TCP/IP sockets.">Tutorials</a> &gt; </div>
<h1 class="topictitle1"> Using the Domain Name Resolution Tutorial</h1>
<div><p>This topic describes how to use the domain name resolution. </p>
<div class="section" id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-7532AA62-7F2E-5366-870F-19679078A49D"><a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-7532AA62-7F2E-5366-870F-19679078A49D"><!-- --></a><h2 class="sectiontitle">Required background</h2> <p>You must be familiar with <samp class="codeph">RHostResolver()</samp> to understand this tutorial. The <samp class="codeph">RHostResolver()</samp> function is defined in <span class="filepath">es_sock.h</span>. Types and constants specific to TCP/IP are used in <samp class="codeph">RHostResolver()</samp> arguments are defined in <span class="filepath">in_sock.h</span>. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Introduction</h2> <p>The TCP/IP stack contains a Domain Name Service (DNS). The client programs conducts DNS queries through the generic host name resolution interface <samp class="codeph">RHostResolver</samp>, specifying protocol-specific behaviour through the argument values. This tutorial describes how the <samp class="codeph">RHostResolver()</samp> functions are used for DNS. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Procedure</h2> <a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-9B54766B-150D-5C97-A8CE-DDD3FE6905DD"><!-- --></a><ol id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-9B54766B-150D-5C97-A8CE-DDD3FE6905DD"><li id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-F8AA8622-612A-5E54-A1ED-42148F42CC10"><a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-F8AA8622-612A-5E54-A1ED-42148F42CC10"><!-- --></a><p>The <samp class="codeph">RHostResolver::Open()</samp> function starts the DNS access. </p>
 <p>The parameter values are as follows: </p>
 <div class="p">
<div class="tablenoborder"><a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-103482B4-11F7-5F14-9408-194BDA258A75"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-103482B4-11F7-5F14-9408-194BDA258A75" frame="border" border="1" rules="all"><tbody><tr><td class="cellrowborder" valign="top"><p> <strong>Parameter</strong> </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <strong>Description</strong> </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top"><p> <samp class="codeph">addrFamily</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>Always <samp class="codeph">KAfInet</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top"><p> <samp class="codeph">aProtocol</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>Always <samp class="codeph">KProtocolInetUdp</samp>  </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </div>
 </li>
 <li id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-97330842-8FAE-50FA-8CDA-2B51C29E2309"><a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-97330842-8FAE-50FA-8CDA-2B51C29E2309"><!-- --></a><p>The <samp class="codeph">RHostResolver::Close()</samp> function closes the DNS access. </p>
 </li>
 </ol>
  </div>
 <div class="example"><h2 class="sectiontitle">DNS Query example</h2> <p>When a query is made, the protocol takes the following sequence of actions: </p>
 <ul><li id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-E9AF9E05-3F92-535E-B855-C122CEA67F8B"><a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-E9AF9E05-3F92-535E-B855-C122CEA67F8B"><!-- --></a><p>Searches the local HOSTS file, if it exists. The <span class="filepath">hosts</span> file is stored in the <span class="filepath">\private\10000882\</span> directory. </p>
 </li>
 <li id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-086E42EC-E68B-56D7-98C0-9DFDF743FD51"><a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-086E42EC-E68B-56D7-98C0-9DFDF743FD51"><!-- --></a><p>If an answer is not found, it checks the DNS cache. The protocol queries the DNS server using a UDP socket. If there is no current connection, a dial-up connection is called. </p>
 </li>
 <li id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-1822F3AD-53ED-5CA2-A2CE-6E8BB9CFBECC"><a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-1822F3AD-53ED-5CA2-A2CE-6E8BB9CFBECC"><!-- --></a><p>If an answer is found, the answer is added to the cache. </p>
 </li>
 </ul>
 <p> <strong>Note:</strong> The cache entries are held continuously while the client <samp class="codeph">RHostResolver</samp> object is open, for TTL 0 records. The client queries the <samp class="codeph">RHostResolver</samp> object to get the latest records. </p>
 <p> <strong>Note:</strong> The DNS server used is managed by PPP to establish a dial-up connection, or configured by the user in ISP settings. </p>
 <p>The <a href="GUID-B16CAD6D-85B1-3482-AAC0-9BADEDB6ABDD.html#GUID-B16CAD6D-85B1-3482-AAC0-9BADEDB6ABDD__GUID-37A2B030-8FDE-372C-938D-FD3D26370BDC"><span class="apiname">RHostResolver::GetByName()</span></a> or <a href="GUID-B16CAD6D-85B1-3482-AAC0-9BADEDB6ABDD.html#GUID-B16CAD6D-85B1-3482-AAC0-9BADEDB6ABDD__GUID-B210BAF2-1D26-3F5A-8EBE-EF5B460A69E1"><span class="apiname">RHostResolver::GetByAddress()</span></a> can be called asynchronously, so that the application can select the program and the data when it is required. For more information see Next Result. </p>
 <p><strong>Resolve name</strong> </p>
 <p>Use <samp class="codeph">RHostResolver::GetByName()</samp> to resolve a symbolic name to an IP address. The parameters are as follows: </p>
 
<div class="tablenoborder"><a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-4541EEBA-39CB-58BB-98BF-86B8BD885DA1"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-4541EEBA-39CB-58BB-98BF-86B8BD885DA1" frame="border" border="1" rules="all"><tbody><tr><td class="cellrowborder" valign="top"><p> <strong>Parameter</strong> </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <strong>Description</strong> </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top"><p> <samp class="codeph">aName</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>The symbolic name to resolve. </p>
 <p> <strong>Note:</strong> If you pass the local host name or a null descriptor the result is the address of the network interface. The <samp class="codeph">RHostResolver::GetHostName()</samp> returns the local host name. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top"><p> <samp class="codeph">aResult</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>Returns the result of the name resolution. Unpack the <samp class="codeph">TNameEntry</samp> to get a <samp class="codeph">TNameRecord</samp> with the following members: </p>
 <p> <samp class="codeph">iName</samp>: the value of the passed <samp class="codeph">aName</samp>  </p>
 <p> <samp class="codeph">iAddr</samp>: the address information. Assign the <samp class="codeph">iAddr</samp> to <samp class="codeph">TInetAddr</samp> to get the IP address. </p>
 <p> <samp class="codeph">iFlags</samp>: a bitmask of <samp class="codeph">TNameRecordFlags</samp> flags. </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p><strong>Get name</strong> </p>
 <p>Use <samp class="codeph">RHostResolver::GetByAddress()</samp> to get an IP address from a symbolic name. The parameters are as follows: </p>
 
<div class="tablenoborder"><a name="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-DED037D9-5BB7-595C-907B-144FF98FC8B9"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-95C166C3-2A25-55FB-88BD-62B7EFED2F8E__GUID-DED037D9-5BB7-595C-907B-144FF98FC8B9" frame="border" border="1" rules="all"><tbody><tr><td class="cellrowborder" valign="top"><p> <strong>Parameter</strong> </p>
 </td>
 <td class="cellrowborder" valign="top"><p> <strong>Description</strong> </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top"><p> <samp class="codeph">anAddr</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>A <samp class="codeph">TInetAddr</samp> specifies the IP address to use. </p>
 <p> <strong>Note:</strong> If you pass a null address or an address that matches the primary network interface, the local host name is returned. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top"><p> <samp class="codeph">aResult</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>Returns the result of the name resolution. Unpack the <samp class="codeph">TNameEntry</samp> to get a <samp class="codeph">TNameRecord</samp> with the following members: </p>
 <p> <samp class="codeph">iName</samp>: the symbolic name </p>
 <p> <samp class="codeph">iAddr</samp>: the value of the passed <samp class="codeph">anAddr</samp> </p>
 <p> <samp class="codeph">iFlags</samp>: a bitmask of <samp class="codeph">TNameRecordFlags</samp> flags. </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p><strong>Next result</strong> </p>
 <p>The <samp class="codeph">Next()</samp> function finds more answers after an initial <samp class="codeph">GetByName()</samp> or <samp class="codeph">GetByAddress()</samp> query. </p>
 <p>For <samp class="codeph">GetByName()</samp>, the matching A record (IP address) is returned first. Calls to <samp class="codeph">Next()</samp> return any further CNAME (alias) or A records. CNAME records have the IP address set to 0 and the <samp class="codeph">EDnsAlias</samp> flag set. </p>
 <p>For <samp class="codeph">GetByAddress()</samp>, the first matching PTR record (domain name) is returned first. Calls to <samp class="codeph">Next()</samp> return any further PTR records. </p>
 <p> <strong> Note:</strong>  <samp class="codeph">The Next()</samp> can be called synchronously, because all information is retrieved from a local buffer that was written by the initial query. </p>
 <p><strong>Local host</strong> </p>
 <p> <samp class="codeph">RHostResolver::GetHostName()</samp> and <samp class="codeph">RHostResolver::SetHostName()</samp> get and set the name of the local host. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-3A14EB6E-2F28-51F6-9D80-1AFCFFBDDF9D.html" title="This section describes how to use TCP/IP sockets.">Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>