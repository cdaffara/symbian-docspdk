<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Alarm Sound Play Control"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E6788741-EF34-57B7-B4D4-8AAC21B25774.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1FB321DE-4A02-5468-9AF1-F3786EB678CF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CFE3A216-E637-51C1-B258-2ADF4E0F4150.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E6788741-EF34-57B7-B4D4-8AAC21B25774.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-A5F65344-BE05-5295-85BB-E8114505FB82"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Alarm Sound Play Control</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2520040 id2380129 id2380138 id2380152 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html">Generic Application Support Guide</a> &gt; <a href="GUID-1FB321DE-4A02-5468-9AF1-F3786EB678CF.html">Common Application Services</a> &gt; <a href="GUID-CFE3A216-E637-51C1-B258-2ADF4E0F4150.html">Alarm Server</a> &gt; <a href="GUID-E6788741-EF34-57B7-B4D4-8AAC21B25774.html" title="This section provides a summary of related concepts and functionality of Alarm Server such as different states and types of alarms, sound control, alarm play interval, and alarm time changes as per system time changes.">Alarm Server Concepts</a> &gt; </div>
<h1 class="topictitle1">Alarm
Sound Play Control</h1>
<div>
<p>This section explains the use of sound, which is one of the several ways
that the Alarm Server can notify the user. </p>

<div class="section"><h2 class="sectiontitle">Alarm Play Interval Configuration</h2> <p>The alarm sound
play definition (<a href="GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html"><span class="apiname">TASCliSoundPlayDefinition</span></a>) is set using
the <a href="GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html"><span class="apiname">RASCliSession</span></a> class. Alarm sounds are played according
to intervals that consist of a duration and an offset. The <a href="GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html"><span class="apiname">TASCliSoundPlayDefinition</span></a> class
defines when alarm sounds are to be played, and for how long. </p>
 <p>The
purpose of configuring alarm sound play is to enable the Alarm Server to perform
the following operations: </p>
 <ul>
<li id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-954909FC-2690-50A6-A967-AB4E3C97A319"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-954909FC-2690-50A6-A967-AB4E3C97A319"><!-- --></a><p>set the alarm sound
state to ON or OFF (<a href="GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4__GUID-EE45EA45-0289-3946-ACB8-25971D32FDC7"><span class="apiname">RASCliSession::SetAlarmSoundState()</span></a>). </p>
 </li>

<li id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-B8D77E1F-0F9C-5AA2-8269-68A04CD73525"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-B8D77E1F-0F9C-5AA2-8269-68A04CD73525"><!-- --></a><p>silence all alarms until
a specific time (<a href="GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4__GUID-C15F814F-AFB6-3FE4-8674-B961A1EFA6F2"><span class="apiname">RASCliSession::SetAlarmSoundsSilentUntil()</span></a>).
No sound is played for any alarm that is notified before this time. </p>
 </li>

<li id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-7359767C-FFC6-5903-B4C1-099C55EB0C3E"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-7359767C-FFC6-5903-B4C1-099C55EB0C3E"><!-- --></a><p>silence all alarms for
a specified interval (<a href="GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4__GUID-D86F97E4-3407-32C9-ADBA-0FD44D5A3ED3"><span class="apiname">RASCliSession::SetAlarmSoundsSilentFor()</span></a>).
No alarm sound is played for any alarm notified during this period. </p>
 </li>

<li id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-79917BFC-C399-5FCB-A1B3-9E3CA16250F7"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-79917BFC-C399-5FCB-A1B3-9E3CA16250F7"><!-- --></a><p>cancel the silent period,
turning the alarm sounds ON (<a href="GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4__GUID-92A4C2FD-46B9-36CA-A624-002EEFA9671C"><span class="apiname">RASCliSession::CancelAlarmSilence()</span></a>). </p>
 </li>

<li id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-D701C819-91AC-55F6-8A2B-99A3B95BB22D"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-D701C819-91AC-55F6-8A2B-99A3B95BB22D"><!-- --></a><p>configure alarm sound
play intervals (<a href="GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4__GUID-BB9A298E-C3AE-3E98-A677-E7A028F67602"><span class="apiname">RASCliSession::SetAlarmPlayIntervalsL()</span></a>),
which specify the duration of the ‘play/silence/play’ when an alarm expires. </p>
 </li>

<li id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-4FCCE100-C356-5F22-8300-C4BFD6A64F0B"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-4FCCE100-C356-5F22-8300-C4BFD6A64F0B"><!-- --></a><p>determine whether the
alarm server has temporarily silenced the sounds (<a href="GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4.html#GUID-3598EAEE-0EF4-35A2-89E5-F3B2555B1AB4__GUID-EB8DC5EB-ABA9-3AB9-9D1B-E37DA612C0BB"><span class="apiname">RASCliSession::AlarmSoundsTemporarilySilenced()</span></a>).
This returns <a href="GUID-781E8158-805B-3784-8FED-D7A191822FC3.html"><span class="apiname">ETrue</span></a> if alarm sound playing is temporarily
silenced, else <a href="GUID-A759CA2D-8327-348F-9337-4886E619D920.html"><span class="apiname">EFalse</span></a> is specified. </p>
 </li>

</ul>
 <p> <strong>NOTE</strong>: These APIs can be used <em>only</em> if the alarm sound
play control is enabled from the Alarm Server side. </p>
 <p>To perform these
operations, the Alarm Server uses a resource file, which defines the sound
play intervals and durations. </p>
 <p><strong>Resource File</strong> </p>
 <p>The alarm
play intervals are defined in <samp class="codeph">AlarmServer.rss</samp> resource file.
The compiled resource file (configuration file) must be named as <samp class="codeph">alarmserver.rsc</samp> and
be placed in the Alarm Server’s private directory (<samp class="codeph">C:\private\101F5027</samp> on
emulator, or <samp class="codeph">Z:\private\101F5027</samp> on target platforms). </p>
 <p>The
resource file must start with the necessary include directives, resource name,
and standard signature entry as illustrated in the following code fragment: </p>
 <pre class="codeblock" id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-A6885AA2-38C0-54BA-8765-9B10A20B0478"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-A6885AA2-38C0-54BA-8765-9B10A20B0478"><!-- --></a>#include &lt;badef.rh&gt;
#include &lt;alarmserver.rh&gt;

NAME ASRV
RESOURCE BA_RSS_SIGNATURE
    {
    signature = 1;
    }</pre>
 <p>The resource file specifies only the Offset (in minutes)
and Duration (in seconds) of the Alarm play intervals. It is used only for
initial configuration. </p>
 <p>At runtime, Alarm Server configurations are
backed up to a file called as <span class="filepath">AlarmServer.ini</span>, on the
PC side. The backup operation performed can be one of the following types: </p>
 <ul>
<li id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-46E046BC-44CB-5B8C-90DD-4E022F258145"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-46E046BC-44CB-5B8C-90DD-4E022F258145"><!-- --></a><p> <strong>Secure Backup</strong> -
In this method, <samp class="codeph">backuprestorenotification.lib</samp> (provides a
notification mechanism) is used for backing and restoring operation to and
from <samp class="codeph">C:\private\101F5027\AlarmServer.ini</samp>. </p>
 </li>

<li id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-B17FCD6F-500A-5D49-9FC2-389B7F41E810"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-B17FCD6F-500A-5D49-9FC2-389B7F41E810"><!-- --></a><p> <strong>Passive Backup</strong> -
In this method, the required backup behavior is mentioned in a backup registration
file called <span class="filepath">backup_registration.xml</span>, placed in its private
directory. The list of private directories and files that must be backed up
are mentioned in this backup registration file. </p>
 </li>

</ul>
 <p> <strong>NOTE</strong>: The backup file takes precedence over the resource
file the next time the Alarm Server is started. Therefore, if changes are
made to the resource file, <span class="filepath">AlarmServer.ini</span> must be deleted
manually before restarting the Alarm Server. </p>
 <p><strong>Alarm Sound Play Intervals
and Durations</strong> </p>
 <p>The following diagram illustrates the alarm sound
play intervals: </p>
 <div class="fignone" id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-477088D0-57BD-58BF-91BC-BF05E3EF2162"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-477088D0-57BD-58BF-91BC-BF05E3EF2162"><!-- --></a><span class="figcap">Figure 1.                  ALARM SOUND PLAY INTERVALS               </span>

<img src="GUID-3E23788D-4D67-5E9B-961F-B67D7471BB71_d0e177046_href.png"/>
</div>
 <p>Alarm play intervals define the toggling of alarm sound playing/stopping
and alarm dialog show/hide when an alarm expires. It consists of a duration
and an offset. The offset is the time, in minutes, from the beginning alarm
time or the end of the last snooze. The duration is the time period, in seconds,
during which the alarm sound is played. </p>
 <p>At each offset, the Alarm
Server makes a request to the Alarm Alert server to display the alarm dialog
and play the alarm sound. At the end of each duration period, the Alarm Server
makes a request to the Alarm Alert server to hide the alarm and stop playing
the alarm sound. </p>
 <p>The following is an example code fragment that plays
the sound for 30 seconds, then pauses for 30 seconds, and repeats the pattern
two more times: </p>
 <pre class="codeblock" id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-7ECBB50D-0C81-5059-A334-81BC979A04B2"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-7ECBB50D-0C81-5059-A334-81BC979A04B2"><!-- --></a>RESOURCE sound_controller
    {
    intervals =
        {
        SOUND_INTERVAL { offset = 0; duration = 30; },
        SOUND_INTERVAL { offset = 1; duration = 30; },
        SOUND_INTERVAL { offset = 2; duration = 30; };
        };
    }</pre>
 <p>An interval must have an offset of zero if more than
one offset is specified. </p>
 <p> <strong>NOTE</strong>: The <a href="GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html"><span class="apiname">TASCliSoundPlayDefinition</span></a> class
is the runtime equivalent of the sound intervals array. It defines <a href="GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html#GUID-0075C5BA-8084-33EB-A246-7EED717E2B88__GUID-79792213-24E6-3862-BEF5-832F8C34BF5A"><span class="apiname">TASCliSoundPlayDefinition::Offset()</span></a> length
in minutes and defines <a href="GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html#GUID-0075C5BA-8084-33EB-A246-7EED717E2B88__GUID-1900BA63-48B2-32A6-93DB-F77CC7AA3E39"><span class="apiname">TASCliSoundPlayDefinition::Duration()</span></a> length
in seconds. The API to set a <a href="GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html"><span class="apiname">TASCliSoundPlayDefinition</span></a> array
is <a href="GUID-0075C5BA-8084-33EB-A246-7EED717E2B88.html#GUID-0075C5BA-8084-33EB-A246-7EED717E2B88__GUID-AB1E72B5-D9CE-3BAD-860D-6C1F443442E8"><span class="apiname">TASCliSoundPlayDefinition::SetAlarmPlayIntervalsL()</span></a>. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Alarm Play Sequence Repeat Option</h2> <p>The resource
file provides an option to repeat the sequence when the end of the alarm play
sequence is reached. </p>
 <p>For backward compatibility, the default behavior
is to restart the sequence when the end of the alarm play sequence is reached
(see <a href="GUID-0056DE57-61FD-3452-B65B-EFADC0069B8F.html"><span class="apiname">EAlarmSoundRepeatSettingStop</span></a>). This occurs if there
is no resource file, or if the resource file does not specify an option. There
are two more end-of-sequence options: </p>
 <ul>
<li id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-73A1D734-2938-5477-81F7-B17F5237C374"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-73A1D734-2938-5477-81F7-B17F5237C374"><!-- --></a><p> <a href="GUID-41015640-AD70-3D56-9D89-AFAF67E15BCA.html"><span class="apiname">EAlarmSoundRepeatSettingLoop</span></a> -
stop when the end of sequence reached. </p>
 </li>

<li id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-F531E88D-AAD6-5F8D-9CDE-B153467D4DB1"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-F531E88D-AAD6-5F8D-9CDE-B153467D4DB1"><!-- --></a><p> <a href="GUID-98CE95CB-96F7-37A5-8C49-0B11D7CAEE6B.html"><span class="apiname">EAlarmSoundRepeatSettingRepeatLast</span></a> -
repeat last interval indefinitely. This is an optional entry in the resource
file. </p>
 </li>

</ul>
 <p>The following is a resource file example illustrating the use of
an option to repeat the alarm play sequence: </p>
 <pre class="codeblock" id="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-07ADF881-C2CE-558A-9237-2BF0E4E28064"><a name="GUID-A5F65344-BE05-5295-85BB-E8114505FB82__GUID-07ADF881-C2CE-558A-9237-2BF0E4E28064"><!-- --></a>RESOURCE sound_controller
    {
    option = EAlarmSoundRepeatSettingRepeatLast;
    intervals = 
        {
         ...
        }
    }</pre>
 </div>

<div class="section"><h2 class="sectiontitle">See also</h2> <p><a href="GUID-59D2B677-63D7-5FE7-98F4-549D9C235E56.html">Playing
Alarm Sound Continuously</a> </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-E6788741-EF34-57B7-B4D4-8AAC21B25774.html" title="This section provides a summary of related concepts and functionality of Alarm Server such as different states and types of alarms, sound control, alarm play interval, and alarm time changes as per system time changes.">Alarm Server Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>