<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="MFlowHook"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-1FED6DB6-237F-353D-9F3D-ADBCD56397C3"/>

<title>MFlowHook</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-1FED6DB6-237F-353D-9F3D-ADBCD56397C3"><a name="GUID-1FED6DB6-237F-353D-9F3D-ADBCD56397C3"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2578593 id2472810 id2408823 id2408865 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">MFlowHook Class Reference</h1>
	<table class="signature"><tr><td>class MFlowHook : public MInetBase</td></tr></table><div class="section"><div>
			<p>Abstract base class for flow hooks.</p>

			<p>Flow hook providers implement this class. They register the hook using <a href="GUID-43799E3E-A0D3-3CEF-B925-892960FA1251.html#GUID-21EA8012-0E99-33C6-AF1E-9ABC3E2AB727">MIp6Hook::BindFlowHook()</a>, and return an instance from <a href="GUID-43799E3E-A0D3-3CEF-B925-892960FA1251.html#GUID-F0ECEF5A-2890-3C4A-8D9C-742F3FE10BA5">MIp6Hook::OpenL()</a>.</p>

			<div class="p">
				<div class="note"><span class="notetitle">Note:</span> 
					<p>The same instance of <a href="GUID-1FED6DB6-237F-353D-9F3D-ADBCD56397C3.html#GUID-1FED6DB6-237F-353D-9F3D-ADBCD56397C3">MFlowHook</a> can be returned for multiple flows, if the logic of the hook does not require unique instance for each flow.</p>

				</div>
The object can be implemented as reference counted object: last reference removed by Close deletes the object.</div>

			<div class="p">
				<dl class="since">
					
						<dt class="dlterm">Since</dt>

						<dd>v7.0  </dd>

					
				</dl>
Example:  <pre class="codeblock"/>
 </div>

		</div></div>
<div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">MFlowHook<ul class="derivation"><li class="derivation-depth-1 "><a href="GUID-8A1D0670-9BB0-3864-B29D-2E6C5E377433.html">MInetBase</a></li></ul></li></ul></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-81945C07-C847-3685-8C5C-460A2C92BAF8">ApplyL</a>(<a href="GUID-6F101800-0516-3BA8-B7E0-7BD7058787E7.html">RMBufSendPacket</a> &amp;, <a href="GUID-B0F9F6A7-6D70-3B70-9981-46516281FCA9.html">RMBufSendInfo</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-CBDBB280-3E06-32A1-AE25-EC194587AE3F">Close</a>()</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-655C2D70-3F16-38DC-B98D-4E3166866FA7">Open</a>()</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-A6D6D94C-F58B-38A3-9CD8-73AA18252D54">ReadyL</a>(<a href="GUID-6352AE33-00D6-33F1-9549-47690D3ED64E.html">TPacketHead</a> &amp;)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-8A1D0670-9BB0-3864-B29D-2E6C5E377433.html">MInetBase::GetApiL(const TDesC8 &amp;,TUint *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8A1D0670-9BB0-3864-B29D-2E6C5E377433.html">MInetBase::GetApiL(const TDesC8 &amp;,TUint)</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-81945C07-C847-3685-8C5C-460A2C92BAF8"><a name="GUID-81945C07-C847-3685-8C5C-460A2C92BAF8"><!-- --></a>
		<h2 class="topictitle2">ApplyL(RMBufSendPacket &amp;, RMBufSendInfo &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>ApplyL</td><td>(</td><td><a href="GUID-6F101800-0516-3BA8-B7E0-7BD7058787E7.html">RMBufSendPacket</a> &amp;</td><td>aPacket,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-B0F9F6A7-6D70-3B70-9981-46516281FCA9.html">RMBufSendInfo</a> &amp;</td><td>aInfo</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Apply send transformations.</p>

				<p>The ApplyL is called by IP protocol for outbound packet. The aPacket is in "unpacked" state (<a href="GUID-D8E8227B-7D80-3622-889D-3101C0856915.html#GUID-BB227DC4-4DF0-3862-9A2A-E961656CCB82">RMBufPacketBase::Unpack</a>).</p>

				<div class="p">
					<dl class="exception">
						
							<dt class="dlterm">Exceptions</dt>

							<dd>
								<table cellpadding="4" cellspacing="0" summary="" border="0" class="simpletableborder"><tr>
										<td valign="top">if</td>

										<td valign="top">
											<p>ApplyL leaves, the packet is dropped.</p>

										</td>

									</tr>
</table>

							</dd>

						
					</dl>
Example:  <pre class="codeblock"/>
 </div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-6F101800-0516-3BA8-B7E0-7BD7058787E7.html">RMBufSendPacket</a> &amp; aPacket</td><td>a complete packet to be processed (if needed) by the hook. The packet includes the IP header.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-B0F9F6A7-6D70-3B70-9981-46516281FCA9.html">RMBufSendInfo</a> &amp; aInfo</td><td>information block associated with the packet (a hook must not break this association!)  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-CBDBB280-3E06-32A1-AE25-EC194587AE3F"><a name="GUID-CBDBB280-3E06-32A1-AE25-EC194587AE3F"><!-- --></a>
		<h2 class="topictitle2">Close()</h2>
		<table class="signature"><tr><td>void</td><td>Close</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Decrement references and destroy if last.</p>

				<div class="p">Example:  <pre class="codeblock"/>
 </div>

			</div></div>

	</div>
<div class="nested1" id="GUID-655C2D70-3F16-38DC-B98D-4E3166866FA7"><a name="GUID-655C2D70-3F16-38DC-B98D-4E3166866FA7"><!-- --></a>
		<h2 class="topictitle2">Open()</h2>
		<table class="signature"><tr><td>void</td><td>Open</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Increment reference count.</p>

				<p>The Open and Close functions must implement a reference counting system. The Close function must destroy the current instance, when the last reference is removed.</p>

				<p>Non-NULL return from <a href="GUID-43799E3E-A0D3-3CEF-B925-892960FA1251.html#GUID-F0ECEF5A-2890-3C4A-8D9C-742F3FE10BA5">MIp6Hook::OpenL()</a> counts as one reference, and the stack is guaranteed to call the matching Close exactly once.</p>

				<p>If a hook creates a new instance for each flow at OpenL, it can leave the reference count as initial ZERO, if it implements a Close, which deletes the object when the count goes negative.</p>

				<p>If a hook returns an existing instance at OpenL, it must increment the reference count by one.</p>

				<div class="p">Example:  <pre class="codeblock"/>
 </div>

			</div></div>

	</div>
<div class="nested1" id="GUID-A6D6D94C-F58B-38A3-9CD8-73AA18252D54"><a name="GUID-A6D6D94C-F58B-38A3-9CD8-73AA18252D54"><!-- --></a>
		<h2 class="topictitle2">ReadyL(TPacketHead &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>ReadyL</td><td>(</td><td><a href="GUID-6352AE33-00D6-33F1-9549-47690D3ED64E.html">TPacketHead</a> &amp;</td><td>aHead</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>On an interface connecting, asks the hook if a flow is ready.</p>

				<p>The ReadyL calls propagate interface ready state up the flow. The calls to hooks are made in reverse order; the closest to interface is called first. The call informs this hook that everything is ready from this hook to the interface. Now it this hooks turn to check the ready state of the flow.</p>

				<div class="p">
					<dl class="exception">
						
							<dt class="dlterm">Exceptions</dt>

							<dd>
								<table cellpadding="4" cellspacing="0" summary="" border="0" class="simpletableborder"><tr>
										<td valign="top">If</td>

										<td valign="top">
											<p>the ReadyL leaves, the leave status will become the flow status (the leave status must be negative, or KErrGeneral is substituted for it)</p>

										</td>

									</tr>
</table>

							</dd>

						
					</dl>
Example:  <pre class="codeblock"/>
 </div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-6352AE33-00D6-33F1-9549-47690D3ED64E.html">TPacketHead</a> &amp; aHead</td><td>Address information of the flow.  </td></tr></table></div>

	</div>

	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>