<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Window Server Client-Side Library Overview"/>
<meta name="abstract" content="The Window Server keeps track of window sizes, positions, visibility and validity (keeping window content up to date). It also receives and distributes user input in the form of key presses and pointer events."/>
<meta name="description" content="The Window Server keeps track of window sizes, positions, visibility and validity (keeping window content up to date). It also receives and distributes user input in the form of key presses and pointer events."/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Window Server Client-Side Library Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F"><a name="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2384499 id2384574 id2384588 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" title="The Windowing collection contains two components—the Window Server, which manages the use of the screen by applications, and the Window Server Plugins component.">Windowing Collection</a> &gt; <a href="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" title="The Window Server component manages the use of the screen by applications and handles key and pointer events.">Window Server Component</a> &gt; <a href="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html" title="The Window Server client-side library provides client applications with access to the screen and input devices.">Window Server Client-Side Library</a> &gt; </div>
<h1 class="topictitle1">Window Server Client-Side Library Overview</h1>
<div><p>The Window Server keeps track of window sizes, positions,
visibility and validity (keeping window content up to date). It also
receives and distributes user input in the form of key presses and
pointer events. </p>

<p>Note that much of the Window Server API is low-level and is encapsulated
in the UI Control Framework API. </p>

<div class="section" id="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-E1891417-0C8F-46FE-BC4D-23C1E1BB750E"><a name="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-E1891417-0C8F-46FE-BC4D-23C1E1BB750E"><!-- --></a><h2 class="sectiontitle">Window
Server client-side library details</h2> <p>The following table
shows the DLLs that provides the functionality and the library to
which your code must link. </p>
 
<div class="tablenoborder"><a name="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-D5750916-4A95-5944-9ADB-05E35D47592B"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-D5750916-4A95-5944-9ADB-05E35D47592B" frame="border" border="1" rules="all">

<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d99896e35">DLL</th>

<th class="cellrowborder" valign="top" id="d99896e38">LIB</th>

<th class="cellrowborder" valign="top" id="d99896e41">Short description</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d99896e35 "><p> <span class="filepath">ws32_nga.dll</span>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e38 "><p> <span class="filepath">ws32.lib</span>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e41 "><p>The Window Server client-side library for the <a href="GUID-D93978BE-11A3-5CE3-B110-1DEAA5AD566C.html" title="This topic provides an introduction to ScreenPlay and its architecture. ScreenPlay is a new graphics architecture, introduced in Symbian^3 (S^3). ScreenPlay enables device creators to take advantage of improved software performance, hardware acceleration and third party graphics engines. ScreenPlay is sometimes known as the New Graphics Architecture (NGA).">ScreenPlay</a> variant. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d99896e35 "><p> <span class="filepath">ws32_nonnga.dll</span>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e38 "> <p> <span class="filepath">ws32.lib</span>  </p>
</td>

<td class="cellrowborder" valign="top" headers="d99896e41 "><p>The Window Server client-side library for the <a href="GUID-F64E6551-670E-5E12-8103-DE504D3EC94F.html" title="ScreenPlay provides improved support for graphics hardware acceleration and some other new features. However, it is possible to use the Symbian platform without enabling ScreenPlay. This is called the non-ScreenPlay variant (sometimes referred to as the non-NGA variant). This topic provides an introduction to the graphics architecture when ScreenPlay is not enabled.">non-ScreenPlay</a> variant. </p>
</td>

</tr>

</tbody>

</table>
</div>
 <p>The details of the client-side API are very similar in
the two variants. There are some additional features in the ScreenPlay
variant for displaying surfaces.</p>
 </div>

<div class="section" id="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-D5B8436F-D7AA-4A72-A967-FC2BB8D8EB0B"><a name="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-D5B8436F-D7AA-4A72-A967-FC2BB8D8EB0B"><!-- --></a><h2 class="sectiontitle">Architecture</h2> <p>The Window Server is used by all applications that have a user
interface. The primary user input for these applications comes from
the keyboard and pointer, and their primary user-visible output is
to the screen. These input and output devices are shared between all
applications on the system. Each client thread opens a session to
the server, and issues requests for service. </p>
 <div class="fignone" id="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-4EEE0DBF-A4DC-59A1-8310-504BF05204C7"><a name="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-4EEE0DBF-A4DC-59A1-8310-504BF05204C7"><!-- --></a><span class="figcap">Figure 1.               Window Server            </span>. <span class="figdesc"><p>The Window Server controls access by many client applications,
to the machine’s screen, keyboard and pointer. </p>
 </span>


<img src="GUID-FE4BBEB4-4E5A-5BF2-A72F-AF53BAD83518_d0e238474_href.png"/>
</div>
 <p>The Window Server thread runs at a higher priority than
any application; only the kernel runs at a higher priority. Therefore,
all applications' requests for screen updates, and all handling of
machine events such as pointers and keys, are handled at higher priority
than any individual application. </p>
 <p>Each client application runs
in its own thread. The Window Server presents an interface to client
applications such that they can run without direct interaction with
the other applications on the machine. Drawing is clipped to the visible
area of the application’s windows. Pointer events are only received
if they are related to the application’s windows. Similarly, keyboard
events are only given to an application whose window group has focus
or to one that has captured them. A client application may ignore
the majority of events relating to other applications. It won't even
be told about most of them. </p>
 <p>Each client application communicates
with the Window Server using a Window Server session, or other object
created from the session. The application waits to receive events
by setting up one or more active objects. Events include user input
and requests that windows be redrawn. Applications may create systems
of windows and draw to them. </p>
 </div>

<div class="section" id="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-A8BCF1C1-A637-4DDC-9249-BCEF4E23BA06"><a name="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-A8BCF1C1-A637-4DDC-9249-BCEF4E23BA06"><!-- --></a><h2 class="sectiontitle">Window
server client-side API</h2> <p>The following diagram shows the
key classes in the Window Server client-side library. Below the diagram
we provide a summary of the key concepts. </p>
 <div class="fignone" id="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-A84A2706-1AF0-598B-976E-0980AD69E6E7"><a name="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-A84A2706-1AF0-598B-976E-0980AD69E6E7"><!-- --></a><span class="figcap">Figure 2.              Window Server client-side API classes        
   </span>

<img src="GUID-FEFF353E-DE8A-5FBA-B696-CD01D06BE813_d0e238499_href.png"/>
</div>
 
<div class="tablenoborder"><a name="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-37EDAB58-6F7B-526A-8E46-891598924120"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-0A13A931-016C-5325-97AF-2DE0B210DF2F__GUID-37EDAB58-6F7B-526A-8E46-891598924120" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d99896e180">Concept</th>

<th class="cellrowborder" valign="top" id="d99896e183">Description</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d99896e180 "><p> <strong>Session</strong>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e183 "><p>A Window Server session allows an application to control
and interrogate its windows, the events it wishes to receive, and
all other window groups connected to the Window Server. A session
is encapsulated by <a href="GUID-643DDA78-C7A7-386D-AB3F-8710141DDDA9.html"><span class="apiname">RWsSession</span></a>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d99896e180 "><p> <strong>Events</strong>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e183 "><p>Applications function by waiting for events and handling
them. Common events are user input, and requests that windows be redrawn.
The Window Server session is used to request and obtain events. Most
events (such as key and point events) are encapsulated in <a href="GUID-5D0B1595-1AC7-3C44-AC6B-0EFB5EABCF31.html"><span class="apiname">TWsEvent</span></a>. </p>
 <p>A redraw event tells the application
what screen area needs redrawing. It is encapsulated in <a href="GUID-B5F16BF3-569D-3985-AAB7-439E3410468D.html"><span class="apiname">TWsRedrawEvent</span></a>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d99896e180 "><p> <strong>Window group</strong>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e183 "><p>A window group is special non-displayable type of window,
which can be considered as the root window of an application. Keyboard
events and focus are associated with it, and it can have a name, used
for such things as lists of running applications. A window group is
provided by <a href="GUID-64D4D428-D65F-3D9D-A0D4-C8338C848B25.html"><span class="apiname">RWindowGroup</span></a>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d99896e180 "><p> <strong>Drawable windows</strong>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e183 "><p>Drawable windows allow applications to draw to the screen.
They have operations to control size, position, visibility, scrolling,
z-order, and parent/child relationships. In a standard drawable window,
areas that become invalid (e.g. when an overlaying window is removed)
must be redrawn by the client application. It is provided by <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow</span></a>. </p>
 <p>A backed-up drawable window's content
is stored by the Window Server, and redrawn by the server when it
becomes invalid. It is provided by <a href="GUID-27A95595-F74D-32B2-A960-0CA290C8A3B3.html"><span class="apiname">RBackedUpWindow</span></a>. </p>
 <p>These window types are derived from a sequence of base
classes, <a href="GUID-9FFD28C7-8747-3438-84BF-44AF26ACEC7D.html"><span class="apiname">RWindowTreeNode</span></a>, <a href="GUID-1460DD8F-9AA1-3B99-8FFD-F309959CCA34.html"><span class="apiname">RWindowBase</span></a>, and <a href="GUID-FDF4BB7E-8750-3564-982A-0124A977C82E.html"><span class="apiname">RDrawableWindow</span></a>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d99896e180 "><p> <strong>Graphics</strong>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e183 "><p>Applications draw to drawable windows through a windows
graphics context provided by a windows graphics device. These implement
the abstract graphics context and graphics device interfaces respectively,
as defined in the Graphics API. </p>
 <p>The windows graphics context
is provided by <a href="GUID-0AEE5955-C530-35F1-A904-69183331B294.html"><span class="apiname">CWindowGc</span></a>; the windows graphics
device by <a href="GUID-30479BE3-296E-3B4D-914D-B080ABD733E4.html"><span class="apiname">CWsScreenDevice</span></a>. The bitmap class, <a href="GUID-683A1D42-2764-3EB7-BD19-9E12559199AB.html"><span class="apiname">CFbsBitmap</span></a>, is extended for most efficient use with the
Window Server by <a href="GUID-17150D76-BB82-3A4B-8B1A-8BA93CB1A9EF.html"><span class="apiname">CWsBitmap</span></a>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d99896e180 "><p> <strong>Sprites and cursors</strong>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e183 "><p>A sprite is an arbitrary-shaped bitmap that can be moved
without applications having to redraw the underlying screen. It has
one or more sprite members, each containing a bitmap image and a time
interval for that bitmap to be displayed. The sprite class is <a href="GUID-75C09150-E93B-323D-AFBF-E42C7BD78229.html"><span class="apiname">RWsSprite</span></a>; the sprite member class is <a href="GUID-7F4E749E-D08D-3771-A3F1-9AEC5D16B78C.html"><span class="apiname">TSpriteMember</span></a>. </p>
 <p>A specialized sprite type is provided for pointer cursors,
which automatically track the position of a pointer. It is provided
by <a href="GUID-6E71A7F9-E980-3D99-ACB0-6743A0D13EBF.html"><span class="apiname">RWsPointerCursor</span></a>. </p>
 <p>Text cursors are handled
by the class <a href="GUID-CF377A98-F11F-380F-AD10-7F3E261D4421.html"><span class="apiname">CTextView</span></a>. They can take the form
of a text or a line cursor. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d99896e180 "><p> <strong>Animation client</strong>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e183 "><p>Third-parties can write Window Server plug-in DLLs, as defined
in the Animation API, that perform animations. Providers of such animation
DLLs must also provide a client-side interface to allow applications
to control the animation. The base class for an animation client-side
interface is <a href="GUID-4180CDBA-E9A5-3A4B-9778-26D172FAFD10.html"><span class="apiname">RAnim</span></a>. </p>
 <p>Clients must request
an animation DLL to be loaded before the animations provided by it
can be used. This is done through <a href="GUID-800B3667-F45F-391F-A8A9-F876FB4ABC34.html"><span class="apiname">RAnimDll</span></a>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d99896e180 "><p> <strong>Transparent windows</strong>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e183 "><p>Transparent windows enable you to display semi-transparent
bitmaps on a window. The window must be an <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow</span></a>. Methods to create transparent windows can be found in the <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow</span></a> class. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d99896e180 "><p> <strong>Surfaces</strong>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e183 "><p>In ScreenPlay, applications (such as games and video) that
use a rendering API that can potentially benefit from hardware acceleration
(depending on hardware) can render directly to graphics <em>surfaces</em>. A surface is a hardware independent buffer for holding an image
or part of a scene. Surfaces are identified using a 128 bit surface
ID in a <samp class="codeph">TSurfaceId</samp> class.</p>
 <p>The Window Server
delegates the composition of surfaces to a composition engine which
has an adaptation part that enables device creators to take advantage
of graphics processing hardware if it is available. However, this
is largely transparent to application developers. </p>
<p>See <a href="GUID-1C025957-258C-54C0-94A5-AD60C14E6D76.html" title="This section introduces external surfaces, and related APIs and features such as zoom, flipping, rotation and display.">External Surfaces</a> for more information.</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d99896e180 "><p> <strong>Direct Screen Access (DSA)</strong>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d99896e183 "><p>Mainly used in the non-ScreenPlay variant, DSA enables applications
that require high frame rates (such as video and games) to bypass
the Window Server and write to the screen directly. This avoids client-server
communication and as a result is faster. However, some interaction
with the Window Server is needed to prevent the application from drawing
over other application's data. </p>
 <p>On ScreenPlay, support for
direct screen access (DSA) is maintained for backward compatibility
reasons, although Symbian recommends the use of <a href="GUID-1C025957-258C-54C0-94A5-AD60C14E6D76.html" title="This section introduces external surfaces, and related APIs and features such as zoom, flipping, rotation and display.">external surfaces</a> in preference to DSA. However, whereas on some earlier devices,
applications might work without fully conforming to the rules of DSA,
these rules are now necessarily enforced. See <a href="GUID-3F0FCBB5-98D2-4355-96E3-2DA938DE1C16.html" title="This migration guide explains the guidelines that applications that use direct screen access (DSA) must follow in order to run on ScreenPlay (NGA) devices.">DSA Migration Guide</a> for information about the guidelines applications must follow in
order to be able to run correctly on a ScreenPlay device.</p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html" title="The Window Server client-side library provides client applications with access to the screen and input devices.">Window Server Client-Side Library</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html" title="The Window Server client-side library provides client applications with access to the screen and input devices.">Window
Server Client-Side Library</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>