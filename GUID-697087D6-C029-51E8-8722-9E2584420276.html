<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="SMS Stack Architecture"/>
<meta name="abstract" content="The SMS Stack is a plug-in to the socket server. This section provides the architectural relationships of the SMS stack."/>
<meta name="description" content="The SMS Stack is a plug-in to the socket server. This section provides the architectural relationships of the SMS stack."/>
<meta name="DC.Relation" scheme="URI" content="GUID-30C21015-C433-5465-87A7-DA5A9C4AD7BD.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6BA58045-3864-599A-878E-0C7AE7E9741B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E0DA7DE7-FD5A-5C1D-A53C-870966F00445.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-30C21015-C433-5465-87A7-DA5A9C4AD7BD.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-697087D6-C029-51E8-8722-9E2584420276"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>SMS Stack Architecture</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-697087D6-C029-51E8-8722-9E2584420276"><a name="GUID-697087D6-C029-51E8-8722-9E2584420276"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2563496 id2563002 id2563083 id2562974 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93.html" title="Cellular Baseband Services provide a common interface to telephony services for applications and higher level platform components. The framework is independent of the underlying network services.">Cellular Baseband Services Guide</a> &gt; <a href="GUID-6BA58045-3864-599A-878E-0C7AE7E9741B.html" title="This section describes the components related to the SMS protocols.">SMS Protocols</a> &gt; <a href="GUID-E0DA7DE7-FD5A-5C1D-A53C-870966F00445.html" title="This section provides the summary of concepts and tutorials related to the SMS stack for the GSM networks. The client applications can access the SMS stack using socket server APIs.">SMS Stack for GSM Networks</a> &gt; <a href="GUID-30C21015-C433-5465-87A7-DA5A9C4AD7BD.html" title="This section lists the concepts and architecture of the SMS Stack.">Concepts</a> &gt; </div>
<h1 class="topictitle1">SMS Stack Architecture</h1>
<div><p>The SMS Stack is a plug-in to the socket server. This section provides the architectural relationships of the SMS stack. </p>
<div class="section"><h2 class="sectiontitle">SMS stack components</h2> <a name="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-B7B94BE7-8F08-5104-9741-87600C6B2BB2"><!-- --></a><ol id="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-B7B94BE7-8F08-5104-9741-87600C6B2BB2"><li id="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-A354C7A1-7DE5-571F-9DFB-2F3AC90ED12D"><a name="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-A354C7A1-7DE5-571F-9DFB-2F3AC90ED12D"><!-- --></a><p>SMSPROT - The SMS stack protocol module </p>
 </li>
 <li id="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-7636FB1A-5162-5136-8ADD-2C4DCE36818A"><a name="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-7636FB1A-5162-5136-8ADD-2C4DCE36818A"><!-- --></a><p>GSMU - GSM Utility class </p>
 </li>
 <li id="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-B9C83C25-4727-5992-A40A-83EFDABFE2FF"><a name="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-B9C83C25-4727-5992-A40A-83EFDABFE2FF"><!-- --></a><p>SMSU - SMS Utility class </p>
 </li>
 </ol>
 <p><strong>SMSPROT</strong> </p>
 <p>SMSPROT.prt is a socket server (ESOCK) plug-in DLL implemented with a protocol module suffix <samp class="codeph">PRT</samp>. The main functions of the SMS protocol module are to send queues, receive queues and maintain the connection to the socket server. For more information about SMSPROT, <a href="GUID-4ADE94EF-346F-541A-B0FB-AF43ADB1C66D.html" title="This section describes the SMS protocol module of the SMS stack.">see SMS Protocol Modules</a>. </p>
 <p><strong>GSMU</strong> </p>
 <p>The GSM Utility (GSMU) class provides some utility functions for the SMS stack. The SMS messages are represented by a <a href="GUID-FA6D9B1B-3845-3B81-ACBB-34977D3C9631.html"><span class="apiname">CSmsMessage</span></a> object of the GSMU class. GSMU also provide methods to send and receive the SMS messages through the socket server. For more information about GSMU, <a href="GUID-A957A1DF-AF81-5A9D-BB44-1B34B2EB809E.html" title="This section describes the GSM utility classes and the functionality they provide in the SMS stack. .">see GSM Utilities</a>. </p>
 <p><strong>SMSU</strong> </p>
 <p>The SMS Utility (SMSU) class provides the base class for active objects of the SMS stack. For more information about SMSU, <a href="GUID-A4FBD7D4-DCC0-517A-BCAA-D36D8940A64D.html" title="This section provides a summary of the classes and the functionality provided by the SMSU. The SMS Utility (SMSU) is a DLL. The SMSU provides utility functionality for SMS messages.">see SMS Utilities</a>. </p>
 <div class="fignone" id="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-B0D5C075-FE00-5E3B-9F1A-C6F9D45A3BF3"><a name="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-B0D5C075-FE00-5E3B-9F1A-C6F9D45A3BF3"><!-- --></a><span class="figcap">Figure 1. 
             SMS Stack Architectural Relationships
          </span> <img src="GUID-D7AFA78E-4B87-554E-B0A5-1AEEA98B537C_d0e41714_href.png"/></div>
 <p>When a client application requests a service from the SMS stack, the SMS stack is loaded by the socket server. The main SMS stack clients are the messaging application, the WAP stack and the third party applications. The WAP stack binds directly to the SMS stack. The messaging applications and other third party applications access the SMS stack as the clients of the socket server. </p>
 <p>The SMS stack communicates with the ETel (Telephony) server to send, receive, read, write and delete the SMS messages from the Subscriber Identity Module (SIM). </p>
 <p>The SMS stack uses the message store called as the reassembly store to store the messages passed by the Telephony System plug-in (TSY). The stored messages are then processed. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Stack initialisation</h2> <p>The socket server loads the SMS stack. The socket server loads the stack when one of the clients requests a session with the stack. The load the SMS stack, the socket server searches for the smswap.sms.esk file. The ESK files contain the details of the DLL which creates the SMS stack. The smswap.sms.esk file is located at <samp class="codeph">epoc32\data\z\private\101F7989\SOCKET</samp> and <samp class="codeph">epoc32\wins\c\private\101f7989</samp>. </p>
 <pre class="codeblock" id="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-70A2081E-A7EB-58AB-852E-53DD4B7C5AF9"><a name="GUID-697087D6-C029-51E8-8722-9E2584420276__GUID-70A2081E-A7EB-58AB-852E-53DD4B7C5AF9"><!-- --></a>
#smswap.sms.esk

[sockman]
protocols= sms

[sms]
filename= SMSPROT.PRT
index= 1
</pre>
 <p>The SMS stack is initialised and loaded when the first client makes a request to the stack through the socket server. The SMS stack is unloaded when the last client disconnects. The ESK file is used to customise different time out values.For more information see <a href="GUID-EE0D8964-C343-5389-8932-9AC48DCC67FD.html" title="This section describes how to configure the SMS stack using ESK files. ESK is a socket server (ESOCK) configuration file.">Configuration</a>. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">SMS communication</h2> <p>The three main components that enable applications to send and receive SMS messages are the baseband signalling stack, Telephony system plug-in (TSY) and the SMS stack. The SMS stack communicates with the baseband signalling stack through the TSY to send and receive the messages from the network. The different types of receive modes are defined in the <a href="GUID-AAFF75F0-B2F2-33D9-AE9D-7AC5B7EDD801.html"><span class="apiname">TMobileSmsReceiveMode</span></a> class. Receive modes describe how a message is processed by the SMS stack. </p>
 <p><strong>EReceiveStored </strong> </p>
 <p>In <a href="GUID-78CBD8FD-99CE-304C-A2BE-81287EB5555E.html"><span class="apiname">EReceiveStored</span></a> mode, the baseband stack stores the incoming SMS messages. The baseband stack acknowledges to the network before it passes the SMS to the TSY. The message is then passed to the SMS stack for processing. The message is stored in the reassembly store until it is processed. If the processing is successful, a positive acknowledgement is sent to the TSY. If the processing is unsuccessful, a negative acknowledgement is sent to the TSY and the message is processed later by sending a resume command to the TSY. Since the message is stored in the baseband stack it is not lost due to lack of memory in the SMS stack. The disadvantage of this method is that the network is acknowledged even if the message is not passed to the messaging client. </p>
 <p><strong>EReceiveUnstoredPhoneAck </strong> </p>
 <p>In <a href="GUID-D1BC871D-76F9-3A12-9979-6E06EBFABE8C.html"><span class="apiname">EReceiveUnstoredPhoneAck</span></a> mode, the message is acknowledged as soon as it is received by the baseband stack but it is the responsibility of the SMS stack that stores and processes the message. The disadvantage of this mode is that if sufficient memory or disk space is not available the message is lost. The network does not resend the message because of the positive acknowledgement was sent by the baseband stack. </p>
 <p><strong>EReceiveUnstoredClientAck </strong> </p>
 <p>In <a href="GUID-2A9E4D0B-BBF4-3894-8A4B-E76554751904.html"><span class="apiname">EReceiveUnstoredClientAck</span></a> mode the baseband stack does not store or acknowledge any incoming SMS messages. The SMS stack has the responsibility to store and acknowledge the received SMS. If sufficient memory is not available the SMS stack rejects the incoming message and sends a negative acknowledgement to the network. The network does not send any other SMS to the device until it receives a resume request from the device. The resume request is initiated by the SMS stack. </p>
 <p>Two other modes specified in the <a href="GUID-AAFF75F0-B2F2-33D9-AE9D-7AC5B7EDD801.html"><span class="apiname">TMobileSmsReceiveMode</span></a> class, they are <a href="GUID-9F61E856-9E38-37F5-86E6-4AEC6317AFF4.html"><span class="apiname">EReceiveModeUnspecified</span></a> and <a href="GUID-133EB470-9241-3285-9B34-DC6522BD1D8E.html"><span class="apiname">EReceiveEither</span></a>. For more information about the enumerations see the cpp reference documentation. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-30C21015-C433-5465-87A7-DA5A9C4AD7BD.html" title="This section lists the concepts and architecture of the SMS Stack.">Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>