<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Advanced Pointer Tutorial"/>
<meta name="abstract" content="This tutorial provides step-by-step instructions and sample code to help you write applications using advanced pointers."/>
<meta name="description" content="This tutorial provides step-by-step instructions and sample code to help you write applications using advanced pointers."/>
<meta name="DC.Relation" scheme="URI" content="GUID-A12A66ED-2C8F-5CE6-8F3E-332B045A35B4.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-08427065-B8E5-5194-B095-3B5213836BED.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A12A66ED-2C8F-5CE6-8F3E-332B045A35B4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-9C269F45-F160-5A4B-ABF8-896D2A538E3B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-9AD75103-CD56-5279-B639-5CA2BBF979B5.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-C60DC070-572B-5960-B394-550426FDB909"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Advanced Pointer Tutorial</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-C60DC070-572B-5960-B394-550426FDB909"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2384499 id2384574 id2384588 id2384744 id2384783 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" title="The Windowing collection contains two componentsâ€”the Window Server, which manages the use of the screen by applications, and the Window Server Plugins component.">Windowing Collection</a> &gt; <a href="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" title="The Window Server component manages the use of the screen by applications and handles key and pointer events.">Window Server Component</a> &gt; <a href="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html" title="The Window Server client-side library provides client applications with access to the screen and input devices.">Window Server Client-Side Library</a> &gt; <a href="GUID-08427065-B8E5-5194-B095-3B5213836BED.html">Window Server Client-Side Events</a> &gt; <a href="GUID-A12A66ED-2C8F-5CE6-8F3E-332B045A35B4.html" title="In ScreenPlay, the Window Server provides advanced pointer features, such as support for multiple pointers and proximity and pressure coordinates.">Advanced Pointers</a> &gt; </div>
<h1 class="topictitle1"> Advanced Pointer Tutorial</h1>
<div><p>This tutorial provides step-by-step instructions and sample
code to help you write applications using advanced pointers. </p>

<p> <strong>Variant</strong>: <a href="GUID-D93978BE-11A3-5CE3-B110-1DEAA5AD566C.html" title="This topic provides an introduction to ScreenPlay and its architecture. ScreenPlay is a new graphics architecture, introduced in Symbian^3 (S^3). ScreenPlay enables device creators to take advantage of improved software performance, hardware acceleration and third party graphics engines. ScreenPlay is sometimes known as the New Graphics Architecture (NGA).">ScreenPlay</a>. <strong>Target audience</strong>: Application developers. </p>

<div class="section" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-372AE50A-22BF-488F-BCFB-9B9A734C1D79"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-372AE50A-22BF-488F-BCFB-9B9A734C1D79"><!-- --></a><h2 class="sectiontitle">Required background </h2> <p>This topic builds
on the material in the following topics: </p>
 <ul>
<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-C4209FBD-3860-5F4B-8458-87D22D483953"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-C4209FBD-3860-5F4B-8458-87D22D483953"><!-- --></a><p><a href="GUID-9C269F45-F160-5A4B-ABF8-896D2A538E3B.html" title="This is an overview of the Window Server extensions that support the use of advanced pointers. These extensions enable mobile devices to respond to events from multiple pointers, including their proximity and pressure. These extensions are available only in ScreenPlay.">Advanced Pointer
Overview</a>  </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-9D3C3B31-F43A-5201-A1EC-A1F2848CFF43"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-9D3C3B31-F43A-5201-A1EC-A1F2848CFF43"><!-- --></a><p><a href="GUID-9AD75103-CD56-5279-B639-5CA2BBF979B5.html" title="The Window Server provides advanced pointer features, such as support for multiple pointers and proximity and pressure coordinates. This topic provides a summary of advanced pointer states and the events that communicate changes of their state.">Advanced Pointer
States and Event Communication</a>  </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-1C0E6832-C5BA-49EE-85E7-02801488CE8A"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-1C0E6832-C5BA-49EE-85E7-02801488CE8A"><!-- --></a><h2 class="sectiontitle">Using advanced pointers</h2> <p>This topic covers
the following: </p>
 <ul>
<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-C3AD43AA-09C0-5BA2-8496-5B87D40C89F5"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-C3AD43AA-09C0-5BA2-8496-5B87D40C89F5"><!-- --></a><p><a href="GUID-C60DC070-572B-5960-B394-550426FDB909.html#GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-8CBE862B-0C1D-5088-89B7-9B3EC898E4FC">Enabling multiple pointers in a window</a>  </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-177323F2-55C6-56D9-B3D2-A8DDACF69E10"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-177323F2-55C6-56D9-B3D2-A8DDACF69E10"><!-- --></a><p><a href="GUID-C60DC070-572B-5960-B394-550426FDB909.html#GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-C026DAB9-C11C-5D29-A1EA-6730E914250F">Getting Z coordinates from TPointerEvent</a>  </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-91CEA92C-A692-5853-96F0-625A76B7DC8D"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-91CEA92C-A692-5853-96F0-625A76B7DC8D"><!-- --></a><p><a href="GUID-C60DC070-572B-5960-B394-550426FDB909.html#GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-B7057F69-191F-5AA4-8C61-EBECE66D92F6"> Pinch zooming</a>  </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-8CBE862B-0C1D-5088-89B7-9B3EC898E4FC"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-8CBE862B-0C1D-5088-89B7-9B3EC898E4FC"><!-- --></a><h2 class="sectiontitle">Enabling
multiple pointers in a window</h2> <a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-210D17A8-4869-5F9B-B71C-672101AC591C"><!-- --></a><ol id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-210D17A8-4869-5F9B-B71C-672101AC591C">
<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-81A2AC5C-7837-5216-8F47-FC5959C27522"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-81A2AC5C-7837-5216-8F47-FC5959C27522"><!-- --></a><p> <a href="GUID-637F82AF-0CF9-3C85-834D-7C1A0866DF87.html"><span class="apiname">RWindow</span></a> provides
a handle to a standard window. Call <samp class="codeph">RWindow</samp> to create
an instance of a window. </p>
 <pre class="codeblock" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-0E31C3F6-3719-5F16-9F74-C405850604B8"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-0E31C3F6-3719-5F16-9F74-C405850604B8"><!-- --></a>
RWindow window(ws);

User::LeaveIfError(window.Construct(wg, reinterpret_cast&lt;TUint32&gt;(&amp;wg) + 1));
</pre>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-B67D3702-1A8F-5C6A-AB0F-FEA7C4D04A07"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-B67D3702-1A8F-5C6A-AB0F-FEA7C4D04A07"><!-- --></a><p>Call <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79__GUID-05293539-F1B0-3C7D-BB14-3FD42F23D5C8"><span class="apiname">RWindow::EnableAdvancedPointers()</span></a> to enable advanced pointers.
Then call <a href="GUID-1460DD8F-9AA1-3B99-8FFD-F309959CCA34.html#GUID-1460DD8F-9AA1-3B99-8FFD-F309959CCA34__GUID-4E02165A-DFCC-3D18-BB18-18726B28E90A"><span class="apiname">RWindowBase::Activate()</span></a> to display the
window and enable the window to receive events. <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html"><span class="apiname">RWindow</span></a> inherits from <a href="GUID-1460DD8F-9AA1-3B99-8FFD-F309959CCA34.html"><span class="apiname">RWindowBase</span></a>, so you can call the <samp class="codeph">Activate()</samp> function on <samp class="codeph">RWindow</samp>. </p>
 <pre class="codeblock" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-DB2FB570-2BB0-5C5F-9E4F-076D6A0E469E"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-DB2FB570-2BB0-5C5F-9E4F-076D6A0E469E"><!-- --></a>
window.EnableAdvancedPointers();
window.Activate();
</pre>
 <p>When an application needs to receive advanced pointer
events in a window, it must call <samp class="codeph">RWindowBase::EnableAdvancedPointers()</samp> for the window <em>before</em> it is activated. </p>
 <p>If advanced
pointers are not enabled for a window, it receives only standard <a href="GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html"><span class="apiname">TPointerEvent</span></a> information from a single pointer with no
pressure and proximity data. The single pointer environment rules
describe the way in which pointer events coming from many pointers
in the multiple pointer model are transformed into events of one pointer.
They are necessary to ensure that old single-pointer applications
work in a multiple pointer environment intuitively and
as expected by the user. </p>
 <p>However, the new <samp class="codeph">TPointerEvent</samp> types, <a href="GUID-239D0A8B-2759-321D-AD48-976E80192239.html"><span class="apiname">EEnterCloseProximity</span></a>, <a href="GUID-8C6264B4-5E19-33A7-92B0-BB79C871BEC7.html"><span class="apiname">EExitCloseProximity</span></a>, <a href="GUID-F02DB96E-1541-3223-9B7B-79D45840DB7B.html"><span class="apiname">EEnterHighPressure</span></a> and <a href="GUID-15B5991C-B075-3110-B0A4-540EC282AA56.html"><span class="apiname">EExitHighPressure</span></a>, are delivered to all windows, even to those that do not enable
advanced pointers. </p>
 </li>

</ol>
 </div>

<div class="section" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-C026DAB9-C11C-5D29-A1EA-6730E914250F"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-C026DAB9-C11C-5D29-A1EA-6730E914250F"><!-- --></a><h2 class="sectiontitle">Getting
Z coordinates from TPointerEvent</h2> <a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-4CC2271D-1798-51B3-9A9D-E7E0B9A33DAE"><!-- --></a><ol id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-4CC2271D-1798-51B3-9A9D-E7E0B9A33DAE">
<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-184B5B63-4EFC-55CD-8D1F-E015EEBACBE2"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-184B5B63-4EFC-55CD-8D1F-E015EEBACBE2"><!-- --></a><p>Call <a href="GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html#GUID-1FFA0073-3D83-388E-A824-08C31F90CC54__GUID-E961DA4D-AD38-31F0-88DD-A07D36346DCB"><span class="apiname">TPointerEvent::AdvancedPointerEvent()</span></a> on a <samp class="codeph">TPointerEvent</samp> to return a pointer to a <a href="GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html"><span class="apiname">TAdvancedPointerEvent</span></a>. </p>
 <pre class="codeblock" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-6E81680A-3070-546B-B575-49EA9E34FAF9"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-6E81680A-3070-546B-B575-49EA9E34FAF9"><!-- --></a>
TZType aZType;
TPointerEvent&amp; aPointerEvent;
TInt* aZ; 
TInt* aPoint3D;

TAdvancedPointerEvent *advancedP = aPointerEvent.AdvancedPointerEvent();
</pre>
 <p> <samp class="codeph">TPointerEvent</samp> is a struct that contains
details of a pointer event. <samp class="codeph">TZType</samp> is a struct provided
by the programmer containing members to hold proximity, pressure,
and "proximity and pressure" data. </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-ABA8FA09-5F57-51BC-8CAE-43649B5ED6D3"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-ABA8FA09-5F57-51BC-8CAE-43649B5ED6D3"><!-- --></a><p>Now we need
to test whether the pointer event contains advanced pointer data.
If it is not an advanced pointer, the code leaves. </p>
 <p>If it is
an advanced pointer, we call functions to detect proximity, pressure,
"proximity and pressure" data and coordinates. </p>
 <pre class="codeblock" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-DF109643-2564-51A0-B0F6-33BF4DA1F6E3"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-DF109643-2564-51A0-B0F6-33BF4DA1F6E3"><!-- --></a>
if(!advancedP)
    {
    // The TPointerEvent isn't an instance of TAdvancedPointerEvent
    User::Leave(KErrArgument);
    }

switch(aZType)
    {
    case EZTypeProximity:
        aZ = advancedP-&gt;Proximity();
        aPoint3D = advancedP-&gt;Proximity3D(); 
        break;
    case EZTypePressure:
        aZ = advancedP-&gt;Pressure();
        aPoint3D = advancedP-&gt;Pressure3D();
        break;
    case EZTypeProximityAndPressure:
        aZ = advancedP-&gt;ProximityAndPressure();
        aPoint3D = advancedP-&gt;ProximityAndPressure3D();
        break;
    default: 
        User::Leave(KErrArgument);
        break;
    }
</pre>
 <ul>
<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-40C01884-AC86-5882-935D-2EC2E27C9004"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-40C01884-AC86-5882-935D-2EC2E27C9004"><!-- --></a><p> <a href="GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html#GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023__GUID-0ED4B1CC-0655-3246-8645-AAC9E0C27298"><span class="apiname">TAdvancedPointerEvent::Proximity()</span></a> returns the proximity. </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-16A9A86B-A837-5E43-BB3A-F5A04A7F4552"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-16A9A86B-A837-5E43-BB3A-F5A04A7F4552"><!-- --></a><p> <a href="GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html#GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023__GUID-15DEBFBF-7B7D-3FCF-9929-C973824A5FD3"><span class="apiname">TAdvancedPointerEvent::Pressure()</span></a> returns the pressure. </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-3E614890-C317-596E-A5B9-FD76426DBD12"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-3E614890-C317-596E-A5B9-FD76426DBD12"><!-- --></a><p> <a href="GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html#GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023__GUID-114AE77E-D0BD-321E-BFCB-1388B35582EC"><span class="apiname">TAdvancedPointerEvent::ProximityAndPressure()</span></a> returns the proximity and pressure combined. </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-6F62C0D1-FAE4-5F8F-B451-68ABA404A369"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-6F62C0D1-FAE4-5F8F-B451-68ABA404A369"><!-- --></a><p> <a href="GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html#GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023__GUID-E5AA7737-D217-3FDE-9E4D-AAA7F5D2C300"><span class="apiname">TAdvancedPointerEvent::
Position3D()</span></a> returns the proximity and the X, Y and Z coordinates. </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-5AD1811D-BCBF-5A44-B6E7-EB71BF254BCA"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-5AD1811D-BCBF-5A44-B6E7-EB71BF254BCA"><!-- --></a><p> <a href="GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html#GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023__GUID-2F30A8F5-75BA-3FE3-84B7-3C772ED75857"><span class="apiname">TAdvancedPointerEvent::Pressure3D()</span></a> returns the pressure and the X and Y coordinates. </p>
 </li>

</ul>
 <p>Proximity is <em>always</em> negative and pressure is <em>always</em> positive. Internally they are combined together as a Z coordinate.
When Z &gt; 0, the proximity is 0 and the Z value represents the pressure.
When Z &lt; 0, the pressure is 0 and the Z value represents the proximity.
Some APIs use only a Z coordinate (such as the threshold getters and
setters and <a href="GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html#GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023__GUID-114AE77E-D0BD-321E-BFCB-1388B35582EC"><span class="apiname">TAdvancedPointerEvent::ProximityAndPressure()</span></a>). In these, the Z coordinate is interpreted in terms of pressure
and proximity. </p>
 </li>

</ol>
 <div class="fignone" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-7A49B143-5458-5916-B937-55D98B77BB2C"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-7A49B143-5458-5916-B937-55D98B77BB2C"><!-- --></a><span class="figcap">Figure 1.  Relationships between the pointer proximity, pressure and
Z              coordinate            </span>

<img src="GUID-1A0FB98B-8DB3-5067-9B71-FF838F6AE402_d0e244890_href.png"/>
</div>
 </div>

<div class="section" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-B7057F69-191F-5AA4-8C61-EBECE66D92F6"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-B7057F69-191F-5AA4-8C61-EBECE66D92F6"><!-- --></a><h2 class="sectiontitle">Pinch
zooming</h2> <p>This example shows an easy way to pinch zoom an
image when the screen receives pointer events from two pointers. There
are two functions in this code that must be implemented by the programmer: <samp class="codeph">BitmapCoordinates()</samp> and <samp class="codeph">MoveBitmap()</samp>. They
are not included in the example because they involve complex calculations
that are not related to advanced pointers. </p>
 <p>The high-level
steps to perform pinch zooming are: </p>
 <a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-AEF3917C-AAFE-5C25-9609-396D08478AC0"><!-- --></a><ol id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-AEF3917C-AAFE-5C25-9609-396D08478AC0">
<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-7839E665-C4E1-59C8-BA89-22A62615EFA3"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-7839E665-C4E1-59C8-BA89-22A62615EFA3"><!-- --></a><p>Define the coordinates,
equivalent to the given on-screen coordinates. In the code example,
this is done using the function <samp class="codeph">BitmapCoordinates()</samp>. </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-FC4B1BDA-8120-53C9-9C88-BEFEF1AD54B4"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-FC4B1BDA-8120-53C9-9C88-BEFEF1AD54B4"><!-- --></a><p>Define the ID
of the pointer by using <a href="GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023.html#GUID-FADA3278-FF8B-308F-90AD-3DCF8911A023__GUID-67593D7E-CE40-303F-B847-81D6FC0578B1"><span class="apiname">TAdvancedPointerEvent::PointerNumber()</span></a>. If the device can handle two pointers (two fingers) at the same
time, their numbers are 0 and 1. The pointer number enables you to
distinguish a given pointer from other pointers. </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-1E8F7D23-EEAD-5EA5-8863-276076D6B54E"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-1E8F7D23-EEAD-5EA5-8863-276076D6B54E"><!-- --></a><p>For each pointer
assign its coordinates to a local variable. We assume there are only
two pointers handled by the system here. </p>
 </li>

<li id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-E44B3D9B-560A-5959-996D-A63CBD4C3786"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-E44B3D9B-560A-5959-996D-A63CBD4C3786"><!-- --></a><p>Use the <samp class="codeph">MoveBitmap()</samp> function to achieve the zoom effect. </p>
 <pre class="codeblock" id="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-D85CCFDD-8F65-530A-ACD7-93DD1D435FC6"><a name="GUID-C60DC070-572B-5960-B394-550426FDB909__GUID-D85CCFDD-8F65-530A-ACD7-93DD1D435FC6"><!-- --></a>
/**
Receives pointer events from two pointers to perform Pinch Zoom of the image.
Function will finish when EButton1Up is received for any of the pointers.
@param aPointer1    Coordinates of pointer number 1 when zoom is started
@param aPointer2    Coordinates of pointer number 2 when zoom is started
*/

void PinchZoom(TPoint aPointer1, TPoint aPointer2)
    {
    TPoint actualP1 = aPointer1;
    TPoint actualP2 = aPointer2;
    
    // translate on-screen pointer coordinates to coordinates of displayed bitmap
    TPoint bitmapCatching1 = BitmapCoordinates(aPointer1);
    TPoint bitmapCatching2 = BitmapCoordinates(aPointer2);
    
    TBool repaint = EFalse;
                                
    while (ETrue)
        {
        TAdvancedPointerEvent event = GetNextPointerEvent();
        
        if (event.iType == TPointerEvent::EDrag)
            { 
            if (event.PointerNumber() == 1)
                { 
                actualP1 = event.iPosition;
                repaint = ETrue;
                }
            else if (event.PointerNumber() == 2)
                {
                actualP2 = event.iPosition;
                repaint = ETrue;
                }
            }
        else if (event.iType == TPointerEvent::EButton1Up)
            {
            break;
            }
        
        if (repaint)
            {
            // move bitmap on the screen in the way that
            // bitmapCatching1 point of the bitmap will be displayed at actualP1 screen coordinate,
            // bitmapCatching2 point of the bitmap will be displayed at actualP2 screen coordinate.
            MoveBitmap(bitmapCatching1, actualP1, bitmapCatching2, actualP2);
            repaint = EFalse;
            }
        }
    }
</pre>
 </li>

</ol>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-A12A66ED-2C8F-5CE6-8F3E-332B045A35B4.html" title="In ScreenPlay, the Window Server provides advanced pointer features, such as support for multiple pointers and proximity and pressure coordinates.">Advanced Pointers</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-9C269F45-F160-5A4B-ABF8-896D2A538E3B.html" title="This is an overview of the Window Server extensions that support the use of advanced pointers. These extensions enable mobile devices to respond to events from multiple pointers, including their proximity and pressure. These extensions are available only in ScreenPlay.">Advanced
Pointer                 Overview</a></div>
<div><a href="GUID-9AD75103-CD56-5279-B639-5CA2BBF979B5.html" title="The Window Server provides advanced pointer features, such as support for multiple pointers and proximity and pressure coordinates. This topic provides a summary of advanced pointer states and the events that communicate changes of their state.">Advanced
Pointer States and                 Event Communication</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>