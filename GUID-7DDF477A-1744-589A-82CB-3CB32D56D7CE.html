<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Commands and Responses"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D009C6A6-3388-554F-BCB5-4F438E7F9E99.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-9BAEF0E8-5414-597C-B0B7-5F6E02DBF3C5.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8C8B97BF-E769-5C7B-A6E0-B8CA7F12071C.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D009C6A6-3388-554F-BCB5-4F438E7F9E99.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Commands and Responses</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2519078 id2519086 id2519100 id2519115 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05.html" title="Device Services provides device specific services to control phone resources and establish remote controlled connection with the external devices. It also monitors the phone resources and provides stage shutdown mechanism.">Device Services Guide</a> &gt; <a href="GUID-9BAEF0E8-5414-597C-B0B7-5F6E02DBF3C5.html">Accessory Services</a> &gt; <a href="GUID-8C8B97BF-E769-5C7B-A6E0-B8CA7F12071C.html">Bluetooth Remote Control Framework</a> &gt; <a href="GUID-D009C6A6-3388-554F-BCB5-4F438E7F9E99.html">Bluetooth Remote Control Framework Tutorial</a> &gt; </div>
<h1 class="topictitle1">Commands
and Responses</h1>
<div>
<p>This tutorial deals with the commands and responses available for remote
control framework applications. </p>

<p><strong>Intended Audience: </strong> </p>

<p>This tutorial is designed for Symbian licensees and 3rd party application
developers. </p>

<div class="section"><h2 class="sectiontitle">Using Commands and Responses</h2> <p>The following tasks
will be covered in this tutorial: </p>
 <ul>
<li id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-0F780A84-DECF-5FF3-B2A1-1B11ADD91380"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-0F780A84-DECF-5FF3-B2A1-1B11ADD91380"><!-- --></a><p> <strong>As Controller</strong>  </p>
 <ul>
<li id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-BA8C996B-3E5D-540F-B96D-623E21372990"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-BA8C996B-3E5D-540F-B96D-623E21372990"><!-- --></a><p>Send Commands </p>
 </li>

<li id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-23E3F61D-590F-5593-B68E-240DEA8750F0"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-23E3F61D-590F-5593-B68E-240DEA8750F0"><!-- --></a><p>Receive responses </p>
 </li>

</ul>
 </li>

<li id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-0FF1F84C-CCC0-5B1C-A1F9-36C3D6F5F7F0"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-0FF1F84C-CCC0-5B1C-A1F9-36C3D6F5F7F0"><!-- --></a><p> <strong>As Target</strong>  </p>
 <ul>
<li id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-29C9E51A-9292-52A5-9C1A-27233F95FF2E"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-29C9E51A-9292-52A5-9C1A-27233F95FF2E"><!-- --></a><p>Receive Commands </p>
 </li>

<li id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-71816C68-E2DD-5494-9498-69908BA72ED4"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-71816C68-E2DD-5494-9498-69908BA72ED4"><!-- --></a><p>Send Responses </p>
 </li>

</ul>
 </li>

</ul>
 </div>

<div class="section"><h2 class="sectiontitle">Controller</h2> <p>The device used to send control commands
to a remote target is the controller. There are two broad kinds of controller
operations that need to be understood: sending commands and receiving responses.
They are discussed below. </p>
 <p><strong>Sending Commands</strong> </p>
 <p>Commands
are sent to a remote control target device to tell the device to do something.
This may include changing the volume setting, requesting a track listing,
starting or stopping music playback, requesting a file listing, or depending
on the kind of device being controlled, telling the device to move in some
way. </p>
 <pre class="codeblock" id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-5A1B8672-7AD8-5BAB-BE6C-7D7D3650F6DD"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-5A1B8672-7AD8-5BAB-BE6C-7D7D3650F6DD"><!-- --></a>...
 CRemConCoreApiController* iCoreController;
... // open the controller as previously discussed.
 TRequestStatus stat;
 TUint numRemotes;
 // numRemotes is a value representing a specific participating device.
 iCoreController-&gt;Play(stat, numRemotes, ERemConCoreApiButtonClick);
 User::WaitForRequest(stat);
 LEAVEIFERRORL(stat.Int());</pre>
 <p>When a target receives the command
it will handle it in an appropriate way, as discussed in the next section.
The target may also send a response to the controller. </p>
 <p><strong>Receiving
Responses</strong> </p>
 <p>If a target sends a response to a received command the
controller needs to handle the response. The response could be something as
simple as an acknowledgement that a command has been received or it could
be as complex as a listing of audio tracks that the controller needs to process
in some way. </p>
 <p>To receive responses the application should implement
the <a href="GUID-8457DAF2-0AEA-3D05-99C9-DAF4CBDF77FD.html"><span class="apiname">MRemConCoreApiControllerObserver</span></a> controller observer
interface. It then receives callbacks when a response has arrived. </p>
 <pre class="codeblock" id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-15F36049-159A-5E34-8A86-56837E027573"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-15F36049-159A-5E34-8A86-56837E027573"><!-- --></a>void MrccacoResponse(TRemConCoreApiOperationId aOperationId, 
                     TInt aError);
...
void CRemConTestOuter::MrccacoResponse(TRemConCoreApiOperationId aOperationId,
                                       TInt aError)
    {
    switch ( aOperationId )
        {
        case ERemConCoreApiPlay: 
             iManager.MtmWrite(_L8("\ta 'play' response came in with error %d"), aError);
             break;
        case ERemConCoreApiStop:
             iManager.MtmWrite(_L8("\ta 'stop' response came in with error %d"), aError);
             break;
        case ERemConCoreApiVolumeUp:
             iManager.MtmWrite(_L8("\ta 'VolumeUp' response came in with error %d"), aError);
             break;
        case ERemConCoreApiVolumeDown: 
             iManager.MtmWrite(_L8("\ta 'VolumeDown' response came in with error %d"), aError);
             break;
        case ERemConCoreApiForward:
             iManager.MtmWrite(_L8("\ta 'Forward' response came in with error %d"), aError);
             break;
        case ERemConCoreApiBackward:
             iManager.MtmWrite(_L8("\ta 'Backward' response came in with error %d"), aError);
             break;    
        }
    }</pre>
 <p>Responses are often followed up by the controller with
a series of actions such as presenting the information provided by the response
to the user, waiting for the user to make a choice of some kind, and sending
a new command, which begins the whole process again. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Target</h2> <p>A target device is set up to wait for and
handle commands sent to it from a controller and respond in some way to those
commands. </p>
 <p><strong>Receiving Commands</strong> </p>
 <p>To receive a command,
such as a request to increase the volume or return a listing of audio tracks,
the client must implement the <a href="GUID-50F877E1-F630-3960-8DB4-37B6AD807308.html"><span class="apiname">MRemConCoreApiTargetObserver</span></a> target
observer interface. It then will receive a callback through this interface
when a command is received. </p>
 <pre class="codeblock" id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-76929311-D3D1-5440-9608-FAC4ADBE0F55"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-76929311-D3D1-5440-9608-FAC4ADBE0F55"><!-- --></a>iCoreTarget = CRemConCoreApiTarget::NewL(*iInterfaceSelector, *this);
...
void CRemConTestOuter::MrccatoPlay(TRemConCoreApiPlaybackSpeed aSpeed,
                                   TRemConCoreApiButtonAction aButtonAct)
    {
    ...
    // used below
    TRequestStatus stat;
    // send the response
    iCoreTarget-&gt;PlayResponse(stat, KErrNone);
    User::WaitForRequest(stat);
    ...
    }</pre>
 <p><strong>Sending Responses</strong> </p>
 <p>Once the command has
been handled the target will send a response to the controller. The response
could be a simple acknowledgement, an error message, or a listing of files
or music tracks or some other data. Use the <a href="GUID-723FC8F2-DB48-3C70-976F-D027E19F480B.html"><span class="apiname">CRemConCoreApiTarget</span></a> interface. </p>
 <pre class="codeblock" id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-9F502820-CE27-5FB3-9D89-80C28A386F12"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-9F502820-CE27-5FB3-9D89-80C28A386F12"><!-- --></a>...
CRemConCoreApiTarget* iCoreTarget;
...
    {
    ...
    // from above
    TRequestStatus stat;
    // send the response
    iCoreTarget-&gt;PlayResponse(stat, KErrNone);
    User::WaitForRequest(stat);
     ...
    }</pre>
 </div>

<div class="section"><h2 class="sectiontitle">What's next?</h2> <ul>
<li id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-5D4365C4-0012-5F27-A22C-440C8E6905E9"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-5D4365C4-0012-5F27-A22C-440C8E6905E9"><!-- --></a><p> <a href="GUID-C4A072E1-4385-5C98-98C1-56F297132F11.html">Remote
Control Basics</a> </p>
 </li>

<li id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-A6A62C85-0913-5954-B954-FBFAE9DFD839"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-A6A62C85-0913-5954-B954-FBFAE9DFD839"><!-- --></a><p> <a href="GUID-E25A5C1E-83D7-51D5-8F11-9C44C6CEEDCE.html">Starting
as Controller</a>  </p>
 </li>

<li id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-01D925B8-5864-554C-9D9D-E9C2A29230A9"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-01D925B8-5864-554C-9D9D-E9C2A29230A9"><!-- --></a><p> <a href="GUID-8E25E84C-E8F3-50B2-82E5-0611A341ED27.html">Starting
as Target</a>  </p>
 </li>

<li id="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-7BFBAB9C-6810-5D35-BE95-D00D57D8B668"><a name="GUID-7DDF477A-1744-589A-82CB-3CB32D56D7CE__GUID-7BFBAB9C-6810-5D35-BE95-D00D57D8B668"><!-- --></a><p> <strong>Commands and Responses</strong> -
This document </p>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-D009C6A6-3388-554F-BCB5-4F438E7F9E99.html">Bluetooth Remote Control Framework Tutorial</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>