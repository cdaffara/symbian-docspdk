<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Variable TCP Receive Window"/>
<meta name="abstract" content="Explains how to improve performance of TCP/IP stack."/>
<meta name="description" content="Explains how to improve performance of TCP/IP stack."/>
<meta name="DC.Relation" scheme="URI" content="GUID-D5987006-A871-5F4E-AEA0-5A3B092D996A.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B144EAB9-53AB-579B-9E12-B16518E4FC01.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DBD4964D-7728-5E57-8BBA-824F98D0CCF8.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D5987006-A871-5F4E-AEA0-5A3B092D996A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6822E7FA-D055-5693-8872-8D0E8554A734.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Variable TCP Receive Window</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2398162 id2398611 id2858224 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-B144EAB9-53AB-579B-9E12-B16518E4FC01.html" title="Networking Services provides a standard framework for accessing network services and actual implementations of network protocols. The components of the Networking Services are closely related to the framework provided by the Communications Framework module.">Networking Services Guide</a> &gt; <a href="GUID-DBD4964D-7728-5E57-8BBA-824F98D0CCF8.html" title="This section describes the TCP/IP Utilities collection of components, which provides libraries used by TCP/IPv4/v6 PRT for the DNS and DHCP protocols.">TCP/IP Utilities</a> &gt; <a href="GUID-D5987006-A871-5F4E-AEA0-5A3B092D996A.html" title="This section provides the summary of concepts and tutorials related to variable TCP receive window.">Variable TCP Receive Window</a> &gt; </div>
<h1 class="topictitle1"> Variable
TCP Receive Window</h1>
<div><p>Explains how to improve performance of TCP/IP stack.</p>

<p>The performance of the existing Symbian platform TCP/IP stack is improved
by doing the following:</p>

<ul>
<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-00E77774-7DC6-513E-9CC3-46B499B4C196"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-00E77774-7DC6-513E-9CC3-46B499B4C196"><!-- --></a><p>Setting an initial TCP
receive window size that depends on the <a href="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA.html#GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-CDAA0409-6ECB-5ABB-A0E5-F7C5C58E6347">bearer
type</a>. </p>
 <p> </p>
 </li>

<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-22A70B8B-AD26-5898-8505-79F5434B5971"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-22A70B8B-AD26-5898-8505-79F5434B5971"><!-- --></a><p>Allowing the TCP receive
window size to dynamically resize when there is a change in modulation. For
example, GPRS to EDGE or 2G to 3G. </p>
 </li>

</ul>

<p>Bearers provide different bandwidth for data transmission using TCP/IP.
The connection setup between TCP hosts are through three-way handshake. The
TCP receive window size parameter is set during the connection startup. </p>

<p>To indicate the TCP receive window size, the TCP header contains a 16-bit
window field. The TCP receive window size denotes the maximum number of bytes
that a sender can send and a receiver can receive. The TCP header can have
any value between 0 and 64KB. Use the <a href="http://www.ietf.org/rfc/rfc1323.txt" target="_blank">TCP window scaling</a> to increase the window size beyond
64kB. The sender and receiver must agree to the scaling factor. The scaling
factor can be multiplied at both the ends to increase the window size. For
example, if the scaling factor is 2 and the window size negotiated is 96KB,
then the stored window size is 48KB. Also a scaling factor of 2 yields the
effective size of 96KB. The TCP receive maximum window size is mentioned in <samp class="codeph">tcpip.ini</samp> file. </p>

<p>At ROM build time, the (NetMCPR) plug-in configures the TCP receive window.
It is possible to enable or disable the adaptive window size based on the
bearer type. This helps some bearers to use adaptive window size and other
bearers to use fixed pre-defined windows. The <a href="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA.html#GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-E1123CF2-EA87-5F18-8F3C-3FD98DD6ABE8">lookup
table</a> provides the information on TCP receive window size at licensees
specific MCPR (NetMCPR). Licensees are provided with the TCP receive window
interface. </p>

<p>TCP receive window must be changed due to the following reasons: </p>

<ul>
<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-4E46CC4D-3CFA-5078-B801-9E0F20857CC8"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-4E46CC4D-3CFA-5078-B801-9E0F20857CC8"><!-- --></a><p>Change in modulation
due to the network change - modulation value for bearer varies in different
network. Modulation change in the network triggers the notification to change
the TCP receive window for the connected TCP sockets. For example, change
in network from 2.5G to 3G. </p>
 </li>

<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-41F0FC86-3E72-5372-8C43-B59F3835DD48"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-41F0FC86-3E72-5372-8C43-B59F3835DD48"><!-- --></a><p>Change in bearer - Forces
the TCP/IP stack to supply a new TCP receive window that is specific to the
new bearer. </p>
 </li>

</ul>

<div class="section" id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-CDAA0409-6ECB-5ABB-A0E5-F7C5C58E6347"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-CDAA0409-6ECB-5ABB-A0E5-F7C5C58E6347"><!-- --></a><h2 class="sectiontitle">Bearer types</h2> <p>The
following are the bearer types that support the TCP receive window: </p>
 <ul>
<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-302F21B4-FDBA-5052-939E-7FE309C4A7DF"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-302F21B4-FDBA-5052-939E-7FE309C4A7DF"><!-- --></a><p>General Packet Radio
Service (GPRS 2.5G) </p>
 </li>

<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-F60D6AF2-0EAA-5693-982B-B0B531E22862"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-F60D6AF2-0EAA-5693-982B-B0B531E22862"><!-- --></a><p>Enhanced Data Rate for
GSM Evolution (EDGE 2.75G or 3G – depends on the modulation scheme) </p>
 </li>

<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-07D37BB9-2BBE-5C22-9D5C-A3477F73E766"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-07D37BB9-2BBE-5C22-9D5C-A3477F73E766"><!-- --></a><p>Universal Mobile Telecommunications
System (UMTS 3G) </p>
 </li>

<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-1677511B-C52E-5E4D-8657-075468587E97"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-1677511B-C52E-5E4D-8657-075468587E97"><!-- --></a><p>High-Speed Downlink
Packet Access (HSDPA 3G) </p>
 </li>

<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-DF4013BE-A1DE-5ECA-9124-2376924345C8"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-DF4013BE-A1DE-5ECA-9124-2376924345C8"><!-- --></a><p>WLAN </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-E1123CF2-EA87-5F18-8F3C-3FD98DD6ABE8"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-E1123CF2-EA87-5F18-8F3C-3FD98DD6ABE8"><!-- --></a><h2 class="sectiontitle">Lookup table</h2> <p>The
lookup table contains the entries of TCP receive window size for each bearer
type. To set the TCP receive window size for bearer, licensees must override
the <a href="GUID-5AC853D0-31FB-3944-8769-A59977F616B0.html"><span class="apiname">SetTcpWin()</span></a> function. The licensees can define their
own TCP window lookup table and set the TCP receive window size for a bearer. </p>
 <p>Symbian
uses the following lookup table for testing purpose. The licensees can replace
the TCP receive window size with their own values: </p>
 
<div class="tablenoborder"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-0697063E-F323-5824-9775-FE4413399697"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-0697063E-F323-5824-9775-FE4413399697" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p> <strong>Bearer or Modulation</strong>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <strong>TCP receive window size</strong>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>GPRS </p>
 </td>

<td class="cellrowborder" valign="top"><p>12240 – 17520 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>EDGE </p>
 </td>

<td class="cellrowborder" valign="top"><p>21760 – 49640 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>UMTS </p>
 </td>

<td class="cellrowborder" valign="top"><p>29920 – 33580 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>HSDPA </p>
 </td>

<td class="cellrowborder" valign="top"><p>65535 or greater </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>WLAN </p>
 </td>

<td class="cellrowborder" valign="top"><p>65535 or greater </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>Ethernet </p>
 </td>

<td class="cellrowborder" valign="top"><p>65335 </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p> </p>
 </div>

<div class="section" id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-6A97BEE5-8236-40A3-899B-6A4173D51C97"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-6A97BEE5-8236-40A3-899B-6A4173D51C97"><!-- --></a><h2 class="sectiontitle">Handling TCP receive window in TCP/IP stack</h2> <p>The
following are the scenarios to handle the TCP receive window: </p>
 <ul>
<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-2E1E9EC2-F481-54AE-A648-D9EC50EF77C4"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-2E1E9EC2-F481-54AE-A648-D9EC50EF77C4"><!-- --></a><p>Increase window size
- Change in the bearer increases the window size. </p>
 </li>

<li id="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-B6C3EC7E-E0A0-521C-8830-4FDB27B409B8"><a name="GUID-8A678AE5-A133-58EA-A4DD-B5BFC94D3AEA__GUID-B6C3EC7E-E0A0-521C-8830-4FDB27B409B8"><!-- --></a><p>Decrease window size
- Change in the bearer decreases the window size till it reaches the appropriate
size for the new bearer. </p>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-D5987006-A871-5F4E-AEA0-5A3B092D996A.html" title="This section provides the summary of concepts and tutorials related to variable TCP receive window.">Variable TCP Receive Window</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-6822E7FA-D055-5693-8872-8D0E8554A734.html" title="How to configure the TCP receive window.">Configuring
TCP Receive                 Window</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>