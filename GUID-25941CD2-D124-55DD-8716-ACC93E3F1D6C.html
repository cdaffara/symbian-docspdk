<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Bootstrap Source Macros"/>
<meta name="abstract" content="Describes the macros used in source files."/>
<meta name="description" content="Describes the macros used in source files."/>
<meta name="DC.Relation" scheme="URI" content="GUID-20F8DA2A-9157-54C5-97D0-4CCA50AB0631.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-53944506-5CA2-52BA-8D5A-9EE72092612B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-20F8DA2A-9157-54C5-97D0-4CCA50AB0631.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Bootstrap Source Macros</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2387855 id2387957 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-53944506-5CA2-52BA-8D5A-9EE72092612B.html" title="Describes what is the bootstrap and how to implement it for a specific platform.">Bootstrap</a> &gt; <a href="GUID-20F8DA2A-9157-54C5-97D0-4CCA50AB0631.html" title="This section describes the macros that can be used in the Bootstrap.">Reference</a> &gt; </div>
<h1 class="topictitle1">Bootstrap Source Macros</h1>
<div><p>Describes the macros used in source files.</p>

<p>This set of macros is available for use in source files, but not in platform
specific configuration header files. Their definitions are obtained by including <span class="filepath">os/kernelhwsrv/kernel/eka/include/kernel/arm/bootcpu.inc</span>. </p>

<div class="section" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B4783B78-8320-5315-B88D-40BCC8FDF64B"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B4783B78-8320-5315-B88D-40BCC8FDF64B"><!-- --></a><h2 class="sectiontitle">General macros</h2> <p><strong>GETCPSR</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-DE99B191-1C2F-5843-B6FC-776996CDB238"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-DE99B191-1C2F-5843-B6FC-776996CDB238"><!-- --></a>GETCPSR    reg</pre>
<p>Reads
the CPSR into the specified ARM general register <samp class="codeph">reg</samp>. </p>
<p>This
macro should be used in preference to MRS instructions to avoid problems related
to syntax incompatibility between different assembler versions. </p>
 <p><strong>CGETCPSR</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7F37007A-9407-5BBA-B42A-DB447B32F4A6"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7F37007A-9407-5BBA-B42A-DB447B32F4A6"><!-- --></a>CGETCPSR reg, cc</pre>
<p>Reads
the CPSR into the specified ARM general register <samp class="codeph">reg</samp>. This
is conditionally executed using <samp class="codeph">cc</samp> as the execution condition. </p>
<p>This
macro should be used in preference to MRS instructions to avoid problems related
to syntax incompatibility between different assembler versions. </p>
 <p><strong>GETSPSR</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-8636F4DC-EE5F-5121-A397-4AD5B66EB4A4"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-8636F4DC-EE5F-5121-A397-4AD5B66EB4A4"><!-- --></a>GETSPSR    reg</pre>
<p>Reads
the SPSR into the specified ARM general register <samp class="codeph">reg</samp>. </p>
<p>This
macro should be used in preference to MRS instructions to avoid problems related
to syntax incompatibility between different assembler versions. </p>
 <p><strong>CGETSPSR</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-EA9861EC-AA09-5E52-9A84-D35DA301EE1E"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-EA9861EC-AA09-5E52-9A84-D35DA301EE1E"><!-- --></a>CGETSPSR reg, cc</pre>
<p>Reads
the SPSR into the specified ARM general register <samp class="codeph">reg</samp>. This
is conditionally executed using <samp class="codeph">cc</samp> as the execution condition. </p>
<p>This
macro should be used in preference to MRS instructions to avoid problems related
to syntax incompatibility between different assembler versions. </p>
 <p><strong>SETCPSR</strong> </p>
 <pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-5AC38C91-DF6D-5842-B669-7D54D9E1C580"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-5AC38C91-DF6D-5842-B669-7D54D9E1C580"><!-- --></a>SETCPSR    reg</pre>
 <p>Writes
the entire (all 32 bits) CPSR from the specified ARM general register <samp class="codeph">reg</samp>.</p>
<p>This
macro should be used in preference to MRS instructions to avoid problems related
to syntax incompatibility between different assembler versions. </p>
 <p><strong>CSETCPSR</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B2ED96F7-0985-5673-8D22-5E036F73B308"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B2ED96F7-0985-5673-8D22-5E036F73B308"><!-- --></a>CSETCPSR reg, cc</pre>
<p>Writes
the entire (all 32 bits) CPSR from the specified ARM general register <samp class="codeph">reg</samp>.
This is conditionally executed using <samp class="codeph">cc</samp> as the execution
condition. </p>
<p>This macro should be used in preference to MRS instructions
to avoid problems related to syntax incompatibility between different assembler
versions. </p>
 <p><strong>SETSPSR</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-A5DA9C4A-1D08-5CCE-B507-25E778B80A2D"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-A5DA9C4A-1D08-5CCE-B507-25E778B80A2D"><!-- --></a>SETSPSR    reg</pre>
<p>Writes
the entire (all 32 bits) SPSR from the specified ARM general register <samp class="codeph">reg</samp>. </p>
<p>This
macro should be used in preference to MRS instructions to avoid problems related
to syntax incompatibility between different assembler versions. </p>
 <p><strong>CSETSPSR</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-94F1C1A0-92E1-5F7D-B49A-A283303D10BC"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-94F1C1A0-92E1-5F7D-B49A-A283303D10BC"><!-- --></a>CSETSPSR reg, cc</pre>
<p>Writes
the entire (all 32 bits) SPSR from the specified ARM general register <samp class="codeph">reg</samp>.
This is conditionally executed using <samp class="codeph">cc</samp> as the execution
condition. </p>
<p>This macro should be used in preference to MRS instructions
to avoid problems related to syntax incompatibility between different assembler
versions. </p>
 <p><strong>BOOTCALL</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-EDAA1A5D-8067-5754-8FED-2B0C5E68F687"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-EDAA1A5D-8067-5754-8FED-2B0C5E68F687"><!-- --></a>BOOTCALL call_numbe</pre>
<p>Calls
the specified function via the boot table. <samp class="codeph">call_number</samp> should
be one of the <samp class="codeph">BTF_*</samp> values in the <samp class="codeph">TBootTableEntry</samp> enumeration,
defined in <span class="filepath">os/kernelhwsrv/kernel/eka/include/kernel/arm/bootdefs.h</span>. </p>
<p>The
macro is transparent; the function is entered with all registers and flags
having the same values as immediately before the macro. </p>
 <p><strong>GETPARAM</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-3A25AFEF-8195-555B-B328-4BA1A8988D1F"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-3A25AFEF-8195-555B-B328-4BA1A8988D1F"><!-- --></a>GETPARAM pnum, default</pre>
<p>Retrieves
the parameter with number <samp class="codeph">pnum</samp> from the boot parameter table,
and returns its value in <samp class="codeph">R0</samp>. If the parameter is not present
in the table, then <samp class="codeph">R0</samp> is loaded with value <samp class="codeph">default</samp>. </p>
<p>See
the description of <a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html#GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE__GUID-4DEA1D4C-EC7B-5F9A-A293-A7F80899044B">BTF_Params</a> for
more information on the boot parameter table. </p>
 <p><strong>GETMPARAM</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-5DA2A8EA-6D2E-5ECD-80B9-FDD1CDEE1797"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-5DA2A8EA-6D2E-5ECD-80B9-FDD1CDEE1797"><!-- --></a>GETMPARAM pnum</pre>
<p>Retrieves
the parameter with number <samp class="codeph">pnum</samp> from the boot parameter table,
and returns its value in <samp class="codeph">R0</samp>. If the parameter is not present
in the table, then the macro faults the system. </p>
<p>See the description
of <a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html#GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE__GUID-4DEA1D4C-EC7B-5F9A-A293-A7F80899044B">BTF_Params</a> for
more information on the boot parameter table. </p>
 <p><strong>FAULT</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-8C551296-DAF8-57D3-9048-3B06387820AB"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-8C551296-DAF8-57D3-9048-3B06387820AB"><!-- --></a>FAULT cc</pre>
<p>Faults
the system if condition <samp class="codeph">cc</samp> is true. The condition is a standard
ARM condition code. </p>
 <p id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B5EC22B5-B995-5D54-8F33-1B6FCE11BB3F"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B5EC22B5-B995-5D54-8F33-1B6FCE11BB3F"><!-- --></a><strong>BTP_ENTRY</strong></p>
 <p>Declares
MMU permissions and cache attributes. The macro takes a variable number of
arguments depending on the processor in use. </p>
<p>For ARM architecture 6
CPUs: </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7CD2FE06-23C4-569A-AFBB-D62BE8CE2CC9"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7CD2FE06-23C4-569A-AFBB-D62BE8CE2CC9"><!-- --></a>BTP_ENTRY $domain, $perm, $cache, $execute, $global, $P, $S</pre>
 <p>For
XScale CPUs: </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-1E6704C5-AABA-51E3-8C6B-233E6A188829"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-1E6704C5-AABA-51E3-8C6B-233E6A188829"><!-- --></a>BTP_ENTRY $domain, $perm, $cache, $P</pre>
 <p>For
other CPUs: </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-1D95F820-E5FC-5A95-B4D7-051F9A5DD70C"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-1D95F820-E5FC-5A95-B4D7-051F9A5DD70C"><!-- --></a>BTP_ENTRY $domain, $perm, $cache</pre>
 
<div class="tablenoborder"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-99F49C22-9194-565E-8C8A-F4D864311A8B"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-99F49C22-9194-565E-8C8A-F4D864311A8B" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p>$domain </p>
 </td>

<td class="cellrowborder" valign="top"><p>ARM domain number 0-15. In general only one memory-model-dependent
value is used here and the symbol <samp class="codeph">CLIENT_DOMAIN</samp> specifies
this. </p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>$perm </p>
 </td>

<td class="cellrowborder" valign="top"><p>Permissions for mapping. </p>
<p>For architecture 6 CPUs, use one
of <samp class="codeph">PERM_NONO</samp>, <samp class="codeph">PERM_RWNO</samp>, <samp class="codeph">PERM_RWRO</samp>, <samp class="codeph">PERM_RWRW</samp>, <samp class="codeph">PERM_RONO</samp>, <samp class="codeph">PERM_RORO</samp>. </p>
<p>For other CPUs, use one of <samp class="codeph">PERM_RORO</samp>, <samp class="codeph">PERM_RWNO</samp>, <samp class="codeph">PERM_RWRO</samp>, <samp class="codeph">PERM_RWRW</samp>. </p>
<p>In each of these names the first pair of letters
refers to supervisor, and the second pair to user access, so <samp class="codeph">PERM_RWNO</samp> means
supervisor read/write, user no access. </p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>$cache </p>
 </td>

<td class="cellrowborder" valign="top"><p>Cache attributes for mapping. These are processor dependent - see
the <samp class="codeph">CACHE_*</samp> macros in <span class="filepath">os/kernelhwsrv/kernel/eka/include/kernel/arm/bootcpu.inc</span>. </p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>$execute </p>
 </td>

<td class="cellrowborder" valign="top"><p>ARM architecture 6 only. Determines whether code can be executed
from the mapped region; either <samp class="codeph">BTPERM_EXECUTE</samp> or <samp class="codeph">BTPERM_NO_EXECUTE</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>$global </p>
 </td>

<td class="cellrowborder" valign="top"><p>ARM architecture 6 only. Determines whether the mapped region is
ASID specific (local) or non-ASID specific (global); either <samp class="codeph">BTPERM_LOCAL</samp> or <samp class="codeph">BTPERM_GLOBAL</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>$P </p>
 </td>

<td class="cellrowborder" valign="top"><p>ARM architecture 6 and XScale only. Determines whether or not ECC
should be used on the mapped region (assuming hardware supports ECC); either <samp class="codeph">BTPERM_ECC</samp> or <samp class="codeph">BTPERM_NON_ECC</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>$S </p>
 </td>

<td class="cellrowborder" valign="top"><p>ARM architecture 6 only. Determines whether the mapped region is
shared between multiple CPUs or not; either <samp class="codeph">BTPERM_SHARED</samp> or <samp class="codeph">BTPERM_NON_SHARED</samp>. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7361BC74-7164-52EE-9A5B-D254560D1939"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7361BC74-7164-52EE-9A5B-D254560D1939"><!-- --></a><strong>ROM_BANK</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7685BA97-8DC4-537C-AEBC-110AB0981DD0"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7685BA97-8DC4-537C-AEBC-110AB0981DD0"><!-- --></a>ROM_BANK PHYS, SIZE, LIN, WIDTH, TYPE, RAND, SEQ</pre>
<p>Declares
an XIP ROM bank entry. </p>
 
<div class="tablenoborder"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-F701B695-A499-57E0-97B6-7C5701E09F77"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-F701B695-A499-57E0-97B6-7C5701E09F77" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p>PHYS </p>
 </td>

<td class="cellrowborder" valign="top"><p>The physical base address of the ROM bank. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>SIZE </p>
 </td>

<td class="cellrowborder" valign="top"><p>The size of the ROM bank. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>LIN </p>
 </td>

<td class="cellrowborder" valign="top"><p>Linear address override (usually 0). </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>WIDTH </p>
 </td>

<td class="cellrowborder" valign="top"><p>Bus width. One of: <samp class="codeph">ROM_WIDTH_8</samp>, <samp class="codeph">ROM_WIDTH_16</samp> or <samp class="codeph">ROM_WIDTH_32</samp>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>TYPE </p>
 </td>

<td class="cellrowborder" valign="top"><p>The ROM type; see the <a href="GUID-C1232A34-6E4C-3AAF-8E97-8BA2303B9508.html"><span class="apiname">TRomType</span></a> enumeration. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>RAND </p>
 </td>

<td class="cellrowborder" valign="top"><p>Random access speed. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>SEQ </p>
 </td>

<td class="cellrowborder" valign="top"><p>Sequential access speed. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>See also <a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html#GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE__GUID-52792290-48DA-5F1A-A7AD-0105A8AA37CF">BTF_RomBanks</a> in <a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html" title="Describes how to implement the functions that the bootstrap implementation must provide.">Boot Table Functions</a>. </p>
 </div>

<div class="section" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7728C7F2-BB04-518B-8B0A-752CB799A561"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7728C7F2-BB04-518B-8B0A-752CB799A561"><!-- --></a><h2 class="sectiontitle">Macros for
declaring I/O mappings</h2> <p id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-13254CB0-3659-5338-A3C2-1277F6869CA7"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-13254CB0-3659-5338-A3C2-1277F6869CA7"><!-- --></a><strong>HW_MAPPING</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-5A4745F8-8B21-593B-85AF-4C56D7DA7075"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-5A4745F8-8B21-593B-85AF-4C56D7DA7075"><!-- --></a>HW_MAPPING PHYS,SIZE,MULT</pre>
<p>Defines
an I/O mapping using the standard permissions and cache attributes for I/O
mappings, i.e. those defined for the <samp class="codeph">BTP_Hw</samp> boot table entry.
See <a href="GUID-C92CC81A-35A1-5860-AA08-C8C08B39804C.html" title="Lists MMU attributes that the bootstrap implementation must provide.">Boot Table MMU
Permission and Cache Attribute Definitions</a>. </p>
 
<div class="tablenoborder"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-9B975DEB-0D16-5DEE-8E11-7109E052D409"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-9B975DEB-0D16-5DEE-8E11-7109E052D409" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p>PHYS </p>
 </td>

<td class="cellrowborder" valign="top"><p>Physical base address. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>SIZE </p>
 </td>

<td class="cellrowborder" valign="top"><p>Size of the mapping. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>MULT </p>
 </td>

<td class="cellrowborder" valign="top"><p> <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B13C34B2-69E5-51A2-8807-5576FD091C34">Granularity
of the I/O mapping</a> (below). </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>See also: </p>
<ul>
<li id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-75387946-50A1-5D24-A5C4-4AED7954ACAF"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-75387946-50A1-5D24-A5C4-4AED7954ACAF"><!-- --></a><p><a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-20A2344A-1BE2-5AFD-BC37-997F08E2A28C">Determining the linear address</a> (below). </p>
 </li>

<li id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-2DD01E2F-841B-5242-9757-A48F6036AE6A"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-2DD01E2F-841B-5242-9757-A48F6036AE6A"><!-- --></a><p><a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html#GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE__GUID-62CD8D6F-6E12-5DFC-85BC-EA24000BA588">BTF_HwBanks</a> in <a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html" title="Describes how to implement the functions that the bootstrap implementation must provide.">Boot
Table Functions</a>. </p>
</li>

</ul>
 <p id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-EF703014-E498-5623-ACC6-8E3E9882C681"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-EF703014-E498-5623-ACC6-8E3E9882C681"><!-- --></a><strong>HW_MAPPING_EXT</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-EEAFCF55-9C2F-5EE6-9A37-287772F4BCF4"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-EEAFCF55-9C2F-5EE6-9A37-287772F4BCF4"><!-- --></a>HW_MAPPING_EXT    PHYS,SIZE,MULT</pre>
<p>Defines
an I/O mapping using the permissions and cache attributes defined by a <samp class="codeph">BTP_ENTRY</samp> macro
that immediately follows this macro. See <a href="GUID-C92CC81A-35A1-5860-AA08-C8C08B39804C.html" title="Lists MMU attributes that the bootstrap implementation must provide.">Boot
Table MMU Permission and Cache Attribute Definitions</a>. </p>

<div class="tablenoborder"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-8186D7BA-30AC-5A3A-BF25-6AB6984B0A45"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-8186D7BA-30AC-5A3A-BF25-6AB6984B0A45" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p>PHYS </p>
 </td>

<td class="cellrowborder" valign="top"><p>Physical base address. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>SIZE </p>
 </td>

<td class="cellrowborder" valign="top"><p>Size of the mapping. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>MULT </p>
 </td>

<td class="cellrowborder" valign="top"><p> <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B13C34B2-69E5-51A2-8807-5576FD091C34">Granularity
of the I/O mapping</a> (below). </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>See also: </p>
 <ul>
<li id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-460D2F0F-F42B-58CD-910B-5DEEE210F061"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-460D2F0F-F42B-58CD-910B-5DEEE210F061"><!-- --></a><p> <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-20A2344A-1BE2-5AFD-BC37-997F08E2A28C">Determining the linear address</a> (below). </p>
 </li>

<li id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-D13EB05F-E447-51EA-BF15-0AA3870BE101"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-D13EB05F-E447-51EA-BF15-0AA3870BE101"><!-- --></a><p><a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html#GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE__GUID-62CD8D6F-6E12-5DFC-85BC-EA24000BA588">BTF_HwBanks</a> in <a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html" title="Describes how to implement the functions that the bootstrap implementation must provide.">Boot
Table Functions</a>. </p>
 </li>

</ul>
 <p id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7402DE22-6CB9-5236-BA3B-99D6CE40A381"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7402DE22-6CB9-5236-BA3B-99D6CE40A381"><!-- --></a><strong>HW_MAPPING_EXT2</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-6F0B0F0D-CBE6-5320-9F51-39388B4181E6"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-6F0B0F0D-CBE6-5320-9F51-39388B4181E6"><!-- --></a>HW_MAPPING_EXT2    PHYS,SIZE,MULT,LIN</pre>
<p>Defines
an I/O mapping using the standard permissions and cache attributes for I/O
mappings, i.e. those defined for the <samp class="codeph">BTP_Hw</samp> boot table entry.
See <a href="GUID-C92CC81A-35A1-5860-AA08-C8C08B39804C.html" title="Lists MMU attributes that the bootstrap implementation must provide.">Boot Table MMU
Permission and Cache Attribute Definitions</a>. </p>
 
<div class="tablenoborder"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-55243AD3-DF9F-5D9D-9549-35F577C20E83"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-55243AD3-DF9F-5D9D-9549-35F577C20E83" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p>PHYS </p>
 </td>

<td class="cellrowborder" valign="top"><p>Physical base address. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>SIZE </p>
 </td>

<td class="cellrowborder" valign="top"><p>Size of the mapping. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>MULT </p>
 </td>

<td class="cellrowborder" valign="top"><p> <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B13C34B2-69E5-51A2-8807-5576FD091C34">Granularity
of the I/O mapping</a> (below). </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>LIN </p>
 </td>

<td class="cellrowborder" valign="top"><p>Linear address. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>See also <a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html#GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE__GUID-62CD8D6F-6E12-5DFC-85BC-EA24000BA588">BTF_HwBanks</a> in <a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html" title="Describes how to implement the functions that the bootstrap implementation must provide.">Boot Table Functions</a>. </p>
 <p id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-9F79FF06-C8E8-599A-875A-D772FB6E8862"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-9F79FF06-C8E8-599A-875A-D772FB6E8862"><!-- --></a><strong>HW_MAPPING_EXT3</strong> </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-C1948F05-F4C7-5DCC-A266-0489F5A0BC00"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-C1948F05-F4C7-5DCC-A266-0489F5A0BC00"><!-- --></a>HW_MAPPING_EXT3 PHYS,SIZE,MULT,LIN</pre>
<p>Defines
an I/O mapping using the permissions and cache attributes defined by a <samp class="codeph">BTP_ENTRY</samp> macro
that immediately follows this macro. See <a href="GUID-C92CC81A-35A1-5860-AA08-C8C08B39804C.html" title="Lists MMU attributes that the bootstrap implementation must provide.">Boot
Table MMU Permission and Cache Attribute Definitions</a>. </p>
 
<div class="tablenoborder"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-D7252A3A-F7ED-5A78-94B2-B736AC61046E"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-D7252A3A-F7ED-5A78-94B2-B736AC61046E" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p>PHYS </p>
 </td>

<td class="cellrowborder" valign="top"><p>Physical base address. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>SIZE </p>
 </td>

<td class="cellrowborder" valign="top"><p>Size of the mapping. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>MULT </p>
 </td>

<td class="cellrowborder" valign="top"><p> <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B13C34B2-69E5-51A2-8807-5576FD091C34">Granularity
of the I/O mapping</a> (below). </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>LIN </p>
 </td>

<td class="cellrowborder" valign="top"><p>Linear address. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>See also <a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html#GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE__GUID-62CD8D6F-6E12-5DFC-85BC-EA24000BA588">BTF_HwBanks</a> in <a href="GUID-B3F6FC45-3BF0-5F92-8325-44C705BA47AE.html" title="Describes how to implement the functions that the bootstrap implementation must provide.">Boot Table Functions</a>.. </p>
 <p id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B13C34B2-69E5-51A2-8807-5576FD091C34"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-B13C34B2-69E5-51A2-8807-5576FD091C34"><!-- --></a><strong>Granularity of the I/O mapping</strong> </p>
 <p>The
granularity of the I/O mapping is defined by the <samp class="codeph">MULT</samp> parameter
of the I/O mapping macros: <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-13254CB0-3659-5338-A3C2-1277F6869CA7">HW_MAPPING</a>, <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-EF703014-E498-5623-ACC6-8E3E9882C681">HW_MAPPING_EXT</a>, <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-7402DE22-6CB9-5236-BA3B-99D6CE40A381">HW_MAPPING_EXT2</a> and <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-9F79FF06-C8E8-599A-875A-D772FB6E8862">HW_MAPPING_EXT3</a>. </p>
 <p>The <samp class="codeph">MULT</samp> parameter specifies the granularity of the mapping. It takes one of the
following values: </p>
 <ul>
<li id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-AA1B0CD5-6336-5C02-AF02-562AB4A44FA3"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-AA1B0CD5-6336-5C02-AF02-562AB4A44FA3"><!-- --></a><p> <samp class="codeph">HW_MULT_4K</samp> use
4K pages. The <samp class="codeph">PHYS</samp> and <samp class="codeph">LIN</samp> parameters must
be multiples of 4K. </p>
 </li>

<li id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-15DC0CE0-B90C-500C-90FD-F750F61F509B"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-15DC0CE0-B90C-500C-90FD-F750F61F509B"><!-- --></a><p> <samp class="codeph">HW_MULT_64K</samp> use
64K pages. The <samp class="codeph">PHYS</samp> and <samp class="codeph">LIN</samp> parameters must
be multiples of 64K. </p>
 </li>

<li id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-DE644971-8E56-5921-85BD-BC79AAD66C49"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-DE644971-8E56-5921-85BD-BC79AAD66C49"><!-- --></a><p> <samp class="codeph">HW_MULT_1M</samp> use
1M sections. The <samp class="codeph">PHYS</samp> and <samp class="codeph">LIN</samp> parameters
must be multiples of 1M. </p>
 </li>

</ul>
 <p>In each case the unit in which the <samp class="codeph">SIZE</samp> parameter
is specified is <samp class="codeph">MULT</samp>, that is to say the actual mapping size
in bytes is <samp class="codeph">SIZE*MULT</samp>. For example: </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-5B389113-F6DB-5011-8B59-93F599519E94"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-5B389113-F6DB-5011-8B59-93F599519E94"><!-- --></a>HW_MAPPING    0x80000000, 1, HW_MULT_4K
HW_MAPPING    0x80010000, 3, HW_MULT_64K</pre>
<p>declares a mapping
of size 4K starting at physical address <samp class="codeph">0x80000000</samp> followed
by a mapping of 192K in 64K pages starting at physical address <samp class="codeph">0x80010000</samp>. </p>
 <p id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-20A2344A-1BE2-5AFD-BC37-997F08E2A28C"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-20A2344A-1BE2-5AFD-BC37-997F08E2A28C"><!-- --></a><strong>Determining the linear address</strong> </p>
 <p>For
those macros that don't specify a linear address: <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-13254CB0-3659-5338-A3C2-1277F6869CA7">HW_MAPPING</a> and <a href="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C.html#GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-EF703014-E498-5623-ACC6-8E3E9882C681">HW_MAPPING_EXT</a>,
it is determined as follows: </p>
 <ul>
<li id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-37DB1D7B-0D4B-5E3C-9E7F-F195D7A1B95C"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-37DB1D7B-0D4B-5E3C-9E7F-F195D7A1B95C"><!-- --></a><p>On the direct memory
model, it is equal to the physical address. </p>
 </li>

<li id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-77168F6C-3B11-5B32-AEF1-B77046A0EC78"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-77168F6C-3B11-5B32-AEF1-B77046A0EC78"><!-- --></a><p>On the moving memory
model and the multiple memory model, the first such mapping is placed at <samp class="codeph">KPrimaryIOBase</samp> (<samp class="codeph">0x63000000</samp> on
the moving model, <samp class="codeph">0xC3000000</samp> on the multiple model). Each
mapping first rounds the linear address counter up to the next multiple of <samp class="codeph">MULT</samp> before
making the mapping, then increments it by <samp class="codeph">SIZE*MULT</samp> after
making it. </p>
 </li>

</ul>
 <p>For example, on the moving memory model, the following mappings would
have linear addresses <samp class="codeph">0x63000000</samp>, <samp class="codeph">0x63002000</samp>, <samp class="codeph">0x63010000</samp>, <samp class="codeph">0x63020000</samp> and <samp class="codeph">0x63100000</samp> respectively: </p>
<pre class="codeblock" id="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-529F87FB-7DD6-521F-8397-667C710843E2"><a name="GUID-25941CD2-D124-55DD-8716-ACC93E3F1D6C__GUID-529F87FB-7DD6-521F-8397-667C710843E2"><!-- --></a>HW_MAPPING    0x80000000, 2, HW_MULT_4K
HW_MAPPING    0x80010000, 1, HW_MULT_4K
HW_MAPPING    0x80100000, 1, HW_MULT_64K
HW_MAPPING    0x80200000, 1, HW_MULT_4K
HW_MAPPING    0x90000000, 1, HW_MULT_1M</pre>
 <p>For the direct memory
model, all I/O mappings required by the system must be listed here since it
is not possible to make further mappings once the kernel is running. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-20F8DA2A-9157-54C5-97D0-4CCA50AB0631.html" title="This section describes the macros that can be used in the Bootstrap.">Reference</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>