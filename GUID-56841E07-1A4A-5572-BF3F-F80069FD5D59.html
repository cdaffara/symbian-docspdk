<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="How to start active objects"/>
<meta name="abstract" content="This document describes how to start active objects."/>
<meta name="description" content="This document describes how to start active objects."/>
<meta name="DC.Relation" scheme="URI" content="GUID-C2608BF5-CDA7-530A-B67A-0414C7FA585D.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3786D8E6-17A9-52E4-A8DF-CFCDC3039854.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B507490F-6BD3-5DF5-97E4-EFDFEA2B4EDD.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C2608BF5-CDA7-530A-B67A-0414C7FA585D.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>How to start active objects</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59"><a name="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2392081 id2393224 id2393257 id2393330 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" title="The User Library allows the applications and services that run on a phone to access the functionality provided by the Symbian platform Kernel.">User Library</a> &gt; <a href="GUID-3786D8E6-17A9-52E4-A8DF-CFCDC3039854.html">Inter Process Communication</a> &gt; <a href="GUID-B507490F-6BD3-5DF5-97E4-EFDFEA2B4EDD.html">Using Asynchronous Programming</a> &gt; <a href="GUID-C2608BF5-CDA7-530A-B67A-0414C7FA585D.html">High Level Asynchronous Service Handling</a> &gt; </div>
<h1 class="topictitle1">How
to start active objects</h1>
<div><p>This document describes how to start active objects.</p>

<p>The following example code shows how active objects are started. While
the example shows the creation of an active scheduler, in UI applications,
an active scheduler is always provided. </p>

<ul>
<li id="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-4E857369-075A-5337-9152-0475DE0D41E9"><a name="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-4E857369-075A-5337-9152-0475DE0D41E9"><!-- --></a><p>Create an instance of
the active scheduler, <samp class="codeph">exampleScheduler</samp>. This is an instance
of a class derived from <a href="GUID-B4C76104-EA1B-3FC3-A31E-86A976598171.html"><span class="apiname">CActiveScheduler</span></a> and provides an <samp class="codeph">Error()</samp> function
to handle leaves occurring in the active object <samp class="codeph">RunL()</samp> function(s). </p>
 </li>

<li id="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-857D957B-E5C5-5C37-BEEA-F10B42B208B5"><a name="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-857D957B-E5C5-5C37-BEEA-F10B42B208B5"><!-- --></a><p>Push <samp class="codeph">exampleScheduler</samp> onto
the cleanup stack and install as the current active scheduler. </p>
 </li>

<li id="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-38C2AC92-6DFF-50A1-BE24-163ABBCD66BA"><a name="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-38C2AC92-6DFF-50A1-BE24-163ABBCD66BA"><!-- --></a><p>Create an active object, <samp class="codeph">myActiveObject</samp>,
and pass a pointer to the service provider as the parameter. Note that often,
the service provider may be constructed as part of the active object's own
construction processing. </p>
 </li>

<li id="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-2C390F94-0AF5-585C-BAB4-A8142DF87F56"><a name="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-2C390F94-0AF5-585C-BAB4-A8142DF87F56"><!-- --></a><p>Issue a request using <samp class="codeph">IssueRequest()</samp>. </p>
 </li>

<li id="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-A39EB27D-91AE-5932-ADCE-7E75ECCB042F"><a name="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-A39EB27D-91AE-5932-ADCE-7E75ECCB042F"><!-- --></a><p>Use <samp class="codeph">CActiveScheduler::Start()</samp> to
start the active scheduler’s wait loop. At least one outstanding request is
necessary before the wait loop is started, otherwise the thread hangs. All
further request issuing and servicing occurs within this function. The wait
loop continues until one of the active objects’ <samp class="codeph">RunL()</samp> requests
termination using <samp class="codeph">CActiveScheduler::Stop()</samp>. </p>
 </li>

<li id="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-ADCBB62D-0A83-5D5B-915C-7F30D863943C"><a name="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-ADCBB62D-0A83-5D5B-915C-7F30D863943C"><!-- --></a><p>Pop the active object,
the active scheduler and the example service provider from the clean-up stack,
and destroy. The code assumes that the active object does not take ownership
of the <samp class="codeph">CExampleServiceProvider</samp> object and is not responsible
for its destruction. </p>
 </li>

</ul>

<pre class="codeblock" id="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-1895F4F4-0EDF-5ADC-B3D7-FC792719299C"><a name="GUID-56841E07-1A4A-5572-BF3F-F80069FD5D59__GUID-1895F4F4-0EDF-5ADC-B3D7-FC792719299C"><!-- --></a>LOCAL_C void doExampleL()
    {
        // Create and install the active scheduler
    CActiveScheduler* exampleScheduler=new (ELeave) CExampleScheduler;
    CleanupStack::PushL(exampleScheduler);
    CActiveScheduler::Install(exampleScheduler);

        // Create the service provider. Often, the
        // service provider is part of the active object
    CExampleServiceProvider* myServiceProvider=new (ELeave) CExampleServiceProvider;
    CleanupStack::PushL(myServiceProvider);

        // Create the active object and issue the
        // first asynchronous request
    CExampleActiveObject * myActiveObject=new (ELeave) CExampleActiveObject(myServiceProvider);
    CleanupStack::PushL(myActiveObject);
    myActiveObject-&gt;IssueRequest();

        // Now we can start the active scheduler
    CActiveScheduler::Start();

        // Remove the exampleScheduler and other
        // objects from cleanup stack and destroy them
    CleanupStack::PopAndDestroy(3);
    }</pre>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C2608BF5-CDA7-530A-B67A-0414C7FA585D.html">High Level Asynchronous Service Handling</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>