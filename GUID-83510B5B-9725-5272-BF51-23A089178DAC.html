<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="OpenWF Support Component Overview"/>
<meta name="abstract" content="The OpenWF Support component provides a Symbian-specific implementation of platform-specific elements of the OpenWF-C specification and abstracts communication between the OpenWF-C Engine and other Symbian graphics components."/>
<meta name="description" content="The OpenWF Support component provides a Symbian-specific implementation of platform-specific elements of the OpenWF-C specification and abstracts communication between the OpenWF-C Engine and other Symbian graphics components."/>
<meta name="DC.Relation" scheme="URI" content="GUID-8FE41C9A-8171-58A2-A808-17B81E79B11F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-63CB6C7E-44EC-5D0B-A37D-FE78F7D76592.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8FE41C9A-8171-58A2-A808-17B81E79B11F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8FE41C9A-8171-58A2-A808-17B81E79B11F.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-83510B5B-9725-5272-BF51-23A089178DAC"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>OpenWF Support Component Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-83510B5B-9725-5272-BF51-23A089178DAC"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2387228 id2387265 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-63CB6C7E-44EC-5D0B-A37D-FE78F7D76592.html" title="The Graphics Composition collection is a key part of ScreenPlay. The collection is made up of components that are concerned with composition. This is the process of putting together the output elements from various different sources to create the display that the viewer sees on the screen.">Graphics Composition Collection</a> &gt; <a href="GUID-8FE41C9A-8171-58A2-A808-17B81E79B11F.html" title="This section describes the OpenWF Composition (OpenWF-C) components. OpenWF-C is an open standard for layered graphics composition developed by the Khronos Group.">OpenWF Composition</a> &gt; </div>
<h1 class="topictitle1">OpenWF
Support Component Overview</h1>
<div><p>The OpenWF Support component provides a Symbian-specific implementation
of platform-specific elements of the OpenWF-C specification and abstracts
communication between the OpenWF-C Engine and other Symbian graphics components. </p>

<p><strong>Target audience</strong>: Device creators. </p>

<div class="section"><h2 class="sectiontitle">Purpose</h2> <p>The OpenWF Support component has two main
roles: </p>
 <ul>
<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-EC6A4858-054F-5BFD-9578-D978F85F3EFC"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-EC6A4858-054F-5BFD-9578-D978F85F3EFC"><!-- --></a><p> <strong>It provides an implementation
of OpenWF-C native stream</strong>.  </p>
 <p>OpenWF-C represents external
content as <strong>native stream</strong> sources and targets. Within OpenWF-C, native
streams are an adaptation feature. The OpenWF-C native stream is based on
an opaque handle (<a href="GUID-DF6DF530-EC4E-32D4-9CC8-536F3F2BE83E.html"><span class="apiname">WFCNativeStreamType</span></a>) and an API consisting
of a number of methods and properties on that handle. This allows the internal
details of content presented to OpenWF-C for composition to be mapped to the
operating environment. </p>
 <p>The Symbian <a href="GUID-55EF3CEB-AF3E-5A32-96F3-F146D1A06C8F.html" title="The Surface Manager is responsible for creating graphics composition surfaces (called surfaces) in system memory and controlling access to them.">Surface
Manager</a> and <a href="GUID-8E8FE99A-5F4D-5B0F-87AB-A58EB4BEB6E9.html" title="Each graphics composition surface has at least two interested stakeholders: the process responsible for drawing and maintaining the content and the composition engine, which uses the surface for creating the display. When one of the stakeholders does something to the surface, it usually means that another stakeholder needs to do something too. The Surface Update component provides a channel for the stakeholders to inform each other of changes.">Surface
Update Server</a> components represent external content as <a href="GUID-ADA8CECB-0E70-5B9C-8F36-0714AAF0CD13.html" title="This topic provides an introduction to graphics composition surfaces, which are usually simply called surfaces. Surfaces are pixel buffers that have associated metadata describing the width, height, stride and pixel format and are used as input to the composition components. Surfaces can be multi-buffered and are identified by a 128-bit identifier (called the surface ID).">composition
surfaces</a>, which are identified by the surface ID (<a href="GUID-11F60AEB-003B-3E8D-BDB9-D97F698627DF.html"><span class="apiname">TSurfaceId</span></a>).
The Symbian OpenWF Support component provides an implementation of native
stream, called <a href="GUID-A99521F3-CA4E-3ED6-9824-3FC40274FC95.html"><span class="apiname">SymbianStream</span></a>, in terms of composition surfaces. </p>
 <p>The
Symbian stream API is based on exported C functions in order to simplify integration
with OpenWF-C implementations. Most of the functions create, or take as a
parameter, a handle to a native stream, <samp class="codeph">typedef                 SymbianStreamType</samp>. </p>
 <p>The
API is intended to operate in the callerâ€™s thread, but is multi-threading-safe.
However, many of the operations perform memory allocation and therefore require
that the client threads present a consistent default heap. This restriction
has performance benefits and does not add an overhead to production use-cases.
However, it complicates test scenarios. </p>
 <p>Calling threads must have
the Cleanup Stack enabled. </p>
 </li>

<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-9F54BE47-7117-5E41-BA10-52AA9A41D29F"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-9F54BE47-7117-5E41-BA10-52AA9A41D29F"><!-- --></a><p> <strong>It repackages the
Surface Update Server API for use by OpenWF-C implementations</strong>.  </p>
 <p>The
OpenWF Support component interfaces with the Surface Update Server using a
C++ update proxy class that implements the <a href="GUID-229099A4-EE8A-3EA7-8AA3-74ACE34ED1CD.html"><span class="apiname">MCompositionSurfaceUpdate</span></a> interface,
which is specified by the Surface Update Server component. </p>
 <p>The native
stream implementation supports the Surface Update Server API and re-packages
it for use by OpenWF-C engines. </p>
 <p>Registration with the Surface Update
Server is initiated by the OpenWF Support C API method <a href="GUID-29F53A6A-531D-32A8-8983-BAF2A772BBA6.html"><span class="apiname">SymbianStreamRegisterScreenNotifications()</span></a>,
which calls <a href="GUID-9EE85F40-6F8D-3A1B-A841-E4B37F7A4C2F.html#GUID-9EE85F40-6F8D-3A1B-A841-E4B37F7A4C2F__GUID-2C66BB51-08F4-3AE8-8B98-29DC6CFBFD37"><span class="apiname">MSurfaceUpdateServerProvider::Register()</span></a>. </p>
 </li>

</ul>
 </div>

<div class="section"><h2 class="sectiontitle">Architectural relationships</h2> <p>The following diagram
provides a simplified view of key relationships between the OpenWF Support
component and other key graphics components. </p>
 <div class="fignone" id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-279EBD78-304F-5B1B-8F14-655193CAAC55"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-279EBD78-304F-5B1B-8F14-655193CAAC55"><!-- --></a><span class="figcap">Figure 1.               Key OpenWF-C Support component relationships        
   </span>

<img src="GUID-077B0CE8-FDC1-5BE9-B356-F8E545A0A53D_d0e280003_href.png"/>
</div>
 <p>The numbers in the diagram show the approximate sequence when a
rendering client creates a surface and renders into it. This assumes that
the OpenWF-C context has registered the screen with the Surface Update Server
during construction. </p>
 <a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-8EEFF849-DDA2-57C6-8CC3-8CE72A486619"><!-- --></a><ol id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-8EEFF849-DDA2-57C6-8CC3-8CE72A486619">
<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-62194273-69CC-5B78-82B2-CF08B9B1C6AE"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-62194273-69CC-5B78-82B2-CF08B9B1C6AE"><!-- --></a><p>The client application
calls <a href="GUID-733B8BFA-7BC2-3A6D-A66F-F788413D25A9.html#GUID-733B8BFA-7BC2-3A6D-A66F-F788413D25A9__GUID-2FA29D5C-134B-3635-A208-7187131D72EC"><span class="apiname">RSurfaceManager::CreateSurface()</span></a> to create the surface
to render into. </p>
</li>

<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-05D88651-5246-561A-903C-9FC783E3FD6A"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-05D88651-5246-561A-903C-9FC783E3FD6A"><!-- --></a><p>The client application
calls <a href="GUID-1460DD8F-9AA1-3B99-8FFD-F309959CCA34.html#GUID-1460DD8F-9AA1-3B99-8FFD-F309959CCA34__GUID-4EBFFA14-418A-3A2A-B147-39BFC96CE45F"><span class="apiname">RWindowBase::SetBackgroundSurface()</span></a> to attach the
surface to a window.</p>
 </li>

<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-98561E7C-580C-5EDA-BFD3-CA753DC9FF81"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-98561E7C-580C-5EDA-BFD3-CA753DC9FF81"><!-- --></a><p>The render stage casts
the address of the <a href="GUID-11F60AEB-003B-3E8D-BDB9-D97F698627DF.html"><span class="apiname">TSurfaceId</span></a> object to the OpenWF-C native
stream (<a href="GUID-DF6DF530-EC4E-32D4-9CC8-536F3F2BE83E.html"><span class="apiname">WFCNativeStreamType</span></a>). </p>
</li>

<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-654428EA-EDDE-5F3A-944D-0B9D7DEE9F69"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-654428EA-EDDE-5F3A-944D-0B9D7DEE9F69"><!-- --></a><p>The render stage calls
the OpenWF-C <a href="GUID-CFA99080-12D7-32A3-A36C-597EB05F66D1.html"><span class="apiname">wfcCreateSourceFromStream()</span></a> function to create
a source from the native stream.</p>
 </li>

<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-E3ED12BE-696F-5DC6-B5C6-63D2A4803249"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-E3ED12BE-696F-5DC6-B5C6-63D2A4803249"><!-- --></a><p>The OpenWF-C engine
creates an EGL sync object. </p>
</li>

<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-FEF314AA-52D1-57CB-B004-C2C46E4A44F2"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-FEF314AA-52D1-57CB-B004-C2C46E4A44F2"><!-- --></a><p>The client application
renders content to the surface and calls <a href="GUID-FAFD23EB-90EF-3F0C-BAB3-74FEC8DF0E06.html#GUID-FAFD23EB-90EF-3F0C-BAB3-74FEC8DF0E06__GUID-2B032364-97A0-31A1-A08C-6D8E8ACC16E1"><span class="apiname">RSurfaceUpdateSession::SubmitUpdate()</span></a>. </p>
</li>

<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-CD47D078-32B9-5AF0-854D-BAD839BE65E0"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-CD47D078-32B9-5AF0-854D-BAD839BE65E0"><!-- --></a><p>The Surface Update Server
calls <a href="GUID-229099A4-EE8A-3EA7-8AA3-74ACE34ED1CD.html#GUID-229099A4-EE8A-3EA7-8AA3-74ACE34ED1CD__GUID-64037182-167B-360C-B210-65B0861D4300"><span class="apiname">MCompositionSurfaceUpdate::ContentUpdated()</span></a> on the
proxy class. This signals the native stream that the content has been updated. </p>
</li>

<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-EF720A81-8A54-51D1-9061-13CB4EC23B43"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-EF720A81-8A54-51D1-9061-13CB4EC23B43"><!-- --></a><p>The OpenWF-C Support
component signals the EGL sync object. </p>
</li>

<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-18890089-AF4A-553A-AA36-657EB447A006"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-18890089-AF4A-553A-AA36-657EB447A006"><!-- --></a><p>The OpenWF-C engine
acquires the buffer and composes its content and then releases the buffer. </p>
</li>

<li id="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-59D5475A-CF95-5941-8242-0A44A73DDD7B"><a name="GUID-83510B5B-9725-5272-BF51-23A089178DAC__GUID-59D5475A-CF95-5941-8242-0A44A73DDD7B"><!-- --></a><p>The OpenWF-C Support
component composes notifications that ultimately inform the client that the
buffer is ready to render into again.</p>
 </li>

</ol>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-8FE41C9A-8171-58A2-A808-17B81E79B11F.html" title="This section describes the OpenWF Composition (OpenWF-C) components. OpenWF-C is an open standard for layered graphics composition developed by the Khronos Group.">OpenWF Composition</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-8FE41C9A-8171-58A2-A808-17B81E79B11F.html" title="This section describes the OpenWF Composition (OpenWF-C) components. OpenWF-C is an open standard for layered graphics composition developed by the Khronos Group.">OpenWF Composition</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>