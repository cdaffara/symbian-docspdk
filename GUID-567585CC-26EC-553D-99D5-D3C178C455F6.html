<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Configuring DVB-H Signal Scanning"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B4783C5D-2653-5B92-AD0D-374A7AAA8EA4.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-33FEE8F8-CD21-52EA-8EE2-502B12B3C463.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-893BFF74-5DBB-5606-96FC-F961A52CA90D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-80CF2E07-3E2B-564F-A689-80EE0229C13A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B4783C5D-2653-5B92-AD0D-374A7AAA8EA4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3C9BE2FF-8D5C-51D0-8BC1-BED7BC1288BA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2C8BE998-BCCE-5A06-AFC1-4B611D9233AB.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0297CAF5-4EB7-5E84-8A8C-8758D6F3B75F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-743D3117-095B-58D5-947D-A8713475C9A5.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F5FE22F3-B7C4-50B3-9B36-5CB8BC1BA18A.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-567585CC-26EC-553D-99D5-D3C178C455F6"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Configuring DVB-H Signal Scanning</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2405098 id2396644 id2396659 id2396679 id2396693 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792.html">Multimedia Guide</a> &gt; <a href="GUID-33FEE8F8-CD21-52EA-8EE2-502B12B3C463.html" title="The Multimedia Hardware Adaptation Interfaces (HAI) collection is an interface to control video components.">Multimedia Hardware Adaptation Interfaces Collection</a> &gt; <a href="GUID-893BFF74-5DBB-5606-96FC-F961A52CA90D.html" title="The Mobile TV DVBH Receiver HAI component provides facilitate to receive Mobile TV signals through the DVB-H Receiver library and the DVB-H Receiver Information library.">Mobile TV DVBH Receiver HAI Component</a> &gt; <a href="GUID-80CF2E07-3E2B-564F-A689-80EE0229C13A.html" title="This section introduces you to the DVB-H Receiver library.">DVB-H Receiver Library</a> &gt; <a href="GUID-B4783C5D-2653-5B92-AD0D-374A7AAA8EA4.html" title="This topic describes DVB-H uses in mobile technology.">Tutorials</a> &gt; </div>
<h1 class="topictitle1">Configuring
DVB-H Signal Scanning</h1>
<div>
<p>This topic gives you information about the initial setup for DVB-H Signal
Scanning. </p>

<div class="section"><h2 class="sectiontitle">Purpose</h2> <p>The purpose of this topic is to set and
get the scan configuration for DVB-H Signals. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Required Background</h2><p>You may wish to specify the
scan parameters, before initiating a signal scan. But this step is optional
and by default, if you do not specify any parameters hardware defaults are
used. If you wish to set scan parameters, this is done by calling <a href="GUID-617CD367-CF68-3932-8E77-669820A7B9AF.html#GUID-617CD367-CF68-3932-8E77-669820A7B9AF__GUID-B988EC58-EAB0-3644-8AF7-1DBCE06E3E7B"><span class="apiname">RDvbhReceiver::SetScanConfiguration()</span></a> with
a <a href="GUID-D84731C4-A3C8-37E3-887A-25906530E595.html"><span class="apiname">TDvbhScanConfiguration</span></a> object containing the following
information: </p>
 <ul>
<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-01EF5C12-BB71-57FA-B50F-7B13095F0367"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-01EF5C12-BB71-57FA-B50F-7B13095F0367"><!-- --></a><p>Start Frequency (in
Hz) : First frequency to scan. </p>
 </li>

<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-507724E9-9BFB-5C31-B719-E76BAEF5442A"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-507724E9-9BFB-5C31-B719-E76BAEF5442A"><!-- --></a><p>End Frequency (in Hz)
: Last frequency to scan. </p>
 </li>

<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-D053DDFC-B583-5003-9D0F-F551B68EC433"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-D053DDFC-B583-5003-9D0F-F551B68EC433"><!-- --></a><p>Signal Bandwidth (in
Hz) : Increment frequency is used to compute the next frequency to scan. </p>
 </li>

<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-15567754-A0FC-51EA-8FB9-8BF84F1621E3"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-15567754-A0FC-51EA-8FB9-8BF84F1621E3"><!-- --></a><p>Scan Options: <a href="GUID-176D1C2A-3D04-318B-9C57-EDFBB8CB4CF6.html"><span class="apiname">EDvbhScanOptionNormal</span></a> to
indicate that the user supplied parameters should be used or <a href="GUID-78E062FD-A5FD-3231-84DE-BFFEAC3F373D.html"><span class="apiname">EDvbhScanOptionFullScan</span></a> to
indicate that hardware defaults are used. </p>
 </li>

</ul>
 <p>You can determine the current scan configuration being used by the
receiver by calling <a href="GUID-617CD367-CF68-3932-8E77-669820A7B9AF.html#GUID-617CD367-CF68-3932-8E77-669820A7B9AF__GUID-10C24DC2-2E9A-3671-94D6-B1910B0FA4A2"><span class="apiname">RDvbhReceiver::GetScanConfigurationRI()</span></a>,
and then passing in a reference to an unpopulated <a href="GUID-D84731C4-A3C8-37E3-887A-25906530E595.html"><span class="apiname">TDvbhScanConfiguration</span></a> object. </p>
</div>

<div class="section"><h2 class="sectiontitle">Setup and Configuration Requirements</h2><p>In order to
initiate a signal scan, mobile TV middleware must implement <a href="GUID-7A97A0BE-1EDA-380F-B5BB-630E3E0614C4.html#GUID-7A97A0BE-1EDA-380F-B5BB-630E3E0614C4__GUID-5B931754-A048-3AB0-AC2E-C62472A56717"><span class="apiname">MDvbhScanObserver::DvbhScanProgress()</span></a>.
This function is called by the receiver during the scan process, whenever
it has results to report back to the client. Typically, it is called at least
once each time the receiver finishes scanning a particular frequency. Its
argument is a <a href="GUID-3F9D2682-8DA6-3493-8B78-8AF1B841A895.html"><span class="apiname">TDvbhScanResult</span></a> which contains the following
parameters: </p>
 <ul>
<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-85F195A7-05BD-5852-9135-7782A58A087D"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-85F195A7-05BD-5852-9135-7782A58A087D"><!-- --></a><p>Frequency scanned in
Hz. </p>
 </li>

<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-6FE32282-3AEC-5F02-86E2-88248040FEB7"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-6FE32282-3AEC-5F02-86E2-88248040FEB7"><!-- --></a><p>Status of DVB-H signal
frequency, as bitmap of TDvbhSignalStatus values. </p>
 </li>

<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-9DBFAF67-7C0D-5237-9316-370575D09F3E"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-9DBFAF67-7C0D-5237-9316-370575D09F3E"><!-- --></a><p>IP platform that was
found on this frequency. If none was found, it is indicated in status field.
If more than one is found, then <a href="GUID-7A97A0BE-1EDA-380F-B5BB-630E3E0614C4.html#GUID-7A97A0BE-1EDA-380F-B5BB-630E3E0614C4__GUID-5B931754-A048-3AB0-AC2E-C62472A56717"><span class="apiname">MDvbhScanObserver::DvbhScanProgress()</span></a> is
called again for each platform found. </p>
 </li>

<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-06DD363E-9EA2-5F8B-A5CB-4151E242E90F"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-06DD363E-9EA2-5F8B-A5CB-4151E242E90F"><!-- --></a><p>DVB-H network that was
found on frequency. If none was found, it is indicated in status field. If
more than one is found, then <a href="GUID-7A97A0BE-1EDA-380F-B5BB-630E3E0614C4.html#GUID-7A97A0BE-1EDA-380F-B5BB-630E3E0614C4__GUID-5B931754-A048-3AB0-AC2E-C62472A56717"><span class="apiname">MDvbhScanObserver::DvbhScanProgress()</span></a> is
called again for each network found. </p>
 </li>

<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-0C85DE38-6E66-524B-A96D-984DA4F4D944"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-0C85DE38-6E66-524B-A96D-984DA4F4D944"><!-- --></a><p>Progress of the scan
is shown between 0 and 100 percentage representation. </p>
 </li>

</ul>
 <p>To describe how you should implement <a href="GUID-7A97A0BE-1EDA-380F-B5BB-630E3E0614C4.html#GUID-7A97A0BE-1EDA-380F-B5BB-630E3E0614C4__GUID-5B931754-A048-3AB0-AC2E-C62472A56717"><span class="apiname">MDvbhScanObserver::DvbhScanProgress()</span></a> is
beyond the scope of this document, but some typical tasks might be: </p>
 <ul>
<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-70312D47-0035-53AD-9E79-B15EDDCE4414"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-70312D47-0035-53AD-9E79-B15EDDCE4414"><!-- --></a><p>Building up a list of
frequencies on which DVB-H signals are found. </p>
 </li>

<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-B23013A9-C99B-5D84-9A99-5BE9091B87E1"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-B23013A9-C99B-5D84-9A99-5BE9091B87E1"><!-- --></a><p>Building up a list of
available IP platforms. </p>
 </li>

<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-8CDF854D-344D-5E5E-A694-D95BBDE85EDF"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-8CDF854D-344D-5E5E-A694-D95BBDE85EDF"><!-- --></a><p>Building up a list of
available DVB-H networks. </p>
 </li>

<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-E86E8004-3964-5645-B985-7E8A7705760E"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-E86E8004-3964-5645-B985-7E8A7705760E"><!-- --></a><p>Reporting scan progress
to the end user. </p>
 </li>

</ul>
</div>

<div class="section"><h2 class="sectiontitle">Using DVB-H Signal Scanning </h2> <p>The following task
is performed:</p>
 <ul>
<li id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-D4C94859-AF9E-5F60-8728-3C57591A53C3"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-D4C94859-AF9E-5F60-8728-3C57591A53C3"><!-- --></a><p><a href="GUID-82D16EB2-BFFE-4607-9DBA-640F062E1408.html">Scanning
for DVB-H signals</a> </p>
 </li>

</ul>
 </div>

<div class="section"><h2 class="sectiontitle">Example</h2><p>The example code for scanning DVB-H signals
is shown below:</p>
<pre class="codeblock" id="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-E23036B7-83BE-5A85-9475-60D1473F60BB"><a name="GUID-567585CC-26EC-553D-99D5-D3C178C455F6__GUID-E23036B7-83BE-5A85-9475-60D1473F60BB"><!-- --></a>

//Context: The following takes place in some method of an active object
//that implements MDvbhScanObserver (e.g. class CExampleClient :
//public CActive, public MDvbhScanObserver). Its member iReceiver is an
//RDvbhReceiver that has previously been initialised.Receiver state is NoPlatform

User::LeaveIfError(iReceiver.Scan(*this, iStatus));
SetActive();

//While the active object is outstanding,
//CExampleClient::DvbhScanProgress() will be called periodically by
//the receiver, each time it has finished scanning a frequency.  When the
//active object completes, if all went well, the object will have a list
//of available IP Platforms at its disposal.

// Example CExampleClient methods
void CExampleClient::DvbhScanProgress(const TDvbhScanResult&amp;
                                             aResult)
    {
    //Analyse aResult.
    //Possibly add platform to list of available IP platforms.
    //Possibly inform application/end user of current progress.
    ...
    }
void CExampleClient::RunL()
    {
    //Called when Scan()completes.  Check iStatus for completion code.
    //(KErrNone, KErrCancelled, KErrNotReady, etc.) and act accordingly,
    //e.g. ReturnListOfPlatformsToApplication(GetListOfPlatforms());
    ...
    }

</pre>
</div>

<div class="section"><h2 class="sectiontitle">Cancelling a Scan</h2> <p>If the signal scan takes a long
time to complete due to bad reception conditions, the end user may wish to
cancel it before it has completed. This is done by calling <a href="GUID-617CD367-CF68-3932-8E77-669820A7B9AF.html#GUID-617CD367-CF68-3932-8E77-669820A7B9AF__GUID-C696FEFD-63F9-3654-8315-1FE2504AE037"><span class="apiname">RDvbhReceiver::CancelScan()</span></a>. </p>
 <p>If
a scan is active when <a href="GUID-617CD367-CF68-3932-8E77-669820A7B9AF.html#GUID-617CD367-CF68-3932-8E77-669820A7B9AF__GUID-C696FEFD-63F9-3654-8315-1FE2504AE037"><span class="apiname">RDvbhReceiver::CancelScan()</span></a> is called,
request will complete with eroor this may lead to KErrCancelled for creating
partial list of available IP platforms. If this happens, then scan data is
valid. </p>
 <p>If a scan is not active when <a href="GUID-617CD367-CF68-3932-8E77-669820A7B9AF.html#GUID-617CD367-CF68-3932-8E77-669820A7B9AF__GUID-C696FEFD-63F9-3654-8315-1FE2504AE037"><span class="apiname">RDvbhReceiver::CancelScan()</span></a> is
called, nothing happens. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-B4783C5D-2653-5B92-AD0D-374A7AAA8EA4.html" title="This topic describes DVB-H uses in mobile technology.">Tutorials</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-3C9BE2FF-8D5C-51D0-8BC1-BED7BC1288BA.html">Turn On Broadcast
Receiver</a></div>
<div><a href="GUID-2C8BE998-BCCE-5A06-AFC1-4B611D9233AB.html">Turn Off
Broadcast Receiver</a></div>
<div><a href="GUID-0297CAF5-4EB7-5E84-8A8C-8758D6F3B75F.html">Setting Data
Reception</a></div>
<div><a href="GUID-743D3117-095B-58D5-947D-A8713475C9A5.html">Tuning IP
Platform</a></div>
<div><a href="GUID-F5FE22F3-B7C4-50B3-9B36-5CB8BC1BA18A.html">Receiving
Broadcast Data</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>