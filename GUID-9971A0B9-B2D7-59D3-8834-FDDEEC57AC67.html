<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="How to use the SIP Profile API"/>
<meta name="DC.Relation" scheme="URI" content="GUID-399EAC59-643D-5DED-AB67-9F021CA5687A.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-057F1F82-56AF-5696-853E-79196A3D567E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-399EAC59-643D-5DED-AB67-9F021CA5687A.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>How to use the SIP Profile API</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2397554 id2397680 id2397782 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html">Multimedia Protocols Guide</a> &gt; <a href="GUID-057F1F82-56AF-5696-853E-79196A3D567E.html">SIP</a> &gt; <a href="GUID-399EAC59-643D-5DED-AB67-9F021CA5687A.html">SIP Profile API</a> &gt; </div>
<h1 class="topictitle1">How to use the SIP Profile API</h1>
<div><div class="section" id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-D9ED74C5-20D0-5636-993B-06C05CD90E6A"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-D9ED74C5-20D0-5636-993B-06C05CD90E6A"><!-- --></a><h2 class="sectiontitle">Protocols</h2> <p>This section provides the information about the protocol and error handling related to the SIP Profile API: </p>
 <ul><li id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-71AB3403-EAD0-5444-8B54-8F9A9F463942"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-71AB3403-EAD0-5444-8B54-8F9A9F463942"><!-- --></a><p>When you create a <a href="GUID-E8D080AD-4494-3880-B5CE-3487CA7D76E9.html"><span class="apiname">CSIPProfileRegistry</span></a> object, the client connects to the shared SIP Profile server. <strong>Note</strong>: If the server is not running, it is started by the API implementation. </p>
 <p>When the <a href="GUID-E8D080AD-4494-3880-B5CE-3487CA7D76E9.html"><span class="apiname">CSIPProfileRegistry</span></a> object is deleted, the corresponding connection to the server is closed. The server stops if it has no other users. </p>
 </li>
 <li id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-35DDE98D-1135-5556-8C8B-0CD5F65CA642"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-35DDE98D-1135-5556-8C8B-0CD5F65CA642"><!-- --></a><p>The profile data is transferred from the server to the client when a user retrieves a <a href="GUID-68AE6070-0410-3671-9E68-A7785B8271CD.html"><span class="apiname">CSIPProfile</span></a> object through <a href="GUID-E8D080AD-4494-3880-B5CE-3487CA7D76E9.html"><span class="apiname">CSIPProfileRegistry</span></a>. </p>
 <p>When the client holds an instance of <a href="GUID-68AE6070-0410-3671-9E68-A7785B8271CD.html"><span class="apiname">CSIPProfile</span></a> in its memory, all events related to the corresponding profile use <a href="GUID-91663686-42B7-3C88-B773-3C5343CDCFCE.html"><span class="apiname">MSIPProfileRegistryObserver</span></a> callback functions to notify the client. The callback functions are implemented by the client. </p>
 <p> <strong>Note</strong>: A <a href="GUID-68AE6070-0410-3671-9E68-A7785B8271CD.html"><span class="apiname">CSIPProfile</span></a> object is created each time a profile is retrieved. </p>
 </li>
 <li id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-12B99D92-A992-5C77-8E3E-65472E1994AF"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-12B99D92-A992-5C77-8E3E-65472E1994AF"><!-- --></a><p>When the client deletes the <a href="GUID-68AE6070-0410-3671-9E68-A7785B8271CD.html"><span class="apiname">CSIPProfile</span></a> object, the client is not notified about events. </p>
 </li>
 <li id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-B13A5C15-B9EB-5AEF-A490-C4295762D0F8"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-B13A5C15-B9EB-5AEF-A490-C4295762D0F8"><!-- --></a><p>The profile must be active before a <a href="GUID-68AE6070-0410-3671-9E68-A7785B8271CD.html"><span class="apiname">CSIPProfile</span></a> object is used by the SIP Client API. Use the <a href="GUID-F0663140-8AF3-3831-A741-483D276BF91C.html#GUID-F0663140-8AF3-3831-A741-483D276BF91C__GUID-2CDFD2CB-C3C2-3765-9155-2899F76B0A40"><span class="apiname">MSIPRegistrationContext::IsContextActive()</span></a> function to check. A profile becomes active when it is enabled by the client and the state of the profile is <samp class="codeph">ERegistered</samp>. <samp class="codeph">ERegistered</samp> is an enum value of the <samp class="codeph">TSIPProfileState</samp> enum defined in the class <a href="GUID-F324C2F6-1336-361C-B270-EFBAA256C46A.html"><span class="apiname">CSIPProfileAgent</span></a>. </p>
 </li>
 <li id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-9B116C46-DE47-5838-9753-A7C05844F886"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-9B116C46-DE47-5838-9753-A7C05844F886"><!-- --></a><p>All profiles are automatically registered when they are enabled. If a profile is not registered before being enabled, the registration status change is acknowledged through <a href="GUID-91663686-42B7-3C88-B773-3C5343CDCFCE.html"><span class="apiname">MSIPProfileRegistryObserver</span></a>. If the enabled profile is already registered, no additional registration or status change events are sent. </p>
 </li>
 <li id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-5F49EEA6-523D-5080-92BA-344EDBE71C57"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-5F49EEA6-523D-5080-92BA-344EDBE71C57"><!-- --></a><p>When a profile is enabled and registered, the client can use it and the SIP Client API to create SIP sessions. An enabled profile cannot be removed from the system while it is used by the client. </p>
 </li>
 <li id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-0E0CD639-0976-5B47-A0D1-CB84BFF759D0"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-0E0CD639-0976-5B47-A0D1-CB84BFF759D0"><!-- --></a><p>When a profile is not needed by the client, it is disabled. When you delete an instance of the profile the profile is disabled. </p>
 </li>
 </ul>
 <p>The following illustration shows use of the SIP Profile API. </p>
 <div class="fignone" id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-191B67CA-9715-5A3F-A571-1353BF69F5A4"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-191B67CA-9715-5A3F-A571-1353BF69F5A4"><!-- --></a><img src="GUID-269D6756-98B5-5928-9A83-261C3F729BCE_d0e555342_href.png"/></div>
 </div>
 <div class="section" id="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-7DDA5B21-FC36-54DC-A717-0BF360DD961B"><a name="GUID-9971A0B9-B2D7-59D3-8834-FDDEEC57AC67__GUID-7DDA5B21-FC36-54DC-A717-0BF360DD961B"><!-- --></a><h2 class="sectiontitle">Error handling</h2> <p>The errors are indicated by return codes, by functions leaving, or by calling callback functions. If an error occurs during a synchronous operation initiated by the client, the called function leaves with a correct error code. </p>
 <p>If an error occurs during an asynchronous operation, the error is passed to the client through the callback function <a href="GUID-91663686-42B7-3C88-B773-3C5343CDCFCE.html#GUID-91663686-42B7-3C88-B773-3C5343CDCFCE__GUID-8CDFC758-2BA9-3262-9A98-D2C9EC6E65C0"><span class="apiname">MSIPProfileRegistryObserver::ProfileRegistryErrorOccurred()</span></a>. In this case, both the profile identifier and an error code are passed to the client. Any error passed to the client means that the indicated profile is not registered or enabled by the client. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-399EAC59-643D-5DED-AB67-9F021CA5687A.html">SIP Profile API</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>