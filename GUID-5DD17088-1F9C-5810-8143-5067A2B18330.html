<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="A-GPS Location Data Source API"/>
<meta name="abstract" content="This document describes the A-GPS Location Data Source API that device creators use to integrate with A-GPS hardware."/>
<meta name="description" content="This document describes the A-GPS Location Data Source API that device creators use to integrate with A-GPS hardware."/>
<meta name="DC.Relation" scheme="URI" content="GUID-8F2BA0D3-1549-5837-A105-3AB484CDB80B.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-55F5F029-6A00-5894-8892-90836DE4BA40.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8F2BA0D3-1549-5837-A105-3AB484CDB80B.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-5DD17088-1F9C-5810-8143-5067A2B18330"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>A-GPS Location Data Source API</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2402946 id2402960 id2403098 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-55F5F029-6A00-5894-8892-90836DE4BA40.html" title="The Location Management collection contains components to manage location requests and to interface with a network. It also contains several common core LBS libraries that are used by many components of the LBS subsystem.">Location Management</a> &gt; <a href="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html" title="Location Admin is an LBS component that contains several common LBS libraries grouped for convenience in a single system component.">Location Admin</a> &gt; <a href="GUID-8F2BA0D3-1549-5837-A105-3AB484CDB80B.html" title="The documents in this section describe the A-GPS Location Data Source API.">A-GPS Location Data Source API</a> &gt; </div>
<h1 class="topictitle1">A-GPS Location Data Source API</h1>
<div><p>This document describes the A-GPS Location Data Source API that device creators use to integrate with A-GPS hardware. </p>
<div class="section"><h2 class="sectiontitle">Purpose</h2> <p>This document describes the A-GPS (Assisted GPS) Location Data Source API that a licensee's GPS/A-GPS Integration Module must implement to integrate GPS hardware with the LBS subsystem. It is intended to give licensee Integration Module writers an understanding of the API, how it is called by the LBS subsystem and the behaviour expected from Integration Modules. </p>
 <p>This document contains links to A-GPS Location Data Source API reference documentation that can be followed to obtain full descriptions of API classes and methods. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Contents</h2> <ul><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-30D3903B-3AD2-5BFF-9372-141501AF8F4A"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-30D3903B-3AD2-5BFF-9372-141501AF8F4A"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1F7525B3-0A1F-5B01-87D9-153E855F59E1">Introduction</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-4A49C11E-C2FE-5436-8910-650336BEFD45"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-4A49C11E-C2FE-5436-8910-650336BEFD45"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-0A902E30-86FE-5E97-98DE-AAA181A784E8">GPS modes</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-8C334B9A-DE46-5254-9054-B2E9B20B6D6E"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-8C334B9A-DE46-5254-9054-B2E9B20B6D6E"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-D923FAFA-AFFA-53B6-921C-100A14B720E3">A-GPS Location Data Source API description</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-7914AC04-0AD0-52B7-8ECA-03FA6BD9FD99"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-7914AC04-0AD0-52B7-8ECA-03FA6BD9FD99"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1BAF7733-25E1-53A7-AEE7-61B9EC2DA540">Using the A-GPS Location Data Source API</a> </p>
 <ul><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-8A63B20C-3AD8-59DB-B9CC-31580EB20E86"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-8A63B20C-3AD8-59DB-B9CC-31580EB20E86"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-A9D4C00D-37A3-544F-B9E0-6A5176ABD8C7">LBS loads the A-GPS Integration Module</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-58E72E3B-5BBC-5463-BC6B-B004C45E9059"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-58E72E3B-5BBC-5463-BC6B-B004C45E9059"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-EF629CC3-EFA8-559E-970C-1AC5B7B93324">LBS sets GPS options (including the GPS mode)</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-2DDBF855-FF3F-53E1-AC2D-9CAED5DB6115"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-2DDBF855-FF3F-53E1-AC2D-9CAED5DB6115"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F4A152A0-82D5-52C1-9640-535B62088CDF">LBS sends power advice</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F57A9877-2786-504F-97C8-9564DF952877"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F57A9877-2786-504F-97C8-9564DF952877"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-B661DC32-76A0-570D-B6B6-B0C69712C427">LBS requests location update</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-A8967BB1-0C27-5DE7-B7DA-F42B1DFD56D4"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-A8967BB1-0C27-5DE7-B7DA-F42B1DFD56D4"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-23A6EF21-DF43-5894-8159-27442A6828C6">Module requests assistance data</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-7B0906BC-24D7-5948-A01E-3C3374F6A913"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-7B0906BC-24D7-5948-A01E-3C3374F6A913"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-4820CF1C-DE98-5CC1-9A0E-72C5874A28D0">LBS notifies the A-GPS Integration Module of assistance data availability</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-0DB2D9A5-3CB4-5461-B3A8-6E0B026B5722"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-0DB2D9A5-3CB4-5461-B3A8-6E0B026B5722"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-9FEAEAA5-1555-5ADC-AF92-DC2C1BF00278">Module retrieves A-GPS assistance data items</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-5BB24321-02EF-537D-88C3-F11BB85AAEA7"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-5BB24321-02EF-537D-88C3-F11BB85AAEA7"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-B3949496-29ED-55B6-BB2F-25BA85CC662E">Module notifies LBS of a location update</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-2725FBBD-7411-5B87-A030-293EF0E3E19C"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-2725FBBD-7411-5B87-A030-293EF0E3E19C"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-84D16C45-7ABC-5701-9E02-AF5EEFB34565">Cancelling a location update request</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-203BDAD2-F575-56AD-8750-4968BFB783C3"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-203BDAD2-F575-56AD-8750-4968BFB783C3"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-906DA81C-CB41-58C4-8CA1-79552404B5B4">Resetting A-GPS assistance data</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-2CC29D5D-7F93-582E-9D96-D0234ED48D6B"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-2CC29D5D-7F93-582E-9D96-D0234ED48D6B"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6FFF6FDB-1A8F-5503-9F0E-D31B7F21CD12">GPS hardware device status changes and quality status changes</a>  </p>
 </li>
 </ul>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F3264B23-2842-54A8-8AD6-6146A3752A8D"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F3264B23-2842-54A8-8AD6-6146A3752A8D"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1F7525B3-0A1F-5B01-87D9-153E855F59E1">Integration module configuration</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-D58188A6-8B54-5A76-9597-C0F747263A08"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-D58188A6-8B54-5A76-9597-C0F747263A08"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-8C81482A-AB8E-5040-9D4A-3EB784765ACB">See also</a>  </p>
 </li>
 </ul>
 </div>
 <div class="section" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1F7525B3-0A1F-5B01-87D9-153E855F59E1"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1F7525B3-0A1F-5B01-87D9-153E855F59E1"><!-- --></a><h2 class="sectiontitle">Introduction</h2> <p>Licensees who want to use GPS technology in their phones must integrate the GPS hardware with the LBS subsystem. To do this they must create a GPS or A-GPS (Assisted GPS) Integration Module. An Integration Module provides the adaptation layer between the LBS subsystem and the GPS hardware. It is an ECOM plug-in that is loaded by the LBS subsystem A-GPS Location Manager on start-up. </p>
 <p>This document describes the A-GPS Location Data Source API. The API defines the interface between the LBS subsystem and an Integration Module. Symbian provides a reference implementation of an A-GPS Integration Module based on a SiRF chipset. Licensees can use the Symbian reference implementation as the basis of their own A-GPS Integration Module (see <a href="GUID-8A77545C-3AB8-538B-868E-4F2111E767EF.html">A-GPS reference module overview</a> for more information). </p>
 <p>For a high-level description of LBS architecture, see <a href="GUID-7233BC33-6060-5D6B-A5D2-01135F059337.html" title="This document describes the major components and interfaces of the Symbian platform Location Based Services (LBS) subsystem. It is intended to give device creators an appreciation of the LBS subsystem architecture. It also provides links to other documentation that provides more detailed information about the LBS components and APIs.">LBS architecture overview</a>. For a more detailed explanation of the architecture see <span class="filepath">SGL.TS0004.202
          LBS Architectural Description </span> (in the LBS source distribution documentation folder). </p>
 </div>
 <div class="section" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-0A902E30-86FE-5E97-98DE-AAA181A784E8"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-0A902E30-86FE-5E97-98DE-AAA181A784E8"><!-- --></a><h2 class="sectiontitle"> GPS modes</h2> <p>Different GPS hardware chipsets may support different GPS capabilities: hardware may produce GPS position fixes (latitude, longitude and altitude data) or, more simply, GPS measurements that must be used by software outside of the GPS hardware to calculate a position fix. </p>
 <p>The four GPS modes supported by the LBS subsystem are: </p>
 <ul><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-01F89630-7BB6-5229-BE0C-AA28622C8025"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-01F89630-7BB6-5229-BE0C-AA28622C8025"><!-- --></a><p> <strong>Autonomous mode</strong>  </p>
 <p>In <em>autonomous mode</em> GPS hardware calculates a position fix without using assistance data from the network. This typically takes longer than if assistance data were used to calculate the fix. </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-98D9B182-4225-572F-B5A8-C256DE5D1CDB"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-98D9B182-4225-572F-B5A8-C256DE5D1CDB"><!-- --></a><p> <strong>Terminal based mode</strong> (TB) </p>
 <p>In <em>terminal based mode</em> the Integration Module and GPS hardware use assistance data received from the network to calculate a GPS position fix and return it to the LBS subsystem. </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-3642B59E-8152-5A29-B624-EDAF1D186D0B"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-3642B59E-8152-5A29-B624-EDAF1D186D0B"><!-- --></a><p> <strong>Terminal assisted mode</strong> (TA) </p>
 <p>In <em>terminal assisted mode</em>, the GPS hardware produces GPS measurements (with the help of assistance data from the network). </p>
 <p>In the Symbian LBS subsystem the Integration Module returns the GPS measurements which are sent to a network-based server. The measurements are used to calculate a position fix. </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-58D818F1-B865-5ED3-8575-91B1768BC7F8"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-58D818F1-B865-5ED3-8575-91B1768BC7F8"><!-- --></a><p> <strong>Simultaneous support of TB + TA modes</strong>  </p>
 <p>GPS hardware may be able to return both GPS measurements and position fixes. An Integration Module can return the GPS measurements as they are received from GPS satellites together with GPS position fixes that are increasingly complete and/or accurate. </p>
 <p>As in TA mode, the LBS subsystem returns the GPS measurements to the network for calculation. Either the network of the Integration Module may be the first to return a position of the required accuracy (as specified by a client process). </p>
 </li>
 </ul>
 <p>Licensees can implement their Integration Modules to support more than one GPS mode. A module may support terminal based mode with the ability to fallback to autonomous mode if assistance data is not available. A module may also be designed to support either TB or TA, but not TB + TA. </p>
 <p>An Integration Module publishes the GPS mode it supports in a configuration file. LBS uses the configuration file, the LBS subsystem administration settings and any preferences received from the network to set the GPS mode that an Integration Module uses to calculate a position fix. Later sections of this document describe how LBS sets an Integration Module's GPS mode. </p>
 </div>
 <div class="section" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-D923FAFA-AFFA-53B6-921C-100A14B720E3"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-D923FAFA-AFFA-53B6-921C-100A14B720E3"><!-- --></a><h2 class="sectiontitle">A-GPS Location Data Source API description</h2> <p>This section describes the classes of the A-GPS Location Data Source API. </p>
 <p><strong>A-GPS Location Data Source API class diagram </strong> </p>
 <p>Figure 1 shows the classes of the A-GPS Location Data Source API. </p>
 <p>The main classes of the API are <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html"><span class="apiname">CLbsLocationSourceGpsBase</span></a> and <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html"><span class="apiname">MLbsLocationSourceGpsObserver</span></a> which together model an observer/observable design pattern. A licensee's Integration Module must derive from <samp class="codeph">CLbsLocationSourceGpsBase</samp>. The LBS subsystem (A-GPS Location Manager) implements <samp class="codeph">MLbsLocationSourceGpsObserver</samp>. </p>
 <p> <strong>Note: All of the methods of the CLbsLocationSourceGpsBase are synchronous and their implementations in a licensee Integration Module must return quickly.</strong>  </p>
 <div class="fignone" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-FCB831B6-D0EA-5B04-BF4C-281017287721"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-FCB831B6-D0EA-5B04-BF4C-281017287721"><!-- --></a><span class="figcap">Figure 1. 
             Figure 1. A-GPS Location Data Source API classes 
          </span> <img src="GUID-905EA9A9-C72C-5632-A95E-B4ED0BD10316_d0e447365_href.png"/></div>
 <p><strong>API classes and types </strong> </p>
 <p>Table 1 lists the classes and types that define the A-GPS Location Data Source API. Further details about the classes can be found by following the links to reference documentation. </p>
 <p>The A-GPS Location Data Source API has <samp class="codeph">publishedPartner</samp> interface access. </p>
 
<div class="tablenoborder"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-03DE9669-4C08-5B9D-B900-C831DEAC2E05"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-03DE9669-4C08-5B9D-B900-C831DEAC2E05" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d918528e343">Class/type name</th>
 <th class="cellrowborder" valign="top" id="d918528e346">Description</th>
 <th class="cellrowborder" valign="top" id="d918528e349">Header file</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d918528e343 "><p> <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html"><span class="apiname">CLbsLocationSourceGpsBase</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e346 "><p>The base class for all A-GPS Integration Module implementations. It defines the methods that the LBS subsystem uses to request GPS measurements or a GPS position fix, to set the mode of operation of the GPS hardware and to send power advice. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e349 "><p> <span class="filepath">LbsLocDataSourceGpsBase.h</span>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e343 "><p> <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html"><span class="apiname">MLbsLocationSourceGpsObserver</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e346 "><p>The GPS Integration Module observer class implemented by the LBS subsystem (A-GPS Location Manager). It defines the methods that an A-GPS module uses to request assistance data, return GPS measurements or a position fix, and send module status messages into LBS. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e349 "><p> <span class="filepath">LbsLocDataSourceGpsBase.h</span>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e343 "><p> <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-4FDB2D40-8212-303B-9039-EAEDE14627FC"><span class="apiname">CLbsLocationSourceGpsBase::TPowerMode</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e346 "><p>Defines a set of values for power advice. A value is a parameter in <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-E676384E-6528-3A63-A6FC-8CED25C0976E"><span class="apiname">CLbsLocationSourceGpsBase::AdvisePowerMode()</span></a>. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e349 "><p> <span class="filepath">LbsLocDataSourceGpsBase.h</span>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e343 "><p> <a href="GUID-B5C832B0-93B1-30F2-B549-E468CB5A13B7.html"><span class="apiname"> TLbsLocRequestQuality</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e346 "><p>Specifies the desired quality of a location request. <samp class="codeph">TLbsLocRequestQuality</samp> is used to specify the desired quality of a location request to an Integration Module. A reference to an object of this type is passed to <a href="GUID-14FCF07F-EF83-3D71-8598-503FF1530589.html#GUID-14FCF07F-EF83-3D71-8598-503FF1530589__GUID-964C3C84-7CB4-316B-8B1D-892FC36FECE6"><span class="apiname">CLbsLocationSourceBase::UpdateLocation()</span></a>. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e349 "><p> <span class="filepath">LbsLocDataSourceGpsBase.h</span>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e343 "><p> <a href="GUID-B0986288-97BA-35FE-B35B-04DDAE079B76.html"><span class="apiname"> TLbsGpsOptions</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e346 "><p>This is the default class used to hold various global settings for the GPS integration module including the GPS positioning mode required. It has the method <a href="GUID-B0986288-97BA-35FE-B35B-04DDAE079B76.html#GUID-B0986288-97BA-35FE-B35B-04DDAE079B76__GUID-0F539830-ECFE-3CE2-AC56-DB2A196E7CED"><span class="apiname">TLbsGpsOptions::SetGpsMode()</span></a> that is used to set the GPS positioning mode of the module (such as terminal based or terminal assisted mode). </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e349 "><p> <span class="filepath">LbsLocDataSourceGpsBase.h</span>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e343 "><p> <a href="GUID-2CCCF864-C56B-3E82-85FF-5675340BD355.html"><span class="apiname"> TLbsGpsOptionsItem</span></a> (from v9.3) </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e346 "><p>An item in a <a href="GUID-333F10FF-C647-3A07-9EFA-B1A2CF0B96C1.html"><span class="apiname">TLbsGpsOptionsArray</span></a>. The item specifies the type of update required from a module - a position fix or a set of GPS measurements or both. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e349 "><p> <span class="filepath">LbsLocDataSourceGpsBase.h</span>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e343 "><p> <a href="GUID-333F10FF-C647-3A07-9EFA-B1A2CF0B96C1.html"><span class="apiname"> TLbsGpsOptionsArray</span></a> (from v9.3) </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e346 "><p>This class is derived from <a href="GUID-B0986288-97BA-35FE-B35B-04DDAE079B76.html"><span class="apiname">TLbsGpsOptions</span></a>. It is only passed as a parameter in <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-0744F006-FF77-3FBA-A33B-9EE403924820"><span class="apiname">CLbsLocationSourceGpsBase::UpdateLocation()</span></a> when the network has asked the LBS subsystem to work in TB + TA mode. For more information see <a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-EF629CC3-EFA8-559E-970C-1AC5B7B93324">LBS sets GPS options</a>. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e349 "><p> <span class="filepath">LbsLocDataSourceGpsBase.h</span>  </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p> <em>Table 1 Classes and types of the A-GPS Location Data Source API.</em>  </p>
 <p>Table 2 lists the assistance data classes and types that are passed across the API. The classes and types are used to specify the assistance data that an Integration Module requires. For more information see the links to reference documentation. </p>
 
<div class="tablenoborder"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-94D91F10-86DC-5D1E-81CC-0153D640C823"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-94D91F10-86DC-5D1E-81CC-0153D640C823" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d918528e588">Class/type name</th>
 <th class="cellrowborder" valign="top" id="d918528e591">Description</th>
 <th class="cellrowborder" valign="top" id="d918528e594">Header file</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d918528e588 "><p> <a href="GUID-58DA9D8B-50F6-38CB-B5BC-D8C1784ACFDB.html"><span class="apiname"> TLbsAssistanceDataItem</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e591 "><p>The class defines the type of assistance data that an Integration Module requires. A bitmask of type <a href="GUID-343E1FD7-9D75-3A41-84EC-B35030C06557.html"><span class="apiname">TLbsAssistanceDataGroup</span></a> is composed of <a href="GUID-58DA9D8B-50F6-38CB-B5BC-D8C1784ACFDB.html"><span class="apiname">TLbsAssistanceDataItem</span></a> values. The class and the bitmask are used to pass requests for assistance data between the Integration Module and the LBS subsystem. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e594 "><p> <span class="filepath">LbsAssistanceDataBase.h</span>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e588 "><p> <a href="GUID-343E1FD7-9D75-3A41-84EC-B35030C06557.html"><span class="apiname">TLbsAssistanceDataGroup</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e591 "><p>Bitmask of <a href="GUID-58DA9D8B-50F6-38CB-B5BC-D8C1784ACFDB.html"><span class="apiname">TLbsAssistanceDataItem</span></a> values. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e594 "><p> <span class="filepath">LbsAssistanceDataBase.h</span>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e588 "><p> <a href="GUID-5EB8A06F-5D70-35C0-ADAC-62A2A6126F8D.html"><span class="apiname">RDataBuilderRootBase</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e591 "><p>Base class of readers for assistance data. Each type of assistance data requires its own reader that is derived from <samp class="codeph">RDataBuilderRootBase</samp>. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e594 "><p> <span class="filepath">LbsAssistanceDataBase.h</span>  </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p> <em>Table 2 Assistance data classes passed across the API</em>  </p>
 <p>Table 3 lists position info classes that are passed across the API from an Integration Module to the LBS subsystem. For more information see the links to reference documentation. </p>
 
<div class="tablenoborder"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-BADFAAAD-1B60-5E8B-BFCB-A128C755FAFC"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-BADFAAAD-1B60-5E8B-BFCB-A128C755FAFC" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d918528e712">Class/type name</th>
 <th class="cellrowborder" valign="top" id="d918528e715">Description</th>
 <th class="cellrowborder" valign="top" id="d918528e718">Header file</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d918528e712 "><p> <a href="GUID-73D6F438-C270-33B9-974B-D4D1583E1738.html"><span class="apiname">TPositionInfoBase</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e715 "><p>Base class for classes that hold GPS position fixes or GPS measurements. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e718 "><p> <span class="filepath">LbsPositionInfo.h</span>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e712 "><p> <a href="GUID-54AE0674-C49D-3329-8B77-3A58EFFC03D7.html"><span class="apiname">TPositionSatelliteInfo</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e715 "><p>Holds a position fix and satellite information. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e718 "><p> <span class="filepath">LbsSatelliteInfo.h</span>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e712 "><p> <a href="GUID-66C5B5DB-6B9A-3071-816C-F51AEED2E8DE.html"><span class="apiname">TPositionGpsMeasurementInfo</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e715 "><p>Holds GPS measurements. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e718 "><p> <span class="filepath">LbsGpsMeasurement.h </span>  </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p> <em>Table 3 Position Info classes</em>  </p>
 <p><strong>Libraries </strong> </p>
 <p>The main classes of the A-GPS Location Data Source API are packaged in <span class="filepath">lbslocdatasource.dll</span>. Integration Module implementations link to <span class="filepath">lbslocdatasource.lib</span>. </p>
 <p>Assistance data classes are packaged in <span class="filepath">lbsassistancedata.dll</span>. Clients link to <span class="filepath">lbsassistancedata.lib</span>. </p>
 <p>Position info classes are packaged in <span class="filepath">lbsselflocate.dll</span>. Clients link to <span class="filepath">lbsselflocate.lib</span>. </p>
 </div>
 <div class="section" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1BAF7733-25E1-53A7-AEE7-61B9EC2DA540"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1BAF7733-25E1-53A7-AEE7-61B9EC2DA540"><!-- --></a><h2 class="sectiontitle">Using the A-GPS Location Data Source API</h2> <p>Licensees use the API to create an Integration Module to interface their device GPS hardware with the LBS subsystem. The API provides the means by which the LBS subsystem and an Integration Module interact. Details of how the Integration Module interact with the GPS hardware are hardware-specific and are not part of the API. </p>
 <p>This section describes how an Integration Module and the LBS subsystem use the API to interact. It is intended to give a description of the general order in which the API methods are called by the LBS subsystem and to give a better understanding of their purpose. </p>
 <p>The behaviour of an A-GPS Integration Module can be complex when it is linked to a Network Protocol Module. Several detailed end-to-end sequence diagrams that document the behaviour of the LBS subsystem including the behaviour expected from an Integration Module are given in <a href="GUID-D9EA897E-71FB-5012-8208-49300A19D22C.html">LBS Sequence Diagrams</a>. </p>
 <p>Figure 2 shows a simplified sequence for an MO-LR self locate (a self-locate request from the <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a>). Terminal based positioning involves obtaining assistance data (and possibly a reference position) from the network via a <a href="GUID-8985B028-4BCD-5858-B22F-EECC52B7B9EB.html" title="The documents in this section describe the Network Protocol Module API.">Network Protocol Module</a>. The discussion that follows describes the main flow of events for MO-LR self locate. </p>
 <div class="fignone" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-9DD5D060-D96C-57E1-8029-624638969C30"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-9DD5D060-D96C-57E1-8029-624638969C30"><!-- --></a><span class="figcap">Figure 2. 
             Figure 2. Simplified sequence for MO-LR self locate request 
          </span> <img src="GUID-5344014E-A6F4-5243-9D55-BB2C5C78A463_d0e447890_href.png"/></div>
 <p>The following explains a simple flow of events between the LBS subsystem and an A-GPS Integration Module (for terminal based positioning): </p>
 <ul><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-961B08BC-F54E-5F61-B10A-6D14B68D546E"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-961B08BC-F54E-5F61-B10A-6D14B68D546E"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-A9D4C00D-37A3-544F-B9E0-6A5176ABD8C7">LBS loads the A-GPS Integration Module</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-2924CFD9-E916-5305-994B-D6A7EFDCD247"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-2924CFD9-E916-5305-994B-D6A7EFDCD247"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-EF629CC3-EFA8-559E-970C-1AC5B7B93324">LBS sets GPS options (including the GPS mode)</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-7B4236F5-897F-5846-AE9A-9A1EA1DAC8FA"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-7B4236F5-897F-5846-AE9A-9A1EA1DAC8FA"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F4A152A0-82D5-52C1-9640-535B62088CDF">LBS sends power advice</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-82F51F6B-636E-51F3-AC3C-5623B2F5E9DA"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-82F51F6B-636E-51F3-AC3C-5623B2F5E9DA"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-B661DC32-76A0-570D-B6B6-B0C69712C427">LBS requests location update</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-06022E8B-4EBA-531C-A4C2-41029B19575D"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-06022E8B-4EBA-531C-A4C2-41029B19575D"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-23A6EF21-DF43-5894-8159-27442A6828C6">Module requests assistance data</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-24A0D421-75CC-528C-B47A-C1D75AD1855C"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-24A0D421-75CC-528C-B47A-C1D75AD1855C"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-4820CF1C-DE98-5CC1-9A0E-72C5874A28D0">LBS notifies the A-GPS Integration Module of assistance data availability</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-5013410C-6129-599C-90D8-52345921F843"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-5013410C-6129-599C-90D8-52345921F843"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-9FEAEAA5-1555-5ADC-AF92-DC2C1BF00278">Module retrieves A-GPS assistance data items</a>  </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-53581CD5-7DEF-572A-A989-972ACC12E933"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-53581CD5-7DEF-572A-A989-972ACC12E933"><!-- --></a><p><a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-B3949496-29ED-55B6-BB2F-25BA85CC662E">Module notifies LBS of a location update</a>  </p>
 </li>
 </ul>
 <p>In addition to the typical flow of events described, a module can also notify LBS of GPS <a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6FFF6FDB-1A8F-5503-9F0E-D31B7F21CD12">device status changes and quality status changes</a>. </p>
 <p>The implementation of <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html"><span class="apiname">CLbsLocationSourceGpsBase</span></a> methods must not call <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html"><span class="apiname">MLbsLocationSourceGpsObserver</span></a> methods or stack overflow may eventually occur. The exception to this rule is <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-0370A120-0222-3559-A4B5-89C997B192D7"><span class="apiname">CLbsLocationSourceGpsBase::AssistanceDataEvent()</span></a>: implementations may call <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-AAEE001E-B121-3590-88A8-97200645BFA9"><span class="apiname">MLbsLocationSourceGpsObserver::GetAssistanceDataItem()</span></a> multiple times to get all the request assistance data items. </p>
 <p>Each of the steps above and shown in figure 2 is described in more detail in the following sections, with links to API reference documentation. </p>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-A9D4C00D-37A3-544F-B9E0-6A5176ABD8C7"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-A9D4C00D-37A3-544F-B9E0-6A5176ABD8C7"><!-- --></a><strong>LBS loads the A-GPS Integration Module</strong> </p>
 <p>The Integration Module is packaged as an ECOM plug-in DLL. When the LBS subsystem starts up, the A-GPS Location Manager process uses the ECOM framework to load the Integration Module. The A-GPS Location Manager calls <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-DE91837E-AD18-3236-9678-E21EF655721A"><span class="apiname">CLbsLocationSourceGpsBase::NewL()</span></a>, passing a reference to itself as an <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html"><span class="apiname">MLbsLocationSourceGpsObserver</span></a> and the ID of the ECOM implementation DLL to load. </p>
 <p>For more information about how to configure LBS to use an Integration Module see <a href="GUID-D18B4715-3942-52EA-9D2F-E145037FA47A.html" title="The documents in this section describe the tasks necessary to build and configure the LBS subsystem. These documents are for device creators.">LBS integration and configuration guide</a>. </p>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-EF629CC3-EFA8-559E-970C-1AC5B7B93324"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-EF629CC3-EFA8-559E-970C-1AC5B7B93324"><!-- --></a><strong>LBS sets GPS options (including the GPS mode)</strong> </p>
 <p> <strong/> The GPS mode specifies how the A-GPS Integration Module should obtain a location fix. There are four modes supported by the LBS subsystem as described in <a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-0A902E30-86FE-5E97-98DE-AAA181A784E8">GPS modes</a>: </p>
 <ul><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-A6E6DBC8-E9FB-5492-9FEC-D81FC45B6C06"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-A6E6DBC8-E9FB-5492-9FEC-D81FC45B6C06"><!-- --></a><p>Autonomous mode </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-A174195F-F3E1-5A6B-9EEC-DEBEDB2942C1"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-A174195F-F3E1-5A6B-9EEC-DEBEDB2942C1"><!-- --></a><p>Terminal based mode (TB) </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-9B17E6D2-4E69-57E2-AF7B-B86C5089D795"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-9B17E6D2-4E69-57E2-AF7B-B86C5089D795"><!-- --></a><p>Terminal assisted mode (TA) </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-ED605E09-31D7-5982-B6CA-A81B762190D9"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-ED605E09-31D7-5982-B6CA-A81B762190D9"><!-- --></a><p>Simultaneous TB + TA </p>
 </li>
 </ul>
 <p><strong>GPS mode settings values </strong> </p>
 <p>The LBS subsystem calls <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-353317B8-81BE-3C9D-8186-CC7CB1056AA1"><span class="apiname">CLbsLocationSourceGpsBase::SetGpsOptions()</span></a> to set the GPS mode. The LBS subsystem calls this method when an Integration Module is first loaded by the LBS subsystem and when an MO-LR begins (when the setting value is taken from the LBS administration setting value for <a href="GUID-28C5F57D-16F7-3433-9398-1441C949EBC4.html"><span class="apiname">KLbsSettingHomeGpsMode</span></a>). </p>
 <p>As shown in figure 2, <samp class="codeph">SetGpsOptions()</samp> may be called again as part of a location request if the network requests a different GPS mode from the one that is currently set. The mode that is set should be used by the Integration Module for all further location requests until the next call from LBS to <samp class="codeph">SetGpsOptions()</samp>. </p>
 <p>Table 1 shows a list of values of <a href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.html#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945__GUID-9F902F01-29A3-3929-B045-83C72DB96E39"><span class="apiname">CLbsAdmin::TGpsMode</span></a> that are passed in <samp class="codeph">SetGpsOptions()</samp>. </p>
 
<div class="tablenoborder"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-D4793B94-3461-51BF-87A9-360703CA0F95"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-D4793B94-3461-51BF-87A9-360703CA0F95" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d918528e1096">TGpsMode</th>
 <th class="cellrowborder" valign="top" id="d918528e1099">Meaning</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d918528e1096 "><p>EGpsPreferTerminalBased </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e1099 "><p>Prefer Terminal Based (PTB): Integration module should use Terminal Based Positioning (TB) if possible. If TB is not possible then fallback to autonomous mode. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e1096 "><p>EGpsAutonomous </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e1099 "><p>Use Autonomous GPS: Module must not request any assistance data from the network and calculate a position without it. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e1096 "><p>EGpsPreferTerminalAssisted </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e1099 "><p>Prefer Terminal Assisted (PTA): Module must use Terminal Assisted Positioning (TA) if possible. If TA is not possible then fallback to autonomous mode if possible. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e1096 "><p>EGpsAlwaysTerminalAssisted </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e1099 "><p>Always Terminal Assisted (ATA): Module must always use TA and return an error if this is not possible. If the Integration Module is not able to use TA it calls <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateLocation()</span></a> with a status code of <samp class="codeph">KErrNotSupported</samp>. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e1096 "><p>EGpsAlwaysTerminalBased </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e1099 "><p>Always Terminal Based (ATB): Module must always use TB and return an error if this is not possible. <strong>This value is not currently supported.</strong>  </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p>Table 1. <samp class="codeph">TGpsMode</samp> values and their meanings. </p>
 <p>A licensee's Integration Module is not required to support all of these modes. Licensees modify the Integration Module <a href="GUID-D18B4715-3942-52EA-9D2F-E145037FA47A.html" title="The documents in this section describe the tasks necessary to build and configure the LBS subsystem. These documents are for device creators.">module.ini</a> file <samp class="codeph">DeviceGpsModeCaps</samp> setting to publish a module's capabilities to the LBS subsystem. </p>
 <p>Valid values of <samp class="codeph">DeviceGpsModeCaps</samp> in <span class="filepath">module.ini</span> are as follows: </p>
 <ul><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-E35E03DA-2CFF-5E9A-AFCD-0EF5C46A173D"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-E35E03DA-2CFF-5E9A-AFCD-0EF5C46A173D"><!-- --></a><p>0001 - Module supports Terminal Based positioning and is also able to calculate position autonomously if assistance data is unavailable or does not arrive on time (for example a fix is obtained before assistance data delivery). </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6826468C-4BE8-5CD0-A834-F5EA468914FC"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6826468C-4BE8-5CD0-A834-F5EA468914FC"><!-- --></a><p>0010 - Module supports Terminal Assisted positioning. The module may (but does not have to) be able to calculate position autonomously if Terminal Assisted positioning does not succeed (for example the network is unavailable). </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-8F42ED59-5645-5B72-8C9C-78351CD4FA26"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-8F42ED59-5645-5B72-8C9C-78351CD4FA26"><!-- --></a><p>0011 - Module supports Terminal Based positioning OR Terminal Assisted positioning and is also able to calculate position autonomously if assistance data is unavailable, or does not arrive on time (for example a fix is obtained before assistance data delivery). </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-26BCC149-7FE2-5766-9754-7D102546E4C7"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-26BCC149-7FE2-5766-9754-7D102546E4C7"><!-- --></a><p>0100 - Module can perform Terminal Assisted AND Terminal Based positioning at the same time (TB + TA). It is also able to calculate position autonomously if assistance data is unavailable (e.g. network error), or does not arrive on time (e.g. a fix is obtained before assistance data delivery). NOTE: If this bit is set then it is not necessary to set either of the less significant 2 bits as they are implied. </p>
 </li>
 </ul>
 <p> <em>If DeviceGpsModeCaps is not specified in this file, LBS assumes that the module can support both Terminal Based AND Terminal Assisted GPS modes at the same time.</em>  </p>
 <p>There are two slightly different methods of specifying the GPS mode to an Integration Module. Both methods involve the A-GPS Location Manager calling <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-353317B8-81BE-3C9D-8186-CC7CB1056AA1"><span class="apiname">CLbsLocationSourceGpsBase::SetGpsOptions()</span></a>: </p>
 <p><strong>Setting a single positioning mode </strong> </p>
 <p>(For autonomous mode, terminal based mode and terminal assisted mode) </p>
 <p>LBS creates an object of class <a href="GUID-B0986288-97BA-35FE-B35B-04DDAE079B76.html"><span class="apiname">TLbsGpsOptions</span></a> and calls <a href="GUID-B0986288-97BA-35FE-B35B-04DDAE079B76.html#GUID-B0986288-97BA-35FE-B35B-04DDAE079B76__GUID-0F539830-ECFE-3CE2-AC56-DB2A196E7CED"><span class="apiname">TLbsGpsOptions::SetGpsMode()</span></a> with a single parameter of type <a href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.html#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945__GUID-9F902F01-29A3-3929-B045-83C72DB96E39"><span class="apiname">CLbsAdmin::TGpsMode</span></a>: </p>
 <p>To set the Integration Module to use autonomous mode, LBS calls <samp class="codeph">SetGpsMode()</samp> with the parameter value <samp class="codeph">CLbsAdmin::EGpsAutonomous</samp>. </p>
 <p>To set terminal based mode, LBS calls <samp class="codeph">SetGpsMode()</samp> with the parameter value <samp class="codeph">CLbsAdmin::EGpsPreferTerminalBased</samp>. This specifies that a GPS position fix is required from the Integration Module (the module should use TB if possible, but fallback to autonomous mode if no assistance data is available). </p>
 <p>To set terminal assisted mode, LBS calls <samp class="codeph">SetGpsMode()</samp> with the parameter value <samp class="codeph">CLbsAdmin::EGpsPreferTerminalAssisted</samp> or <samp class="codeph">CLbsAdmin::EGpsAlwaysTerminalAssisted</samp>. This specifies that GPS measurements are required from the module. The two parameter values have the following meanings: </p>
 <ul><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-3218BAD8-AF6D-50A5-8B60-E2B07E0E7719"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-3218BAD8-AF6D-50A5-8B60-E2B07E0E7719"><!-- --></a><p> <samp class="codeph">EGpsPreferTerminalAssisted</samp> means that a module should use TA if possible but fallback to autonomous mode if this is not possible (for example a network error). </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-5DEA5362-9291-52E3-A57A-84F39A9E9FB3"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-5DEA5362-9291-52E3-A57A-84F39A9E9FB3"><!-- --></a><p> <samp class="codeph">EGpsAlwaysTerminalAssisted</samp> means that a module should <em>always</em> use TA. If TA is not possible (for example because of a network error) then the Integration Module must signal an error by calling <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateLocation()</span></a> with an error status code (a negative code). </p>
 </li>
 </ul>
 <p>To set the GPS mode on the Integration Module, LBS calls <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-353317B8-81BE-3C9D-8186-CC7CB1056AA1"><span class="apiname">CLbsLocationSourceGpsBase::SetGpsOptions()</span></a> passing the <samp class="codeph">TLbsGpsOptions</samp> reference as a parameter. </p>
 <p>If LBS attempts to set an Integration Module's GPS mode to one that it does not support then the Integration Module must call <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateLocation()</span></a> with a status parameter of <samp class="codeph">KErrNotSupported</samp>. Note that the Symbian reference A-GPS Integration Module does not support Terminal Assisted mode or TB + TA mode. </p>
 <p>As part of a location request, the network can specify the required GPS modes to LBS (see <a href="GUID-CB6B4D1A-ACB9-5571-8C23-4BC095209782.html" title="This document describes the Network Protocol Module API that device creators use to develop their own Network Protocol Modules.">Network Protocol Module</a> documentation for more information about how a Protocol Module specifies these modes). If the network asks for Terminal Assisted mode, the LBS subsystem uses the value of the administration setting <samp class="codeph">KLbsSettingHomeGpsMode</samp> to decide which mode is sent to the Integration Module, either <samp class="codeph">
             EGpsPreferTerminalAssisted</samp> or <samp class="codeph">EGpsAlwaysTerminalAssisted</samp>. </p>
 <p><strong>Setting multiple positioning modes (TB + TA) </strong> </p>
 <p>The network can specify two positioning modes that LBS should use (see <a href="GUID-CB6B4D1A-ACB9-5571-8C23-4BC095209782.html" title="This document describes the Network Protocol Module API that device creators use to develop their own Network Protocol Modules.">Network Protocol Module</a> for more information about how the modes are specified to LBS). </p>
 <p>If the Integration Module is capable of supporting both TB and TA simultaneously <samp class="codeph">(DevGpsModeCaps = 0100</samp> in <span class="filepath">module.ini</span>) then LBS specifies both modes to a module as follows: </p>
 <p>LBS creates an object of class <a href="GUID-333F10FF-C647-3A07-9EFA-B1A2CF0B96C1.html"><span class="apiname">TLbsGpsOptionsArray</span></a>. Each element of the array is a <a href="GUID-2CCCF864-C56B-3E82-85FF-5675340BD355.html"><span class="apiname">TLbsGpsOptionsItem</span></a> object which can hold one of two values of type <a href="GUID-2CCCF864-C56B-3E82-85FF-5675340BD355.html#GUID-2CCCF864-C56B-3E82-85FF-5675340BD355__GUID-BEA2FC56-F307-35B5-9815-D8121729958D"><span class="apiname">TLbsGpsOptionsItem::TPosUpdateType</span></a>, set by calling <a href="GUID-2CCCF864-C56B-3E82-85FF-5675340BD355.html#GUID-2CCCF864-C56B-3E82-85FF-5675340BD355__GUID-4429FBD5-C8BD-3A91-AA26-10E6D8C9F925"><span class="apiname">TLbsGpsOptionsItem::SetLocUpdateType()</span></a>: </p>
 <ul><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6381FDF6-1203-51A6-B5ED-DFFF58E72C5C"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6381FDF6-1203-51A6-B5ED-DFFF58E72C5C"><!-- --></a><p> <samp class="codeph">TLbsOptionsItem::EPosUpdateCalculation</samp> specifies that a calculated position is required from the Integration Module </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-E836DF8A-C222-5CB2-8CC6-BE451972CEF1"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-E836DF8A-C222-5CB2-8CC6-BE451972CEF1"><!-- --></a><p> <samp class="codeph">TLbsOptionsItem:EPosUpdateMeasurement</samp> specifies that a set of GPS measurements are required from the Integration Module </p>
 </li>
 </ul>
 <p>LBS creates an array with two <samp class="codeph">TLbsGpsOptionsItem</samp> elements, the first of type <samp class="codeph">TLbsOptionsItem::EPosUpdateCalculation</samp> and the second of type <samp class="codeph">TLbsOptionsItem:EPosUpdateMeasurement.</samp>  </p>
 <p>LBS calls <a href="GUID-B0986288-97BA-35FE-B35B-04DDAE079B76.html#GUID-B0986288-97BA-35FE-B35B-04DDAE079B76__GUID-0F539830-ECFE-3CE2-AC56-DB2A196E7CED"><span class="apiname">TLbsGpsOptions::SetGpsMode()</span></a> with a parameter value of <samp class="codeph">EGpsPreferTerminalBased</samp>. To set the GPS mode on the Integration Module, LBS calls <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-353317B8-81BE-3C9D-8186-CC7CB1056AA1"><span class="apiname">CLbsLocationSourceGpsBase::SetGpsOptions()</span></a> passing the <samp class="codeph">TLbsGpsOptions</samp> reference as a parameter. </p>
 <p>The type and position of the elements in the array controls the type of data the Integration Module returns when it notifies LBS of a <a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-B3949496-29ED-55B6-BB2F-25BA85CC662E">location update</a>. </p>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F4A152A0-82D5-52C1-9640-535B62088CDF"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F4A152A0-82D5-52C1-9640-535B62088CDF"><!-- --></a><strong>LBS sends power advice</strong> </p>
 <p>Power advice messages are sent from LBS to notify the Integration Module that it should change its power status. Power advice is sent by LBS calling <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-E676384E-6528-3A63-A6FC-8CED25C0976E"><span class="apiname">CLbsLocationSourceGpsBase::AdvisePowerMode()</span></a>, passing a <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-4FDB2D40-8212-303B-9039-EAEDE14627FC"><span class="apiname">CLbsLocationSourceGpsBase::TPowerMode</span></a> value as a parameter. The Integration Module must implement its own code to control the power mode of the GPS hardware. The meanings of the <samp class="codeph">TPowerMode</samp> values are as follows: </p>
 
<div class="tablenoborder"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-C622FD4D-0C9F-58DC-BC95-3ADFCCC6D74A"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-C622FD4D-0C9F-58DC-BC95-3ADFCCC6D74A" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d918528e1501">TPowerMode</th>
 <th class="cellrowborder" valign="top" id="d918528e1504">Meaning</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d918528e1501 "><p> <samp class="codeph">EPowerModeOn</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e1504 "><p>Advise the module to turn on GPS hardware power </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e1501 "><p> <samp class="codeph">EPowerModeStandby</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e1504 "><p>Advise the module to set the GPS hardware power to standby </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e1501 "><p> <samp class="codeph">EPowerModeOff</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e1504 "><p>Advise the module to turn off GPS hardware power </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e1501 "><p> <samp class="codeph">EPowerModeClose</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e1504 "><p>Advise the module that the LBS subsystem is shutting down </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p>When the GPS hardware changes its power mode the Integration Module must notify LBS of a <a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6FFF6FDB-1A8F-5503-9F0E-D31B7F21CD12">device status change</a> by calling <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-ED633D07-535A-3B07-9DEF-B19688542E7B"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateDeviceStatus()</span></a>. This message not shown on figure 2. </p>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-B661DC32-76A0-570D-B6B6-B0C69712C427"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-B661DC32-76A0-570D-B6B6-B0C69712C427"><!-- --></a><strong>LBS requests a location update (for a GPS position fix or GPS measurements)</strong> </p>
 <p>LBS calls <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-C5784C56-C6BA-3D11-AFEB-D08CA8E3E083"><span class="apiname">CLbsLocationSourceGpsBase::RequestLocationUpdate()</span></a> to request a location update. The method should be implemented to return as soon as possible. At some later time the A-GPS Integration Module informs LBS that a location update is available by calling <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateLocation()</span></a>. </p>
 <p>The full signature of the method is <samp class="codeph">RequestLocationUpdate(const
             TTime &amp;aTargetTime, const TLbsLocRequestQuality
             &amp;aQuality)</samp>. </p>
 <p> <samp class="codeph">aTargetTime</samp> specifies when a location update is required. When the GPS module responds by calling <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateLocation()</span></a> it is <samp class="codeph">aTargetTime</samp> that is used to couple a location update request and response within the LBS subsystem. Therefore an Integration Module must use <samp class="codeph">aTargetTime</samp> to identify the response to LBS. </p>
 <p> <samp class="codeph">aQuality</samp> specifies quality criteria for the request including the required position accuracy and a <samp class="codeph">MaxFixTime</samp> which is the maximum time that the Integration Module should spend processing the location request. If the Integration Module is not capable of delivering a position within <samp class="codeph">MaxFixTime</samp> then it must return an incomplete update. See the section <a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-B3949496-29ED-55B6-BB2F-25BA85CC662E">Module notifies LBS of a location update</a> for more details. </p>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-23A6EF21-DF43-5894-8159-27442A6828C6"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-23A6EF21-DF43-5894-8159-27442A6828C6"><!-- --></a><strong>Module requests assistance data (if necessary)</strong> </p>
 <p>Depending on the GPS mode that was set before the location request was made and the age of any assistance data it may already have, an A-GPS Integration Module may request assistance data from the LBS subsystem by calling <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-B111B2A2-C52C-3D98-B82B-30958017AE5E"><span class="apiname">MLbsLocationSourceGpsObserver::RequestAssistanceData()</span></a>. </p>
 <p>The Integration Module specifies the type of assistance data it requires by creating a <a href="GUID-DA483177-76AC-3110-A9BD-9CD97BF590CD.html"><span class="apiname">TLbsAsistanceDataGroup</span></a> bitmask which contains bit values from the <a href="GUID-58DA9D8B-50F6-38CB-B5BC-D8C1784ACFDB.html"><span class="apiname">TLbsAssistanceDataItem</span></a> enumeration. Each value of <samp class="codeph">TLbsAssistanceDataItem</samp> specifies a particular type of assistance data. </p>
 <p>The module passes a bitwise OR of <a href="GUID-58DA9D8B-50F6-38CB-B5BC-D8C1784ACFDB.html"><span class="apiname">TLbsAssistanceDataItem</span></a> values as a <a href="GUID-DA483177-76AC-3110-A9BD-9CD97BF590CD.html"><span class="apiname">TLbsAsistanceDataGroup</span></a> parameter in a call to <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-B111B2A2-C52C-3D98-B82B-30958017AE5E"><span class="apiname">MLbsLocationSourceGpsObserver::RequestAssistanceData()</span></a>. </p>
 <p> <strong>Notes:</strong>  </p>
 <a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F5A7B705-AE6A-5EDB-AC33-261728E16306"><!-- --></a><ol id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F5A7B705-AE6A-5EDB-AC33-261728E16306"><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6B0AD674-3E49-5790-858C-BC4DEB32E85B"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6B0AD674-3E49-5790-858C-BC4DEB32E85B"><!-- --></a><p>Calling <samp class="codeph">RequestAssistanceData()</samp> causes LBS to retrieve new assistance data from the network. The LBS subsystem caches assistance data when it is retrieved. Before calling <samp class="codeph">RequestAssistanceData()</samp> for new assistance data it is most efficient for an Integration Module to check the timestamp of the assistance data cached by LBS by calling <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-680269D6-F65D-36B4-8738-6A7BD021B500"><span class="apiname">MLbsLocationSourceGpsObserver::GetAssistanceDataItemTimeStamp()</span></a>. The Integration Module can use the returned timestamp to decide if it the assistance data is still valid, or if it needs to obtain new data by calling <samp class="codeph">RequestAssistanceData()</samp>. </p>
 <p>A licensee can implement an Integration Module to have its own assistance data cache. An Integration Module can be instructed to reset its assistance data cache. See <a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-906DA81C-CB41-58C4-8CA1-79552404B5B4">Resetting A-GPS assistance data</a> for more information. </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-07219A38-77AA-56FA-8300-5F0B9A837580"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-07219A38-77AA-56FA-8300-5F0B9A837580"><!-- --></a><p>If a Integration Module does not require assistance data (possibly because the assistance data it currently has is still accurate) then it must respond to <samp class="codeph">RequestLocationUpdate()</samp> by calling <samp class="codeph">RequestAssistanceData() </samp> with a parameter <samp class="codeph">bitmask=0</samp>. </p>
 </li>
 </ol>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-4820CF1C-DE98-5CC1-9A0E-72C5874A28D0"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-4820CF1C-DE98-5CC1-9A0E-72C5874A28D0"><!-- --></a><strong>LBS notifies the A-GPS Integration Module of assistance data availability</strong> </p>
 <p>When LBS obtains assistance data from the network it informs the module by calling <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-0370A120-0222-3559-A4B5-89C997B192D7"><span class="apiname">CLbsLocationSourceGpsBase::AssistanceDataEvent()</span></a>. As shown in figure 2, this method may be called multiple times as new assistance data arrives from the network. LBS can call this method to deliver assistance data at any time, not just immediately after a module calls <samp class="codeph">RequestAssistanceData()</samp>. </p>
 <p>The type of assistance data available is indicated by a <a href="GUID-DA483177-76AC-3110-A9BD-9CD97BF590CD.html"><span class="apiname">TLbsAsistanceDataGroup</span></a> bitmask parameter which contains <a href="GUID-58DA9D8B-50F6-38CB-B5BC-D8C1784ACFDB.html"><span class="apiname">TLbsAssistanceDataItem</span></a> values. </p>
 <p> <strong>Note: </strong> This method is used to notify LBS of a network error during a location request in which case the status parameter is set to a negative error code (a network or network protocol specific error code). </p>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-9FEAEAA5-1555-5ADC-AF92-DC2C1BF00278"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-9FEAEAA5-1555-5ADC-AF92-DC2C1BF00278"><!-- --></a><strong>Module retrieves A-GPS assistance data items</strong> </p>
 <p>When it is notified that assistance data is available, the A-GPS Integration Module uses <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-AAEE001E-B121-3590-88A8-97200645BFA9"><span class="apiname">MLbsLocationSourceGpsObserver::GetAssistanceDataItem()</span></a> to get obtain it. </p>
 <p>Where more than one item of assistance data is available (as indicated by the <a href="GUID-DA483177-76AC-3110-A9BD-9CD97BF590CD.html"><span class="apiname">TLbsAsistanceDataGroup</span></a> bitmask parameter passed with <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-0370A120-0222-3559-A4B5-89C997B192D7"><span class="apiname">CLbsLocationSourceGpsBase::AssistanceDataEvent()</span></a>) it is necessary to call <samp class="codeph">GetAssistanceDataItem()</samp> for each item. </p>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-B3949496-29ED-55B6-BB2F-25BA85CC662E"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-B3949496-29ED-55B6-BB2F-25BA85CC662E"><!-- --></a><strong>Module notifies LBS of a location update</strong> </p>
 <p>When the Integration Module calculates a GPS position fix or has obtained GPS position measurements it calls <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateLocation()</span></a>. The parameter list of <samp class="codeph">UpdateLocation()</samp> is as follows: </p>
 <p>void UpdateLocation(TInt aStatus, const TPositionInfoBase *aPosInfoArray[], TInt aNumItems, const TTime &amp;aTargetTime); </p>
 <p> <samp class="codeph">aPosInfoArray</samp> is a return parameter that is a pointer to an array of <a href="GUID-73D6F438-C270-33B9-974B-D4D1583E1738.html"><span class="apiname">TPositionInfoBase</span></a> objects. What an Integration Module returns in this parameter depends on the GPS positioning mode that was set by calling <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-353317B8-81BE-3C9D-8186-CC7CB1056AA1"><span class="apiname">CLbsLocationSourceGpsBase::SetGpsOptions()</span></a>. </p>
 <ul><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-E3302167-A878-5327-9F85-5ECB09D37FB2"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-E3302167-A878-5327-9F85-5ECB09D37FB2"><!-- --></a><p>Autonomous mode and Terminal Based mode </p>
 <p>The Integration Module returns a pointer to a single <a href="GUID-54AE0674-C49D-3329-8B77-3A58EFFC03D7.html"><span class="apiname">TPositionSatelliteInfo</span></a> object. It contains a position fix and GPS satellite details. The position fix may be incomplete if the Integration Module was unable to calculate the position completely before the <samp class="codeph">MaxFixTime</samp> (specified as part of the location request) expired. For example, a position may be returned that contains only horizontal but not vertical co-ordinates. Missing co-ordinate values are set to NaN. </p>
 <p>Up until <samp class="codeph">MaxFixTime</samp>, an Integration Module calls <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateLocation()</span></a> whenever it has calculated a more accurate or complete position fix. </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6E130074-B491-530F-A63E-4984342601B0"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6E130074-B491-530F-A63E-4984342601B0"><!-- --></a><p>Terminal Assisted mode </p>
 <p>The Integration Module returns a pointer to a single <a href="GUID-66C5B5DB-6B9A-3071-816C-F51AEED2E8DE.html"><span class="apiname">TPositionGpsMeasurementInfo</span></a> object. It contains a set of GPS measurements, but not a position fix. </p>
 <p>Up until <samp class="codeph">MaxFixTime</samp>, an Integration Module calls <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateLocation()</span></a> whenever it obtains additional GPS measurements. Measurements are sent to the network where they are used to calculate a position. </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F621F779-D38E-53B9-8E5B-FDFAC1208451"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-F621F779-D38E-53B9-8E5B-FDFAC1208451"><!-- --></a><p>Terminal Based mode + Terminal Assisted mode (TB + TA) </p>
 <p>The Integration Module returns a pointer to an array of elements derived from class <a href="GUID-73D6F438-C270-33B9-974B-D4D1583E1738.html"><span class="apiname">TPositionInfoBase</span></a>. </p>
 <p>Specifically, the array has elements of the derived classes <a href="GUID-54AE0674-C49D-3329-8B77-3A58EFFC03D7.html"><span class="apiname">TPositionSatelliteInfo</span></a> and <a href="GUID-66C5B5DB-6B9A-3071-816C-F51AEED2E8DE.html"><span class="apiname">TPositionGpsMeasurementInfo</span></a>. The number and type of elements returned must be as specified by LBS when it set the GPS mode. In practice, this means that the array returned by an Integration Module must have two elements: </p>
 <ul><li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1824215B-DEB2-5D40-8441-45B44702B55E"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1824215B-DEB2-5D40-8441-45B44702B55E"><!-- --></a><p>The first element is of class <a href="GUID-54AE0674-C49D-3329-8B77-3A58EFFC03D7.html"><span class="apiname">TPositionSatelliteInfo</span></a> (and contains a position fix that may be incomplete) </p>
 </li>
 <li id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-8ADABF7B-98DE-5E07-AE72-9C3B9D760D8E"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-8ADABF7B-98DE-5E07-AE72-9C3B9D760D8E"><!-- --></a><p>The second element is of class <a href="GUID-66C5B5DB-6B9A-3071-816C-F51AEED2E8DE.html"><span class="apiname">TPositionGpsMeasurementInfo</span></a> and contains GPS measurements. </p>
 </li>
 </ul>
 <p>As in TA and TB modes, the Integration Module calls <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateLocation()</span></a> whenever it obtains additional GPS measurements or calculates a more accurate or complete position fix (up until the location request <samp class="codeph">MaxFixTime</samp>). </p>
 </li>
 </ul>
 <p> <strong>Error codes</strong>  </p>
 <p>An Integration Module must return a location update (positions and/or measurements) by the <samp class="codeph">MaxFixTime</samp> that was specified by LBS in <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-C5784C56-C6BA-3D11-AFEB-D08CA8E3E083"><span class="apiname">CLbsLocationSourceGpsBase::RequestLocationUpdate()</span></a>. If an Integration Module has only incomplete data by <samp class="codeph">MaxFixTime</samp> it must return it (<samp class="codeph">aStatus == KErrNone</samp>). </p>
 <p>If an Integration Module decides that it will be unable to calculate a position fix with the specified quality criteria, then rather than waiting until <samp class="codeph">MaxFixTime</samp> it can return its best available position (which may be incomplete or contain invalid data) with <samp class="codeph">aStatus ==
             KPositionCalculationFutile</samp>. </p>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-84D16C45-7ABC-5701-9E02-AF5EEFB34565"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-84D16C45-7ABC-5701-9E02-AF5EEFB34565"><!-- --></a><strong>Cancelling a location update request</strong> </p>
 <p>LBS can cancel an outstanding location request by calling <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-F6BC1743-7DD3-30FD-9E94-BC13E907D17C"><span class="apiname">CLbsLocationSourceGpsBase::CancelLocationRequest()</span></a> (not shown on figure 2). </p>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-906DA81C-CB41-58C4-8CA1-79552404B5B4"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-906DA81C-CB41-58C4-8CA1-79552404B5B4"><!-- --></a><strong>Resetting A-GPS assistance data</strong> </p>
 <p>During testing it is useful to be able to reset some or all of the A-GPS assistance data cached by an Integration Module. One of the main benefits is to allow the Time To First Fix (TTFF) of a module to be tested without the need to restart the LBS subsystem or the mobile device. </p>
 <p>A licensee Network Protocol Module calls <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4__GUID-24F29872-17BA-3B13-A7A3-B36113786964"><span class="apiname">MLbsNetworkProtocolObserver::ProcessAssistanceData()</span></a> to tell the LBS subsystem to reset some or all of its assistance data. The Network Protocol Module passes a parameter value of <a href="GUID-0F4B82BB-37D6-35AD-993B-F766E1CF0637.html"><span class="apiname">KPositionAssistanceDataReset</span></a> to specify that LBS must clear the assistance data in its cache and a <a href="GUID-343E1FD7-9D75-3A41-84EC-B35030C06557.html"><span class="apiname">TLbsAssistanceDataGroup</span></a> parameter to specify the bitmask of types of assistance data that must be reset. </p>
 <p>LBS responds by clearing the specified types of assistance data in its own cache. It also calls <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-0370A120-0222-3559-A4B5-89C997B192D7"><span class="apiname">CLbsLocationSourceGpsBase::AssistanceDataEvent()</span></a> on the Integration Module with a <a href="GUID-0F4B82BB-37D6-35AD-993B-F766E1CF0637.html"><span class="apiname">KPositionAssistanceDataReset</span></a> parameter to specify an assistance data reset and a <a href="GUID-343E1FD7-9D75-3A41-84EC-B35030C06557.html"><span class="apiname">TLbsAssistanceDataGroup</span></a> parameter to specify the bitmask of types of assistance data that must be reset. If the licensee A-GPS Integration Module implements its own assistance data cache it must clear the types of assistance data specified by LBS. </p>
 <p>Figure 3 shows a simple sequence for assistance data reset, followed by the start of an MO-LR. </p>
 <div class="fignone" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1EE2C2E5-AD4F-50F7-B05E-EE9FFDF9B0D6"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-1EE2C2E5-AD4F-50F7-B05E-EE9FFDF9B0D6"><!-- --></a><span class="figcap">Figure 3. 
                Figure 3. Assistance data reset before location request 
             </span> <img src="GUID-7C6FB773-0F87-5937-BF44-BEB8F4B6A62C_d0e448952_href.png"/></div>
 <p id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6FFF6FDB-1A8F-5503-9F0E-D31B7F21CD12"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-6FFF6FDB-1A8F-5503-9F0E-D31B7F21CD12"><!-- --></a><strong>GPS hardware device status changes and quality status changes</strong> </p>
 <p>(Not shown on figure 2) </p>
 <p><strong>Device status changes </strong> </p>
 <p>When the base GPS hardware changes its power mode the Integration Module must notify LBS by calling <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-ED633D07-535A-3B07-9DEF-B19688542E7B"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateDeviceStatus()</span></a>. </p>
 <p><strong>Quality status changes </strong> </p>
 <p>If an Integration Module detects that there is a change in the quality of position it is able to provide it must notify LBS by calling <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-1EDA3DF0-392A-3362-B8FA-58E822D5FC21"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateDataQualityStatus()</span></a>. </p>
 <p>See <a href="GUID-AC7069ED-8CA5-55FC-9DF6-595C0505C672.html" title="This document describes positioning technology module status, which applications access through the Location Acquisition API.">here</a> for more information about how client applications can get updates of device status changes and quality status changes. </p>
 </div>
 <div class="section" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-3CBF2797-5F9D-50B2-A74A-1810A943CEAA"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-3CBF2797-5F9D-50B2-A74A-1810A943CEAA"><!-- --></a><h2 class="sectiontitle">Integration module configuration</h2> <p>In addition to coding the Integration Module, there are configuration steps that a licensee must complete: </p>
 <p><strong>Create a GPS Integration Module .ini file</strong> </p>
 <p>The GPS Integration Module .ini file identifies a GPS 'source of location' to LBS. This is the pairing of the GPS/A-GPS Integration Module ECom plug-in with the A-GPS Location Manager process. </p>
 <p>The module .ini file created by a device creator for their own Integration Module must have the same layout as the following example and it must be exported to <span class="filepath">&lt;rom_drive&gt;:\private\10282253\lbs\locmods\</span> (<samp class="codeph">10282253</samp> is the UID3 of the LBS Root process). </p>
 <pre class="codeblock" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-2A4885EC-7129-5055-B678-55B8CA1FF3F5"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-2A4885EC-7129-5055-B678-55B8CA1FF3F5"><!-- --></a>
# example_datasource.ini
[1]
Version= 0.2.1        #
ModuleId= 271064388    # dec
ModuleName= "Example_AGPS_Module
TechnologyType= 0101    # binary
DeviceLocation= 1    # binary
Capabilities= 11111    # binary
ClassesSupported= 111111    # binary
TimeToFirstFix= 90000    # ms
TimeToNextFix= 1000    # ms
HorizontalAccuracy= 5.4 # real
VerticalAccuracy= 5.4 # real
CostIndicator= 2    # dec
PowerConsumption= 2    # dec
DataSourceId= 271065673    # dec
ExecutableName= "lbsgpslocmanager.exe"
DeviceGpsModeCaps=1011    # binary - Exclusive TA OR TB (+ Autonomous)</pre>
 <p>The table below describes each of the values in a module .ini file. </p>
 <p>Note: the <samp class="codeph">ModuleId</samp> UID is decimal and must be the UID of the A-GPS Location Manager process. The <samp class="codeph">DataSourceId</samp> UID is also decimal and is the implementation UID of the Integration Module ECOM plug-in. </p>
 
<div class="tablenoborder"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-5D6649C5-E761-59A5-AC79-90FC684C0999"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-5D6649C5-E761-59A5-AC79-90FC684C0999" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d918528e2146"> Parameter </th>
 <th class="cellrowborder" valign="top" id="d918528e2149"> Type </th>
 <th class="cellrowborder" valign="top" id="d918528e2152"> Description </th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>Version </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A string </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>The GPS Integration Module version. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>ModuleId </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A UID (decimal) </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>The UID3 of the location manager process that uses this GPS Integration Module. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>TechnologyType </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A binary value from <a href="GUID-B098F3DB-E2FE-3C5A-8508-4B04D954AB26.html#GUID-B098F3DB-E2FE-3C5A-8508-4B04D954AB26__GUID-03AF8C51-1CAF-3F4C-BED1-17844FAE8423"><span class="apiname">TPositionModuleInfo::_TTechnologyType</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>The technology types the module supports: one or more of handset based, network based or network assisted. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>DeviceLocation </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A bitmask value from <a href="GUID-B098F3DB-E2FE-3C5A-8508-4B04D954AB26.html#GUID-B098F3DB-E2FE-3C5A-8508-4B04D954AB26__GUID-3AD1FF55-D635-3C41-AB06-EF426E0B6993"><span class="apiname">TPositionModuleInfo::_TDeviceLocation</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>Specifies whether the GPS Integration Module is internal or external to the handset. Currently only internal modules are supported. Defined in <span class="filepath">LbsCommon.h</span>. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>Capabilities </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A bitmask value from <a href="GUID-B098F3DB-E2FE-3C5A-8508-4B04D954AB26.html#GUID-B098F3DB-E2FE-3C5A-8508-4B04D954AB26__GUID-C798CBA5-39BE-3072-9E9B-5910C4835DCC"><span class="apiname">TPositionModuleInfo::_TCapabilities</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>A bitmask value that defines the capabilities of this module (such as the ability to provide vertical position and speed data). Defined in <span class="filepath">LbsCommon.h</span>. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>ClassesSupported </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A bitmask value from <a href="GUID-BC8B2D08-1B64-35BB-8F58-4E7123650BD7.html"><span class="apiname">_TPositionInfoClassType</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>A bitmask value that defines the class types that are supported by this module. Defined in <span class="filepath">LbsClassTypes.h</span>. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>TimeToFirstFix </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>An integer value </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>The time to get the first location fix (in milliseconds) </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>TimeToNextFix </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>An integer value </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>The time to get subsequent location fixes after the first location fix (in milliseconds). </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>HorizontalAccuracy </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A real value </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>The maximum accuracy of horizontal position that the module can supply (in metres). For example 100 if the location fix is accurate to within 100m. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>VerticalAccuracy </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A real value </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>The maximum accuracy of vertical position that the module can supply (in metres). </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>CostIndicator </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A value from <a href="GUID-1AA235FA-CEC1-3853-8F96-C538C02B596D.html#GUID-1AA235FA-CEC1-3853-8F96-C538C02B596D__GUID-78C084A0-43F8-3040-BD98-70E2E62A5D45"><span class="apiname">TPositionQuality::TCostIndicator</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>A qualitative measure of the financial cost to the handset owner of using this module to obtain a location fix. Defined in <span class="filepath">LbsCommon.h</span>. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>PowerConsumption </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A value from <a href="GUID-1AA235FA-CEC1-3853-8F96-C538C02B596D.html#GUID-1AA235FA-CEC1-3853-8F96-C538C02B596D__GUID-AD77543D-625A-39CF-A1D5-F5B5636E17F7"><span class="apiname">TPositionQuality::TPowerConsumption</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>A qualitative measure of the power consumption of using this module to obtain a location fix. Defined in <span class="filepath">LbsCommon.h</span>. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>DataSourceId </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A UID (decimal) </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>The UID3 of the module ECOM plug-in. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>ExecutableName </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A string </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>The name of the location manager process that uses this module. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d918528e2146 "><p>DeviceGpsModeCaps </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2149 "><p>A binary value </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d918528e2152 "><p>The positioning modes supported by the module. The values are defined in <span class="filepath">LbsExtendModuleInfo.h</span>. Possible values are: </p>
 <p>0001 - Module supports Terminal Based positioning and is also able to calculate position autonomously if assistance data is unavailable, or does not arrive on time (e.g. a fix is obtained before assistance data delivery). </p>
 <p>0010 - Module supports Terminal Assisted positioning. The module may, but does not have to be able to calculate position autonomously if Terminal Assisted positioning does not succeed (e.g. network is unavailable). </p>
 <p>0011 - Module supports Terminal Based positioning OR Terminal Assisted positioning and is also able to calculate position autonomously if assistance data is unavailable, or does not arrive on time (e.g. a fix is obtained before assistance data delivery). </p>
 <p>0100 - Module can perform Terminal Assisted AND Terminal Based positioning at the same time. It is also able to calculate position autonomously if assistance data is unavailable (e.g. network error), or does not arrive on time (e.g. a fix is obtained before assistance data delivery). NOTE: If this bit is set then it is not necessary to set either of the less significant 2 bits as they are implied. </p>
 <p> <em>If DeviceGpsModeCaps is not specified in this file, LBS assumes that the module can support both Terminal Based AND Terminal Assisted GPS modes at the same time.</em>  </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p><strong> Create an Integration Module .rss file</strong> </p>
 <p>A GPS Integration Module is implemented as an ECOM plug-in and has a .rss resource file that specifies the UIDs of the interface and the implementation class. </p>
 <p> <strong>The value of DataSourceId in the module .ini file is decimal and must be equal to the hexadecimal implementation_uid value specified in the module ECOM .rss file.</strong>  </p>
 <p>An example .rss file is shown below. The <samp class="codeph">implementation_uid</samp> value of <samp class="codeph">0x10282249</samp> is the hexadecimal value of the <samp class="codeph">DataSourceId</samp> value of <samp class="codeph">271065673</samp> specified in <span class="filepath">example_datasource.ini</span> above. </p>
 <pre class="codeblock" id="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-3D14C891-840D-510B-8CB0-1935E16CD3B2"><a name="GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-3D14C891-840D-510B-8CB0-1935E16CD3B2"><!-- --></a>// example_datasource.rss
//
// The Example Data Source resource file

#include "ecom/registryinfov2.rh"

RESOURCE REGISTRY_INFO theInfo
    {
    resource_format_version = RESOURCE_FORMAT_VERSION_2;
    dll_uid = 0x10281D6D;
    interfaces =
        {
        INTERFACE_INFO
            {
            interface_uid = 0x10281D73;
            implementations = 
                {
                IMPLEMENTATION_INFO
                    {
                    implementation_uid = 0x10282249;
                    version_no = 1;
                    display_name = "Example GPS Module";
                    default_data = "";
                    opaque_data = "";
                    rom_only = 0;
                    }
                };
            }
        };
     }
</pre>
 <p>The <span class="filepath">module.ini</span> file described in the <a href="GUID-D18B4715-3942-52EA-9D2F-E145037FA47A.html" title="The documents in this section describe the tasks necessary to build and configure the LBS subsystem. These documents are for device creators.">LBS integration and configuration guide</a> must be modified to describe the capabilities of the Integration Module. Parameters that may need to be changed by licensees include the time to get a first fix and the accuracy of position fixes that can be delivered. </p>
 <p><strong>Update the LBS administration settings</strong> </p>
 <p>The <a href="GUID-23BBC1D8-B3A0-5148-A4F1-22ECF3043E4E.html" title="The documents in this section explain how to configure LBS by using the LBS Administration API or by using a repository initialisation file.">LBS administration</a> setting <samp class="codeph">KLbsSettingHomeGpsMode</samp> (and <samp class="codeph">KLbsSettingRoamingGpsMode</samp>) must be set. The settings specify the default GPS positioning mode that LBS sets for the Integration Module. A default value can be specified in the <a href="GUID-852E58C1-EA5C-5B46-9020-4463D3FA06AD.html" title="This topic describes the LBS administration repository initialisation file.">administration repository initialisation file</a> and it can also be set at runtime via the <a href="GUID-9348D79B-D4BF-50B0-B787-DDA2765CE058.html" title="This document describes the LBS administration service and the API that it supports.">LBS Administration API</a>. The set of GPS positioning mode values are defined by <a href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.html#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945__GUID-9F902F01-29A3-3929-B045-83C72DB96E39"><span class="apiname">CLbsAdmin::TGpsMode</span></a>. </p>
 <p>Note : When the network is involved in a location request (which it is for any GPS mode other than autonomous) it can request a GPS mode that overrides the administration setting. For more information about how the positioning mode is set and the behaviour that the LBS subsystem expects from an Integration Module see <a href="GUID-5DD17088-1F9C-5810-8143-5067A2B18330.html#GUID-5DD17088-1F9C-5810-8143-5067A2B18330__GUID-EF629CC3-EFA8-559E-970C-1AC5B7B93324">LBS sets GPS options</a>. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-8F2BA0D3-1549-5837-A105-3AB484CDB80B.html" title="The documents in this section describe the A-GPS Location Data Source API.">A-GPS Location Data Source API</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>