<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="NKern::Lock()"/>
<meta name="abstract" content="This document specifies that the method NKern::Lock() is now obsolete and suggests alternative locking mechanisms."/>
<meta name="description" content="This document specifies that the method NKern::Lock() is now obsolete and suggests alternative locking mechanisms."/>
<meta name="DC.Relation" scheme="URI" content="GUID-734588CA-5644-438A-9CC9-77ECBE0C1EEA.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-629EAA30-ED77-4CA9-91ED-36C818D7B4F4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-734588CA-5644-438A-9CC9-77ECBE0C1EEA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-734588CA-5644-438A-9CC9-77ECBE0C1EEA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-16AB388A-ED3E-4901-857D-834072437D25.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1F280171-A3F3-4129-8DBE-3B1C4D629C68.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>NKern::Lock()</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE"><a name="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2561665 id2563813 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-629EAA30-ED77-4CA9-91ED-36C818D7B4F4.html" title="Provides summary of documents to make SMP-safe applications.">SMP</a> &gt; <a href="GUID-734588CA-5644-438A-9CC9-77ECBE0C1EEA.html" title="This is an collection of documents that describe mechanisms that have been rendered obsolete by the introduction of SMP.">Obsolete Mechanisms</a> &gt; </div>
<h1 class="topictitle1">NKern::Lock()</h1>
<div><p>This document specifies that the method <samp class="codeph">NKern::Lock()</samp> is now obsolete and suggests alternative locking mechanisms.</p>

<div class="section" id="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE__GUID-960B22FE-BF66-49F7-86F0-126C5E54BD91"><a name="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE__GUID-960B22FE-BF66-49F7-86F0-126C5E54BD91"><!-- --></a><h2 class="sectiontitle">Description
of NKern::Lock()</h2><p>This method disables the scheduler and
the <samp class="codeph">IDFC</samp> (Immediate Deferred Function Call), so that
the currently running thread cannot be pre-empted.</p>
<p>This is used
to prevent a thread from being re-entered while it is processing data,
and so that no data will be corrupted as a result.</p>
     </div>

<div class="section" id="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE__GUID-CC1DDBC0-CE7D-450A-AC93-E620F2235054"><a name="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE__GUID-CC1DDBC0-CE7D-450A-AC93-E620F2235054"><!-- --></a><h2 class="sectiontitle">The
reason why NKern::Lock() is now obsolete</h2><p>The <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-7CBBF72B-4519-38DD-92CA-38AF636AFD8A"><span class="apiname">NKern::Lock()</span></a> method can no longer be used as a means to stop scheduling, since
it only affects the core that the code is running on.</p>
</div>

<div class="section" id="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE__GUID-BE4893E5-A300-49B9-B8A0-CBC5BAD83287"><a name="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE__GUID-BE4893E5-A300-49B9-B8A0-CBC5BAD83287"><!-- --></a><h2 class="sectiontitle">The
replacement for NKern::Lock()</h2><p>This method should be replaced
with one of the following (depending on the circumstances ):</p>
<ul>
<li><p><a href="GUID-F5593B97-DBAD-3F84-8981-DA0994B78E52.html"><span class="apiname">DMutex</span></a></p>
</li>

<li><p><a href="GUID-D5B555DA-3D17-3ED2-A931-CB35BD93A953.html"><span class="apiname">NFastMutex</span></a></p>
</li>

<li><p><a href="GUID-16AB388A-ED3E-4901-857D-834072437D25.html" title="Spin locks allow resource execution control through fast lock context switching.">Spin
Locks</a></p>
</li>

<li><p><a href="GUID-1F280171-A3F3-4129-8DBE-3B1C4D629C68.html" title="Describes the new atomic operations added to euser.dll and the kernel.">Atomic
Operations</a></p>
</li>

</ul>
</div>

<div class="section" id="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE__GUID-04223DE5-D9B6-44D7-B1FC-1CC4DECD390D"><a name="GUID-50A38544-8B2A-422D-92AF-2E9358878CFE__GUID-04223DE5-D9B6-44D7-B1FC-1CC4DECD390D"><!-- --></a><h2 class="sectiontitle">Areas
that could be affected</h2><p>At present, the replacement of this
method only affects kernel services to user side code through an executive
call (these are made via the <samp class="codeph">Exec</samp> class). This can
occur in the following areas:</p>
<ul>
<li><p>A <a href="GUID-E7550422-5121-3393-A85E-BB797969CD2A.html"><span class="apiname">DLogicalChannelBase</span></a> derived driver</p>
</li>

<li><p>A HAL (Hardware Abstraction Layer) handle implementation</p>
</li>

<li><p>Drivers that contain multiple threads</p>
</li>

<li><p>Code which is called back in the context of an unrelated thread.
For example,<a href="GUID-37BE6748-4281-393A-A85C-C04B625A1F23.html"><span class="apiname">TTickLink</span></a> or BSP (Board Support Package)
drivers.</p>
</li>

</ul>
</div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-734588CA-5644-438A-9CC9-77ECBE0C1EEA.html" title="This is an collection of documents that describe mechanisms that have been rendered obsolete by the introduction of SMP.">Obsolete Mechanisms</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-734588CA-5644-438A-9CC9-77ECBE0C1EEA.html" title="This is an collection of documents that describe mechanisms that have been rendered obsolete by the introduction of SMP.">Obsolete
Mechanisms</a></div>
<div><a href="GUID-16AB388A-ED3E-4901-857D-834072437D25.html" title="Spin locks allow resource execution control through fast lock context switching.">Spin
Locks</a></div>
<div><a href="GUID-1F280171-A3F3-4129-8DBE-3B1C4D629C68.html" title="Describes the new atomic operations added to euser.dll and the kernel.">Atomic
Operations</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>