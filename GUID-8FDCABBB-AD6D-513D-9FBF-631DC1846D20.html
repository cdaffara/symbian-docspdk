<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="How to Associate Data with an Alarm"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A60C4549-9FAA-496A-B743-D395A461B61F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F22B8035-CD08-4181-B03A-759E92CA967B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-00631ED2-1B7F-5FC4-9E81-4B6DF7946631.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A60C4549-9FAA-496A-B743-D395A461B61F.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>How to Associate Data with an Alarm</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2858252 id2858283 id2858368 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-F22B8035-CD08-4181-B03A-759E92CA967B.html">Organizer Guide</a> &gt; <a href="GUID-00631ED2-1B7F-5FC4-9E81-4B6DF7946631.html">Calendar Guide</a> &gt; <a href="GUID-A60C4549-9FAA-496A-B743-D395A461B61F.html">Tutorials</a> &gt; </div>
<h1 class="topictitle1">How to Associate Data with an Alarm</h1>
<div><p>As part of flexible alarm functionality users may wish to associate data with an alarm. For example, when an alarm expires the Alarm Control can display an image, play a sound/video file or open a URL. The class <a href="GUID-A4B96729-C74A-3E0A-9906-2CDED08574AC.html"><span class="apiname">CCalContent</span></a> holds in memory 8-bit data of any type, or a link to 8-bit data such as a URL. </p>
 <p>To set up data associated with an alarm: </p>
 <a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-3E86B9B9-95CF-5112-B5DA-5F8F201F7FC6"><!-- --></a><ol id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-3E86B9B9-95CF-5112-B5DA-5F8F201F7FC6"><li id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-C5771F4B-BA6C-5BE8-A87C-2E1210EB537D"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-C5771F4B-BA6C-5BE8-A87C-2E1210EB537D"><!-- --></a><p>Create a calendar entry such as an appointment or reminder: <a href="GUID-725D11A2-8805-3466-98DB-EF5CDEAF2801.html#GUID-725D11A2-8805-3466-98DB-EF5CDEAF2801__GUID-AAFDB9B2-260A-3CB4-BD6E-058A04FEC327"><span class="apiname">CCalEntry::NewL()</span></a>. </p>
 </li>
 <li id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-0A33163C-1C39-5F6E-B0EB-3DE7B4E3DE08"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-0A33163C-1C39-5F6E-B0EB-3DE7B4E3DE08"><!-- --></a><p>Use <a href="GUID-211D3640-9862-3F78-98FC-9793578117A9.html#GUID-211D3640-9862-3F78-98FC-9793578117A9__GUID-77A0F5D8-364A-34C9-BF51-AAAE2A0E92F4"><span class="apiname">CCalAlarm::NewL()</span></a> to create a calendar alarm containing expiry time details. It is optional to set user-defined sound when adding extra data. The following combinations are: </p>
 <ul><li id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-24FF19EC-E103-581F-A575-E15DFCBF926B"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-24FF19EC-E103-581F-A575-E15DFCBF926B"><!-- --></a><p>No user-defined sound and <a href="GUID-A4B96729-C74A-3E0A-9906-2CDED08574AC.html"><span class="apiname">CCalContent</span></a>  </p>
 </li>
 <li id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-A739BB2C-6094-5AAC-B350-FAD97E4A5474"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-A739BB2C-6094-5AAC-B350-FAD97E4A5474"><!-- --></a><p>User-defined sound and <a href="GUID-A4B96729-C74A-3E0A-9906-2CDED08574AC.html"><span class="apiname">CCalContent</span></a>  </p>
 </li>
 <li id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-11C78A05-98C6-5EF8-99B9-75024005917C"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-11C78A05-98C6-5EF8-99B9-75024005917C"><!-- --></a><p>User-defined sound and no <a href="GUID-A4B96729-C74A-3E0A-9906-2CDED08574AC.html"><span class="apiname">CCalContent</span></a>  </p>
 </li>
 </ul>
 </li>
 <li id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-6E5B9A2C-E4C1-50E6-83E3-4091416FF22B"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-6E5B9A2C-E4C1-50E6-83E3-4091416FF22B"><!-- --></a><p>Create the arbitrary data (<a href="GUID-A4B96729-C74A-3E0A-9906-2CDED08574AC.html"><span class="apiname">CCalContent</span></a>) to be played or displayed when the alarm expires. Two kinds of data may be added to an alarm. They are a URL and raw data (also known as inline data). Because it is recommended to use the smallest possible amounts of data to add to an alarm it is usually best to add files as URLs. Thus, an image file can be added simply as the URL of its address. </p>
 <p>The following code sample shows how to add a URL to an alarm: </p>
 <pre class="codeblock" id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-0D5AB6AF-1284-5A04-8DBC-0DEF0ACCDA0C"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-0D5AB6AF-1284-5A04-8DBC-0DEF0ACCDA0C"><!-- --></a> CCalContent* content = CCalContent::NewL();
 CleanupStack::PushL(content);
 . . .
 HBufC8* urlContentBuf = _L8("rtsp://radio.network.co.uk").AllocLC()
 HBufC8* mimetype = KMimeType("http").AllocLC();
    content-&gt;SetContentL(urlContentBuf, urlTypeBuf, CCalContent::EDispositionUrl);
    CleanupStack::Pop(urlContentBuf); // SetContentL takes ownership
    CleanupStack::Pop(urlTypeBuf);    //
    alarm-&gt;SetAlarmAction(content); //takes ownership
    CleanupStack::Pop(content);
    . . .</pre>
 </li>
 <li id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-93ACF59E-61EB-5306-9444-00FC3EBF1769"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-93ACF59E-61EB-5306-9444-00FC3EBF1769"><!-- --></a><p>Add the alarm to the entry using: </p>
 <pre class="codeblock" id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-DED01561-9750-5010-81EA-87D4C27A1B6A"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-DED01561-9750-5010-81EA-87D4C27A1B6A"><!-- --></a>entry-&gt;SetAlarmL(alarm);</pre>
 <p>The entry does not take ownership of the alarm. </p>
 </li>
 <li id="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-DB8C4145-5687-5281-A942-5F9012A748DF"><a name="GUID-8FDCABBB-AD6D-513D-9FBF-631DC1846D20__GUID-DB8C4145-5687-5281-A942-5F9012A748DF"><!-- --></a><p>Store the entry in the calendar database using <a href="GUID-D2835D4E-F0A8-3EDE-BC13-B45E52170556.html"><span class="apiname">CCalEntryView</span></a>. </p>
 </li>
 </ol>
 <div class="section"><h2 class="sectiontitle">Data Retrieval</h2> <p>To retrieve data from an expired alarm the associated Calendar entry must be found, as well as the Calendar entry's alarm and data. </p>
 <p>The last entry ID and the recurrence ID can be used to find the unique entry in the calendar databse. To get the alarm data once the proper entry has been found <a href="GUID-725D11A2-8805-3466-98DB-EF5CDEAF2801.html#GUID-725D11A2-8805-3466-98DB-EF5CDEAF2801__GUID-CBF85531-8FBE-3BA1-AB0B-F780653C5ABF"><span class="apiname">CCalEntry::Alarm()</span></a> can be used. This returns a <a href="GUID-211D3640-9862-3F78-98FC-9793578117A9.html"><span class="apiname">CCalAlarm</span></a> object from which the <a href="GUID-A4B96729-C74A-3E0A-9906-2CDED08574AC.html"><span class="apiname">CCalContent</span></a> can be retrieved using the method <a href="GUID-211D3640-9862-3F78-98FC-9793578117A9.html#GUID-211D3640-9862-3F78-98FC-9793578117A9__GUID-B7EB9319-E22D-3C6B-9E3A-F7A0841E6DC8"><span class="apiname">CCalAlarm::AlarmAction()</span></a>. This returns a <a href="GUID-A4B96729-C74A-3E0A-9906-2CDED08574AC.html"><span class="apiname">CCalContent</span></a> object. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-A60C4549-9FAA-496A-B743-D395A461B61F.html">Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>