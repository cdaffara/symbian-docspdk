<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Graphics Composition Collection Overview"/>
<meta name="abstract" content="This topic provides an introduction to the Graphics Composition collection."/>
<meta name="description" content="This topic provides an introduction to the Graphics Composition collection."/>
<meta name="DC.Relation" scheme="URI" content="GUID-63CB6C7E-44EC-5D0B-A37D-FE78F7D76592.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-63CB6C7E-44EC-5D0B-A37D-FE78F7D76592.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-63CB6C7E-44EC-5D0B-A37D-FE78F7D76592.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-859CAA08-59C9-5FD3-98DE-6BDD0D6ED50B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-41802B91-26B3-5F3C-AE04-B6954F3804B7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-ADA8CECB-0E70-5B9C-8F36-0714AAF0CD13.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Graphics Composition Collection Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095"><a name="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2387228 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-63CB6C7E-44EC-5D0B-A37D-FE78F7D76592.html" title="The Graphics Composition collection is a key part of ScreenPlay. The collection is made up of components that are concerned with composition. This is the process of putting together the output elements from various different sources to create the display that the viewer sees on the screen.">Graphics Composition Collection</a> &gt; </div>
<h1 class="topictitle1">Graphics Composition Collection Overview</h1>
<div><p>This topic provides an introduction to the Graphics Composition collection. </p>
<p> <strong>Variant</strong>: <a href="GUID-D93978BE-11A3-5CE3-B110-1DEAA5AD566C.html" title="This topic provides an introduction to ScreenPlay and its architecture. ScreenPlay is a new graphics architecture, introduced in Symbian^3 (S^3). ScreenPlay enables device creators to take advantage of improved software performance, hardware acceleration and third party graphics engines. ScreenPlay is sometimes known as the New Graphics Architecture (NGA).">ScreenPlay</a>. <strong>Target audience</strong>: Device creators. </p>
 <p>In the context of <a href="GUID-D93978BE-11A3-5CE3-B110-1DEAA5AD566C.html" title="This topic provides an introduction to ScreenPlay and its architecture. ScreenPlay is a new graphics architecture, introduced in Symbian^3 (S^3). ScreenPlay enables device creators to take advantage of improved software performance, hardware acceleration and third party graphics engines. ScreenPlay is sometimes known as the New Graphics Architecture (NGA).">ScreenPlay</a>, composition is the process of combining content, possibly from several different sources, before it is displayed. For example, the following figure represents a scenario where content from the camera viewfinder, video, and OpenVG 2D and OpenGL ES 3D games are brought together with the UI content and then displayed on the screen. This process of bringing the content together is called <strong>composition</strong>. Some of the incoming content may be produced by hardware renderers and the composition itself may be hardware accelerated. </p>
 <div class="fignone" id="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-05E408F2-C16E-5A9A-AFCB-9659E15014C9"><a name="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-05E408F2-C16E-5A9A-AFCB-9659E15014C9"><!-- --></a><span class="figcap">Figure 1. 
          Composition of several different types of content 
        </span> <img src="GUID-30E37559-B24D-569B-89BF-D5261DC5C689_d0e278980_href.png"/></div>
 <p>In ScreenPlay, sources that generate complex graphical output (such as the camera viewfinder, video, and OpenGLES and OpenVG games) can render directly to <strong>composition surfaces</strong>. These are essentially pixel buffers with associated metadata describing the width, height, stride and pixel format. In the Symbian implementation, surfaces are implemented using <a href="GUID-51514A4B-0220-557B-9F7A-FB110CEFEF10.html" title="A shared chunk is a mechanism that kernel-side code uses to share memory buffers safely with user-side code.">shared chunks</a>, which are memory regions that can be safely shared between user-side and kernel-side processes. </p>
 <p>The Window Server's render stage plug-ins render all of the UI content onto a special surface that is known as the <strong>UI surface</strong>. This is semi-transparent—unlike the background surfaces, which are opaque. The following diagram shows the composition engine bringing together the UI surface and the background surfaces onto the frame buffer, which the Display Driver then displays on the screen. </p>
 <div class="fignone" id="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-22111593-A1B0-5714-AFAE-F386012F0EED"><a name="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-22111593-A1B0-5714-AFAE-F386012F0EED"><!-- --></a><span class="figcap">Figure 2. 
          The ScreenPlay rendering stack 
        </span> <img src="GUID-D9203CF1-E8A7-5886-BD19-BE616BEF9111_d0e279001_href.png"/></div>
 <p>The composition engine maintains a stack of <strong>scene elements</strong> or layers (which describe the geometric positions, size and orientation), computes what is visible and performs the actual composition work. </p>
 <p>For a general introduction to some of the key composition concepts, see <a href="GUID-859CAA08-59C9-5FD3-98DE-6BDD0D6ED50B.html">Graphics Composition</a> and <a href="GUID-41802B91-26B3-5F3C-AE04-B6954F3804B7.html" title="This topic provides an introduction to the concept of scene elements within the context of graphics composition. Scene elements are sometimes referred to as layers.">Scene Elements</a>. </p>
 <div class="section"><h2 class="sectiontitle">Components</h2> <p>The following diagram shows the composition interface and engine and related components and indicates which are generic parts of the Symbian platform and which can be adapted by device and hardware manufacturers. </p>
 <div class="fignone" id="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-FC7504F9-F965-5484-AE80-E1E03D7190B0"><a name="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-FC7504F9-F965-5484-AE80-E1E03D7190B0"><!-- --></a><span class="figcap">Figure 3. 
             Key composition components 
          </span> <img src="GUID-1DD48C1F-B7E0-5379-BDF1-70C8744B57DD_d0e279029_href.png"/></div>
 <p>Here we will look briefly at the role of the key components. </p>
 <ul><li id="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-635A150F-3298-578B-BE21-53255CB55235"><a name="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-635A150F-3298-578B-BE21-53255CB55235"><!-- --></a><p>The composition engine maintains the stack of elements and computes what is visible. For example, it culls invisible areas and maintains a list of dirty rectangles. The composition engine also performs the actual composition work, blending the pixels if necessary. It supports limited transformation, such as scaling and rotation (in 90° increments). It can utilize GPU hardware composition and LCD hardware rotation if they are available. The Symbian Foundation provides a reference implementation based on the <a href="GUID-3B9AC7E9-3133-505F-9C1E-EB4BB4969838.html" title="The OpenWF Composition Interface Component provides the Symbian platform with a consistent interface to the open-source, cross-platform OpenWF Composition (OpenWF-C) APIs defined by the Khronos Group. The OpenWF-C Interface component includes the Khronos-released header files and some Symbian-specific files. It does not provide any implementations of the APIs.">OpenWF Composition (OpenWF-C) APIs</a> defined by the Khronos Group. </p>
 </li>
 <li id="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-44E97944-7628-5E4D-BDDD-23FE6E1AC26D"><a name="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-44E97944-7628-5E4D-BDDD-23FE6E1AC26D"><!-- --></a><p>The <a href="GUID-55EF3CEB-AF3E-5A32-96F3-F146D1A06C8F.html" title="The Surface Manager is responsible for creating graphics composition surfaces (called surfaces) in system memory and controlling access to them.">Surface Manager</a> creates and manages surfaces. As mentioned above, in the Symbian implementation, surfaces are implemented as shared chunks because they must be accessible by user-side processes and the kernel and composition hardware. Because shared chunks can only be allocated on the kernel side, the Surface Manager is a logical device driver (LDD) and kernel extension. Surfaces can be multi-buffered and are identified by a 128 bit identifier (called the surface ID). </p>
 </li>
 <li id="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-0514F41D-841A-5C4B-95F9-F8862FC87B8A"><a name="GUID-0DC3E5AA-1706-5255-ACD6-E7AB732E1095__GUID-0514F41D-841A-5C4B-95F9-F8862FC87B8A"><!-- --></a><p>The <a href="GUID-8E8FE99A-5F4D-5B0F-87AB-A58EB4BEB6E9.html" title="Each graphics composition surface has at least two interested stakeholders: the process responsible for drawing and maintaining the content and the composition engine, which uses the surface for creating the display. When one of the stakeholders does something to the surface, it usually means that another stakeholder needs to do something too. The Surface Update component provides a channel for the stakeholders to inform each other of changes.">Surface Update Server</a> provides a communication mechanism between the composition engine and its clients. This is particularly useful for clients (such as video) that produce fast updates and use multi-buffered surfaces. The Surface Update Server sends back to the client notification of which surface and which buffer within a multi-buffered surface was used for the last composition operation. The client can then start updating the buffer without risk of tearing or artefacts. </p>
 </li>
 </ul>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-63CB6C7E-44EC-5D0B-A37D-FE78F7D76592.html" title="The Graphics Composition collection is a key part of ScreenPlay. The collection is made up of components that are concerned with composition. This is the process of putting together the output elements from various different sources to create the display that the viewer sees on the screen.">Graphics Composition Collection</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-63CB6C7E-44EC-5D0B-A37D-FE78F7D76592.html" title="The Graphics Composition collection is a key part of ScreenPlay. The collection is made up of components that are concerned with composition. This is the process of putting together the output elements from various different sources to create the display that the viewer sees on the screen.">Graphics Composition Collection</a></div>
<div><a href="GUID-859CAA08-59C9-5FD3-98DE-6BDD0D6ED50B.html">Graphics Composition</a></div>
<div><a href="GUID-41802B91-26B3-5F3C-AE04-B6954F3804B7.html" title="This topic provides an introduction to the concept of scene elements within the context of graphics composition. Scene elements are sometimes referred to as layers.">Scene Elements</a></div>
<div><a href="GUID-ADA8CECB-0E70-5B9C-8F36-0714AAF0CD13.html" title="This topic provides an introduction to graphics composition surfaces, which are usually simply called surfaces. Surfaces are pixel buffers that have associated metadata describing the width, height, stride and pixel format and are used as input to the composition components. Surfaces can be multi-buffered and are identified by a 128-bit identifier (called the surface ID).">Surfaces</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>