<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="When to choose the RArray and RPointerArray types"/>
<meta name="abstract" content="Describes the occasions to use the RArray and RPointerArray types."/>
<meta name="description" content="Describes the occasions to use the RArray and RPointerArray types."/>
<meta name="DC.Relation" scheme="URI" content="GUID-2F64B579-73D3-548A-9104-16483AF77BCB.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2E085BAD-AAD7-5D1A-89A7-287EE42D1069.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E3F403EE-717B-5EA6-BC4E-6840097CAC10.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2F64B579-73D3-548A-9104-16483AF77BCB.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>When to choose the RArray and RPointerArray types</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735"><a name="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2392081 id2392089 id2392251 id2392260 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" title="The User Library allows the applications and services that run on a phone to access the functionality provided by the Symbian platform Kernel.">User Library</a> &gt; <a href="GUID-2E085BAD-AAD7-5D1A-89A7-287EE42D1069.html">Arrays And Lists</a> &gt; <a href="GUID-E3F403EE-717B-5EA6-BC4E-6840097CAC10.html">Using Dynamic Arrays</a> &gt; <a href="GUID-2F64B579-73D3-548A-9104-16483AF77BCB.html">Dynamic Arrays</a> &gt; </div>
<h1 class="topictitle1">When
to choose the RArray and RPointerArray types</h1>
<div><p>Describes the occasions to use the RArray and RPointerArray types.</p>

<p>The classes <a href="GUID-FAEBF321-6B08-3041-A01F-B1E7282D0707.html"><span class="apiname">RArray</span></a>, <a href="GUID-AAA13D1F-1BD7-3331-BB8C-11FA2795B53F.html"><span class="apiname">RPointerArray</span></a> and
the specialisation classes for arrays of 32-bit integers, <a href="GUID-6FCD6EC2-7293-37A9-8292-3FA05CCEE50B.html"><span class="apiname">RArray&lt;TInt&gt;</span></a> and <a href="GUID-97995D22-5A1C-3271-8D63-22D8703B676B.html"><span class="apiname">RArray&lt;TUint&gt;</span></a>,
provide behaviour equivalent to the <a href="GUID-12C65B99-553E-35CA-B36F-2F77BFC972B3.html"><span class="apiname">CArrayFixFlat</span></a> and<a href="GUID-FCE7D958-96AA-346D-8D22-0EF24B9DB7CC.html"><span class="apiname">CArrayPtrFlat</span></a> classes.</p>

<p>In general, the implementation of the <samp class="codeph">CArray...</samp> classes
reuses the <a href="GUID-33BEE1B4-20A1-392B-89B3-DA5D4F46418E.html"><span class="apiname">CBufBase</span></a> framework to provide two alternative
storage structures for the array data with very little <samp class="codeph">CArray...</samp> specific
code. There are two assertions for every array access, one in the <samp class="codeph">CArray...</samp> code
and one in the <samp class="codeph">CBufBase</samp> code.</p>

<p>In addition, the <samp class="codeph">CBufBase</samp> code operates in terms of byte
buffers, and these appear in the API as descriptors. In the implementation,
this requires a <a href="GUID-C0D29B11-1535-3D11-B318-B18D30A6120B.html"><span class="apiname">TPtr8</span></a> to be constructed, returned and inspected
for every array access.</p>

<p>Also, a number of TRAP harnesses are used to catch allocation failure.</p>

<p>This means that, although very powerful, the implementation of the <samp class="codeph">CArray...</samp> classes
can add considerable overhead for simple vector-like flat arrays of fixed
length objects.</p>

<p>The <samp class="codeph">RArray...</samp> classes were developed to overcome these
problems. In addition, the generic searching and ordering capabilities are
faster and easier to use. These classes should be used whenever an array of
fixed length objects or an array of pointers is required, and the array has
the following characteristics:</p>

<ul>
<li id="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-5A46A34C-F255-51C8-9777-6BCFA1D1F027"><a name="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-5A46A34C-F255-51C8-9777-6BCFA1D1F027"><!-- --></a><p>the size of an array
element is bounded (the current implementation imposes an upper limit of 640)</p>
 </li>

<li id="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-04E4B892-AD03-5F72-ACCF-80D4B9874181"><a name="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-04E4B892-AD03-5F72-ACCF-80D4B9874181"><!-- --></a><p>insertions into the
array are infrequent</p>
 </li>

</ul>

<p>In contrast, the main benefit to be derived from the <samp class="codeph">CArray...</samp> classes
is their support for segmented storage and their ability to handle arrays
of variable length objects. However, the latter is a rare requirement.</p>

<p>Note that for performance reasons, <samp class="codeph">RArray</samp> stores objects
in the array as word (4 byte) aligned quantities. This means that some member
functions do not work when <samp class="codeph">RArray</samp> is instantiated for classes
of less than 4 bytes in size, or when the class's alignment requirement is
not 4. Be aware that it is possible to get an unhandled exception on hardware
that enforces strict alignment.</p>

<p>The affected functions are:</p>

<ul>
<li id="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-485BFD16-FF55-573B-A831-F706BD9C1B70"><a name="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-485BFD16-FF55-573B-A831-F706BD9C1B70"><!-- --></a><p>the constructor: RArray(TInt,
T*, TInt)</p>
 </li>

<li id="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-65C548C2-D048-5FA4-9990-BFF141962BA5"><a name="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-65C548C2-D048-5FA4-9990-BFF141962BA5"><!-- --></a><p>Append(const T&amp;)</p>
 </li>

<li id="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-C907314E-1884-51D5-98F4-2AD0953DE4C4"><a name="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-C907314E-1884-51D5-98F4-2AD0953DE4C4"><!-- --></a><p>Insert(const T&amp;,
TInt)</p>
 </li>

<li id="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-C4C989EF-67EE-5561-B53E-BA76FE91FE80"><a name="GUID-F50003D0-402A-59E1-8F6F-8C999DC81735__GUID-C4C989EF-67EE-5561-B53E-BA76FE91FE80"><!-- --></a><p>the [] operator, and
then using the pointer to iterate through the array as you would with a C
array.</p>
 </li>

</ul>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-2F64B579-73D3-548A-9104-16483AF77BCB.html">Dynamic Arrays</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>