<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="SendAs v2.0"/>
<meta name="DC.Relation" scheme="URI" content="GUID-63816E09-46C7-503A-ADA0-E350C7ACF3C4.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-63816E09-46C7-503A-ADA0-E350C7ACF3C4.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>SendAs v2.0</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2404348 id2404397 id2405030 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html">Messaging Middleware Guide</a> &gt; <a href="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html">Messaging Framework</a> &gt; <a href="GUID-63816E09-46C7-503A-ADA0-E350C7ACF3C4.html">SendAs</a> &gt; </div>
<h1 class="topictitle1">SendAs v2.0</h1>
<div>
<div class="section" id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-9D54D47A-37D9-5229-92D5-B80B442E8B0D"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-9D54D47A-37D9-5229-92D5-B80B442E8B0D"><!-- --></a><h2 class="sectiontitle">Description</h2> <p>The application establishes a session with the SendAs server,
sets a message entry, creates a message, sets its body text, adds
a recipient, sends the message and closes the session. The sequence
of events is detailed in the following list: </p>
 <ul>
<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-ADE16BD9-7B38-5B35-8E72-77E968D1CED2"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-ADE16BD9-7B38-5B35-8E72-77E968D1CED2"><!-- --></a><p>Create a session
with the SendAs server using <a href="GUID-2DA04D96-F0AD-3FDC-9E36-1C27D889AF4B.html#GUID-2DA04D96-F0AD-3FDC-9E36-1C27D889AF4B__GUID-1B5B3FA7-403E-354A-8CF3-C04FF58CF293"><span class="apiname">CMsvSession::OpenSyncL(MMsvSessionObserver
&amp;)</span></a> function. </p>
 </li>

<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-E1BF3D0E-C278-57F6-9359-4EDC426034BD"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-E1BF3D0E-C278-57F6-9359-4EDC426034BD"><!-- --></a><p>Set the message
entry using the <a href="GUID-85BBE389-81F7-3E2F-A789-446D9BE2CC49.html#GUID-85BBE389-81F7-3E2F-A789-446D9BE2CC49__GUID-6048C7BC-8D3E-34C5-81C1-317521218029"><span class="apiname">CMsvEntry::SetEntryL(TMsvId)</span></a> function. </p>
 </li>

<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-C89C044C-B1DF-5541-8F0E-81DBA222E126"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-C89C044C-B1DF-5541-8F0E-81DBA222E126"><!-- --></a><p>After setting
the entry, the application gets a selection containing the IDs of
all the context children, using the <a href="GUID-85BBE389-81F7-3E2F-A789-446D9BE2CC49.html#GUID-85BBE389-81F7-3E2F-A789-446D9BE2CC49__GUID-7058F4C4-7EE9-36C3-ACE9-632345D7FF44"><span class="apiname">CMsvEntry::ChildrenL()const</span></a> function. </p>
 </li>

<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-B2B5D96F-68F3-5000-B615-3AE7DA32E3A3"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-B2B5D96F-68F3-5000-B615-3AE7DA32E3A3"><!-- --></a><p>The connection
to the server is made using the default number of message slots available
to a session, which is 4, (<a href="GUID-C248C8F6-46F2-39AB-A202-CB2D98FCF760.html"><span class="apiname">KSendAsDefaultMessageSlots</span></a>). </p>
 </li>

<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-5469B019-40CD-5864-BF4B-43DEC2FDF34F"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-5469B019-40CD-5864-BF4B-43DEC2FDF34F"><!-- --></a><p>The draft folder
is emptied, before creating a new message. </p>
 </li>

<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-A1D2D778-42D2-51DA-817C-65E350BABB9C"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-A1D2D778-42D2-51DA-817C-65E350BABB9C"><!-- --></a><p>Fetch the names
and UIDs for the filtered list of message types using the <a href="GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html#GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3__GUID-B94FAE68-3EB9-3E01-97B7-3A77CE5A4740"><span class="apiname">RSendAs::FilteredMessageTypesL()</span></a> function to create a SendAs
message. Then the UID based on the message type is returned, and with
the entry set on the drafts folder a SendAs message is created by
calling the <a href="GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6__GUID-F5C5023D-0066-3DD7-BFFA-CCA8E0DD1C76"><span class="apiname">RSendAsMessage::CreateL(RSendAs &amp;,TSendAsAccount)</span></a> function. </p>
 </li>

<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-8CE79BC4-4240-5E94-851B-2E13DFB3B271"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-8CE79BC4-4240-5E94-851B-2E13DFB3B271"><!-- --></a><p>Set a body text
for the message and specify the recipients. In this example, the body
text is set using an option, which is read from the user. Option given
to the user are '1' for 8-bit encoding, '2' for 16-bit encoding and
'0' or by default its unicode type of encoding. The encoded descriptor
is set as the message's body text using the <a href="GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6__GUID-22E37DB6-35A2-3B01-A785-189B92A7E8D4"><span class="apiname">RSendAsMessage::SetBodyTextL(const
CRichText &amp;)</span></a>function. </p>
</li>

<li><p>The recipients are added using the <a href="GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6__GUID-106A7A1C-023B-33EB-8925-859E2088FF24"><span class="apiname">RSendAsMessage::AddRecipientL(const
TDesC &amp;,TSendAsRecipientType)</span></a> function. The recipient's
address is held in a descriptor. The alias is the displayed recipient
name.</p>
</li>

<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-EB161170-E53F-5892-B7A6-6DF4529C924D"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-EB161170-E53F-5892-B7A6-6DF4529C924D"><!-- --></a><p>The recipient
type is one of the <a href="GUID-3DFEC3A5-1DDB-3BF0-871A-91B96F06EC42.html"><span class="apiname">TSendAsRecipientType</span></a> enumeration
values, that is, one of the following: </p>
 <ul>
<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-7D3CA067-B14A-5694-9C80-3FA740E1D3AA"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-7D3CA067-B14A-5694-9C80-3FA740E1D3AA"><!-- --></a><p> <a href="GUID-D8B673F7-1367-3228-813A-D74138533BC2.html"><span class="apiname">ESendAsRecipientTo</span></a> - The recipient goes in the 'To' field. </p>
 </li>

<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-6E67C22D-4C3F-5F77-8454-AF35290C31A6"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-6E67C22D-4C3F-5F77-8454-AF35290C31A6"><!-- --></a><p> <a href="GUID-A990E3D5-E20A-3CDA-9417-15C234E85F57.html"><span class="apiname">ESendAsRecipientCc</span></a> - The recipient goes in the 'Cc' field </p>
 </li>

<li id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-0D5D7039-1970-579C-8629-5C41C3B3538D"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-0D5D7039-1970-579C-8629-5C41C3B3538D"><!-- --></a><p> <a href="GUID-EF736A4B-685E-3E77-B4A1-E1B06EAD2523.html"><span class="apiname">ESendAsRecipientBcc</span></a> - The recipient goes in the 'Bcc' field </p>
 </li>

</ul>
 <p>If the 'Cc' field is not supported, the recipient will instead
be added to the 'To' field since these are functionally equivalent. </p>
 <p>If the 'Bcc' field is not supported, this function will return <a href="GUID-F89DA3F0-2A48-3F9B-8F08-29350E92D0E4.html"><span class="apiname">KErrNotSupported</span></a>. </p>
 </li>

</ul>
 <p>The example also displays the names of the accounts present
in the list. </p>
 <p>To demonstrate this, 3 new accounts are appended
and they are displayed in a for-loop by calling <a href="GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4.html#GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4__GUID-1FB61663-625D-3294-84BA-D811044D1235"><span class="apiname">CSendAsAccounts::AccountNames().MdcaPoint(i)</span></a>, where the <a href="GUID-7D6D682B-4ACD-312E-B0BE-D182930182D0.html"><span class="apiname">MdcaPoint()</span></a> function takes in the
integer value of the current iteration in the for-loop and indexes
into a descriptor array. </p>
 <p>The example also demonstrates how
to refine the available message types of the connected session using
the <a href="GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html#GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3__GUID-C87673B0-714F-31C0-9F9E-C095669007AF"><span class="apiname">RSendAs::FilterAgainstCapability()</span></a> function. </p>
 <p>The <a href="GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html#GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6__GUID-28EE1E22-8892-388C-990D-BC0E1F18D88E"><span class="apiname">RSendAsMessage::SendMessage()</span></a> function
is used asynchronously to send the message. Finally the <a href="GUID-2A8E907A-B3AE-3D83-882C-ED0A98B5D39A.html#GUID-2A8E907A-B3AE-3D83-882C-ED0A98B5D39A__GUID-1EDE87E5-3F1C-34E2-9172-72990783E7E7"><span class="apiname">RsendAs::Close()</span></a> function is used to end the session with SendAs server. </p>
 </div>

<div class="section" id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-5D17C0D4-1D8E-5E85-AEFD-7083A748C728"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-5D17C0D4-1D8E-5E85-AEFD-7083A748C728"><!-- --></a><h2 class="sectiontitle">Download</h2> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-90c56a55-33bb-4ab7-a6b8-8932ba181dc8.zip" target="_blank">sendAs.zip</a></p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-90c56a55-33bb-4ab7-a6b8-8932ba181dc8.html">browse </a> to view the example code. </p>
 </div>

<div class="section" id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-3AE6EA98-02BC-41BD-AC4E-157A6700A12A"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-3AE6EA98-02BC-41BD-AC4E-157A6700A12A"><!-- --></a><h2 class="sectiontitle">Class
summary</h2><p> The SendAs v2 example application uses the following
classes:</p>
<ul>
<li><p><a href="GUID-85BBE389-81F7-3E2F-A789-446D9BE2CC49.html"><span class="apiname">CMsvEntry </span></a></p>
</li>

<li><p><a href="GUID-B36289AC-769F-3A83-BADB-AE0568E97581.html"><span class="apiname">MMsvEntryObserver </span></a></p>
</li>

<li><p><a href="GUID-2DA04D96-F0AD-3FDC-9E36-1C27D889AF4B.html"><span class="apiname">CMsvSession </span></a></p>
</li>

<li><p><a href="GUID-E1699CAB-423D-3AFA-BE77-3AFF38886EA3.html"><span class="apiname">RSendAs </span></a></p>
</li>

<li><p><a href="GUID-CB2BB982-F91D-3E06-8D66-56731AA60EB8.html"><span class="apiname">CSendAsMessageTypes </span></a></p>
</li>

<li><p><a href="GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4.html"><span class="apiname">CSendAsAccounts </span></a></p>
</li>

<li><p><a href="GUID-90C4FDEE-3E4D-32B3-85E1-52C157AC4AC4.html"><span class="apiname">CSendAsAccounts </span></a></p>
</li>

<li><p><a href="GUID-1FDBA8F6-D1CC-3AE5-AF48-1256D50C5A4F.html"><span class="apiname">CMsvOperationWait </span></a></p>
</li>

<li><p><a href="GUID-4499491F-FA1A-38E1-BB13-1AB184A31DA6.html"><span class="apiname">RSendAsMessage </span></a></p>
</li>

</ul>
</div>

<div class="section" id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-13FDF5EE-00C2-54D4-AF6C-41E3DBDC2B93"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-13FDF5EE-00C2-54D4-AF6C-41E3DBDC2B93"><!-- --></a><h2 class="sectiontitle">Build</h2> <p>The Symbian build process describes how to build an application. </p>
 <p>The SendAs example builds an executable called <span class="filepath">SendAs2Example.exe</span> in the standard location (<span class="filepath">\epoc32\release\winscw\</span> <em>&lt;build_variant&gt;</em> for
CodeWarrior). After launching the executable, depending on the emulator
you are using, you may need to task away from the app launcher/shell
screen to view the console. </p>
 </div>

<div class="section" id="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-E9152EC2-A404-549C-B7CA-25CAC97BA686"><a name="GUID-382B8A9D-9D10-54CD-91A6-B9E7A2477662__GUID-E9152EC2-A404-549C-B7CA-25CAC97BA686"><!-- --></a><h2 class="sectiontitle">See
also</h2> <p>To create advanced applications using the SendAs API
refer to the complete <a href="GUID-F7598A84-9736-5310-AAA4-5BCC4BE46C16.html" title="SendAs provides APIs which create messages in the Drafts folder of a Message Store. It enables you to build the message parts, that is, to add message recipient(s), subject, body and so on."> SendAs </a> API
reference documentation, which details all the features of the API. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-63816E09-46C7-503A-ADA0-E350C7ACF3C4.html">SendAs</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>