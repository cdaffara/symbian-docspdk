<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Kernel Architecture 2 Architecture"/>
<meta name="abstract" content="The Kernel Architecture 2 component has a modular architecture that allows ports of it to be created for different phone hardware architectures."/>
<meta name="description" content="The Kernel Architecture 2 component has a modular architecture that allows ports of it to be created for different phone hardware architectures."/>
<meta name="DC.Relation" scheme="URI" content="GUID-A16F9F31-182E-5301-B228-A457BD3530FE.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A91C6359-E547-51AD-AA8C-45BCAFBA98AC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A16F9F31-182E-5301-B228-A457BD3530FE.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Kernel Architecture 2 Architecture</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2399872 id2399880 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-A91C6359-E547-51AD-AA8C-45BCAFBA98AC.html" title="EKA2 is the principal Hardware and Kernel Services module. It manages the CPU and memory resources of a phone, and provides an architecture for device drivers to manage other hardware resources.">Kernel Architecture (EKA2)</a> &gt; <a href="GUID-A16F9F31-182E-5301-B228-A457BD3530FE.html" title="Describes the architecture and technology features of the Kernel that are important for a base port.">Concepts</a> &gt; </div>
<h1 class="topictitle1">Kernel
Architecture 2 Architecture</h1>
<div><p>The Kernel Architecture 2 component has a modular architecture
that allows ports of it to be created for different phone hardware architectures.</p>

<p>The parts are: </p>

<ul>
<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-C48A58F8-0EE9-5AFB-A855-BDC97AD259E1"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-C48A58F8-0EE9-5AFB-A855-BDC97AD259E1"><!-- --></a><p> <em>Nanokernel</em>:
this handles the most basic thread scheduling, synchronisation and timing
functions. </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-42EFCCA1-C585-5A72-B188-8B6B69B41400"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-42EFCCA1-C585-5A72-B188-8B6B69B41400"><!-- --></a><p> <em>Symbian platform
kernel</em>: this provides the kernel functionality required by Symbian platform
using services provided by the nanokernel. It contains the operating system
objects for such things as threads, processes, chunks, and inter-process communication. </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-290A7566-8CC8-538F-930D-62B85FF73E75"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-290A7566-8CC8-538F-930D-62B85FF73E75"><!-- --></a><p> <em>Memory model</em>:
this provides per-process address spaces and inter-process data transfer,
and governs how memory is allocated and mapped. It encapsulates access to
the hardware Memory Management Unit (MMU), allowing the nanokernel and the
Symbian platform kernel to be MMU-independent. </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-5324322B-BC5E-5D08-BD9A-DA22EC41CFF4"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-5324322B-BC5E-5D08-BD9A-DA22EC41CFF4"><!-- --></a><p> <em>Variant DLL</em>:
this provides hardware dependent services required by the kernel, for example
timer tick interrupts and Real Time Clock access. Systems based on an ASSP
also have an ASSP DLL, which shares some of the variant DLLs responsibilities.
Board Support Packages provides variant libraries for reference hardware. </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-9B456964-8309-54FA-98C7-757D3A51958F"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-9B456964-8309-54FA-98C7-757D3A51958F"><!-- --></a><p> <em>Extensions and device
drivers</em>: these are used to control peripherals and provide the interface
between peripherals and the rest of Symbian platform. </p>
 </li>

</ul>

<p>The following diagram shows how the place of the kernel between the low-level
user side code, such as the user library, and the device hardware: </p>

<div class="fignone" id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-9B3AF7EC-8339-5F92-B4BC-20DD3331F103"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-9B3AF7EC-8339-5F92-B4BC-20DD3331F103"><!-- --></a><span class="figcap">Figure 1.            Kernel architectural relationships          </span>

<img src="GUID-C842C016-0D1B-5462-8B04-49CFE941A964_d0e378922_href.jpg"/>
</div>

<p>The implementation of these parts is split into code that is hardware independent,
and code that is dependent on the hardware platform. Hardware dependent code
is divided into a number of layers to aid its portability to new hardware.
The diagram below shows how the kernel source is split into four kernel layers: </p>

<ul>
<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-6A229A4C-7FF8-55B8-8D1D-8B7AE098C7EE"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-6A229A4C-7FF8-55B8-8D1D-8B7AE098C7EE"><!-- --></a><p>Independent </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-D60D5310-1A2C-5A1A-BF45-BB0F05DD5AFB"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-D60D5310-1A2C-5A1A-BF45-BB0F05DD5AFB"><!-- --></a><p>Platform </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-94475D54-07DE-5F99-8A56-9C5EEBA32F5D"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-94475D54-07DE-5F99-8A56-9C5EEBA32F5D"><!-- --></a><p>Model </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-9B564245-E1CB-5CFC-93EB-E0F257114532"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-9B564245-E1CB-5CFC-93EB-E0F257114532"><!-- --></a><p>CPU </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-7AB71CB5-5BF6-5F75-9C17-7EB2A9F9E40D"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-7AB71CB5-5BF6-5F75-9C17-7EB2A9F9E40D"><!-- --></a><p>and two peripheral layers:
ASSP and Variant. </p>
 </li>

</ul>

<div class="fignone" id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-EBB913A8-1694-5C98-B38B-1387F850CDB4"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-EBB913A8-1694-5C98-B38B-1387F850CDB4"><!-- --></a><span class="figcap">Figure 2.            Kernel source layers          </span>

<img src="GUID-A480F734-9EDF-5E29-AC96-039B71B22AC3_d0e378961_href.png"/>
</div>

<p>The following is a brief description of each layer and its purpose. </p>

<div class="section" id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-5317DC8F-56A2-4AF1-889D-D8E6F4925A0B"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-5317DC8F-56A2-4AF1-889D-D8E6F4925A0B"><!-- --></a><h2 class="sectiontitle">Layer 1: Independent </h2><p>This
layer is about 60% of the total source code. It provides all the basic building
blocks of both the nanokernel and the Symbian platform kernel. </p>
</div>

<div class="section" id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-4ABDF396-D282-4DDE-975F-7AEBBBE4C0E0"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-4ABDF396-D282-4DDE-975F-7AEBBBE4C0E0"><!-- --></a><h2 class="sectiontitle">Layer 2: Platform </h2><p>This
layer is concerned with executable images, whether on the emulator or real
hardware. Only the memory model has code in this layer. It defines two platforms:
the windows emulator and the real Symbian platform hardware. The windows emulator
provides a single-process emulation of Symbian platform using the PC’s Win32
API, for software development: the Symbian platform hardware starts as a program
running Win32 DLLs and threads, and interfaces with Win32 services rather
than hardware and devices. </p>
<p>Key differences between the hardware and
the emulator are: </p>
<ul>
<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-109C7BE4-93C2-5848-8A4F-61474E240BAC"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-109C7BE4-93C2-5848-8A4F-61474E240BAC"><!-- --></a><p>The emulator runs in
a single process, and Symbian platform processes are emulated within this.
This means there is no memory protection between emulated Symbian platform
processes. </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-40B1A70F-1813-50ED-9EA0-9DE4C4067FFB"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-40B1A70F-1813-50ED-9EA0-9DE4C4067FFB"><!-- --></a><p>The emulator file system
maps Z: and C: to subdirectories on the user’s PC, so that programs running
under the emulator do not interfere with the majority of the PC’s file system. </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-6E52C610-8600-520F-9958-185C3BC97294"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-6E52C610-8600-520F-9958-185C3BC97294"><!-- --></a><p>Delayed function calls
(DFCs) always run immediately on the emulator. </p>
 </li>

</ul>
</div>

<div class="section" id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-AA29E2F8-D6B2-4C14-B983-3CF340BA17BA"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-AA29E2F8-D6B2-4C14-B983-3CF340BA17BA"><!-- --></a><h2 class="sectiontitle">Layer 3: Model </h2><p>This
layer provides supports for the organisation of per process memory. Only the
memory model has code at this level. There are three types of memory model
supported: </p>
<ul>
<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-38ACBEB0-C5E9-5F6A-BA8F-F6E0BD4EBA90"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-38ACBEB0-C5E9-5F6A-BA8F-F6E0BD4EBA90"><!-- --></a><p> <em>Moving</em>: a single
page directory is used and page directory entries are moved between the home
and run sections at address space switch time. This is intended for ARMv4
and ARMv5 CPUs. </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-18792718-FE86-566F-A82D-7B090AC48007"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-18792718-FE86-566F-A82D-7B090AC48007"><!-- --></a><p> <em>Multiple</em>: one
page directory per process. This is intended for ARMv6 CPUs. </p>
 </li>

<li id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-41AB60A6-4A73-5807-9A1E-A48FAC8EB157"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-41AB60A6-4A73-5807-9A1E-A48FAC8EB157"><!-- --></a><p> <em>Single</em>: a single
address space for the whole system. This can be used either for MMU-less CPUs
or to allow incremental porting to a new MMU-aware CPU. </p>
 </li>

</ul>
</div>

<div class="section" id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-AD70D1A5-E777-4FF3-B247-4F2E94C1D3C7"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-AD70D1A5-E777-4FF3-B247-4F2E94C1D3C7"><!-- --></a><h2 class="sectiontitle">Layer 4: CPU</h2> <p>This
layer provides code which differs according to the processor the OS is running
on. The nanokernel, memory model and Symbian platform kernel all have code
in this layer. This is the layer where assembly code belongs. Current possibilities
for the CPU layer are X86 (real X86 port to PC hardware), ARM (devices) and
Win32 (for the emulator). </p>
<p>The nanokernel in this layer contains most
of the realisation of the core CPU architecture, such as the exception/interrupt
handling, context-switching mechanism, etc. It also contains some functionality
which is conceptually part of the independent layer, but has been assembler
coded for improved performance, for instance, DFC handling and timer handling
on ARM-based hardware. </p>
<p>The bottom layer of the memory model is both
CPU-specific as well as specific to the type of memory model. It presents
interfaces used by the lower layers (ASSP and variant), and by the memory
model and independent layer. </p>
</div>

<div class="section" id="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-7BA28980-E4B2-4777-AB38-C25DD0B277A3"><a name="GUID-8A00E047-3DCE-5D02-9ECE-1396DC99DA4B__GUID-7BA28980-E4B2-4777-AB38-C25DD0B277A3"><!-- --></a><h2 class="sectiontitle">Layers 5 and
6: ASSP/Variant </h2><p>The variant provides the hardware specific implementation
of the control functions expected by the nanokernel and Symbian platform kernel. </p>
<p>For
some hardware, it may be appropriate to separate support for a particular
ASSP (Application Specific Standard Product), an off-the-shelf integrated
CPU part, so that multiple variants can be produced using the ASSP. </p>
</div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-A16F9F31-182E-5301-B228-A457BD3530FE.html" title="Describes the architecture and technology features of the Kernel that are important for a base port.">Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>