<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Location Settings API"/>
<meta name="abstract" content="The Location Settings API allows an application to get and set the properties of a PSY."/>
<meta name="description" content="The Location Settings API allows an application to get and set the properties of a PSY."/>
<meta name="DC.Relation" scheme="URI" content="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-55F5F029-6A00-5894-8892-90836DE4BA40.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Location Settings API</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2402946 id2402960 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-55F5F029-6A00-5894-8892-90836DE4BA40.html" title="The Location Management collection contains components to manage location requests and to interface with a network. It also contains several common core LBS libraries that are used by many components of the LBS subsystem.">Location Management</a> &gt; <a href="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html" title="Location Admin is an LBS component that contains several common LBS libraries grouped for convenience in a single system component.">Location Admin</a> &gt; </div>
<h1 class="topictitle1">Location Settings API</h1>
<div><p>The Location Settings API allows an application to get and set the properties of a PSY. </p>
<p> </p>
 <div class="section"><h2 class="sectiontitle">Contents</h2> <ul><li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-5C7D32AA-BBA2-55EF-BA32-5F2D461EAFC0"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-5C7D32AA-BBA2-55EF-BA32-5F2D461EAFC0"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-1122A71A-7868-5394-917B-5C5EB8E97EC8">Purpose</a>  </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-FD73A08E-C032-5A49-8F95-CBF9DBF567A5"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-FD73A08E-C032-5A49-8F95-CBF9DBF567A5"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-B6F9AB52-9375-5601-8760-1C3B72620E71">API description</a>  </p>
 <ul><li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-4E424394-F32F-594F-BD79-3BF54E292793"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-4E424394-F32F-594F-BD79-3BF54E292793"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-A45324D8-CF2A-52BD-A08F-7C3A56A8E9F8">PSY attributes</a>  </p>
 </li>
 </ul>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-81B5646F-4EAA-5869-95BC-95832CC798B0"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-81B5646F-4EAA-5869-95BC-95832CC798B0"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-5A9DAD33-86D7-5066-9CED-36FEF03AEC80">API summary</a>  </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-E599DD05-DA59-5CD2-A7B7-C4B46AABE1D0"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-E599DD05-DA59-5CD2-A7B7-C4B46AABE1D0"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-F2BD6C21-25D7-5E3A-B24E-16D783EDDFA6">Using the API</a>  </p>
 <ul><li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-12DF3B2A-93B7-5F5D-8330-E7A25822B71C"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-12DF3B2A-93B7-5F5D-8330-E7A25822B71C"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-54DC1DC0-290A-55DD-B5BD-D87BE8E3194F"> Retrieving information about installed PSYs</a>  </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-90FA746B-3BAA-542F-9B3A-9888D8BC28EC"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-90FA746B-3BAA-542F-9B3A-9888D8BC28EC"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-B5AC0535-5CFA-5A5F-A67F-F05A3D7F78D1">Modifying PSY attributes</a>  </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-0B6F5C23-8D8B-5879-B91B-7D0793A1323B"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-0B6F5C23-8D8B-5879-B91B-7D0793A1323B"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-0ADE50DD-84E3-5DAE-94E3-4BB424665734">Changing priority order of PSYs </a>  </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-763E86DE-BBBD-567A-8F54-C2A521402CDE"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-763E86DE-BBBD-567A-8F54-C2A521402CDE"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-1438A703-4F6F-5AC2-A52C-37BABE7AF5B9"> Listening to settings change events </a>  </p>
 </li>
 </ul>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-56AF88DC-075C-5A2B-BE22-6F0450E19537"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-56AF88DC-075C-5A2B-BE22-6F0450E19537"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-1EBC1700-209D-5AC2-ABF7-CB866A8728C8">Error handling</a>  </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-F7769CE9-B43F-5578-A67D-B9C5C98DDFAD"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-F7769CE9-B43F-5578-A67D-B9C5C98DDFAD"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-5523F46D-5CDA-5E85-B4B8-193FD8B26E32">Memory overhead</a>  </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-9455497D-1F38-5123-AFAB-239DDC553C12"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-9455497D-1F38-5123-AFAB-239DDC553C12"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-FFEA130F-33FE-5E8D-AAE2-9AD8DF68DADE">See also</a>  </p>
 </li>
 </ul>
 </div>
 <div class="section" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-1122A71A-7868-5394-917B-5C5EB8E97EC8"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-1122A71A-7868-5394-917B-5C5EB8E97EC8"><!-- --></a><h2 class="sectiontitle">Purpose</h2> <p>The Location Settings API is an interface for managing the settings of the Location Framework and of Positioning Plug-ins (PSYs). The settings consist of the relative priorities of PSYs installed on the mobile device and modifiable and read-only attributes of PSYs. </p>
 </div>
 <div class="section" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-B6F9AB52-9375-5601-8760-1C3B72620E71"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-B6F9AB52-9375-5601-8760-1C3B72620E71"><!-- --></a><h2 class="sectiontitle">API description</h2> <p>This API is intended for use by a system application (such as a settings UI) that allows the user of a phone to view and edit settings that affect the behaviour of the Location Framework. The API allows a user to manage the priority ordering of PSYs and to access their modifiable and non-modifiable attributes </p>
 <p>The priority ordering of PSYs is used when a client of the <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a> uses the <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html"><span class="apiname">RPositioner</span></a> class without specifying particular positioning module ID (by calling <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html#GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575__GUID-AF3D9B5F-8025-3AFF-A101-82025520EBD6"><span class="apiname">RPositioner::Open()</span></a> without parameters). The Location Server uses the PSY with the highest priority if possible and falls back to next one in the priority list in case of failure. </p>
 <p id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-A45324D8-CF2A-52BD-A08F-7C3A56A8E9F8"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-A45324D8-CF2A-52BD-A08F-7C3A56A8E9F8"><!-- --></a><strong>PSY attributes</strong> </p>
 <p>PSY attributes can be grouped by type: </p>
 <dl><dt class="dlterm">Non-modifiable attributes</dt>
 <dd><p>These properties include a descriptive name, UID, positioning plug-in version, positioning technology, capabilities, time to first fix, positioning accuracy, power consumption etc. </p>
 <p>For more information about non-modifiable attributes see <a href="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html">Positioning Plug-in Information API</a>. </p>
 <p>Non-modifiable attributes are read from each PSY's repository file,. The PSY name is read from a resource file, which should be referenced by the repository file. If the resource file is not referenced in the repository file then the PSY name is taken from ECOM attributes of the PSY plug-in (which means that the name cannot be localized). </p>
 </dd>
  <dt class="dlterm">Modifiable attributes</dt>
 <dd><p>These attributes include the availability status of the PSY (enabled or disabled), the cost of using the PSY and its visibility. </p>
 <p>Modifiable attributes are stored in the Central Repository. </p>
 <p>Table 1 describes the modifiable PSY attributes: </p>
 
<div class="tablenoborder"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-7330D155-DBE5-57C5-B6A6-B4AD5855ECBC"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-7330D155-DBE5-57C5-B6A6-B4AD5855ECBC" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d1973062e207">Attribute</th>
 <th class="cellrowborder" valign="top" id="d1973062e210">Description</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d1973062e207 "><p>Cost </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e210 "><p>User-defined runtime setting for the cost of using a specific positioning technology. Possible values are defined by <a href="GUID-1AA235FA-CEC1-3853-8F96-C538C02B596D.html#GUID-1AA235FA-CEC1-3853-8F96-C538C02B596D__GUID-78C084A0-43F8-3040-BD98-70E2E62A5D45"><span class="apiname">TPositionQuality::TCostIndicator</span></a> from <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a>. </p>
 <p>The cost attribute is modifiable because in some cases the cost of using a PSY can be dependent on the user’s subscription model. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e207 "><p>Availability </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e210 "><p>Determines whether a PSY is enabled to be used through <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a> (<a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html"><span class="apiname">RPositioner</span></a>) or not. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e207 "><p>Visibility </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e210 "><p>Determines whether a PSY needs to be listed by the <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html"><span class="apiname">CPosModules</span></a> class of this API. </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p>Table 1. Modifiable PSY attributes. </p>
 </dd>
  <dt class="dlterm">Positioning plug-in specific settings</dt>
 <dd><p>Each PSY can have any number of attributes that are specific for the positioning technology it encapsulates (for example, baud rate for external GPS). The Location Settings API does not provide access to these settings. </p>
 </dd>
  </dl>
 </div>
 <div class="section" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-5A9DAD33-86D7-5066-9CED-36FEF03AEC80"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-5A9DAD33-86D7-5066-9CED-36FEF03AEC80"><!-- --></a><h2 class="sectiontitle">API summary</h2> <p>Figure 1 shows public classes of the Location Settings API. </p>
 <div class="fignone" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-9F8E279C-A702-5557-A2CE-FD085EF15E4C"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-9F8E279C-A702-5557-A2CE-FD085EF15E4C"><!-- --></a><span class="figcap">Figure 1. 
             Figure 1. Location Settings API class diagram 
          </span> <img src="GUID-E3F116C0-F133-5008-BD7A-421D66FB6588_d0e446312_href.png"/></div>
 <p>Table 1 lists the classes and types of the API. </p>
 
<div class="tablenoborder"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-404231E8-601E-5D56-A3E2-D6DFFB266AC7"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-404231E8-601E-5D56-A3E2-D6DFFB266AC7" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d1973062e327">Class Name</th>
 <th class="cellrowborder" valign="top" id="d1973062e330">Description</th>
 <th class="cellrowborder" valign="top" id="d1973062e333">Header file</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d1973062e327 "><p> <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html"><span class="apiname">CPosModules</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e330 "><p>The main class of the Location Settings API. It is used for accessing PSY attributes and managing priority list of PSYs. A client can also register to listen for changes in the settings. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e333 "><p> <samp class="codeph">EPos_CPosModuleIdList.h</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e327 "><p> <a href="GUID-1AB3C182-B9F9-3C75-9FC2-C550500046CB.html"><span class="apiname">CPosModuleUpdate</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e330 "><p>Represents an update of the modifiable attributes of a PSY. An update is committed by calling <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-590B754B-2ECB-313F-A8C5-44B2C2A1E37F"><span class="apiname">CPosModules::UpdateModuleL()</span></a>. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e333 "><p> <samp class="codeph">EPos_CPosModuleUpdate.h</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e327 "><p> <a href="GUID-2E3EB368-F820-3B1F-A025-939D78A5F9CE.html"><span class="apiname">CPosModuleIdList</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e330 "><p>Represents a list of PSY IDs. Used to get and set the priority list of PSYs. It contains methods for appending, inserting, removing and finding PSY IDs in the list. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e333 "><p> <samp class="codeph">EPos_CPosModuleIdList.h</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e327 "><p> <a href="GUID-2C027B56-CC69-307E-ABB4-BBB532D8F473.html"><span class="apiname">MPosModulesObserver</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e330 "><p>The interface that is implemented by clients in order to receive notifications of changes in the PSY settings. A client subscribes for notifications through the <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html"><span class="apiname">CPosModules</span></a> class. </p>
 <p>Notification event information is given in a <a href="GUID-5760EA9E-7720-31CD-B8F7-29370E2B6FCB.html"><span class="apiname">TPosModulesEvent</span></a> structure. </p>
 <p>Typedef <a href="GUID-9559BB6D-894E-3814-8D60-4102A465EC3D.html"><span class="apiname">TPosModulesEventType</span></a> defines possible event types. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e333 "><p> <samp class="codeph">EPos_MPosModulesObserver.h</samp>  </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p>Table 1. Classes and types of the Location Settings API. </p>
 <p><strong>Libraries </strong> </p>
 <p>API classes are packaged in <span class="filepath">eposmodset.dll</span>. Clients link with <span class="filepath">eposmodset.lib</span>. </p>
 <p><strong>Capabilities </strong> </p>
 <p>API clients require <samp class="codeph">WriteDeviceData</samp> capability to update modifiable settings (PSY priority order, modifiable PSY attributes). </p>
 <p>API clients require no capabilities to read PSY settings. </p>
 </div>
 <div class="section" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-F2BD6C21-25D7-5E3A-B24E-16D783EDDFA6"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-F2BD6C21-25D7-5E3A-B24E-16D783EDDFA6"><!-- --></a><h2 class="sectiontitle">Using the API</h2> <p>Uses cases for the API are: </p>
 <ul><li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-299D0BA9-6630-5D30-9533-989BCED32F68"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-299D0BA9-6630-5D30-9533-989BCED32F68"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-54DC1DC0-290A-55DD-B5BD-D87BE8E3194F"> Retrieving information about installed PSYs</a>  </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-26BEDF7C-3354-57F2-AC90-FEAD79E7C5A3"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-26BEDF7C-3354-57F2-AC90-FEAD79E7C5A3"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-B5AC0535-5CFA-5A5F-A67F-F05A3D7F78D1">Modifying PSY attributes</a>  </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-8023AF65-8962-59D4-889E-440CF4C11677"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-8023AF65-8962-59D4-889E-440CF4C11677"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-0ADE50DD-84E3-5DAE-94E3-4BB424665734">Changing priority order of PSYs </a>  </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-EFAF4AE9-5845-5882-88BC-B1B6A209324F"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-EFAF4AE9-5845-5882-88BC-B1B6A209324F"><!-- --></a><p><a href="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C.html#GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-1438A703-4F6F-5AC2-A52C-37BABE7AF5B9"> Listening to settings change events </a>  </p>
 </li>
 </ul>
 <p id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-54DC1DC0-290A-55DD-B5BD-D87BE8E3194F"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-54DC1DC0-290A-55DD-B5BD-D87BE8E3194F"><!-- --></a><strong>Retrieving information about installed PSYs </strong> </p>
 <p>A client can read ordered list of PSYs by using <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-5A626C61-0A95-3628-9CBB-FDBF04676281"><span class="apiname">CPosModules::ModuleIdListL()</span></a> or <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-6A8BBAA1-3938-3572-BA4E-B7C9F8BCA82E"><span class="apiname">CPosModules::ModuleIdListLC()</span></a>. These methods return a list of IDs for the currently installed PSYs in priority order. Only the PSYs which have visibility attribute set to 1 (ETrue) are listed. </p>
 <p>The client may request information from a specific PSY by providing its ID to <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-66188192-A70D-3CF4-B35F-50BEBE8431C4"><span class="apiname">CPosModules::GetModuleInfoL()</span></a>. If a PSY with the specified ID is found in the system, its data is returned in the <a href="GUID-1E6620E4-F194-3482-BBD1-D85F3528D87D.html"><span class="apiname">TPositionModuleInfoBase</span></a> derived object, supplied by client. Currently, the only supported subclass is <a href="GUID-B098F3DB-E2FE-3C5A-8508-4B04D954AB26.html"><span class="apiname">TPositionModuleInfo</span></a>. For more information, see <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a>. </p>
 <p>Figure 2 shows the client listing all available PSYs and retrieving their attributes: </p>
 <div class="fignone" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-3C2F95B1-7F68-59B0-A1F9-8562432D43FD"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-3C2F95B1-7F68-59B0-A1F9-8562432D43FD"><!-- --></a><span class="figcap">Figure 2. 
                Figure 2. Retrieving PSY information 
             </span> <img src="GUID-E35C440C-4191-510A-AD33-2CF56E41EDD2_d0e446567_href.png"/></div>
 <p>The following example shows the client getting list of names of enabled plug-ins: </p>
 <pre class="codeblock" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-C82837F0-D44E-5046-84F6-DA74123F39B7"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-C82837F0-D44E-5046-84F6-DA74123F39B7"><!-- --></a>void ListEnabledPluginsL( CDesCArray&amp; aNames )
{
// Open the storage
CPosModules* db = CPosModules::OpenL();
CleanupStack::PushL( db );

// List entries
CPosModuleIdList* idList = db-&gt;ModuleIdListLC();

// Get the display name and status of each installed positioning plug-in
for (TInt I = 0; I &lt; idList-&gt;Count(); I++)
    {
    // get PSY info
    TPositionModuleInfo moduleInfo;
    db-&gt;GetModuleInfoL( (*idList)[I], moduleInfo );

    if ( moduleInfo.IsAvailable() )
        {
        // read PSY’s name
        TBuf&lt;KPositionMaxModuleName&gt; moduleName;
        moduleInfo.GetModuleName( moduleName );
        aNames.AppendL( moduleName );
        }
    }

CleanupStack::PopAndDestroy( idList );
CleanupStack::PopAndDestroy( db );
}
</pre>
 <p id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-B5AC0535-5CFA-5A5F-A67F-F05A3D7F78D1"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-B5AC0535-5CFA-5A5F-A67F-F05A3D7F78D1"><!-- --></a><strong>Modifying PSY attributes</strong> </p>
 <p>In order to modify PSY attributes, the client sets values in a <a href="GUID-1AB3C182-B9F9-3C75-9FC2-C550500046CB.html"><span class="apiname">CPosModuleUpdate</span></a> object and sends it to <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-590B754B-2ECB-313F-A8C5-44B2C2A1E37F"><span class="apiname">CPosModules::UpdateModuleL()</span></a>. The <a href="GUID-1AB3C182-B9F9-3C75-9FC2-C550500046CB.html"><span class="apiname">CPosModuleUpdate</span></a> class allows a client to change the cost, availability, and visibility attributes of a PSY. </p>
 <p>Figure 3 shows the steps to change the modifiable attributes of PSY. </p>
 <div class="fignone" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-FBD28CD7-609C-53C5-8931-1BA156D89ADF"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-FBD28CD7-609C-53C5-8931-1BA156D89ADF"><!-- --></a><span class="figcap">Figure 3. 
                Figure 3. Modifying PSY attributes 
             </span> <img src="GUID-2051AAEF-140C-5EEF-874F-52971E76F853_d0e446602_href.png"/></div>
 <p><strong>PSY visibility and availability </strong> </p>
 <p> <strong/>The visibility attribute only defines whether a PSY is listed when a client asks for a list of all available PSYs. Turning this attribute off for a specific PSY does not prevents client applications (which know its module ID) from using this PSY through <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a>. The client can still specify PSY’s module ID as a parameter for <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html#GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575__GUID-AF3D9B5F-8025-3AFF-A101-82025520EBD6"><span class="apiname">RPositioner::Open()</span></a> and connection to that PSY is granted. </p>
 <p>The availability attribute defines if a PSY is totally hidden from the system and its use through the <a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a> is disabled. </p>
 <p>The following code example shows how to hide the PSY from the PSY list and prevent its use: </p>
 <pre class="codeblock" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-09028885-AF82-5EA0-9F20-EBB64B0821C0"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-09028885-AF82-5EA0-9F20-EBB64B0821C0"><!-- --></a>// Open the storage
CPosModules* db = CPosModules::OpenL();
CleanupStack::PushL( db );

// Assuming the positioning plug-in UID is known
const TPositionModuleId id = {0x12345678};

// Disable the PSY and hide it from the list
CPosModuleUpdate* updateParams = CPosModuleUpdate::NewLC();
updateParams-&gt;SetUpdateAvailability( EFalse );
updateParams-&gt;SetUpdateVisibility( EFalse );

// Commit changes
db-&gt;UpdateModuleL( id, *updateParams );

CleanupStack::PopAndDestroy( updateParams );
CleanupStack::PopAndDestroy( db );
</pre>
 <p id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-0ADE50DD-84E3-5DAE-94E3-4BB424665734"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-0ADE50DD-84E3-5DAE-94E3-4BB424665734"><!-- --></a><strong>Changing the priority order of PSYs</strong> </p>
 <p>The client application can retrieve and change the priority order of installed PSYs using methods from the <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html"><span class="apiname">CPosModules</span></a> class. The priority of a single PSY is retrieved using <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-6C96F839-A1C4-3A20-8A6D-833300DDE0D6"><span class="apiname">CPosModules::PriorityL()</span></a>. The whole priority list is returned by <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-5A626C61-0A95-3628-9CBB-FDBF04676281"><span class="apiname">CPosModules::ModuleIdListL()</span></a>. </p>
 <p>There are several methods to change positioning plug-in priorities: </p>
 <ul><li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-972EC3C6-951C-592E-8391-CB68417AD739"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-972EC3C6-951C-592E-8391-CB68417AD739"><!-- --></a><p> <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-5B24CF77-0867-35E8-BD83-7012BE62BDBE"><span class="apiname">CPosModules::SetModulePriorityL()</span></a> <samp class="codeph"/>(two variants) allows a client to change priority of a single PSY. A change to one PSY can affect the priorities of other PSYs. </p>
 </li>
 <li id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-01B1423E-BFD2-5F34-A465-351559E62083"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-01B1423E-BFD2-5F34-A465-351559E62083"><!-- --></a><p> <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-349B5FFC-4BEE-3C90-9909-3B24947C5923"><span class="apiname">CPosModules::SetModulePrioritiesL()</span></a> allows a client to specify the required order of all the PSYs at the same time. </p>
 </li>
 </ul>
 <p>The following example code demonstrates how a client can upgrade a PSY to the highest priority. </p>
 <pre class="codeblock" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-4F58DDAB-8171-5812-8E22-5D6630247FAE"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-4F58DDAB-8171-5812-8E22-5D6630247FAE"><!-- --></a>void MakePluginTopmostPriorityL( TPositionModuleId aModuleId )
{
// Open the storage
CPosModules* db = CPosModules::OpenL();
CleanupStack::PushL( db );

const TInt KTopMostPriority = 0;
db-&gt;SetModulePriorityL( aModuleId, KTopMostPriority );

CleanupStack::PopAndDestroy( updateParams );
CleanupStack::PopAndDestroy( db );
}</pre>
 <p> <samp class="codeph">CPosModules::SetModulePrioritiesL()</samp> allows a client to set the order of all PSYs immediately by supplying a list of plug-in IDs in the required order. Note that <strong>all</strong> the visible plug-ins must be declared in the supplied list: it is required that the list contains the same set of PSY IDs as it would be returned by <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-5A626C61-0A95-3628-9CBB-FDBF04676281"><span class="apiname">CPosModules::ModuleIdListL()</span></a>. </p>
 <p> <strong>Note: </strong> Invisible PSYs are not ordered, i.e. they do not have any priority. When an invisible PSY is made visible, it will be assigned a priority according to its preference (defined in <a href="GUID-DA2DC704-CE65-54FB-9049-4E1C73092EDF-GENID-1-12-1-19-1-1-10-1-5-1-5-1-8-1.html">Positioning Plug-In Information API</a>) and an internal sorting algorithm of the Location Framework. </p>
 <p>The following example shows how the client could move a PSY to the first place in priority order by specifying a whole new priority list: </p>
 <pre class="codeblock" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-129B4AE4-B6A0-56AF-B7EB-3C97C23C21EB"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-129B4AE4-B6A0-56AF-B7EB-3C97C23C21EB"><!-- --></a>void MakePluginTopmostPriority2L( TPositionModuleId aModuleId )
{
// Open the storage
CPosModules* db = CPosModules::OpenL();
CleanupStack::PushL( db );

// Get current list first
CPosModuleIdList* idList = db-&gt;ModuleIdListLC();
TInt currentPriority = idList-&gt;Find( aModuleId );
idList-&gt;MoveL( currentPriority, 0 );

// Save new order
db-&gt;SetModulePrioritiesL( *idList );

CleanupStack::PopAndDestroy( idList );
CleanupStack::PopAndDestroy( db );
}</pre>
 <p id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-1438A703-4F6F-5AC2-A52C-37BABE7AF5B9"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-1438A703-4F6F-5AC2-A52C-37BABE7AF5B9"><!-- --></a><strong>Listening to settings change events</strong> </p>
 <p>A client can register an observer to listen for changes in the location settings. The observer is notified when any change occurs. The observer is set by calling <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-A13A64E1-565A-3ECB-B968-245EEFFC575A"><span class="apiname">CPosModules::SetObserverL()</span></a>. The observer must implement the <a href="GUID-2C027B56-CC69-307E-ABB4-BBB532D8F473.html"><span class="apiname">MPosModulesObserver</span></a> interface to receive settings change notifications. The observer can be removed by calling <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-B2C15AE8-5073-3992-82F1-73800447C067"><span class="apiname">CPosModules::RemoveObserver()</span></a>. </p>
 <p>The event information is defined by <a href="GUID-5760EA9E-7720-31CD-B8F7-29370E2B6FCB.html"><span class="apiname">TPosModulesEvent</span></a> <samp class="codeph"/>, which contains the ID of the affected module (if the event is associated with a single module) and type of the event. Event types are defined by <a href="GUID-9559BB6D-894E-3814-8D60-4102A465EC3D.html"><span class="apiname">TPosModulesEventType</span></a>. </p>
 <p> <strong>Note</strong>: Events are reported as detected by comparing current global settings with their local copy created for the observer. This copy is created when event observer is set by <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-A13A64E1-565A-3ECB-B968-245EEFFC575A"><span class="apiname">CPosModules::SetObserverL()</span></a>. It is updated whenever changes are detected. This means that no events will be reported to the observer if no changes have happened since the observer was set. </p>
 <p>Many events imply changes in priority order. If the client is interested in priority order it should reload the list of PSYs by calling <a href="GUID-3EC269A3-61A0-378B-A909-AB5881E47769.html#GUID-3EC269A3-61A0-378B-A909-AB5881E47769__GUID-5A626C61-0A95-3628-9CBB-FDBF04676281"><span class="apiname">CPosModules::ModuleIdListL()</span></a> whenever such an event is reported. </p>
 <p>Table 2 describes possible events. </p>
 
<div class="tablenoborder"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-4B70F09F-2ECA-50F3-AC15-E1BC6CA1FD55"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-4B70F09F-2ECA-50F3-AC15-E1BC6CA1FD55" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d1973062e828">Event type _TPosModulesEventType</th>
 <th class="cellrowborder" valign="top" id="d1973062e831">Is module ID set in TPosModulesEvent object ?</th>
 <th class="cellrowborder" valign="top" id="d1973062e834">Description</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d1973062e828 "><p> <samp class="codeph">EPosModulesEventUnspecified</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e831 "><p>No </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e834 "><p>Many changes in settings are detected, which affect priority order and PSY attributes. The client should reload the priority list and PSYs attributes. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e828 "><p> <samp class="codeph">EPosModulesEventModuleInstalled</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e831 "><p>Yes </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e834 "><p>New PSY is installed and priority list is updated accordingly. The client can get PSYs attributes. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e828 "><p> <samp class="codeph">EPosModulesEventModuleRemoved</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e831 "><p>Yes </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e834 "><p>A PSY is uninstalled and the priority list is updated accordingly. The client can no longer use the PSY. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e828 "><p> <samp class="codeph">EPosModulesEventPrioritiesChanged</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e831 "><p>No </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e834 "><p>Changes in PSY priority order have occurred (PSYs reordered). No PSY attributes have changed. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e828 "><p> <samp class="codeph">EPosModulesEventCostChanged</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e831 "><p>Yes </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e834 "><p>The cost indicator of a PSY has been changed. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e828 "><p> <samp class="codeph">EPosModulesEventAvailabilityChanged</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e831 "><p>Yes </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e834 "><p>The availability status of a PSY has been changed. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e828 "><p> <samp class="codeph">EPosModulesEventVisibilityChanged</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e831 "><p>Yes </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e834 "><p>The visibility status of a PSY has been changed and priority list is updated accordingly. </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p>Table 2. Settings event types and their meaning. </p>
 <p>Figure 4 shows basic steps that a client takes to listen for changes in location settings: </p>
 <div class="fignone" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-2EC64C4D-D776-5F71-9B87-0A368C7872EF"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-2EC64C4D-D776-5F71-9B87-0A368C7872EF"><!-- --></a><span class="figcap">Figure 4. 
                Figure 4. Listening to change events 
             </span> <img src="GUID-450554F3-BA17-5C89-9E01-C0AFD4AC9638_d0e446937_href.png"/></div>
 <p>This example shows how a client can listen for PSY events: </p>
 <pre class="codeblock" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-43D1A5C0-659D-517C-BE4B-132BD8FB9087"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-43D1A5C0-659D-517C-BE4B-132BD8FB9087"><!-- --></a>class CModuleEventListener : public CBase, public MPosModulesObserver
    {
    public:
        CModuleEventListener( CPosModules&amp; aSettings );
        // Starts observing change events
        void StartObservingL();
        // Stops observing change events
        void StopObservingL();

    public: // from MPosModulesObserver
        void HandleSettingsChangeL( TPosModulesEvent aEvent );
        ...

    private:
        CPosModules&amp; iSettings;
    };

// Constructor stores reference to CPosModules
CModuleEventListener::CModuleEventListener( CPosModules&amp; aSettings )
: iSettings( aSettings )
    {
    }

void CMyEventListener::StartObservingL()
    {
    iSettings.SetObserverL( *this );
    }

void CMyEventListener::StopObserving()
    {
    iSettings.RemoveObserver();
    }

// Called whenever change in location settings is detected
void CMyEventListener::HandleSettingsChangeL( TPosModulesEvent aEvent )
    {
    switch ( aEvent.iType )
        {
        case EPosModulesEventModuleInstalled:
            // new PSY installed, add to UI
            break;
        case EPosModulesEventModuleRemoved:
            // remove PSY from UI
            break;
        case EPosModulesEventPrioritiesChanged:
            // reload PSY list and update UI
            break;
        case EPosModulesEventCostChanged:
            // check new state and update UI, if needed
            break;
        case EPosModulesEventAvailabilityChanged:
            // check new state and update UI, if needed
            break;
        case EPosModulesEventVisibilityChanged:
            // check new state and update UI, as needed
            break;
        case EPosModulesEventUnspecified:
        default:
            // reload PSY list and update UI, many changes happened
            break;
        }
    }
</pre>
 <p> </p>
 </div>
 <div class="section" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-1EBC1700-209D-5AC2-ABF7-CB866A8728C8"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-1EBC1700-209D-5AC2-ABF7-CB866A8728C8"><!-- --></a><h2 class="sectiontitle">Error handling</h2> <p>Accessing location settings can fail with error code <samp class="codeph">KErrLocked</samp>. Read operations fail if some other client is modifying the settings at the same time. Writing operation fails if any other client is reading settings at the same time. The client should retry the failed operation. </p>
 <p>The interface uses the system-wide error codes of the Symbian platform and defines its own panic codes, defined in following table. A panic is used to detect programming errors. Panic category is <samp class="codeph">LocationSettings</samp>. </p>
 
<div class="tablenoborder"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-A5B764CD-00BE-561D-A8B6-019BE20D69DE"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-A5B764CD-00BE-561D-A8B6-019BE20D69DE" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d1973062e1031">Panic code</th>
 <th class="cellrowborder" valign="top" id="d1973062e1034">Panic name</th>
 <th class="cellrowborder" valign="top" id="d1973062e1037">Description</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d1973062e1031 "><p>0</p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e1034 "><p> <samp class="codeph">EPosLocSetPanicParameterOutOfRange</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e1037 "><p>An invalid value has been passed to a function. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e1031 "><p>1</p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e1034 "><p> <samp class="codeph">EPosLocSetPanicObserverIsAlreadySet</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e1037 "><p>The client tried to set an observer in CPosModules even though an observer had already been set. <samp class="codeph">CPosModules::RemoveObserver()</samp> must be called before the new observer is set. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1973062e1031 "><p>2</p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e1034 "><p> <samp class="codeph">EPosLocSetPanicObserverNotStopped</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1973062e1037 "><p>The client tries to destroy CPosModules while the observer is still set. </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </div>
 <div class="section" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-5523F46D-5CDA-5E85-B4B8-193FD8B26E32"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-5523F46D-5CDA-5E85-B4B8-193FD8B26E32"><!-- --></a><h2 class="sectiontitle">Memory overhead</h2> <p>Over the cost of allocating API classes, the only additional memory required is used by the API for its internal cache of PSY attributes. This is less than 200 bytes per installed PSY. </p>
 </div>
 <div class="section" id="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-FFEA130F-33FE-5E8D-AAE2-9AD8DF68DADE"><a name="GUID-DABBFC53-CC93-54AA-ADFD-6756B1EA878C__GUID-FFEA130F-33FE-5E8D-AAE2-9AD8DF68DADE"><!-- --></a><h2 class="sectiontitle">See also</h2> <p><a href="GUID-D0318BB6-0B9F-5A1C-AB0B-61BA22D28661.html" title="Client applications use the Location Acquisition API to obtain the position of the mobile device from the LBS subsystem.">Location Acquisition API</a>  </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html" title="Location Admin is an LBS component that contains several common LBS libraries grouped for convenience in a single system component.">Location Admin</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>