<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="CTLSProvider"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA"/>

<title>CTLSProvider</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA"><a name="GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0;
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">CTLSProvider Class Reference</h1>
	<table class="signature"><tr><td>class CTLSProvider : private CBase</td></tr></table><div class="section"><div>
			<p>This class allows direct access to methods which are not specific to a particular token. It also indirectly provides access to methods which calculate connection-specific settings. It enables the TLS protocol module to generate the ClientHello message without committing to use a specific token. Once the protocol module has enough information to select an appropriate token, it can use this class as a factory to create a <a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html#GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C">CTLSSession</a> object.   TLS Provider API </p>

		</div></div>
<div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">CTLSProvider<ul class="derivation"><li class="derivation-depth-1 "><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase</a></li></ul></li></ul></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-E7DDCE14-CFDB-3514-8AFD-0F03A2DD4BB6">~CTLSProvider</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a href="GUID-0FB27D63-5A28-3738-9882-23DD65FE48CD.html">CTlsCryptoAttributes</a> *</td><td><a href="#GUID-81D46D5E-4846-3DCE-B2F3-CCF4B0121B36">Attributes</a>()</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-59C7B284-B344-3211-A358-E8D931374037">CancelRequest</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-4A9EF97A-7FF5-397E-9AC2-910EA970A938">CipherSuitesL</a>(<a href="GUID-FAEBF321-6B08-3041-A01F-B1E7282D0707.html">RArray</a>&lt; <a href="GUID-347F2465-7349-3F76-8CF6-D41F075CCD23.html">TTLSCipherSuite</a> &gt; &amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-45C26F73-6C4A-3F45-84AC-2CB07CB85C21">ClearSessionCacheL</a>(<a href="GUID-25E8D6E8-7E78-3BCC-BD3C-75601684E9E1.html">TTLSSessionNameAndID</a> &amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a href="GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA.html">CTLSProvider</a> *</td><td><a href="#GUID-935100BC-0807-351F-9AB7-D1EFC945602D">ConnectL</a>()</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-707156F3-9BA7-3B1C-A0A9-E950D51F97A7">CreateL</a>(<a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html">CTLSSession</a> *&amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-10EA338C-5748-3A43-9968-E96E634FC025">GenerateRandom</a>(<a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-FFC0CAAB-11BE-3828-940C-3970A7443A7F">GetSessionL</a>(<a href="GUID-570E6464-74B9-3686-9DAB-66700D439934.html">TTLSServerAddr</a> &amp;, <a href="GUID-78E993D5-A845-32B4-B41A-947ABEF16AA0.html">TTLSSessionId</a> &amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-16D9DE05-787F-3918-B2CE-004A900D1AFA">ReConnectL</a>()</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html">CTLSSession</a> *</td><td><a href="#GUID-14BD5A81-675F-3B56-9519-AE82CDDEEFCC">TlsSessionPtr</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-B725196F-656F-3311-9001-13094DBD3553">VerifyServerCertificate</a>(const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;, <a href="GUID-D1CE9D78-5A9D-3F0E-A785-71FF5A32D5D8.html">CX509Certificate</a> *&amp;, <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><a href="#GUID-26D6BA1D-619A-3CF8-8593-DC39EA7E50EE">VerifySignatureL</a>(const <a href="GUID-311888CE-5E29-30DB-84C7-FD9D48BAE58C.html">CSubjectPublicKeyInfo</a> &amp;, const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;, const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-B626D106-2606-3149-9C0A-90383F6A24B8">CTLSProvider</a>(<a href="GUID-059F3E89-173C-3211-A060-D16481F43CCC.html">CTlsProviderImpl</a> *)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::CBase()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Delete(CBase *)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Extension_(TUint,TAny *&amp;,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::~CBase()</a></td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Attributes</th></tr></thead><tbody><tr><td align="right" valign="top">
					<a href="GUID-059F3E89-173C-3211-A060-D16481F43CCC.html">CTlsProviderImpl</a> *</td><td><a href="#GUID-302A1A18-DD9D-3C9C-8A7F-F75E6A05B9C9">iTlsProviderImpl</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html">CTLSSession</a> **</td><td><a href="#GUID-72D8CFBE-379E-3C91-A990-DCFDAF214AA0">iTlsSession</a></td></tr><tr><td align="right" valign="top">
					<a href="GUID-33370455-4210-304F-A780-D8F0DD4E1580.html">MCTToken</a> *</td><td><a href="#GUID-294FBCDD-A0A0-32FE-BA4C-891E6CE09A49">iTokenInterface</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Constructor &amp; Destructor Documentation</h1><div class="nested1" id="GUID-B626D106-2606-3149-9C0A-90383F6A24B8"><a name="GUID-B626D106-2606-3149-9C0A-90383F6A24B8"><!-- --></a>
		<h2 class="topictitle2">CTLSProvider(CTlsProviderImpl *)</h2>
		<table class="signature"><tr><td>CTLSProvider</td><td>(</td><td><a href="GUID-059F3E89-173C-3211-A060-D16481F43CCC.html">CTlsProviderImpl</a> *</td><td>aProviderPtr</td><td>)</td><td>[private]</td></tr></table><div class="section"><div>
				<p>An object of this class will be provided to the SSL/TLS Protocol client when it first requests a service from the TLS Provider token interface </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-059F3E89-173C-3211-A060-D16481F43CCC.html">CTlsProviderImpl</a> * aProviderPtr</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-E7DDCE14-CFDB-3514-8AFD-0F03A2DD4BB6"><a name="GUID-E7DDCE14-CFDB-3514-8AFD-0F03A2DD4BB6"><!-- --></a>
		<h2 class="topictitle2">~CTLSProvider()</h2>
		<table class="signature"><tr><td>IMPORT_C</td><td>~CTLSProvider</td><td>(</td><td>)</td><td/></tr></table><div class="section"></div>

	</div>
<h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-81D46D5E-4846-3DCE-B2F3-CCF4B0121B36"><a name="GUID-81D46D5E-4846-3DCE-B2F3-CCF4B0121B36"><!-- --></a>
		<h2 class="topictitle2">Attributes()</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-0FB27D63-5A28-3738-9882-23DD65FE48CD.html">CTlsCryptoAttributes</a> *</td><td>Attributes</td><td>(</td><td>)</td><td/></tr></table><div class="section"><div>
				<p>The first call to <a href="GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA.html#GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA">CTLSProvider</a> takes place before ClientHello is send, then as the handshake progress, the information relevant for Provider and token will be gradually filled in the structure returned by this API, If the structure already exists, then the pointer to the same structure is returned. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-59C7B284-B344-3211-A358-E8D931374037"><a name="GUID-59C7B284-B344-3211-A358-E8D931374037"><!-- --></a>
		<h2 class="topictitle2">CancelRequest()</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>CancelRequest</td><td>(</td><td>)</td><td/></tr></table><div class="section"><div>
				<p>This method cancels all the asynchronous operations of <a href="GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA.html#GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA">CTLSProvider</a></p>

				<p>This synchronous method cancels all the asynchronous operations of CTlsProvider</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-4A9EF97A-7FF5-397E-9AC2-910EA970A938"><a name="GUID-4A9EF97A-7FF5-397E-9AC2-910EA970A938"><!-- --></a>
		<h2 class="topictitle2">CipherSuitesL(RArray&lt; TTLSCipherSuite &gt; &amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>CipherSuitesL</td><td>(</td><td><a href="GUID-FAEBF321-6B08-3041-A01F-B1E7282D0707.html">RArray</a>&lt; <a href="GUID-347F2465-7349-3F76-8CF6-D41F075CCD23.html">TTLSCipherSuite</a> &gt; &amp;</td><td>aUserCipherSuiteList,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<p>This asynchronous method reads the list of supported cipher suites from the available tokens. This list is used within the SSL/TLS Protocol's ClientHello message. This asynchronous method reads the list of supported cipher suites from the available tokens. This list is used within the SSL/TLS Protocol's ClientHello message. The list of cipher suites is constructed from the symmetric ciphers and digest algorithms supported by the Security subsystem and the union of all the key exchange and signature algorithms supported by the available tokens. If a previous call to GetSession was made, then the token information obtained with it would be used to get this list.</p>

				<p>A list created in this way is then checked against iSupported and iPriority fields of TSetOfCipherSuites entries and unsupported cipher suites are removed from the list while the rest are ordered according to the priorities assigned in TSetOfCipherSuites. (It is guaranteed that all cipher suites in the TSetOfCipherSuites table marked as supported are implemented in Symbian software emulation of cryptographic token for both SSL v3.0 and TLS v1.0 protocols. The selection of cipher suite in the way described here ensures that whatever cipher suite and protocol version is eventually negotiated by the handshake peers, there will always be a token capable of providing required service).</p>

				<div class="p">
					<dl class="precondition">
						
							<dt class="dlterm">Pre-condition</dt>

							<dd>None </dd>

						
					</dl>

					<dl class="postcondition">
						
							<dt class="dlterm">Post-condition</dt>

							<dd>The token handles obtained are not released and stored for further iterations </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-FAEBF321-6B08-3041-A01F-B1E7282D0707.html">RArray</a>&lt; <a href="GUID-347F2465-7349-3F76-8CF6-D41F075CCD23.html">TTLSCipherSuite</a> &gt; &amp; aUserCipherSuiteList</td><td>Output - List of supported cipher suites ordered according to their priorities  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td>asynchronous request status set on the completion  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-45C26F73-6C4A-3F45-84AC-2CB07CB85C21"><a name="GUID-45C26F73-6C4A-3F45-84AC-2CB07CB85C21"><!-- --></a>
		<h2 class="topictitle2">ClearSessionCacheL(TTLSSessionNameAndID &amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>ClearSessionCacheL</td><td>(</td><td><a href="GUID-25E8D6E8-7E78-3BCC-BD3C-75601684E9E1.html">TTLSSessionNameAndID</a> &amp;</td><td>aServerNameAndId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<p>This asynchronous method will clear the session identified by the ServerName and Session.iId in aServerNameAndId.This operation may fail if the session cached on a token is in use (this maybe possible if a hardware token, e.g. a WIM is used. It is unlikely in the case of a software token implementation). This asynchronous method will clear the session identified by Server Name and its Id.(This data is available to the caller as a result of the call to the GetSession() method). This operation may fail if the session cached on a token is in use (this maybe possible if a hardware token, e.g. a WIM is used.) When an abbevated handshake fails, Tls provider will ask the corresponding token to clear the cache. TlsProvider keeps track of this by storing the output from the last GetSession call.</p>

				<p>For an explicit call to this API, the function internally will call GetSession to determine the token associated with this session and then attempts to clear it.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-25E8D6E8-7E78-3BCC-BD3C-75601684E9E1.html">TTLSSessionNameAndID</a> &amp; aServerNameAndId</td><td>Name of the Server and its corresponding sessionId that have to be flushed.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td>asynchronous request status set on the completion  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-935100BC-0807-351F-9AB7-D1EFC945602D"><a name="GUID-935100BC-0807-351F-9AB7-D1EFC945602D"><!-- --></a>
		<h2 class="topictitle2">ConnectL()</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA.html">CTLSProvider</a> *</td><td>ConnectL</td><td>(</td><td>)</td><td>[static]</td></tr></table><div class="section"><div>
				<p>creates a new <a href="GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA.html#GUID-BA717C73-5D34-30C2-ADDF-ADE6E66A1EAA">CTLSProvider</a> object </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-707156F3-9BA7-3B1C-A0A9-E950D51F97A7"><a name="GUID-707156F3-9BA7-3B1C-A0A9-E950D51F97A7"><!-- --></a>
		<h2 class="topictitle2">CreateL(CTLSSession *&amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>CreateL</td><td>(</td><td><a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html">CTLSSession</a> *&amp;</td><td>aTlsSession,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<p>This method provides a <a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html#GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C">CTLSSession</a> object to the protocol when the handshake has reached the stage where ServerHelloDone has been recevied. The main process of this function is to select the token and initialize it. This method provides a <a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html#GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C">CTLSSession</a> object to the protocol when the handshake has reached the stage where ServerHelloDone has been recevied. The main process of this function is to select the token and initialize it. If Client Authentication was required, appropriate cert and key selection will be done. If running in a DialogNonAttended Mode, then a certificate will be automatically selected. Pls note that ClientAuthentication can only be done with Dialog mode set to true If Client Authentication was not required, the Software Token will be selected and if any failures were encountered during its initialization, then the other available tokens will be entertained. If a call to GetSession was made earlier and if the SessionId passed from Server matches the one returned earlier, then this function attempts an Abbreviated handshake</p>

				<div class="p">
					<a href="GUID-0FB27D63-5A28-3738-9882-23DD65FE48CD.html#GUID-0FB27D63-5A28-3738-9882-23DD65FE48CD">CTlsCryptoAttributes</a> <dl class="precondition"><dt class="dlterm">Pre-condition</dt>
<dd>CipherSuites or GetSession APIs should be called atleasts once </dd>
</dl>
<dl class="postcondition"><dt class="dlterm">Post-condition</dt>
<dd><a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html#GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C">CTLSSession</a> object and the token is now initialised. If for client authentication, appropriate certificate has been selected </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html">CTLSSession</a> *&amp; aTlsSession</td><td>- A newly created session relating to the server.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td>asynchronous request status set on the completion  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-10EA338C-5748-3A43-9968-E96E634FC025"><a name="GUID-10EA338C-5748-3A43-9968-E96E634FC025"><!-- --></a>
		<h2 class="topictitle2">GenerateRandom(TDes8 &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>GenerateRandom</td><td>(</td><td><a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp;</td><td>aBuffer</td><td>)</td><td/></tr></table><div class="section"><div>
				<p>This synchronous method is used to request a number of randomly generated bytes from the TLS Provider. This function will set a length of aBuffer to zero in case of any problems with random number generation. This synchronous method is used to request a number of randomly generated bytes from the TLS Provider 4bytes of time + 28 bytes of random numbers</p>

				<p>RFC: The current time and date in standard UNIX 32-bit format (seconds since the midnight starting Jan 1, 1970, GMT) according to the sender's internal clock. Clocks are not required to be set correctly by the basic TLS Protocol; higher level or application protocols may define additional requirements. But having a 32bit signed format will mean we will encounter a "Year 2038 problem" </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp; aBuffer</td><td>A buffer of Random bytes in the aBuffer argument.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-FFC0CAAB-11BE-3828-940C-3970A7443A7F"><a name="GUID-FFC0CAAB-11BE-3828-940C-3970A7443A7F"><!-- --></a>
		<h2 class="topictitle2">GetSessionL(TTLSServerAddr &amp;, TTLSSessionId &amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>GetSessionL</td><td>(</td><td><a href="GUID-570E6464-74B9-3686-9DAB-66700D439934.html">TTLSServerAddr</a> &amp;</td><td>aServerName,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-78E993D5-A845-32B4-B41A-947ABEF16AA0.html">TTLSSessionId</a> &amp;</td><td>aSessionId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<p>This asynchronous method will provide a session identifier object associated with a given server indicated by the aServerName argument This asynchronous method will provide a session identifier object associated with a given server indicated by the aServerName argument. If a session has previously been established to that server and remains held in the cache of one of the available tokens and is resumable, then the aSessionId parameter will contain that session id to that session. The client (SSL/TLS protocol) can attempt to perform an abbreviated handshake in this case. If no resumable session to the server is cached, then the session aSessionId member will be zero length, which would force the protocol to perform a full handshake.</p>

				<p>For performace issues, if this is the first function to be called in a <a href="GUID-059F3E89-173C-3211-A060-D16481F43CCC.html#GUID-059F3E89-173C-3211-A060-D16481F43CCC">CTlsProviderImpl</a>, then as we obtain the interface to the token, the Key and signature exchange algorithms are also retrieved from the token and any subsequent calls to CTlsProviderImpl::CipherSuites() will complete from this existing list.</p>

				<div class="p">
					<dl class="postcondition">
						
							<dt class="dlterm">Post-condition</dt>

							<dd>If a sessionId is obtained, then the details of the token will be stored locally </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-570E6464-74B9-3686-9DAB-66700D439934.html">TTLSServerAddr</a> &amp; aServerName</td><td>The name of the server the SSL/TLS protocol is intending to connect.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-78E993D5-A845-32B4-B41A-947ABEF16AA0.html">TTLSSessionId</a> &amp; aSessionId</td><td>output - the ID corresponding the session retrieved  </td></tr><tr><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td>asynchronous request status set on the completion  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-16D9DE05-787F-3918-B2CE-004A900D1AFA"><a name="GUID-16D9DE05-787F-3918-B2CE-004A900D1AFA"><!-- --></a>
		<h2 class="topictitle2">ReConnectL()</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>ReConnectL</td><td>(</td><td>)</td><td/></tr></table><div class="section"><div>
				<p>reconnect the connection if it fails at initial stage of conneciton</p>

				<p>This synchronous method saves the handshake parameters, creates a new implementation object and intitializes its CryptoAttributes with the handshake parameters. Also it retains a handle to the token and thereby holds on to the last saved session. The function is used for renegotiation and for abbreviated handshakes where handshake params differ but session has to live linger</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-14BD5A81-675F-3B56-9519-AE82CDDEEFCC"><a name="GUID-14BD5A81-675F-3B56-9519-AE82CDDEEFCC"><!-- --></a>
		<h2 class="topictitle2">TlsSessionPtr()</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html">CTLSSession</a> *</td><td>TlsSessionPtr</td><td>(</td><td>)</td><td/></tr></table><div class="section"><div>
				<div class="p">This sets the TLS session pointer This method returns a pointer to an <a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html#GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C">CTLSSession</a> object. <dl class="precondition"><dt class="dlterm">Pre-condition</dt>
<dd>Create should be called successfully, otherwise a NULL pointer is returned </dd>
</dl>
</div>

			</div></div>

	</div>
<div class="nested1" id="GUID-B725196F-656F-3311-9001-13094DBD3553"><a name="GUID-B725196F-656F-3311-9001-13094DBD3553"><!-- --></a>
		<h2 class="topictitle2">VerifyServerCertificate(const TDesC8 &amp;, CX509Certificate *&amp;, TRequestStatus &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>VerifyServerCertificate</td><td>(</td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td>aEncodedServerCerts,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-D1CE9D78-5A9D-3F0E-A785-71FF5A32D5D8.html">CX509Certificate</a> *&amp;</td><td>aServerCert,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp;</td><td>aStatus</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<p>This asynchronous method is used to validate a received Server certificate. This asynchronous method is used to validate a received Server certificate. If the validation fails then an UI will prompt the user to decide whether to continue with this handshake or cancel it.A dialog will be popped if the server certificate is invalid. The user then has the choice to close the connection or continue. The dialog mode can be turned off by setting the iDialogNonAttendedMode mode flag in <a href="GUID-0FB27D63-5A28-3738-9882-23DD65FE48CD.html#GUID-0FB27D63-5A28-3738-9882-23DD65FE48CD">CTlsCryptoAttributes</a></p>

				<p>
					<a href="GUID-0FB27D63-5A28-3738-9882-23DD65FE48CD.html#GUID-0FB27D63-5A28-3738-9882-23DD65FE48CD">CTlsCryptoAttributes</a> </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp; aEncodedServerCerts</td><td>A string read from ServerCertificate handshake message  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-D1CE9D78-5A9D-3F0E-A785-71FF5A32D5D8.html">CX509Certificate</a> *&amp; aServerCert</td><td>Output - Server certificate create from the encoded form  </td></tr><tr><td class="parameter"><a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html">TRequestStatus</a> &amp; aStatus</td><td>asynchronous request status set on the completion  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-26D6BA1D-619A-3CF8-8593-DC39EA7E50EE"><a name="GUID-26D6BA1D-619A-3CF8-8593-DC39EA7E50EE"><!-- --></a>
		<h2 class="topictitle2">VerifySignatureL(const CSubjectPublicKeyInfo &amp;, const TDesC8 &amp;, const TDesC8 &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td>VerifySignatureL</td><td>(</td><td>const <a href="GUID-311888CE-5E29-30DB-84C7-FD9D48BAE58C.html">CSubjectPublicKeyInfo</a> &amp;</td><td>aServerPublicKey,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td>aDigest,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td>aSig</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<p>This asynchronous method uses the server's public key to ensure that the signature was indeed created by the server. The result of this operation will be written in the aResult parameter.. This synchronous method uses the server's public key to ensure that the signature was indeed created by the server</p>

				<div class="p">
					<dl class="precondition">
						
							<dt class="dlterm">Pre-condition</dt>

							<dd>None </dd>

						
					</dl>

					<dl class="postcondition">
						
							<dt class="dlterm">Post-condition</dt>

							<dd>None </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-311888CE-5E29-30DB-84C7-FD9D48BAE58C.html">CSubjectPublicKeyInfo</a> &amp; aServerPublicKey</td><td>The server's public key; used to decrypt the signature created with the server's private key.  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp; aDigest</td><td>The data which we expect to extract from the server's signature when decrypted  </td></tr><tr><td class="parameter">const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp; aSig</td><td> </td></tr></table></div>

	</div>
<h1 class="pageHeading topictitle1">Member Data Documentation</h1><div class="nested1" id="GUID-302A1A18-DD9D-3C9C-8A7F-F75E6A05B9C9"><a name="GUID-302A1A18-DD9D-3C9C-8A7F-F75E6A05B9C9"><!-- --></a>
		<h2 class="topictitle2">
					CTlsProviderImpl * iTlsProviderImpl</h2>
		<table class="signature"><tr><td>
					<a href="GUID-059F3E89-173C-3211-A060-D16481F43CCC.html">CTlsProviderImpl</a> *</td><td>iTlsProviderImpl</td><td>[private]</td></tr></table><div class="section"></div>

	</div>
<div class="nested1" id="GUID-72D8CFBE-379E-3C91-A990-DCFDAF214AA0"><a name="GUID-72D8CFBE-379E-3C91-A990-DCFDAF214AA0"><!-- --></a>
		<h2 class="topictitle2">
					CTLSSession ** iTlsSession</h2>
		<table class="signature"><tr><td>
					<a href="GUID-EFAD08C1-011F-3AA5-A5A4-9FD9A1E51A3C.html">CTLSSession</a> **</td><td>iTlsSession</td><td>[private]</td></tr></table><div class="section"></div>

	</div>
<div class="nested1" id="GUID-294FBCDD-A0A0-32FE-BA4C-891E6CE09A49"><a name="GUID-294FBCDD-A0A0-32FE-BA4C-891E6CE09A49"><!-- --></a>
		<h2 class="topictitle2">
					MCTToken * iTokenInterface</h2>
		<table class="signature"><tr><td>
					<a href="GUID-33370455-4210-304F-A780-D8F0DD4E1580.html">MCTToken</a> *</td><td>iTokenInterface</td><td>[private]</td></tr></table><div class="section"></div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>